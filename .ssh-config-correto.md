# üîê CONFIGURA√á√ÉO SSH CORRETA - SERVIDOR DE PRODU√á√ÉO

## üìç TOPOLOGIA DE REDE

```
Internet
    ‚Üì
31.97.64.43:2224 (Gateway SSH)
    ‚Üì SSH Forward
192.168.1.247 (Servidor Produ√ß√£o - Rede Interna)
    ‚Üì
localhost:3001 (Orquestrador IA - Acesso apenas interno)
```

## üîë CREDENCIAIS SSH

**Gateway SSH (Acesso Externo)**
- Host: 31.97.64.43
- Porta: 2224
- Usu√°rio: flavio
- Senha: sshflavioia

**Servidor Produ√ß√£o (Interno)**
- IP Local: 192.168.1.247
- Diret√≥rio: /home/flavio/orquestrador-ia
- Acesso: APENAS via SSH gateway acima

**Aplica√ß√£o**
- URL Interna: http://localhost:3001
- Acesso: APENAS dentro da rede interna via SSH tunnel
- Porta Externa 31.97.64.43:3001: OUTRO SITE (N√ÉO usar)

## üìù COMANDOS CORRETOS

### Conectar ao Servidor
```bash
ssh -p 2224 flavio@31.97.64.43
# Senha: sshflavioia
```

### Conectar com sshpass
```bash
sshpass -p 'sshflavioia' ssh -p 2224 flavio@31.97.64.43
```

### Criar T√∫nel SSH para Acesso Local
```bash
ssh -p 2224 -L 3001:localhost:3001 flavio@31.97.64.43
# Depois acesse: http://localhost:3001 no SEU computador
```

### Executar Comando Remoto
```bash
sshpass -p 'sshflavioia' ssh -p 2224 flavio@31.97.64.43 "comando"
```

### Deploy
```bash
# Enviar arquivos
sshpass -p 'sshflavioia' rsync -avz --delete \
  -e "ssh -p 2224 -o StrictHostKeyChecking=no" \
  --exclude 'node_modules' --exclude '.git' \
  ./ flavio@31.97.64.43:/home/flavio/orquestrador-ia/

# Executar no servidor
sshpass -p 'sshflavioia' ssh -p 2224 flavio@31.97.64.43 << 'ENDSSH'
cd /home/flavio/orquestrador-ia
npm install
npm run build
pm2 restart orquestrador-ia
ENDSSH
```

### Testar Health Check
```bash
sshpass -p 'sshflavioia' ssh -p 2224 flavio@31.97.64.43 \
  'curl -s http://localhost:3001/api/health'
```

### Ver Logs PM2
```bash
sshpass -p 'sshflavioia' ssh -p 2224 flavio@31.97.64.43 \
  'pm2 logs orquestrador-ia --lines 50 --nostream'
```

## ‚ö†Ô∏è IMPORTANTE

1. **NUNCA** acessar 31.97.64.43:3001 (outro site)
2. **SEMPRE** acessar via localhost:3001 (ap√≥s t√∫nel SSH)
3. O servidor 192.168.1.247 N√ÉO √© acess√≠vel externamente
4. Todos os testes devem ser feitos via SSH no servidor
5. Aplica√ß√£o √© APENAS para uso interno/pessoal

## üîí SEGURAN√áA

- Credenciais s√£o tempor√°rias (desenvolvimento)
- Ser√£o trocadas em produ√ß√£o real
- Servidor √© uso pessoal/interno apenas
- N√£o h√° m√∫ltiplos usu√°rios no sistema
