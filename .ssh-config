# CONFIGURA√á√ÉO DE INFRAESTRUTURA SSH
# Orquestrador IA V3 - Produ√ß√£o

## ARQUITETURA DE REDE

### Servidor de Produ√ß√£o (INTERNO)
- **IP Local**: 192.168.1.247 (rede interna, n√£o acess√≠vel externamente)
- **Porta Aplica√ß√£o**: 3001
- **Acesso**: Apenas via rede interna ou t√∫nel SSH

### Servidor Gateway SSH (EXTERNO)
- **IP P√∫blico**: 31.97.64.43
- **Porta SSH**: 2224
- **Usu√°rio**: flavio
- **Senha**: sshflavioia
- **Fun√ß√£o**: Forwarding/Gateway para servidor interno via SSH

### Acesso √† Aplica√ß√£o
- **Externo**: N√£o dispon√≠vel diretamente
- **Interno (via SSH)**: http://localhost:3001
- **M√©todo**: SSH tunnel para testes/desenvolvimento

## CONFIGURA√á√ÉO SSH

### Comando de Acesso SSH
```bash
ssh -p 2224 flavio@31.97.64.43
# Senha: sshflavioia
```

### T√∫nel SSH (Port Forwarding) - Se necess√°rio
```bash
# Forward porta 3001 do servidor interno para localhost
ssh -p 2224 -L 3001:192.168.1.247:3001 flavio@31.97.64.43
# Depois acessar: http://localhost:3001
```

## ENDPOINTS DE ACESSO

### Para Testes Automatizados (dentro do servidor)
- **Frontend**: http://localhost:3001
- **API tRPC**: http://localhost:3001/api/trpc
- **Health Check**: http://localhost:3001/api/health
- **WebSocket**: ws://localhost:3001/ws

### Para Acesso Manual (rede interna)
- **Frontend**: http://192.168.1.247:3001
- **API tRPC**: http://192.168.1.247:3001/api/trpc

## IMPORTANTE

‚ö†Ô∏è **NUNCA** tentar acessar via 31.97.64.43:3001
   - Esse IP:porta roda outro servi√ßo
   - N√£o est√° configurado para o Orquestrador IA

‚úÖ **SEMPRE** usar localhost:3001 para testes automatizados
   - Os testes rodam dentro do servidor via SSH
   - Acesso via localhost √© o correto

üîí **SEGURAN√áA**
   - Aplica√ß√£o acess√≠vel apenas na rede interna
   - SSH gateway para acesso remoto quando necess√°rio
   - Credenciais SSH documentadas para automa√ß√£o

## DEPLOYMENT

### PM2 Process Manager
- **Nome do Processo**: orquestrador-v3
- **Comando Start**: `pm2 start ecosystem.config.js`
- **Comando Restart**: `pm2 restart orquestrador-v3 --update-env`
- **Logs**: `pm2 logs orquestrador-v3`

### Build e Deploy
```bash
# 1. Build frontend
npm run build

# 2. Restart aplica√ß√£o
pm2 restart orquestrador-v3 --update-env

# 3. Verificar status
pm2 status
```

## TROUBLESHOOTING

### Problema: Connection Refused ao testar
**Causa**: Tentando acessar IP externo (31.97.64.43:3001)
**Solu√ß√£o**: Usar localhost:3001 nos testes automatizados

### Problema: Playwright n√£o consegue capturar console
**Causa**: Tentando acessar via IP p√∫blico
**Solu√ß√£o**: Testes devem ser via curl/API no localhost

### Problema: SSH timeout
**Causa**: Porta 2224 ou credenciais incorretas
**Solu√ß√£o**: Verificar porta e senha sshflavioia

---
√öltima atualiza√ß√£o: 2025-11-20 - Sprint 67
Respons√°vel: GenSpark AI Developer
