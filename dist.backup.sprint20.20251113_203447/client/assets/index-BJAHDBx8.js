function zm(e,t){for(var s=0;s<t.length;s++){const i=t[s];if(typeof i!="string"&&!Array.isArray(i)){for(const n in i)if(n!=="default"&&!(n in e)){const l=Object.getOwnPropertyDescriptor(i,n);l&&Object.defineProperty(e,n,l.get?l:{enumerable:!0,get:()=>i[n]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const l of n)if(l.type==="childList")for(const f of l.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function s(n){const l={};return n.integrity&&(l.integrity=n.integrity),n.referrerPolicy&&(l.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?l.credentials="include":n.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(n){if(n.ep)return;n.ep=!0;const l=s(n);fetch(n.href,l)}})();function Hm(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var du={exports:{}},Rn={},uu={exports:{}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xi=Symbol.for("react.element"),Um=Symbol.for("react.portal"),$m=Symbol.for("react.fragment"),Wm=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),Qm=Symbol.for("react.provider"),Km=Symbol.for("react.context"),Vm=Symbol.for("react.forward_ref"),Gm=Symbol.for("react.suspense"),Jm=Symbol.for("react.memo"),Ym=Symbol.for("react.lazy"),Nc=Symbol.iterator;function Xm(e){return e===null||typeof e!="object"?null:(e=Nc&&e[Nc]||e["@@iterator"],typeof e=="function"?e:null)}var hu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fu=Object.assign,mu={};function _s(e,t,s){this.props=e,this.context=t,this.refs=mu,this.updater=s||hu}_s.prototype.isReactComponent={};_s.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};_s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function gu(){}gu.prototype=_s.prototype;function Ko(e,t,s){this.props=e,this.context=t,this.refs=mu,this.updater=s||hu}var Vo=Ko.prototype=new gu;Vo.constructor=Ko;fu(Vo,_s.prototype);Vo.isPureReactComponent=!0;var Ec=Array.isArray,pu=Object.prototype.hasOwnProperty,Go={current:null},xu={key:!0,ref:!0,__self:!0,__source:!0};function vu(e,t,s){var i,n={},l=null,f=null;if(t!=null)for(i in t.ref!==void 0&&(f=t.ref),t.key!==void 0&&(l=""+t.key),t)pu.call(t,i)&&!xu.hasOwnProperty(i)&&(n[i]=t[i]);var a=arguments.length-2;if(a===1)n.children=s;else if(1<a){for(var o=Array(a),m=0;m<a;m++)o[m]=arguments[m+2];n.children=o}if(e&&e.defaultProps)for(i in a=e.defaultProps,a)n[i]===void 0&&(n[i]=a[i]);return{$$typeof:xi,type:e,key:l,ref:f,props:n,_owner:Go.current}}function Zm(e,t){return{$$typeof:xi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Jo(e){return typeof e=="object"&&e!==null&&e.$$typeof===xi}function eg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var Mc=/\/+/g;function sa(e,t){return typeof e=="object"&&e!==null&&e.key!=null?eg(""+e.key):t.toString(36)}function Hi(e,t,s,i,n){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var f=!1;if(e===null)f=!0;else switch(l){case"string":case"number":f=!0;break;case"object":switch(e.$$typeof){case xi:case Um:f=!0}}if(f)return f=e,n=n(f),e=i===""?"."+sa(f,0):i,Ec(n)?(s="",e!=null&&(s=e.replace(Mc,"$&/")+"/"),Hi(n,t,s,"",function(m){return m})):n!=null&&(Jo(n)&&(n=Zm(n,s+(!n.key||f&&f.key===n.key?"":(""+n.key).replace(Mc,"$&/")+"/")+e)),t.push(n)),1;if(f=0,i=i===""?".":i+":",Ec(e))for(var a=0;a<e.length;a++){l=e[a];var o=i+sa(l,a);f+=Hi(l,t,s,o,n)}else if(o=Xm(e),typeof o=="function")for(e=o.call(e),a=0;!(l=e.next()).done;)l=l.value,o=i+sa(l,a++),f+=Hi(l,t,s,o,n);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return f}function ki(e,t,s){if(e==null)return e;var i=[],n=0;return Hi(e,i,"","",function(l){return t.call(s,l,n++)}),i}function tg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var rt={current:null},Ui={transition:null},rg={ReactCurrentDispatcher:rt,ReactCurrentBatchConfig:Ui,ReactCurrentOwner:Go};function yu(){throw Error("act(...) is not supported in production builds of React.")}ce.Children={map:ki,forEach:function(e,t,s){ki(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return ki(e,function(){t++}),t},toArray:function(e){return ki(e,function(t){return t})||[]},only:function(e){if(!Jo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ce.Component=_s;ce.Fragment=$m;ce.Profiler=qm;ce.PureComponent=Ko;ce.StrictMode=Wm;ce.Suspense=Gm;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rg;ce.act=yu;ce.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=fu({},e.props),n=e.key,l=e.ref,f=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,f=Go.current),t.key!==void 0&&(n=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(o in t)pu.call(t,o)&&!xu.hasOwnProperty(o)&&(i[o]=t[o]===void 0&&a!==void 0?a[o]:t[o])}var o=arguments.length-2;if(o===1)i.children=s;else if(1<o){a=Array(o);for(var m=0;m<o;m++)a[m]=arguments[m+2];i.children=a}return{$$typeof:xi,type:e.type,key:n,ref:l,props:i,_owner:f}};ce.createContext=function(e){return e={$$typeof:Km,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Qm,_context:e},e.Consumer=e};ce.createElement=vu;ce.createFactory=function(e){var t=vu.bind(null,e);return t.type=e,t};ce.createRef=function(){return{current:null}};ce.forwardRef=function(e){return{$$typeof:Vm,render:e}};ce.isValidElement=Jo;ce.lazy=function(e){return{$$typeof:Ym,_payload:{_status:-1,_result:e},_init:tg}};ce.memo=function(e,t){return{$$typeof:Jm,type:e,compare:t===void 0?null:t}};ce.startTransition=function(e){var t=Ui.transition;Ui.transition={};try{e()}finally{Ui.transition=t}};ce.unstable_act=yu;ce.useCallback=function(e,t){return rt.current.useCallback(e,t)};ce.useContext=function(e){return rt.current.useContext(e)};ce.useDebugValue=function(){};ce.useDeferredValue=function(e){return rt.current.useDeferredValue(e)};ce.useEffect=function(e,t){return rt.current.useEffect(e,t)};ce.useId=function(){return rt.current.useId()};ce.useImperativeHandle=function(e,t,s){return rt.current.useImperativeHandle(e,t,s)};ce.useInsertionEffect=function(e,t){return rt.current.useInsertionEffect(e,t)};ce.useLayoutEffect=function(e,t){return rt.current.useLayoutEffect(e,t)};ce.useMemo=function(e,t){return rt.current.useMemo(e,t)};ce.useReducer=function(e,t,s){return rt.current.useReducer(e,t,s)};ce.useRef=function(e){return rt.current.useRef(e)};ce.useState=function(e){return rt.current.useState(e)};ce.useSyncExternalStore=function(e,t,s){return rt.current.useSyncExternalStore(e,t,s)};ce.useTransition=function(){return rt.current.useTransition()};ce.version="18.3.1";uu.exports=ce;var R=uu.exports;const us=Hm(R),sg=zm({__proto__:null,default:us},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ig=R,ng=Symbol.for("react.element"),ag=Symbol.for("react.fragment"),og=Object.prototype.hasOwnProperty,lg=ig.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cg={key:!0,ref:!0,__self:!0,__source:!0};function bu(e,t,s){var i,n={},l=null,f=null;s!==void 0&&(l=""+s),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(f=t.ref);for(i in t)og.call(t,i)&&!cg.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:ng,type:e,key:l,ref:f,props:n,_owner:lg.current}}Rn.Fragment=ag;Rn.jsx=bu;Rn.jsxs=bu;du.exports=Rn;var r=du.exports,Ia={},_u={exports:{}},xt={},wu={exports:{}},Su={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,A){var O=N.length;N.push(A);e:for(;0<O;){var B=O-1>>>1,J=N[B];if(0<n(J,A))N[B]=A,N[O]=J,O=B;else break e}}function s(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var A=N[0],O=N.pop();if(O!==A){N[0]=O;e:for(var B=0,J=N.length,H=J>>>1;B<H;){var I=2*(B+1)-1,T=N[I],z=I+1,E=N[z];if(0>n(T,O))z<J&&0>n(E,T)?(N[B]=E,N[z]=O,B=z):(N[B]=T,N[I]=O,B=I);else if(z<J&&0>n(E,O))N[B]=E,N[z]=O,B=z;else break e}}return A}function n(N,A){var O=N.sortIndex-A.sortIndex;return O!==0?O:N.id-A.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var f=Date,a=f.now();e.unstable_now=function(){return f.now()-a}}var o=[],m=[],p=1,g=null,v=3,S=!1,w=!1,y=!1,d=typeof setTimeout=="function"?setTimeout:null,u=typeof clearTimeout=="function"?clearTimeout:null,c=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function h(N){for(var A=s(m);A!==null;){if(A.callback===null)i(m);else if(A.startTime<=N)i(m),A.sortIndex=A.expirationTime,t(o,A);else break;A=s(m)}}function x(N){if(y=!1,h(N),!w)if(s(o)!==null)w=!0,Z(_);else{var A=s(m);A!==null&&ee(x,A.startTime-N)}}function _(N,A){w=!1,y&&(y=!1,u(b),b=-1),S=!0;var O=v;try{for(h(A),g=s(o);g!==null&&(!(g.expirationTime>A)||N&&!L());){var B=g.callback;if(typeof B=="function"){g.callback=null,v=g.priorityLevel;var J=B(g.expirationTime<=A);A=e.unstable_now(),typeof J=="function"?g.callback=J:g===s(o)&&i(o),h(A)}else i(o);g=s(o)}if(g!==null)var H=!0;else{var I=s(m);I!==null&&ee(x,I.startTime-A),H=!1}return H}finally{g=null,v=O,S=!1}}var k=!1,j=null,b=-1,C=5,M=-1;function L(){return!(e.unstable_now()-M<C)}function P(){if(j!==null){var N=e.unstable_now();M=N;var A=!0;try{A=j(!0,N)}finally{A?D():(k=!1,j=null)}}else k=!1}var D;if(typeof c=="function")D=function(){c(P)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,V=W.port2;W.port1.onmessage=P,D=function(){V.postMessage(null)}}else D=function(){d(P,0)};function Z(N){j=N,k||(k=!0,D())}function ee(N,A){b=d(function(){N(e.unstable_now())},A)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){w||S||(w=!0,Z(_))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return s(o)},e.unstable_next=function(N){switch(v){case 1:case 2:case 3:var A=3;break;default:A=v}var O=v;v=A;try{return N()}finally{v=O}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,A){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var O=v;v=N;try{return A()}finally{v=O}},e.unstable_scheduleCallback=function(N,A,O){var B=e.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?B+O:B):O=B,N){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=O+J,N={id:p++,callback:A,priorityLevel:N,startTime:O,expirationTime:J,sortIndex:-1},O>B?(N.sortIndex=O,t(m,N),s(o)===null&&N===s(m)&&(y?(u(b),b=-1):y=!0,ee(x,O-B))):(N.sortIndex=J,t(o,N),w||S||(w=!0,Z(_))),N},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(N){var A=v;return function(){var O=v;v=A;try{return N.apply(this,arguments)}finally{v=O}}}})(Su);wu.exports=Su;var dg=wu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug=R,pt=dg;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ku=new Set,Vs={};function Fr(e,t){hs(e,t),hs(e+"Capture",t)}function hs(e,t){for(Vs[e]=t,e=0;e<t.length;e++)ku.add(t[e])}var Qt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oa=Object.prototype.hasOwnProperty,hg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pc={},Lc={};function fg(e){return Oa.call(Lc,e)?!0:Oa.call(Pc,e)?!1:hg.test(e)?Lc[e]=!0:(Pc[e]=!0,!1)}function mg(e,t,s,i){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function gg(e,t,s,i){if(t===null||typeof t>"u"||mg(e,t,s,i))return!0;if(i)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function st(e,t,s,i,n,l,f){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=f}var qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qe[e]=new st(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qe[t]=new st(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qe[e]=new st(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qe[e]=new st(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qe[e]=new st(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qe[e]=new st(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qe[e]=new st(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qe[e]=new st(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qe[e]=new st(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yo=/[\-:]([a-z])/g;function Xo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yo,Xo);qe[t]=new st(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yo,Xo);qe[t]=new st(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yo,Xo);qe[t]=new st(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qe[e]=new st(e,1,!1,e.toLowerCase(),null,!1,!1)});qe.xlinkHref=new st("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qe[e]=new st(e,1,!1,e.toLowerCase(),null,!0,!0)});function Zo(e,t,s,i){var n=qe.hasOwnProperty(t)?qe[t]:null;(n!==null?n.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(gg(t,s,n,i)&&(s=null),i||n===null?fg(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):n.mustUseProperty?e[n.propertyName]=s===null?n.type===3?!1:"":s:(t=n.attributeName,i=n.attributeNamespace,s===null?e.removeAttribute(t):(n=n.type,s=n===3||n===4&&s===!0?"":""+s,i?e.setAttributeNS(i,t,s):e.setAttribute(t,s))))}var Jt=ug.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ji=Symbol.for("react.element"),qr=Symbol.for("react.portal"),Qr=Symbol.for("react.fragment"),el=Symbol.for("react.strict_mode"),Ba=Symbol.for("react.profiler"),ju=Symbol.for("react.provider"),Cu=Symbol.for("react.context"),tl=Symbol.for("react.forward_ref"),Fa=Symbol.for("react.suspense"),za=Symbol.for("react.suspense_list"),rl=Symbol.for("react.memo"),rr=Symbol.for("react.lazy"),Nu=Symbol.for("react.offscreen"),Tc=Symbol.iterator;function Cs(e){return e===null||typeof e!="object"?null:(e=Tc&&e[Tc]||e["@@iterator"],typeof e=="function"?e:null)}var Le=Object.assign,ia;function Rs(e){if(ia===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);ia=t&&t[1]||""}return`
`+ia+e}var na=!1;function aa(e,t){if(!e||na)return"";na=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(m){var i=m}Reflect.construct(e,[],t)}else{try{t.call()}catch(m){i=m}e.call(t.prototype)}else{try{throw Error()}catch(m){i=m}e()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var n=m.stack.split(`
`),l=i.stack.split(`
`),f=n.length-1,a=l.length-1;1<=f&&0<=a&&n[f]!==l[a];)a--;for(;1<=f&&0<=a;f--,a--)if(n[f]!==l[a]){if(f!==1||a!==1)do if(f--,a--,0>a||n[f]!==l[a]){var o=`
`+n[f].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}while(1<=f&&0<=a);break}}}finally{na=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?Rs(e):""}function pg(e){switch(e.tag){case 5:return Rs(e.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return e=aa(e.type,!1),e;case 11:return e=aa(e.type.render,!1),e;case 1:return e=aa(e.type,!0),e;default:return""}}function Ha(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Qr:return"Fragment";case qr:return"Portal";case Ba:return"Profiler";case el:return"StrictMode";case Fa:return"Suspense";case za:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Cu:return(e.displayName||"Context")+".Consumer";case ju:return(e._context.displayName||"Context")+".Provider";case tl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case rl:return t=e.displayName||null,t!==null?t:Ha(e.type)||"Memo";case rr:t=e._payload,e=e._init;try{return Ha(e(t))}catch{}}return null}function xg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ha(t);case 8:return t===el?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function br(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Eu(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vg(e){var t=Eu(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var n=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(f){i=""+f,l.call(this,f)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return i},setValue:function(f){i=""+f},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ci(e){e._valueTracker||(e._valueTracker=vg(e))}function Mu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),i="";return e&&(i=Eu(e)?e.checked?"true":"false":e.value),e=i,e!==s?(t.setValue(e),!0):!1}function rn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ua(e,t){var s=t.checked;return Le({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function Ac(e,t){var s=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;s=br(t.value!=null?t.value:s),e._wrapperState={initialChecked:i,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Pu(e,t){t=t.checked,t!=null&&Zo(e,"checked",t,!1)}function $a(e,t){Pu(e,t);var s=br(t.value),i=t.type;if(s!=null)i==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Wa(e,t.type,s):t.hasOwnProperty("defaultValue")&&Wa(e,t.type,br(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Rc(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Wa(e,t,s){(t!=="number"||rn(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ds=Array.isArray;function ns(e,t,s,i){if(e=e.options,t){t={};for(var n=0;n<s.length;n++)t["$"+s[n]]=!0;for(s=0;s<e.length;s++)n=t.hasOwnProperty("$"+e[s].value),e[s].selected!==n&&(e[s].selected=n),n&&i&&(e[s].defaultSelected=!0)}else{for(s=""+br(s),t=null,n=0;n<e.length;n++){if(e[n].value===s){e[n].selected=!0,i&&(e[n].defaultSelected=!0);return}t!==null||e[n].disabled||(t=e[n])}t!==null&&(t.selected=!0)}}function qa(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return Le({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Dc(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(te(92));if(Ds(s)){if(1<s.length)throw Error(te(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:br(s)}}function Lu(e,t){var s=br(t.value),i=br(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),i!=null&&(e.defaultValue=""+i)}function Ic(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Qa(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ni,Au=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,i,n){MSApp.execUnsafeLocalFunction(function(){return e(t,s,i,n)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ni=Ni||document.createElement("div"),Ni.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Bs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yg=["Webkit","ms","Moz","O"];Object.keys(Bs).forEach(function(e){yg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Bs[t]=Bs[e]})});function Ru(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Bs.hasOwnProperty(e)&&Bs[e]?(""+t).trim():t+"px"}function Du(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var i=s.indexOf("--")===0,n=Ru(s,t[s],i);s==="float"&&(s="cssFloat"),i?e.setProperty(s,n):e[s]=n}}var bg=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ka(e,t){if(t){if(bg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function Va(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ga=null;function sl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ja=null,as=null,os=null;function Oc(e){if(e=bi(e)){if(typeof Ja!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Fn(t),Ja(e.stateNode,e.type,t))}}function Iu(e){as?os?os.push(e):os=[e]:as=e}function Ou(){if(as){var e=as,t=os;if(os=as=null,Oc(e),t)for(e=0;e<t.length;e++)Oc(t[e])}}function Bu(e,t){return e(t)}function Fu(){}var oa=!1;function zu(e,t,s){if(oa)return e(t,s);oa=!0;try{return Bu(e,t,s)}finally{oa=!1,(as!==null||os!==null)&&(Fu(),Ou())}}function Js(e,t){var s=e.stateNode;if(s===null)return null;var i=Fn(s);if(i===null)return null;s=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(te(231,t,typeof s));return s}var Ya=!1;if(Qt)try{var Ns={};Object.defineProperty(Ns,"passive",{get:function(){Ya=!0}}),window.addEventListener("test",Ns,Ns),window.removeEventListener("test",Ns,Ns)}catch{Ya=!1}function _g(e,t,s,i,n,l,f,a,o){var m=Array.prototype.slice.call(arguments,3);try{t.apply(s,m)}catch(p){this.onError(p)}}var Fs=!1,sn=null,nn=!1,Xa=null,wg={onError:function(e){Fs=!0,sn=e}};function Sg(e,t,s,i,n,l,f,a,o){Fs=!1,sn=null,_g.apply(wg,arguments)}function kg(e,t,s,i,n,l,f,a,o){if(Sg.apply(this,arguments),Fs){if(Fs){var m=sn;Fs=!1,sn=null}else throw Error(te(198));nn||(nn=!0,Xa=m)}}function zr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Hu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Bc(e){if(zr(e)!==e)throw Error(te(188))}function jg(e){var t=e.alternate;if(!t){if(t=zr(e),t===null)throw Error(te(188));return t!==e?null:e}for(var s=e,i=t;;){var n=s.return;if(n===null)break;var l=n.alternate;if(l===null){if(i=n.return,i!==null){s=i;continue}break}if(n.child===l.child){for(l=n.child;l;){if(l===s)return Bc(n),e;if(l===i)return Bc(n),t;l=l.sibling}throw Error(te(188))}if(s.return!==i.return)s=n,i=l;else{for(var f=!1,a=n.child;a;){if(a===s){f=!0,s=n,i=l;break}if(a===i){f=!0,i=n,s=l;break}a=a.sibling}if(!f){for(a=l.child;a;){if(a===s){f=!0,s=l,i=n;break}if(a===i){f=!0,i=l,s=n;break}a=a.sibling}if(!f)throw Error(te(189))}}if(s.alternate!==i)throw Error(te(190))}if(s.tag!==3)throw Error(te(188));return s.stateNode.current===s?e:t}function Uu(e){return e=jg(e),e!==null?$u(e):null}function $u(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$u(e);if(t!==null)return t;e=e.sibling}return null}var Wu=pt.unstable_scheduleCallback,Fc=pt.unstable_cancelCallback,Cg=pt.unstable_shouldYield,Ng=pt.unstable_requestPaint,Re=pt.unstable_now,Eg=pt.unstable_getCurrentPriorityLevel,il=pt.unstable_ImmediatePriority,qu=pt.unstable_UserBlockingPriority,an=pt.unstable_NormalPriority,Mg=pt.unstable_LowPriority,Qu=pt.unstable_IdlePriority,Dn=null,Ft=null;function Pg(e){if(Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Dn,e,void 0,(e.current.flags&128)===128)}catch{}}var Pt=Math.clz32?Math.clz32:Ag,Lg=Math.log,Tg=Math.LN2;function Ag(e){return e>>>=0,e===0?32:31-(Lg(e)/Tg|0)|0}var Ei=64,Mi=4194304;function Is(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function on(e,t){var s=e.pendingLanes;if(s===0)return 0;var i=0,n=e.suspendedLanes,l=e.pingedLanes,f=s&268435455;if(f!==0){var a=f&~n;a!==0?i=Is(a):(l&=f,l!==0&&(i=Is(l)))}else f=s&~n,f!==0?i=Is(f):l!==0&&(i=Is(l));if(i===0)return 0;if(t!==0&&t!==i&&!(t&n)&&(n=i&-i,l=t&-t,n>=l||n===16&&(l&4194240)!==0))return t;if(i&4&&(i|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)s=31-Pt(t),n=1<<s,i|=e[s],t&=~n;return i}function Rg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Dg(e,t){for(var s=e.suspendedLanes,i=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes;0<l;){var f=31-Pt(l),a=1<<f,o=n[f];o===-1?(!(a&s)||a&i)&&(n[f]=Rg(a,t)):o<=t&&(e.expiredLanes|=a),l&=~a}}function Za(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Ku(){var e=Ei;return Ei<<=1,!(Ei&4194240)&&(Ei=64),e}function la(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function vi(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Pt(t),e[t]=s}function Ig(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<s;){var n=31-Pt(s),l=1<<n;t[n]=0,i[n]=-1,e[n]=-1,s&=~l}}function nl(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var i=31-Pt(s),n=1<<i;n&t|e[i]&t&&(e[i]|=t),s&=~n}}var ye=0;function Vu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Gu,al,Ju,Yu,Xu,eo=!1,Pi=[],ur=null,hr=null,fr=null,Ys=new Map,Xs=new Map,nr=[],Og="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zc(e,t){switch(e){case"focusin":case"focusout":ur=null;break;case"dragenter":case"dragleave":hr=null;break;case"mouseover":case"mouseout":fr=null;break;case"pointerover":case"pointerout":Ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xs.delete(t.pointerId)}}function Es(e,t,s,i,n,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:i,nativeEvent:l,targetContainers:[n]},t!==null&&(t=bi(t),t!==null&&al(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,n!==null&&t.indexOf(n)===-1&&t.push(n),e)}function Bg(e,t,s,i,n){switch(t){case"focusin":return ur=Es(ur,e,t,s,i,n),!0;case"dragenter":return hr=Es(hr,e,t,s,i,n),!0;case"mouseover":return fr=Es(fr,e,t,s,i,n),!0;case"pointerover":var l=n.pointerId;return Ys.set(l,Es(Ys.get(l)||null,e,t,s,i,n)),!0;case"gotpointercapture":return l=n.pointerId,Xs.set(l,Es(Xs.get(l)||null,e,t,s,i,n)),!0}return!1}function Zu(e){var t=Mr(e.target);if(t!==null){var s=zr(t);if(s!==null){if(t=s.tag,t===13){if(t=Hu(s),t!==null){e.blockedOn=t,Xu(e.priority,function(){Ju(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function $i(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=to(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var i=new s.constructor(s.type,s);Ga=i,s.target.dispatchEvent(i),Ga=null}else return t=bi(s),t!==null&&al(t),e.blockedOn=s,!1;t.shift()}return!0}function Hc(e,t,s){$i(e)&&s.delete(t)}function Fg(){eo=!1,ur!==null&&$i(ur)&&(ur=null),hr!==null&&$i(hr)&&(hr=null),fr!==null&&$i(fr)&&(fr=null),Ys.forEach(Hc),Xs.forEach(Hc)}function Ms(e,t){e.blockedOn===t&&(e.blockedOn=null,eo||(eo=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,Fg)))}function Zs(e){function t(n){return Ms(n,e)}if(0<Pi.length){Ms(Pi[0],e);for(var s=1;s<Pi.length;s++){var i=Pi[s];i.blockedOn===e&&(i.blockedOn=null)}}for(ur!==null&&Ms(ur,e),hr!==null&&Ms(hr,e),fr!==null&&Ms(fr,e),Ys.forEach(t),Xs.forEach(t),s=0;s<nr.length;s++)i=nr[s],i.blockedOn===e&&(i.blockedOn=null);for(;0<nr.length&&(s=nr[0],s.blockedOn===null);)Zu(s),s.blockedOn===null&&nr.shift()}var ls=Jt.ReactCurrentBatchConfig,ln=!0;function zg(e,t,s,i){var n=ye,l=ls.transition;ls.transition=null;try{ye=1,ol(e,t,s,i)}finally{ye=n,ls.transition=l}}function Hg(e,t,s,i){var n=ye,l=ls.transition;ls.transition=null;try{ye=4,ol(e,t,s,i)}finally{ye=n,ls.transition=l}}function ol(e,t,s,i){if(ln){var n=to(e,t,s,i);if(n===null)va(e,t,i,cn,s),zc(e,i);else if(Bg(n,e,t,s,i))i.stopPropagation();else if(zc(e,i),t&4&&-1<Og.indexOf(e)){for(;n!==null;){var l=bi(n);if(l!==null&&Gu(l),l=to(e,t,s,i),l===null&&va(e,t,i,cn,s),l===n)break;n=l}n!==null&&i.stopPropagation()}else va(e,t,i,null,s)}}var cn=null;function to(e,t,s,i){if(cn=null,e=sl(i),e=Mr(e),e!==null)if(t=zr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Hu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return cn=e,null}function eh(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Eg()){case il:return 1;case qu:return 4;case an:case Mg:return 16;case Qu:return 536870912;default:return 16}default:return 16}}var or=null,ll=null,Wi=null;function th(){if(Wi)return Wi;var e,t=ll,s=t.length,i,n="value"in or?or.value:or.textContent,l=n.length;for(e=0;e<s&&t[e]===n[e];e++);var f=s-e;for(i=1;i<=f&&t[s-i]===n[l-i];i++);return Wi=n.slice(e,1<i?1-i:void 0)}function qi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Li(){return!0}function Uc(){return!1}function vt(e){function t(s,i,n,l,f){this._reactName=s,this._targetInst=n,this.type=i,this.nativeEvent=l,this.target=f,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(s=e[a],this[a]=s?s(l):l[a]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Li:Uc,this.isPropagationStopped=Uc,this}return Le(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),t}var ws={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cl=vt(ws),yi=Le({},ws,{view:0,detail:0}),Ug=vt(yi),ca,da,Ps,In=Le({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ps&&(Ps&&e.type==="mousemove"?(ca=e.screenX-Ps.screenX,da=e.screenY-Ps.screenY):da=ca=0,Ps=e),ca)},movementY:function(e){return"movementY"in e?e.movementY:da}}),$c=vt(In),$g=Le({},In,{dataTransfer:0}),Wg=vt($g),qg=Le({},yi,{relatedTarget:0}),ua=vt(qg),Qg=Le({},ws,{animationName:0,elapsedTime:0,pseudoElement:0}),Kg=vt(Qg),Vg=Le({},ws,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Gg=vt(Vg),Jg=Le({},ws,{data:0}),Wc=vt(Jg),Yg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Xg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Zg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function e0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Zg[e])?!!t[e]:!1}function dl(){return e0}var t0=Le({},yi,{key:function(e){if(e.key){var t=Yg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=qi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Xg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dl,charCode:function(e){return e.type==="keypress"?qi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?qi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),r0=vt(t0),s0=Le({},In,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qc=vt(s0),i0=Le({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dl}),n0=vt(i0),a0=Le({},ws,{propertyName:0,elapsedTime:0,pseudoElement:0}),o0=vt(a0),l0=Le({},In,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),c0=vt(l0),d0=[9,13,27,32],ul=Qt&&"CompositionEvent"in window,zs=null;Qt&&"documentMode"in document&&(zs=document.documentMode);var u0=Qt&&"TextEvent"in window&&!zs,rh=Qt&&(!ul||zs&&8<zs&&11>=zs),Qc=" ",Kc=!1;function sh(e,t){switch(e){case"keyup":return d0.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ih(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function h0(e,t){switch(e){case"compositionend":return ih(t);case"keypress":return t.which!==32?null:(Kc=!0,Qc);case"textInput":return e=t.data,e===Qc&&Kc?null:e;default:return null}}function f0(e,t){if(Kr)return e==="compositionend"||!ul&&sh(e,t)?(e=th(),Wi=ll=or=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rh&&t.locale!=="ko"?null:t.data;default:return null}}var m0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!m0[e.type]:t==="textarea"}function nh(e,t,s,i){Iu(i),t=dn(t,"onChange"),0<t.length&&(s=new cl("onChange","change",null,s,i),e.push({event:s,listeners:t}))}var Hs=null,ei=null;function g0(e){ph(e,0)}function On(e){var t=Jr(e);if(Mu(t))return e}function p0(e,t){if(e==="change")return t}var ah=!1;if(Qt){var ha;if(Qt){var fa="oninput"in document;if(!fa){var Gc=document.createElement("div");Gc.setAttribute("oninput","return;"),fa=typeof Gc.oninput=="function"}ha=fa}else ha=!1;ah=ha&&(!document.documentMode||9<document.documentMode)}function Jc(){Hs&&(Hs.detachEvent("onpropertychange",oh),ei=Hs=null)}function oh(e){if(e.propertyName==="value"&&On(ei)){var t=[];nh(t,ei,e,sl(e)),zu(g0,t)}}function x0(e,t,s){e==="focusin"?(Jc(),Hs=t,ei=s,Hs.attachEvent("onpropertychange",oh)):e==="focusout"&&Jc()}function v0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return On(ei)}function y0(e,t){if(e==="click")return On(t)}function b0(e,t){if(e==="input"||e==="change")return On(t)}function _0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Tt=typeof Object.is=="function"?Object.is:_0;function ti(e,t){if(Tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),i=Object.keys(t);if(s.length!==i.length)return!1;for(i=0;i<s.length;i++){var n=s[i];if(!Oa.call(t,n)||!Tt(e[n],t[n]))return!1}return!0}function Yc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Xc(e,t){var s=Yc(e);e=0;for(var i;s;){if(s.nodeType===3){if(i=e+s.textContent.length,e<=t&&i>=t)return{node:s,offset:t-e};e=i}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Yc(s)}}function lh(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lh(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ch(){for(var e=window,t=rn();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=rn(e.document)}return t}function hl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w0(e){var t=ch(),s=e.focusedElem,i=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&lh(s.ownerDocument.documentElement,s)){if(i!==null&&hl(s)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var n=s.textContent.length,l=Math.min(i.start,n);i=i.end===void 0?l:Math.min(i.end,n),!e.extend&&l>i&&(n=i,i=l,l=n),n=Xc(s,l);var f=Xc(s,i);n&&f&&(e.rangeCount!==1||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==f.node||e.focusOffset!==f.offset)&&(t=t.createRange(),t.setStart(n.node,n.offset),e.removeAllRanges(),l>i?(e.addRange(t),e.extend(f.node,f.offset)):(t.setEnd(f.node,f.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var S0=Qt&&"documentMode"in document&&11>=document.documentMode,Vr=null,ro=null,Us=null,so=!1;function Zc(e,t,s){var i=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;so||Vr==null||Vr!==rn(i)||(i=Vr,"selectionStart"in i&&hl(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Us&&ti(Us,i)||(Us=i,i=dn(ro,"onSelect"),0<i.length&&(t=new cl("onSelect","select",null,t,s),e.push({event:t,listeners:i}),t.target=Vr)))}function Ti(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Gr={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionend:Ti("Transition","TransitionEnd")},ma={},dh={};Qt&&(dh=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function Bn(e){if(ma[e])return ma[e];if(!Gr[e])return e;var t=Gr[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in dh)return ma[e]=t[s];return e}var uh=Bn("animationend"),hh=Bn("animationiteration"),fh=Bn("animationstart"),mh=Bn("transitionend"),gh=new Map,ed="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sr(e,t){gh.set(e,t),Fr(t,[e])}for(var ga=0;ga<ed.length;ga++){var pa=ed[ga],k0=pa.toLowerCase(),j0=pa[0].toUpperCase()+pa.slice(1);Sr(k0,"on"+j0)}Sr(uh,"onAnimationEnd");Sr(hh,"onAnimationIteration");Sr(fh,"onAnimationStart");Sr("dblclick","onDoubleClick");Sr("focusin","onFocus");Sr("focusout","onBlur");Sr(mh,"onTransitionEnd");hs("onMouseEnter",["mouseout","mouseover"]);hs("onMouseLeave",["mouseout","mouseover"]);hs("onPointerEnter",["pointerout","pointerover"]);hs("onPointerLeave",["pointerout","pointerover"]);Fr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Fr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Fr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Fr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Fr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),C0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function td(e,t,s){var i=e.type||"unknown-event";e.currentTarget=s,kg(i,t,void 0,e),e.currentTarget=null}function ph(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var i=e[s],n=i.event;i=i.listeners;e:{var l=void 0;if(t)for(var f=i.length-1;0<=f;f--){var a=i[f],o=a.instance,m=a.currentTarget;if(a=a.listener,o!==l&&n.isPropagationStopped())break e;td(n,a,m),l=o}else for(f=0;f<i.length;f++){if(a=i[f],o=a.instance,m=a.currentTarget,a=a.listener,o!==l&&n.isPropagationStopped())break e;td(n,a,m),l=o}}}if(nn)throw e=Xa,nn=!1,Xa=null,e}function we(e,t){var s=t[lo];s===void 0&&(s=t[lo]=new Set);var i=e+"__bubble";s.has(i)||(xh(t,e,2,!1),s.add(i))}function xa(e,t,s){var i=0;t&&(i|=4),xh(s,e,i,t)}var Ai="_reactListening"+Math.random().toString(36).slice(2);function ri(e){if(!e[Ai]){e[Ai]=!0,ku.forEach(function(s){s!=="selectionchange"&&(C0.has(s)||xa(s,!1,e),xa(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ai]||(t[Ai]=!0,xa("selectionchange",!1,t))}}function xh(e,t,s,i){switch(eh(t)){case 1:var n=zg;break;case 4:n=Hg;break;default:n=ol}s=n.bind(null,t,s,e),n=void 0,!Ya||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(n=!0),i?n!==void 0?e.addEventListener(t,s,{capture:!0,passive:n}):e.addEventListener(t,s,!0):n!==void 0?e.addEventListener(t,s,{passive:n}):e.addEventListener(t,s,!1)}function va(e,t,s,i,n){var l=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var f=i.tag;if(f===3||f===4){var a=i.stateNode.containerInfo;if(a===n||a.nodeType===8&&a.parentNode===n)break;if(f===4)for(f=i.return;f!==null;){var o=f.tag;if((o===3||o===4)&&(o=f.stateNode.containerInfo,o===n||o.nodeType===8&&o.parentNode===n))return;f=f.return}for(;a!==null;){if(f=Mr(a),f===null)return;if(o=f.tag,o===5||o===6){i=l=f;continue e}a=a.parentNode}}i=i.return}zu(function(){var m=l,p=sl(s),g=[];e:{var v=gh.get(e);if(v!==void 0){var S=cl,w=e;switch(e){case"keypress":if(qi(s)===0)break e;case"keydown":case"keyup":S=r0;break;case"focusin":w="focus",S=ua;break;case"focusout":w="blur",S=ua;break;case"beforeblur":case"afterblur":S=ua;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=$c;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=Wg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=n0;break;case uh:case hh:case fh:S=Kg;break;case mh:S=o0;break;case"scroll":S=Ug;break;case"wheel":S=c0;break;case"copy":case"cut":case"paste":S=Gg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=qc}var y=(t&4)!==0,d=!y&&e==="scroll",u=y?v!==null?v+"Capture":null:v;y=[];for(var c=m,h;c!==null;){h=c;var x=h.stateNode;if(h.tag===5&&x!==null&&(h=x,u!==null&&(x=Js(c,u),x!=null&&y.push(si(c,x,h)))),d)break;c=c.return}0<y.length&&(v=new S(v,w,null,s,p),g.push({event:v,listeners:y}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",v&&s!==Ga&&(w=s.relatedTarget||s.fromElement)&&(Mr(w)||w[Kt]))break e;if((S||v)&&(v=p.window===p?p:(v=p.ownerDocument)?v.defaultView||v.parentWindow:window,S?(w=s.relatedTarget||s.toElement,S=m,w=w?Mr(w):null,w!==null&&(d=zr(w),w!==d||w.tag!==5&&w.tag!==6)&&(w=null)):(S=null,w=m),S!==w)){if(y=$c,x="onMouseLeave",u="onMouseEnter",c="mouse",(e==="pointerout"||e==="pointerover")&&(y=qc,x="onPointerLeave",u="onPointerEnter",c="pointer"),d=S==null?v:Jr(S),h=w==null?v:Jr(w),v=new y(x,c+"leave",S,s,p),v.target=d,v.relatedTarget=h,x=null,Mr(p)===m&&(y=new y(u,c+"enter",w,s,p),y.target=h,y.relatedTarget=d,x=y),d=x,S&&w)t:{for(y=S,u=w,c=0,h=y;h;h=Wr(h))c++;for(h=0,x=u;x;x=Wr(x))h++;for(;0<c-h;)y=Wr(y),c--;for(;0<h-c;)u=Wr(u),h--;for(;c--;){if(y===u||u!==null&&y===u.alternate)break t;y=Wr(y),u=Wr(u)}y=null}else y=null;S!==null&&rd(g,v,S,y,!1),w!==null&&d!==null&&rd(g,d,w,y,!0)}}e:{if(v=m?Jr(m):window,S=v.nodeName&&v.nodeName.toLowerCase(),S==="select"||S==="input"&&v.type==="file")var _=p0;else if(Vc(v))if(ah)_=b0;else{_=v0;var k=x0}else(S=v.nodeName)&&S.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(_=y0);if(_&&(_=_(e,m))){nh(g,_,s,p);break e}k&&k(e,v,m),e==="focusout"&&(k=v._wrapperState)&&k.controlled&&v.type==="number"&&Wa(v,"number",v.value)}switch(k=m?Jr(m):window,e){case"focusin":(Vc(k)||k.contentEditable==="true")&&(Vr=k,ro=m,Us=null);break;case"focusout":Us=ro=Vr=null;break;case"mousedown":so=!0;break;case"contextmenu":case"mouseup":case"dragend":so=!1,Zc(g,s,p);break;case"selectionchange":if(S0)break;case"keydown":case"keyup":Zc(g,s,p)}var j;if(ul)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kr?sh(e,s)&&(b="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(b="onCompositionStart");b&&(rh&&s.locale!=="ko"&&(Kr||b!=="onCompositionStart"?b==="onCompositionEnd"&&Kr&&(j=th()):(or=p,ll="value"in or?or.value:or.textContent,Kr=!0)),k=dn(m,b),0<k.length&&(b=new Wc(b,e,null,s,p),g.push({event:b,listeners:k}),j?b.data=j:(j=ih(s),j!==null&&(b.data=j)))),(j=u0?h0(e,s):f0(e,s))&&(m=dn(m,"onBeforeInput"),0<m.length&&(p=new Wc("onBeforeInput","beforeinput",null,s,p),g.push({event:p,listeners:m}),p.data=j))}ph(g,t)})}function si(e,t,s){return{instance:e,listener:t,currentTarget:s}}function dn(e,t){for(var s=t+"Capture",i=[];e!==null;){var n=e,l=n.stateNode;n.tag===5&&l!==null&&(n=l,l=Js(e,s),l!=null&&i.unshift(si(e,l,n)),l=Js(e,t),l!=null&&i.push(si(e,l,n))),e=e.return}return i}function Wr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function rd(e,t,s,i,n){for(var l=t._reactName,f=[];s!==null&&s!==i;){var a=s,o=a.alternate,m=a.stateNode;if(o!==null&&o===i)break;a.tag===5&&m!==null&&(a=m,n?(o=Js(s,l),o!=null&&f.unshift(si(s,o,a))):n||(o=Js(s,l),o!=null&&f.push(si(s,o,a)))),s=s.return}f.length!==0&&e.push({event:t,listeners:f})}var N0=/\r\n?/g,E0=/\u0000|\uFFFD/g;function sd(e){return(typeof e=="string"?e:""+e).replace(N0,`
`).replace(E0,"")}function Ri(e,t,s){if(t=sd(t),sd(e)!==t&&s)throw Error(te(425))}function un(){}var io=null,no=null;function ao(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var oo=typeof setTimeout=="function"?setTimeout:void 0,M0=typeof clearTimeout=="function"?clearTimeout:void 0,id=typeof Promise=="function"?Promise:void 0,P0=typeof queueMicrotask=="function"?queueMicrotask:typeof id<"u"?function(e){return id.resolve(null).then(e).catch(L0)}:oo;function L0(e){setTimeout(function(){throw e})}function ya(e,t){var s=t,i=0;do{var n=s.nextSibling;if(e.removeChild(s),n&&n.nodeType===8)if(s=n.data,s==="/$"){if(i===0){e.removeChild(n),Zs(t);return}i--}else s!=="$"&&s!=="$?"&&s!=="$!"||i++;s=n}while(s);Zs(t)}function mr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function nd(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var Ss=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Ss,ii="__reactProps$"+Ss,Kt="__reactContainer$"+Ss,lo="__reactEvents$"+Ss,T0="__reactListeners$"+Ss,A0="__reactHandles$"+Ss;function Mr(e){var t=e[Ot];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Kt]||s[Ot]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=nd(e);e!==null;){if(s=e[Ot])return s;e=nd(e)}return t}e=s,s=e.parentNode}return null}function bi(e){return e=e[Ot]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Fn(e){return e[ii]||null}var co=[],Yr=-1;function kr(e){return{current:e}}function ke(e){0>Yr||(e.current=co[Yr],co[Yr]=null,Yr--)}function _e(e,t){Yr++,co[Yr]=e.current,e.current=t}var _r={},Ye=kr(_r),lt=kr(!1),Rr=_r;function fs(e,t){var s=e.type.contextTypes;if(!s)return _r;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n={},l;for(l in s)n[l]=t[l];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n),n}function ct(e){return e=e.childContextTypes,e!=null}function hn(){ke(lt),ke(Ye)}function ad(e,t,s){if(Ye.current!==_r)throw Error(te(168));_e(Ye,t),_e(lt,s)}function vh(e,t,s){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return s;i=i.getChildContext();for(var n in i)if(!(n in t))throw Error(te(108,xg(e)||"Unknown",n));return Le({},s,i)}function fn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_r,Rr=Ye.current,_e(Ye,e),_e(lt,lt.current),!0}function od(e,t,s){var i=e.stateNode;if(!i)throw Error(te(169));s?(e=vh(e,t,Rr),i.__reactInternalMemoizedMergedChildContext=e,ke(lt),ke(Ye),_e(Ye,e)):ke(lt),_e(lt,s)}var Ut=null,zn=!1,ba=!1;function yh(e){Ut===null?Ut=[e]:Ut.push(e)}function R0(e){zn=!0,yh(e)}function jr(){if(!ba&&Ut!==null){ba=!0;var e=0,t=ye;try{var s=Ut;for(ye=1;e<s.length;e++){var i=s[e];do i=i(!0);while(i!==null)}Ut=null,zn=!1}catch(n){throw Ut!==null&&(Ut=Ut.slice(e+1)),Wu(il,jr),n}finally{ye=t,ba=!1}}return null}var Xr=[],Zr=0,mn=null,gn=0,bt=[],_t=0,Dr=null,$t=1,Wt="";function Nr(e,t){Xr[Zr++]=gn,Xr[Zr++]=mn,mn=e,gn=t}function bh(e,t,s){bt[_t++]=$t,bt[_t++]=Wt,bt[_t++]=Dr,Dr=e;var i=$t;e=Wt;var n=32-Pt(i)-1;i&=~(1<<n),s+=1;var l=32-Pt(t)+n;if(30<l){var f=n-n%5;l=(i&(1<<f)-1).toString(32),i>>=f,n-=f,$t=1<<32-Pt(t)+n|s<<n|i,Wt=l+e}else $t=1<<l|s<<n|i,Wt=e}function fl(e){e.return!==null&&(Nr(e,1),bh(e,1,0))}function ml(e){for(;e===mn;)mn=Xr[--Zr],Xr[Zr]=null,gn=Xr[--Zr],Xr[Zr]=null;for(;e===Dr;)Dr=bt[--_t],bt[_t]=null,Wt=bt[--_t],bt[_t]=null,$t=bt[--_t],bt[_t]=null}var gt=null,mt=null,Ce=!1,Mt=null;function _h(e,t){var s=wt(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function ld(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,gt=e,mt=mr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,gt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Dr!==null?{id:$t,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=wt(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,gt=e,mt=null,!0):!1;default:return!1}}function uo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ho(e){if(Ce){var t=mt;if(t){var s=t;if(!ld(e,t)){if(uo(e))throw Error(te(418));t=mr(s.nextSibling);var i=gt;t&&ld(e,t)?_h(i,s):(e.flags=e.flags&-4097|2,Ce=!1,gt=e)}}else{if(uo(e))throw Error(te(418));e.flags=e.flags&-4097|2,Ce=!1,gt=e}}}function cd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;gt=e}function Di(e){if(e!==gt)return!1;if(!Ce)return cd(e),Ce=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ao(e.type,e.memoizedProps)),t&&(t=mt)){if(uo(e))throw wh(),Error(te(418));for(;t;)_h(e,t),t=mr(t.nextSibling)}if(cd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){mt=mr(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=gt?mr(e.stateNode.nextSibling):null;return!0}function wh(){for(var e=mt;e;)e=mr(e.nextSibling)}function ms(){mt=gt=null,Ce=!1}function gl(e){Mt===null?Mt=[e]:Mt.push(e)}var D0=Jt.ReactCurrentBatchConfig;function Ls(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(te(309));var i=s.stateNode}if(!i)throw Error(te(147,e));var n=i,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(f){var a=n.refs;f===null?delete a[l]:a[l]=f},t._stringRef=l,t)}if(typeof e!="string")throw Error(te(284));if(!s._owner)throw Error(te(290,e))}return e}function Ii(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function dd(e){var t=e._init;return t(e._payload)}function Sh(e){function t(u,c){if(e){var h=u.deletions;h===null?(u.deletions=[c],u.flags|=16):h.push(c)}}function s(u,c){if(!e)return null;for(;c!==null;)t(u,c),c=c.sibling;return null}function i(u,c){for(u=new Map;c!==null;)c.key!==null?u.set(c.key,c):u.set(c.index,c),c=c.sibling;return u}function n(u,c){return u=vr(u,c),u.index=0,u.sibling=null,u}function l(u,c,h){return u.index=h,e?(h=u.alternate,h!==null?(h=h.index,h<c?(u.flags|=2,c):h):(u.flags|=2,c)):(u.flags|=1048576,c)}function f(u){return e&&u.alternate===null&&(u.flags|=2),u}function a(u,c,h,x){return c===null||c.tag!==6?(c=Na(h,u.mode,x),c.return=u,c):(c=n(c,h),c.return=u,c)}function o(u,c,h,x){var _=h.type;return _===Qr?p(u,c,h.props.children,x,h.key):c!==null&&(c.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rr&&dd(_)===c.type)?(x=n(c,h.props),x.ref=Ls(u,c,h),x.return=u,x):(x=Xi(h.type,h.key,h.props,null,u.mode,x),x.ref=Ls(u,c,h),x.return=u,x)}function m(u,c,h,x){return c===null||c.tag!==4||c.stateNode.containerInfo!==h.containerInfo||c.stateNode.implementation!==h.implementation?(c=Ea(h,u.mode,x),c.return=u,c):(c=n(c,h.children||[]),c.return=u,c)}function p(u,c,h,x,_){return c===null||c.tag!==7?(c=Ar(h,u.mode,x,_),c.return=u,c):(c=n(c,h),c.return=u,c)}function g(u,c,h){if(typeof c=="string"&&c!==""||typeof c=="number")return c=Na(""+c,u.mode,h),c.return=u,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case ji:return h=Xi(c.type,c.key,c.props,null,u.mode,h),h.ref=Ls(u,null,c),h.return=u,h;case qr:return c=Ea(c,u.mode,h),c.return=u,c;case rr:var x=c._init;return g(u,x(c._payload),h)}if(Ds(c)||Cs(c))return c=Ar(c,u.mode,h,null),c.return=u,c;Ii(u,c)}return null}function v(u,c,h,x){var _=c!==null?c.key:null;if(typeof h=="string"&&h!==""||typeof h=="number")return _!==null?null:a(u,c,""+h,x);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case ji:return h.key===_?o(u,c,h,x):null;case qr:return h.key===_?m(u,c,h,x):null;case rr:return _=h._init,v(u,c,_(h._payload),x)}if(Ds(h)||Cs(h))return _!==null?null:p(u,c,h,x,null);Ii(u,h)}return null}function S(u,c,h,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return u=u.get(h)||null,a(c,u,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ji:return u=u.get(x.key===null?h:x.key)||null,o(c,u,x,_);case qr:return u=u.get(x.key===null?h:x.key)||null,m(c,u,x,_);case rr:var k=x._init;return S(u,c,h,k(x._payload),_)}if(Ds(x)||Cs(x))return u=u.get(h)||null,p(c,u,x,_,null);Ii(c,x)}return null}function w(u,c,h,x){for(var _=null,k=null,j=c,b=c=0,C=null;j!==null&&b<h.length;b++){j.index>b?(C=j,j=null):C=j.sibling;var M=v(u,j,h[b],x);if(M===null){j===null&&(j=C);break}e&&j&&M.alternate===null&&t(u,j),c=l(M,c,b),k===null?_=M:k.sibling=M,k=M,j=C}if(b===h.length)return s(u,j),Ce&&Nr(u,b),_;if(j===null){for(;b<h.length;b++)j=g(u,h[b],x),j!==null&&(c=l(j,c,b),k===null?_=j:k.sibling=j,k=j);return Ce&&Nr(u,b),_}for(j=i(u,j);b<h.length;b++)C=S(j,u,b,h[b],x),C!==null&&(e&&C.alternate!==null&&j.delete(C.key===null?b:C.key),c=l(C,c,b),k===null?_=C:k.sibling=C,k=C);return e&&j.forEach(function(L){return t(u,L)}),Ce&&Nr(u,b),_}function y(u,c,h,x){var _=Cs(h);if(typeof _!="function")throw Error(te(150));if(h=_.call(h),h==null)throw Error(te(151));for(var k=_=null,j=c,b=c=0,C=null,M=h.next();j!==null&&!M.done;b++,M=h.next()){j.index>b?(C=j,j=null):C=j.sibling;var L=v(u,j,M.value,x);if(L===null){j===null&&(j=C);break}e&&j&&L.alternate===null&&t(u,j),c=l(L,c,b),k===null?_=L:k.sibling=L,k=L,j=C}if(M.done)return s(u,j),Ce&&Nr(u,b),_;if(j===null){for(;!M.done;b++,M=h.next())M=g(u,M.value,x),M!==null&&(c=l(M,c,b),k===null?_=M:k.sibling=M,k=M);return Ce&&Nr(u,b),_}for(j=i(u,j);!M.done;b++,M=h.next())M=S(j,u,b,M.value,x),M!==null&&(e&&M.alternate!==null&&j.delete(M.key===null?b:M.key),c=l(M,c,b),k===null?_=M:k.sibling=M,k=M);return e&&j.forEach(function(P){return t(u,P)}),Ce&&Nr(u,b),_}function d(u,c,h,x){if(typeof h=="object"&&h!==null&&h.type===Qr&&h.key===null&&(h=h.props.children),typeof h=="object"&&h!==null){switch(h.$$typeof){case ji:e:{for(var _=h.key,k=c;k!==null;){if(k.key===_){if(_=h.type,_===Qr){if(k.tag===7){s(u,k.sibling),c=n(k,h.props.children),c.return=u,u=c;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===rr&&dd(_)===k.type){s(u,k.sibling),c=n(k,h.props),c.ref=Ls(u,k,h),c.return=u,u=c;break e}s(u,k);break}else t(u,k);k=k.sibling}h.type===Qr?(c=Ar(h.props.children,u.mode,x,h.key),c.return=u,u=c):(x=Xi(h.type,h.key,h.props,null,u.mode,x),x.ref=Ls(u,c,h),x.return=u,u=x)}return f(u);case qr:e:{for(k=h.key;c!==null;){if(c.key===k)if(c.tag===4&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){s(u,c.sibling),c=n(c,h.children||[]),c.return=u,u=c;break e}else{s(u,c);break}else t(u,c);c=c.sibling}c=Ea(h,u.mode,x),c.return=u,u=c}return f(u);case rr:return k=h._init,d(u,c,k(h._payload),x)}if(Ds(h))return w(u,c,h,x);if(Cs(h))return y(u,c,h,x);Ii(u,h)}return typeof h=="string"&&h!==""||typeof h=="number"?(h=""+h,c!==null&&c.tag===6?(s(u,c.sibling),c=n(c,h),c.return=u,u=c):(s(u,c),c=Na(h,u.mode,x),c.return=u,u=c),f(u)):s(u,c)}return d}var gs=Sh(!0),kh=Sh(!1),pn=kr(null),xn=null,es=null,pl=null;function xl(){pl=es=xn=null}function vl(e){var t=pn.current;ke(pn),e._currentValue=t}function fo(e,t,s){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===s)break;e=e.return}}function cs(e,t){xn=e,pl=es=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ot=!0),e.firstContext=null)}function kt(e){var t=e._currentValue;if(pl!==e)if(e={context:e,memoizedValue:t,next:null},es===null){if(xn===null)throw Error(te(308));es=e,xn.dependencies={lanes:0,firstContext:e}}else es=es.next=e;return t}var Pr=null;function yl(e){Pr===null?Pr=[e]:Pr.push(e)}function jh(e,t,s,i){var n=t.interleaved;return n===null?(s.next=s,yl(t)):(s.next=n.next,n.next=s),t.interleaved=s,Vt(e,i)}function Vt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var sr=!1;function bl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ch(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function qt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gr(e,t,s){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,ge&2){var n=i.pending;return n===null?t.next=t:(t.next=n.next,n.next=t),i.pending=t,Vt(e,s)}return n=i.interleaved,n===null?(t.next=t,yl(i)):(t.next=n.next,n.next=t),i.interleaved=t,Vt(e,s)}function Qi(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,nl(e,s)}}function ud(e,t){var s=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,s===i)){var n=null,l=null;if(s=s.firstBaseUpdate,s!==null){do{var f={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};l===null?n=l=f:l=l.next=f,s=s.next}while(s!==null);l===null?n=l=t:l=l.next=t}else n=l=t;s={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:i.shared,effects:i.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function vn(e,t,s,i){var n=e.updateQueue;sr=!1;var l=n.firstBaseUpdate,f=n.lastBaseUpdate,a=n.shared.pending;if(a!==null){n.shared.pending=null;var o=a,m=o.next;o.next=null,f===null?l=m:f.next=m,f=o;var p=e.alternate;p!==null&&(p=p.updateQueue,a=p.lastBaseUpdate,a!==f&&(a===null?p.firstBaseUpdate=m:a.next=m,p.lastBaseUpdate=o))}if(l!==null){var g=n.baseState;f=0,p=m=o=null,a=l;do{var v=a.lane,S=a.eventTime;if((i&v)===v){p!==null&&(p=p.next={eventTime:S,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var w=e,y=a;switch(v=t,S=s,y.tag){case 1:if(w=y.payload,typeof w=="function"){g=w.call(S,g,v);break e}g=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=y.payload,v=typeof w=="function"?w.call(S,g,v):w,v==null)break e;g=Le({},g,v);break e;case 2:sr=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,v=n.effects,v===null?n.effects=[a]:v.push(a))}else S={eventTime:S,lane:v,tag:a.tag,payload:a.payload,callback:a.callback,next:null},p===null?(m=p=S,o=g):p=p.next=S,f|=v;if(a=a.next,a===null){if(a=n.shared.pending,a===null)break;v=a,a=v.next,v.next=null,n.lastBaseUpdate=v,n.shared.pending=null}}while(!0);if(p===null&&(o=g),n.baseState=o,n.firstBaseUpdate=m,n.lastBaseUpdate=p,t=n.shared.interleaved,t!==null){n=t;do f|=n.lane,n=n.next;while(n!==t)}else l===null&&(n.shared.lanes=0);Or|=f,e.lanes=f,e.memoizedState=g}}function hd(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(n!==null){if(i.callback=null,i=s,typeof n!="function")throw Error(te(191,n));n.call(i)}}}var _i={},zt=kr(_i),ni=kr(_i),ai=kr(_i);function Lr(e){if(e===_i)throw Error(te(174));return e}function _l(e,t){switch(_e(ai,t),_e(ni,e),_e(zt,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Qa(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Qa(t,e)}ke(zt),_e(zt,t)}function ps(){ke(zt),ke(ni),ke(ai)}function Nh(e){Lr(ai.current);var t=Lr(zt.current),s=Qa(t,e.type);t!==s&&(_e(ni,e),_e(zt,s))}function wl(e){ni.current===e&&(ke(zt),ke(ni))}var Me=kr(0);function yn(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _a=[];function Sl(){for(var e=0;e<_a.length;e++)_a[e]._workInProgressVersionPrimary=null;_a.length=0}var Ki=Jt.ReactCurrentDispatcher,wa=Jt.ReactCurrentBatchConfig,Ir=0,Pe=null,Be=null,ze=null,bn=!1,$s=!1,oi=0,I0=0;function Ve(){throw Error(te(321))}function kl(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Tt(e[s],t[s]))return!1;return!0}function jl(e,t,s,i,n,l){if(Ir=l,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ki.current=e===null||e.memoizedState===null?z0:H0,e=s(i,n),$s){l=0;do{if($s=!1,oi=0,25<=l)throw Error(te(301));l+=1,ze=Be=null,t.updateQueue=null,Ki.current=U0,e=s(i,n)}while($s)}if(Ki.current=_n,t=Be!==null&&Be.next!==null,Ir=0,ze=Be=Pe=null,bn=!1,t)throw Error(te(300));return e}function Cl(){var e=oi!==0;return oi=0,e}function It(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Pe.memoizedState=ze=e:ze=ze.next=e,ze}function jt(){if(Be===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=Be.next;var t=ze===null?Pe.memoizedState:ze.next;if(t!==null)ze=t,Be=e;else{if(e===null)throw Error(te(310));Be=e,e={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},ze===null?Pe.memoizedState=ze=e:ze=ze.next=e}return ze}function li(e,t){return typeof t=="function"?t(e):t}function Sa(e){var t=jt(),s=t.queue;if(s===null)throw Error(te(311));s.lastRenderedReducer=e;var i=Be,n=i.baseQueue,l=s.pending;if(l!==null){if(n!==null){var f=n.next;n.next=l.next,l.next=f}i.baseQueue=n=l,s.pending=null}if(n!==null){l=n.next,i=i.baseState;var a=f=null,o=null,m=l;do{var p=m.lane;if((Ir&p)===p)o!==null&&(o=o.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:e(i,m.action);else{var g={lane:p,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};o===null?(a=o=g,f=i):o=o.next=g,Pe.lanes|=p,Or|=p}m=m.next}while(m!==null&&m!==l);o===null?f=i:o.next=a,Tt(i,t.memoizedState)||(ot=!0),t.memoizedState=i,t.baseState=f,t.baseQueue=o,s.lastRenderedState=i}if(e=s.interleaved,e!==null){n=e;do l=n.lane,Pe.lanes|=l,Or|=l,n=n.next;while(n!==e)}else n===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function ka(e){var t=jt(),s=t.queue;if(s===null)throw Error(te(311));s.lastRenderedReducer=e;var i=s.dispatch,n=s.pending,l=t.memoizedState;if(n!==null){s.pending=null;var f=n=n.next;do l=e(l,f.action),f=f.next;while(f!==n);Tt(l,t.memoizedState)||(ot=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),s.lastRenderedState=l}return[l,i]}function Eh(){}function Mh(e,t){var s=Pe,i=jt(),n=t(),l=!Tt(i.memoizedState,n);if(l&&(i.memoizedState=n,ot=!0),i=i.queue,Nl(Th.bind(null,s,i,e),[e]),i.getSnapshot!==t||l||ze!==null&&ze.memoizedState.tag&1){if(s.flags|=2048,ci(9,Lh.bind(null,s,i,n,t),void 0,null),He===null)throw Error(te(349));Ir&30||Ph(s,t,n)}return n}function Ph(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Lh(e,t,s,i){t.value=s,t.getSnapshot=i,Ah(t)&&Rh(e)}function Th(e,t,s){return s(function(){Ah(t)&&Rh(e)})}function Ah(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Tt(e,s)}catch{return!0}}function Rh(e){var t=Vt(e,1);t!==null&&Lt(t,e,1,-1)}function fd(e){var t=It();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:li,lastRenderedState:e},t.queue=e,e=e.dispatch=F0.bind(null,Pe,e),[t.memoizedState,e]}function ci(e,t,s,i){return e={tag:e,create:t,destroy:s,deps:i,next:null},t=Pe.updateQueue,t===null?(t={lastEffect:null,stores:null},Pe.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(i=s.next,s.next=e,e.next=i,t.lastEffect=e)),e}function Dh(){return jt().memoizedState}function Vi(e,t,s,i){var n=It();Pe.flags|=e,n.memoizedState=ci(1|t,s,void 0,i===void 0?null:i)}function Hn(e,t,s,i){var n=jt();i=i===void 0?null:i;var l=void 0;if(Be!==null){var f=Be.memoizedState;if(l=f.destroy,i!==null&&kl(i,f.deps)){n.memoizedState=ci(t,s,l,i);return}}Pe.flags|=e,n.memoizedState=ci(1|t,s,l,i)}function md(e,t){return Vi(8390656,8,e,t)}function Nl(e,t){return Hn(2048,8,e,t)}function Ih(e,t){return Hn(4,2,e,t)}function Oh(e,t){return Hn(4,4,e,t)}function Bh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Fh(e,t,s){return s=s!=null?s.concat([e]):null,Hn(4,4,Bh.bind(null,t,e),s)}function El(){}function zh(e,t){var s=jt();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&kl(t,i[1])?i[0]:(s.memoizedState=[e,t],e)}function Hh(e,t){var s=jt();t=t===void 0?null:t;var i=s.memoizedState;return i!==null&&t!==null&&kl(t,i[1])?i[0]:(e=e(),s.memoizedState=[e,t],e)}function Uh(e,t,s){return Ir&21?(Tt(s,t)||(s=Ku(),Pe.lanes|=s,Or|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ot=!0),e.memoizedState=s)}function O0(e,t){var s=ye;ye=s!==0&&4>s?s:4,e(!0);var i=wa.transition;wa.transition={};try{e(!1),t()}finally{ye=s,wa.transition=i}}function $h(){return jt().memoizedState}function B0(e,t,s){var i=xr(e);if(s={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null},Wh(e))qh(t,s);else if(s=jh(e,t,s,i),s!==null){var n=tt();Lt(s,e,i,n),Qh(s,t,i)}}function F0(e,t,s){var i=xr(e),n={lane:i,action:s,hasEagerState:!1,eagerState:null,next:null};if(Wh(e))qh(t,n);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var f=t.lastRenderedState,a=l(f,s);if(n.hasEagerState=!0,n.eagerState=a,Tt(a,f)){var o=t.interleaved;o===null?(n.next=n,yl(t)):(n.next=o.next,o.next=n),t.interleaved=n;return}}catch{}finally{}s=jh(e,t,n,i),s!==null&&(n=tt(),Lt(s,e,i,n),Qh(s,t,i))}}function Wh(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function qh(e,t){$s=bn=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Qh(e,t,s){if(s&4194240){var i=t.lanes;i&=e.pendingLanes,s|=i,t.lanes=s,nl(e,s)}}var _n={readContext:kt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},z0={readContext:kt,useCallback:function(e,t){return It().memoizedState=[e,t===void 0?null:t],e},useContext:kt,useEffect:md,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Vi(4194308,4,Bh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Vi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vi(4,2,e,t)},useMemo:function(e,t){var s=It();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var i=It();return t=s!==void 0?s(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=B0.bind(null,Pe,e),[i.memoizedState,e]},useRef:function(e){var t=It();return e={current:e},t.memoizedState=e},useState:fd,useDebugValue:El,useDeferredValue:function(e){return It().memoizedState=e},useTransition:function(){var e=fd(!1),t=e[0];return e=O0.bind(null,e[1]),It().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var i=Pe,n=It();if(Ce){if(s===void 0)throw Error(te(407));s=s()}else{if(s=t(),He===null)throw Error(te(349));Ir&30||Ph(i,t,s)}n.memoizedState=s;var l={value:s,getSnapshot:t};return n.queue=l,md(Th.bind(null,i,l,e),[e]),i.flags|=2048,ci(9,Lh.bind(null,i,l,s,t),void 0,null),s},useId:function(){var e=It(),t=He.identifierPrefix;if(Ce){var s=Wt,i=$t;s=(i&~(1<<32-Pt(i)-1)).toString(32)+s,t=":"+t+"R"+s,s=oi++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=I0++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},H0={readContext:kt,useCallback:zh,useContext:kt,useEffect:Nl,useImperativeHandle:Fh,useInsertionEffect:Ih,useLayoutEffect:Oh,useMemo:Hh,useReducer:Sa,useRef:Dh,useState:function(){return Sa(li)},useDebugValue:El,useDeferredValue:function(e){var t=jt();return Uh(t,Be.memoizedState,e)},useTransition:function(){var e=Sa(li)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Eh,useSyncExternalStore:Mh,useId:$h,unstable_isNewReconciler:!1},U0={readContext:kt,useCallback:zh,useContext:kt,useEffect:Nl,useImperativeHandle:Fh,useInsertionEffect:Ih,useLayoutEffect:Oh,useMemo:Hh,useReducer:ka,useRef:Dh,useState:function(){return ka(li)},useDebugValue:El,useDeferredValue:function(e){var t=jt();return Be===null?t.memoizedState=e:Uh(t,Be.memoizedState,e)},useTransition:function(){var e=ka(li)[0],t=jt().memoizedState;return[e,t]},useMutableSource:Eh,useSyncExternalStore:Mh,useId:$h,unstable_isNewReconciler:!1};function Nt(e,t){if(e&&e.defaultProps){t=Le({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function mo(e,t,s,i){t=e.memoizedState,s=s(i,t),s=s==null?t:Le({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Un={isMounted:function(e){return(e=e._reactInternals)?zr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var i=tt(),n=xr(e),l=qt(i,n);l.payload=t,s!=null&&(l.callback=s),t=gr(e,l,n),t!==null&&(Lt(t,e,n,i),Qi(t,e,n))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var i=tt(),n=xr(e),l=qt(i,n);l.tag=1,l.payload=t,s!=null&&(l.callback=s),t=gr(e,l,n),t!==null&&(Lt(t,e,n,i),Qi(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=tt(),i=xr(e),n=qt(s,i);n.tag=2,t!=null&&(n.callback=t),t=gr(e,n,i),t!==null&&(Lt(t,e,i,s),Qi(t,e,i))}};function gd(e,t,s,i,n,l,f){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,l,f):t.prototype&&t.prototype.isPureReactComponent?!ti(s,i)||!ti(n,l):!0}function Kh(e,t,s){var i=!1,n=_r,l=t.contextType;return typeof l=="object"&&l!==null?l=kt(l):(n=ct(t)?Rr:Ye.current,i=t.contextTypes,l=(i=i!=null)?fs(e,n):_r),t=new t(s,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Un,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),t}function pd(e,t,s,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,i),t.state!==e&&Un.enqueueReplaceState(t,t.state,null)}function go(e,t,s,i){var n=e.stateNode;n.props=s,n.state=e.memoizedState,n.refs={},bl(e);var l=t.contextType;typeof l=="object"&&l!==null?n.context=kt(l):(l=ct(t)?Rr:Ye.current,n.context=fs(e,l)),n.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(mo(e,t,l,s),n.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof n.getSnapshotBeforeUpdate=="function"||typeof n.UNSAFE_componentWillMount!="function"&&typeof n.componentWillMount!="function"||(t=n.state,typeof n.componentWillMount=="function"&&n.componentWillMount(),typeof n.UNSAFE_componentWillMount=="function"&&n.UNSAFE_componentWillMount(),t!==n.state&&Un.enqueueReplaceState(n,n.state,null),vn(e,s,n,i),n.state=e.memoizedState),typeof n.componentDidMount=="function"&&(e.flags|=4194308)}function xs(e,t){try{var s="",i=t;do s+=pg(i),i=i.return;while(i);var n=s}catch(l){n=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:n,digest:null}}function ja(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function po(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var $0=typeof WeakMap=="function"?WeakMap:Map;function Vh(e,t,s){s=qt(-1,s),s.tag=3,s.payload={element:null};var i=t.value;return s.callback=function(){Sn||(Sn=!0,Co=i),po(e,t)},s}function Gh(e,t,s){s=qt(-1,s),s.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var n=t.value;s.payload=function(){return i(n)},s.callback=function(){po(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(s.callback=function(){po(e,t),typeof i!="function"&&(pr===null?pr=new Set([this]):pr.add(this));var f=t.stack;this.componentDidCatch(t.value,{componentStack:f!==null?f:""})}),s}function xd(e,t,s){var i=e.pingCache;if(i===null){i=e.pingCache=new $0;var n=new Set;i.set(t,n)}else n=i.get(t),n===void 0&&(n=new Set,i.set(t,n));n.has(s)||(n.add(s),e=sp.bind(null,e,t,s),t.then(e,e))}function vd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yd(e,t,s,i,n){return e.mode&1?(e.flags|=65536,e.lanes=n,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=qt(-1,1),t.tag=2,gr(s,t,1))),s.lanes|=1),e)}var W0=Jt.ReactCurrentOwner,ot=!1;function et(e,t,s,i){t.child=e===null?kh(t,null,s,i):gs(t,e.child,s,i)}function bd(e,t,s,i,n){s=s.render;var l=t.ref;return cs(t,n),i=jl(e,t,s,i,l,n),s=Cl(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Gt(e,t,n)):(Ce&&s&&fl(t),t.flags|=1,et(e,t,i,n),t.child)}function _d(e,t,s,i,n){if(e===null){var l=s.type;return typeof l=="function"&&!Il(l)&&l.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=l,Jh(e,t,l,i,n)):(e=Xi(s.type,null,i,t,t.mode,n),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&n)){var f=l.memoizedProps;if(s=s.compare,s=s!==null?s:ti,s(f,i)&&e.ref===t.ref)return Gt(e,t,n)}return t.flags|=1,e=vr(l,i),e.ref=t.ref,e.return=t,t.child=e}function Jh(e,t,s,i,n){if(e!==null){var l=e.memoizedProps;if(ti(l,i)&&e.ref===t.ref)if(ot=!1,t.pendingProps=i=l,(e.lanes&n)!==0)e.flags&131072&&(ot=!0);else return t.lanes=e.lanes,Gt(e,t,n)}return xo(e,t,s,i,n)}function Yh(e,t,s){var i=t.pendingProps,n=i.children,l=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(rs,ft),ft|=s;else{if(!(s&1073741824))return e=l!==null?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(rs,ft),ft|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:s,_e(rs,ft),ft|=i}else l!==null?(i=l.baseLanes|s,t.memoizedState=null):i=s,_e(rs,ft),ft|=i;return et(e,t,n,s),t.child}function Xh(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function xo(e,t,s,i,n){var l=ct(s)?Rr:Ye.current;return l=fs(t,l),cs(t,n),s=jl(e,t,s,i,l,n),i=Cl(),e!==null&&!ot?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,Gt(e,t,n)):(Ce&&i&&fl(t),t.flags|=1,et(e,t,s,n),t.child)}function wd(e,t,s,i,n){if(ct(s)){var l=!0;fn(t)}else l=!1;if(cs(t,n),t.stateNode===null)Gi(e,t),Kh(t,s,i),go(t,s,i,n),i=!0;else if(e===null){var f=t.stateNode,a=t.memoizedProps;f.props=a;var o=f.context,m=s.contextType;typeof m=="object"&&m!==null?m=kt(m):(m=ct(s)?Rr:Ye.current,m=fs(t,m));var p=s.getDerivedStateFromProps,g=typeof p=="function"||typeof f.getSnapshotBeforeUpdate=="function";g||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==i||o!==m)&&pd(t,f,i,m),sr=!1;var v=t.memoizedState;f.state=v,vn(t,i,f,n),o=t.memoizedState,a!==i||v!==o||lt.current||sr?(typeof p=="function"&&(mo(t,s,p,i),o=t.memoizedState),(a=sr||gd(t,s,a,i,v,o,m))?(g||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(t.flags|=4194308)):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=o),f.props=i,f.state=o,f.context=m,i=a):(typeof f.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{f=t.stateNode,Ch(e,t),a=t.memoizedProps,m=t.type===t.elementType?a:Nt(t.type,a),f.props=m,g=t.pendingProps,v=f.context,o=s.contextType,typeof o=="object"&&o!==null?o=kt(o):(o=ct(s)?Rr:Ye.current,o=fs(t,o));var S=s.getDerivedStateFromProps;(p=typeof S=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(a!==g||v!==o)&&pd(t,f,i,o),sr=!1,v=t.memoizedState,f.state=v,vn(t,i,f,n);var w=t.memoizedState;a!==g||v!==w||lt.current||sr?(typeof S=="function"&&(mo(t,s,S,i),w=t.memoizedState),(m=sr||gd(t,s,m,i,v,w,o)||!1)?(p||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(i,w,o),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(i,w,o)),typeof f.componentDidUpdate=="function"&&(t.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=w),f.props=i,f.state=w,f.context=o,i=m):(typeof f.componentDidUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),i=!1)}return vo(e,t,s,i,l,n)}function vo(e,t,s,i,n,l){Xh(e,t);var f=(t.flags&128)!==0;if(!i&&!f)return n&&od(t,s,!1),Gt(e,t,l);i=t.stateNode,W0.current=t;var a=f&&typeof s.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&f?(t.child=gs(t,e.child,null,l),t.child=gs(t,null,a,l)):et(e,t,a,l),t.memoizedState=i.state,n&&od(t,s,!0),t.child}function Zh(e){var t=e.stateNode;t.pendingContext?ad(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ad(e,t.context,!1),_l(e,t.containerInfo)}function Sd(e,t,s,i,n){return ms(),gl(n),t.flags|=256,et(e,t,s,i),t.child}var yo={dehydrated:null,treeContext:null,retryLane:0};function bo(e){return{baseLanes:e,cachePool:null,transitions:null}}function ef(e,t,s){var i=t.pendingProps,n=Me.current,l=!1,f=(t.flags&128)!==0,a;if((a=f)||(a=e!==null&&e.memoizedState===null?!1:(n&2)!==0),a?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(n|=1),_e(Me,n&1),e===null)return ho(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(f=i.children,e=i.fallback,l?(i=t.mode,l=t.child,f={mode:"hidden",children:f},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=f):l=qn(f,i,0,null),e=Ar(e,i,s,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=bo(s),t.memoizedState=yo,e):Ml(t,f));if(n=e.memoizedState,n!==null&&(a=n.dehydrated,a!==null))return q0(e,t,f,i,a,n,s);if(l){l=i.fallback,f=t.mode,n=e.child,a=n.sibling;var o={mode:"hidden",children:i.children};return!(f&1)&&t.child!==n?(i=t.child,i.childLanes=0,i.pendingProps=o,t.deletions=null):(i=vr(n,o),i.subtreeFlags=n.subtreeFlags&14680064),a!==null?l=vr(a,l):(l=Ar(l,f,s,null),l.flags|=2),l.return=t,i.return=t,i.sibling=l,t.child=i,i=l,l=t.child,f=e.child.memoizedState,f=f===null?bo(s):{baseLanes:f.baseLanes|s,cachePool:null,transitions:f.transitions},l.memoizedState=f,l.childLanes=e.childLanes&~s,t.memoizedState=yo,i}return l=e.child,e=l.sibling,i=vr(l,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=s),i.return=t,i.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=i,t.memoizedState=null,i}function Ml(e,t){return t=qn({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Oi(e,t,s,i){return i!==null&&gl(i),gs(t,e.child,null,s),e=Ml(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function q0(e,t,s,i,n,l,f){if(s)return t.flags&256?(t.flags&=-257,i=ja(Error(te(422))),Oi(e,t,f,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=i.fallback,n=t.mode,i=qn({mode:"visible",children:i.children},n,0,null),l=Ar(l,n,f,null),l.flags|=2,i.return=t,l.return=t,i.sibling=l,t.child=i,t.mode&1&&gs(t,e.child,null,f),t.child.memoizedState=bo(f),t.memoizedState=yo,l);if(!(t.mode&1))return Oi(e,t,f,null);if(n.data==="$!"){if(i=n.nextSibling&&n.nextSibling.dataset,i)var a=i.dgst;return i=a,l=Error(te(419)),i=ja(l,i,void 0),Oi(e,t,f,i)}if(a=(f&e.childLanes)!==0,ot||a){if(i=He,i!==null){switch(f&-f){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}n=n&(i.suspendedLanes|f)?0:n,n!==0&&n!==l.retryLane&&(l.retryLane=n,Vt(e,n),Lt(i,e,n,-1))}return Dl(),i=ja(Error(te(421))),Oi(e,t,f,i)}return n.data==="$?"?(t.flags|=128,t.child=e.child,t=ip.bind(null,e),n._reactRetry=t,null):(e=l.treeContext,mt=mr(n.nextSibling),gt=t,Ce=!0,Mt=null,e!==null&&(bt[_t++]=$t,bt[_t++]=Wt,bt[_t++]=Dr,$t=e.id,Wt=e.overflow,Dr=t),t=Ml(t,i.children),t.flags|=4096,t)}function kd(e,t,s){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),fo(e.return,t,s)}function Ca(e,t,s,i,n){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:s,tailMode:n}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=s,l.tailMode=n)}function tf(e,t,s){var i=t.pendingProps,n=i.revealOrder,l=i.tail;if(et(e,t,i.children,s),i=Me.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&kd(e,s,t);else if(e.tag===19)kd(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(_e(Me,i),!(t.mode&1))t.memoizedState=null;else switch(n){case"forwards":for(s=t.child,n=null;s!==null;)e=s.alternate,e!==null&&yn(e)===null&&(n=s),s=s.sibling;s=n,s===null?(n=t.child,t.child=null):(n=s.sibling,s.sibling=null),Ca(t,!1,n,s,l);break;case"backwards":for(s=null,n=t.child,t.child=null;n!==null;){if(e=n.alternate,e!==null&&yn(e)===null){t.child=n;break}e=n.sibling,n.sibling=s,s=n,n=e}Ca(t,!0,s,null,l);break;case"together":Ca(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Or|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,s=vr(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=vr(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Q0(e,t,s){switch(t.tag){case 3:Zh(t),ms();break;case 5:Nh(t);break;case 1:ct(t.type)&&fn(t);break;case 4:_l(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,n=t.memoizedProps.value;_e(pn,i._currentValue),i._currentValue=n;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(_e(Me,Me.current&1),t.flags|=128,null):s&t.child.childLanes?ef(e,t,s):(_e(Me,Me.current&1),e=Gt(e,t,s),e!==null?e.sibling:null);_e(Me,Me.current&1);break;case 19:if(i=(s&t.childLanes)!==0,e.flags&128){if(i)return tf(e,t,s);t.flags|=128}if(n=t.memoizedState,n!==null&&(n.rendering=null,n.tail=null,n.lastEffect=null),_e(Me,Me.current),i)break;return null;case 22:case 23:return t.lanes=0,Yh(e,t,s)}return Gt(e,t,s)}var rf,_o,sf,nf;rf=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};_o=function(){};sf=function(e,t,s,i){var n=e.memoizedProps;if(n!==i){e=t.stateNode,Lr(zt.current);var l=null;switch(s){case"input":n=Ua(e,n),i=Ua(e,i),l=[];break;case"select":n=Le({},n,{value:void 0}),i=Le({},i,{value:void 0}),l=[];break;case"textarea":n=qa(e,n),i=qa(e,i),l=[];break;default:typeof n.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=un)}Ka(s,i);var f;s=null;for(m in n)if(!i.hasOwnProperty(m)&&n.hasOwnProperty(m)&&n[m]!=null)if(m==="style"){var a=n[m];for(f in a)a.hasOwnProperty(f)&&(s||(s={}),s[f]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(Vs.hasOwnProperty(m)?l||(l=[]):(l=l||[]).push(m,null));for(m in i){var o=i[m];if(a=n!=null?n[m]:void 0,i.hasOwnProperty(m)&&o!==a&&(o!=null||a!=null))if(m==="style")if(a){for(f in a)!a.hasOwnProperty(f)||o&&o.hasOwnProperty(f)||(s||(s={}),s[f]="");for(f in o)o.hasOwnProperty(f)&&a[f]!==o[f]&&(s||(s={}),s[f]=o[f])}else s||(l||(l=[]),l.push(m,s)),s=o;else m==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,a=a?a.__html:void 0,o!=null&&a!==o&&(l=l||[]).push(m,o)):m==="children"?typeof o!="string"&&typeof o!="number"||(l=l||[]).push(m,""+o):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(Vs.hasOwnProperty(m)?(o!=null&&m==="onScroll"&&we("scroll",e),l||a===o||(l=[])):(l=l||[]).push(m,o))}s&&(l=l||[]).push("style",s);var m=l;(t.updateQueue=m)&&(t.flags|=4)}};nf=function(e,t,s,i){s!==i&&(t.flags|=4)};function Ts(e,t){if(!Ce)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var i=null;s!==null;)s.alternate!==null&&(i=s),s=s.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ge(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,i=0;if(t)for(var n=e.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags&14680064,i|=n.flags&14680064,n.return=e,n=n.sibling;else for(n=e.child;n!==null;)s|=n.lanes|n.childLanes,i|=n.subtreeFlags,i|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=i,e.childLanes=s,t}function K0(e,t,s){var i=t.pendingProps;switch(ml(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(t),null;case 1:return ct(t.type)&&hn(),Ge(t),null;case 3:return i=t.stateNode,ps(),ke(lt),ke(Ye),Sl(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Di(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mt!==null&&(Mo(Mt),Mt=null))),_o(e,t),Ge(t),null;case 5:wl(t);var n=Lr(ai.current);if(s=t.type,e!==null&&t.stateNode!=null)sf(e,t,s,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(te(166));return Ge(t),null}if(e=Lr(zt.current),Di(t)){i=t.stateNode,s=t.type;var l=t.memoizedProps;switch(i[Ot]=t,i[ii]=l,e=(t.mode&1)!==0,s){case"dialog":we("cancel",i),we("close",i);break;case"iframe":case"object":case"embed":we("load",i);break;case"video":case"audio":for(n=0;n<Os.length;n++)we(Os[n],i);break;case"source":we("error",i);break;case"img":case"image":case"link":we("error",i),we("load",i);break;case"details":we("toggle",i);break;case"input":Ac(i,l),we("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},we("invalid",i);break;case"textarea":Dc(i,l),we("invalid",i)}Ka(s,l),n=null;for(var f in l)if(l.hasOwnProperty(f)){var a=l[f];f==="children"?typeof a=="string"?i.textContent!==a&&(l.suppressHydrationWarning!==!0&&Ri(i.textContent,a,e),n=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(l.suppressHydrationWarning!==!0&&Ri(i.textContent,a,e),n=["children",""+a]):Vs.hasOwnProperty(f)&&a!=null&&f==="onScroll"&&we("scroll",i)}switch(s){case"input":Ci(i),Rc(i,l,!0);break;case"textarea":Ci(i),Ic(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=un)}i=n,t.updateQueue=i,i!==null&&(t.flags|=4)}else{f=n.nodeType===9?n:n.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=f.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=f.createElement(s,{is:i.is}):(e=f.createElement(s),s==="select"&&(f=e,i.multiple?f.multiple=!0:i.size&&(f.size=i.size))):e=f.createElementNS(e,s),e[Ot]=t,e[ii]=i,rf(e,t,!1,!1),t.stateNode=e;e:{switch(f=Va(s,i),s){case"dialog":we("cancel",e),we("close",e),n=i;break;case"iframe":case"object":case"embed":we("load",e),n=i;break;case"video":case"audio":for(n=0;n<Os.length;n++)we(Os[n],e);n=i;break;case"source":we("error",e),n=i;break;case"img":case"image":case"link":we("error",e),we("load",e),n=i;break;case"details":we("toggle",e),n=i;break;case"input":Ac(e,i),n=Ua(e,i),we("invalid",e);break;case"option":n=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},n=Le({},i,{value:void 0}),we("invalid",e);break;case"textarea":Dc(e,i),n=qa(e,i),we("invalid",e);break;default:n=i}Ka(s,n),a=n;for(l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="style"?Du(e,o):l==="dangerouslySetInnerHTML"?(o=o?o.__html:void 0,o!=null&&Au(e,o)):l==="children"?typeof o=="string"?(s!=="textarea"||o!=="")&&Gs(e,o):typeof o=="number"&&Gs(e,""+o):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Vs.hasOwnProperty(l)?o!=null&&l==="onScroll"&&we("scroll",e):o!=null&&Zo(e,l,o,f))}switch(s){case"input":Ci(e),Rc(e,i,!1);break;case"textarea":Ci(e),Ic(e);break;case"option":i.value!=null&&e.setAttribute("value",""+br(i.value));break;case"select":e.multiple=!!i.multiple,l=i.value,l!=null?ns(e,!!i.multiple,l,!1):i.defaultValue!=null&&ns(e,!!i.multiple,i.defaultValue,!0);break;default:typeof n.onClick=="function"&&(e.onclick=un)}switch(s){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ge(t),null;case 6:if(e&&t.stateNode!=null)nf(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(te(166));if(s=Lr(ai.current),Lr(zt.current),Di(t)){if(i=t.stateNode,s=t.memoizedProps,i[Ot]=t,(l=i.nodeValue!==s)&&(e=gt,e!==null))switch(e.tag){case 3:Ri(i.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ri(i.nodeValue,s,(e.mode&1)!==0)}l&&(t.flags|=4)}else i=(s.nodeType===9?s:s.ownerDocument).createTextNode(i),i[Ot]=t,t.stateNode=i}return Ge(t),null;case 13:if(ke(Me),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ce&&mt!==null&&t.mode&1&&!(t.flags&128))wh(),ms(),t.flags|=98560,l=!1;else if(l=Di(t),i!==null&&i.dehydrated!==null){if(e===null){if(!l)throw Error(te(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(te(317));l[Ot]=t}else ms(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ge(t),l=!1}else Mt!==null&&(Mo(Mt),Mt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Me.current&1?Fe===0&&(Fe=3):Dl())),t.updateQueue!==null&&(t.flags|=4),Ge(t),null);case 4:return ps(),_o(e,t),e===null&&ri(t.stateNode.containerInfo),Ge(t),null;case 10:return vl(t.type._context),Ge(t),null;case 17:return ct(t.type)&&hn(),Ge(t),null;case 19:if(ke(Me),l=t.memoizedState,l===null)return Ge(t),null;if(i=(t.flags&128)!==0,f=l.rendering,f===null)if(i)Ts(l,!1);else{if(Fe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(f=yn(e),f!==null){for(t.flags|=128,Ts(l,!1),i=f.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=s,s=t.child;s!==null;)l=s,e=i,l.flags&=14680066,f=l.alternate,f===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=f.childLanes,l.lanes=f.lanes,l.child=f.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=f.memoizedProps,l.memoizedState=f.memoizedState,l.updateQueue=f.updateQueue,l.type=f.type,e=f.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return _e(Me,Me.current&1|2),t.child}e=e.sibling}l.tail!==null&&Re()>vs&&(t.flags|=128,i=!0,Ts(l,!1),t.lanes=4194304)}else{if(!i)if(e=yn(f),e!==null){if(t.flags|=128,i=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),Ts(l,!0),l.tail===null&&l.tailMode==="hidden"&&!f.alternate&&!Ce)return Ge(t),null}else 2*Re()-l.renderingStartTime>vs&&s!==1073741824&&(t.flags|=128,i=!0,Ts(l,!1),t.lanes=4194304);l.isBackwards?(f.sibling=t.child,t.child=f):(s=l.last,s!==null?s.sibling=f:t.child=f,l.last=f)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Re(),t.sibling=null,s=Me.current,_e(Me,i?s&1|2:s&1),t):(Ge(t),null);case 22:case 23:return Rl(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?ft&1073741824&&(Ge(t),t.subtreeFlags&6&&(t.flags|=8192)):Ge(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function V0(e,t){switch(ml(t),t.tag){case 1:return ct(t.type)&&hn(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ps(),ke(lt),ke(Ye),Sl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return wl(t),null;case 13:if(ke(Me),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ke(Me),null;case 4:return ps(),null;case 10:return vl(t.type._context),null;case 22:case 23:return Rl(),null;case 24:return null;default:return null}}var Bi=!1,Je=!1,G0=typeof WeakSet=="function"?WeakSet:Set,ie=null;function ts(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(i){Te(e,t,i)}else s.current=null}function wo(e,t,s){try{s()}catch(i){Te(e,t,i)}}var jd=!1;function J0(e,t){if(io=ln,e=ch(),hl(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var i=s.getSelection&&s.getSelection();if(i&&i.rangeCount!==0){s=i.anchorNode;var n=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{s.nodeType,l.nodeType}catch{s=null;break e}var f=0,a=-1,o=-1,m=0,p=0,g=e,v=null;t:for(;;){for(var S;g!==s||n!==0&&g.nodeType!==3||(a=f+n),g!==l||i!==0&&g.nodeType!==3||(o=f+i),g.nodeType===3&&(f+=g.nodeValue.length),(S=g.firstChild)!==null;)v=g,g=S;for(;;){if(g===e)break t;if(v===s&&++m===n&&(a=f),v===l&&++p===i&&(o=f),(S=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=S}s=a===-1||o===-1?null:{start:a,end:o}}else s=null}s=s||{start:0,end:0}}else s=null;for(no={focusedElem:e,selectionRange:s},ln=!1,ie=t;ie!==null;)if(t=ie,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ie=e;else for(;ie!==null;){t=ie;try{var w=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var y=w.memoizedProps,d=w.memoizedState,u=t.stateNode,c=u.getSnapshotBeforeUpdate(t.elementType===t.type?y:Nt(t.type,y),d);u.__reactInternalSnapshotBeforeUpdate=c}break;case 3:var h=t.stateNode.containerInfo;h.nodeType===1?h.textContent="":h.nodeType===9&&h.documentElement&&h.removeChild(h.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(x){Te(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,ie=e;break}ie=t.return}return w=jd,jd=!1,w}function Ws(e,t,s){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var n=i=i.next;do{if((n.tag&e)===e){var l=n.destroy;n.destroy=void 0,l!==void 0&&wo(t,s,l)}n=n.next}while(n!==i)}}function $n(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var i=s.create;s.destroy=i()}s=s.next}while(s!==t)}}function So(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function af(e){var t=e.alternate;t!==null&&(e.alternate=null,af(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ot],delete t[ii],delete t[lo],delete t[T0],delete t[A0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function of(e){return e.tag===5||e.tag===3||e.tag===4}function Cd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||of(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ko(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=un));else if(i!==4&&(e=e.child,e!==null))for(ko(e,t,s),e=e.sibling;e!==null;)ko(e,t,s),e=e.sibling}function jo(e,t,s){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(jo(e,t,s),e=e.sibling;e!==null;)jo(e,t,s),e=e.sibling}var $e=null,Et=!1;function Zt(e,t,s){for(s=s.child;s!==null;)lf(e,t,s),s=s.sibling}function lf(e,t,s){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Dn,s)}catch{}switch(s.tag){case 5:Je||ts(s,t);case 6:var i=$e,n=Et;$e=null,Zt(e,t,s),$e=i,Et=n,$e!==null&&(Et?(e=$e,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):$e.removeChild(s.stateNode));break;case 18:$e!==null&&(Et?(e=$e,s=s.stateNode,e.nodeType===8?ya(e.parentNode,s):e.nodeType===1&&ya(e,s),Zs(e)):ya($e,s.stateNode));break;case 4:i=$e,n=Et,$e=s.stateNode.containerInfo,Et=!0,Zt(e,t,s),$e=i,Et=n;break;case 0:case 11:case 14:case 15:if(!Je&&(i=s.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){n=i=i.next;do{var l=n,f=l.destroy;l=l.tag,f!==void 0&&(l&2||l&4)&&wo(s,t,f),n=n.next}while(n!==i)}Zt(e,t,s);break;case 1:if(!Je&&(ts(s,t),i=s.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=s.memoizedProps,i.state=s.memoizedState,i.componentWillUnmount()}catch(a){Te(s,t,a)}Zt(e,t,s);break;case 21:Zt(e,t,s);break;case 22:s.mode&1?(Je=(i=Je)||s.memoizedState!==null,Zt(e,t,s),Je=i):Zt(e,t,s);break;default:Zt(e,t,s)}}function Nd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new G0),t.forEach(function(i){var n=np.bind(null,e,i);s.has(i)||(s.add(i),i.then(n,n))})}}function Ct(e,t){var s=t.deletions;if(s!==null)for(var i=0;i<s.length;i++){var n=s[i];try{var l=e,f=t,a=f;e:for(;a!==null;){switch(a.tag){case 5:$e=a.stateNode,Et=!1;break e;case 3:$e=a.stateNode.containerInfo,Et=!0;break e;case 4:$e=a.stateNode.containerInfo,Et=!0;break e}a=a.return}if($e===null)throw Error(te(160));lf(l,f,n),$e=null,Et=!1;var o=n.alternate;o!==null&&(o.return=null),n.return=null}catch(m){Te(n,t,m)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)cf(t,e),t=t.sibling}function cf(e,t){var s=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ct(t,e),Rt(e),i&4){try{Ws(3,e,e.return),$n(3,e)}catch(y){Te(e,e.return,y)}try{Ws(5,e,e.return)}catch(y){Te(e,e.return,y)}}break;case 1:Ct(t,e),Rt(e),i&512&&s!==null&&ts(s,s.return);break;case 5:if(Ct(t,e),Rt(e),i&512&&s!==null&&ts(s,s.return),e.flags&32){var n=e.stateNode;try{Gs(n,"")}catch(y){Te(e,e.return,y)}}if(i&4&&(n=e.stateNode,n!=null)){var l=e.memoizedProps,f=s!==null?s.memoizedProps:l,a=e.type,o=e.updateQueue;if(e.updateQueue=null,o!==null)try{a==="input"&&l.type==="radio"&&l.name!=null&&Pu(n,l),Va(a,f);var m=Va(a,l);for(f=0;f<o.length;f+=2){var p=o[f],g=o[f+1];p==="style"?Du(n,g):p==="dangerouslySetInnerHTML"?Au(n,g):p==="children"?Gs(n,g):Zo(n,p,g,m)}switch(a){case"input":$a(n,l);break;case"textarea":Lu(n,l);break;case"select":var v=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!l.multiple;var S=l.value;S!=null?ns(n,!!l.multiple,S,!1):v!==!!l.multiple&&(l.defaultValue!=null?ns(n,!!l.multiple,l.defaultValue,!0):ns(n,!!l.multiple,l.multiple?[]:"",!1))}n[ii]=l}catch(y){Te(e,e.return,y)}}break;case 6:if(Ct(t,e),Rt(e),i&4){if(e.stateNode===null)throw Error(te(162));n=e.stateNode,l=e.memoizedProps;try{n.nodeValue=l}catch(y){Te(e,e.return,y)}}break;case 3:if(Ct(t,e),Rt(e),i&4&&s!==null&&s.memoizedState.isDehydrated)try{Zs(t.containerInfo)}catch(y){Te(e,e.return,y)}break;case 4:Ct(t,e),Rt(e);break;case 13:Ct(t,e),Rt(e),n=e.child,n.flags&8192&&(l=n.memoizedState!==null,n.stateNode.isHidden=l,!l||n.alternate!==null&&n.alternate.memoizedState!==null||(Tl=Re())),i&4&&Nd(e);break;case 22:if(p=s!==null&&s.memoizedState!==null,e.mode&1?(Je=(m=Je)||p,Ct(t,e),Je=m):Ct(t,e),Rt(e),i&8192){if(m=e.memoizedState!==null,(e.stateNode.isHidden=m)&&!p&&e.mode&1)for(ie=e,p=e.child;p!==null;){for(g=ie=p;ie!==null;){switch(v=ie,S=v.child,v.tag){case 0:case 11:case 14:case 15:Ws(4,v,v.return);break;case 1:ts(v,v.return);var w=v.stateNode;if(typeof w.componentWillUnmount=="function"){i=v,s=v.return;try{t=i,w.props=t.memoizedProps,w.state=t.memoizedState,w.componentWillUnmount()}catch(y){Te(i,s,y)}}break;case 5:ts(v,v.return);break;case 22:if(v.memoizedState!==null){Md(g);continue}}S!==null?(S.return=v,ie=S):Md(g)}p=p.sibling}e:for(p=null,g=e;;){if(g.tag===5){if(p===null){p=g;try{n=g.stateNode,m?(l=n.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(a=g.stateNode,o=g.memoizedProps.style,f=o!=null&&o.hasOwnProperty("display")?o.display:null,a.style.display=Ru("display",f))}catch(y){Te(e,e.return,y)}}}else if(g.tag===6){if(p===null)try{g.stateNode.nodeValue=m?"":g.memoizedProps}catch(y){Te(e,e.return,y)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;p===g&&(p=null),g=g.return}p===g&&(p=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Ct(t,e),Rt(e),i&4&&Nd(e);break;case 21:break;default:Ct(t,e),Rt(e)}}function Rt(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(of(s)){var i=s;break e}s=s.return}throw Error(te(160))}switch(i.tag){case 5:var n=i.stateNode;i.flags&32&&(Gs(n,""),i.flags&=-33);var l=Cd(e);jo(e,l,n);break;case 3:case 4:var f=i.stateNode.containerInfo,a=Cd(e);ko(e,a,f);break;default:throw Error(te(161))}}catch(o){Te(e,e.return,o)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Y0(e,t,s){ie=e,df(e)}function df(e,t,s){for(var i=(e.mode&1)!==0;ie!==null;){var n=ie,l=n.child;if(n.tag===22&&i){var f=n.memoizedState!==null||Bi;if(!f){var a=n.alternate,o=a!==null&&a.memoizedState!==null||Je;a=Bi;var m=Je;if(Bi=f,(Je=o)&&!m)for(ie=n;ie!==null;)f=ie,o=f.child,f.tag===22&&f.memoizedState!==null?Pd(n):o!==null?(o.return=f,ie=o):Pd(n);for(;l!==null;)ie=l,df(l),l=l.sibling;ie=n,Bi=a,Je=m}Ed(e)}else n.subtreeFlags&8772&&l!==null?(l.return=n,ie=l):Ed(e)}}function Ed(e){for(;ie!==null;){var t=ie;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Je||$n(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!Je)if(s===null)i.componentDidMount();else{var n=t.elementType===t.type?s.memoizedProps:Nt(t.type,s.memoizedProps);i.componentDidUpdate(n,s.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&hd(t,l,i);break;case 3:var f=t.updateQueue;if(f!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}hd(t,f,s)}break;case 5:var a=t.stateNode;if(s===null&&t.flags&4){s=a;var o=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":o.autoFocus&&s.focus();break;case"img":o.src&&(s.src=o.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var m=t.alternate;if(m!==null){var p=m.memoizedState;if(p!==null){var g=p.dehydrated;g!==null&&Zs(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}Je||t.flags&512&&So(t)}catch(v){Te(t,t.return,v)}}if(t===e){ie=null;break}if(s=t.sibling,s!==null){s.return=t.return,ie=s;break}ie=t.return}}function Md(e){for(;ie!==null;){var t=ie;if(t===e){ie=null;break}var s=t.sibling;if(s!==null){s.return=t.return,ie=s;break}ie=t.return}}function Pd(e){for(;ie!==null;){var t=ie;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{$n(4,t)}catch(o){Te(t,s,o)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var n=t.return;try{i.componentDidMount()}catch(o){Te(t,n,o)}}var l=t.return;try{So(t)}catch(o){Te(t,l,o)}break;case 5:var f=t.return;try{So(t)}catch(o){Te(t,f,o)}}}catch(o){Te(t,t.return,o)}if(t===e){ie=null;break}var a=t.sibling;if(a!==null){a.return=t.return,ie=a;break}ie=t.return}}var X0=Math.ceil,wn=Jt.ReactCurrentDispatcher,Pl=Jt.ReactCurrentOwner,St=Jt.ReactCurrentBatchConfig,ge=0,He=null,Ie=null,We=0,ft=0,rs=kr(0),Fe=0,di=null,Or=0,Wn=0,Ll=0,qs=null,at=null,Tl=0,vs=1/0,Ht=null,Sn=!1,Co=null,pr=null,Fi=!1,lr=null,kn=0,Qs=0,No=null,Ji=-1,Yi=0;function tt(){return ge&6?Re():Ji!==-1?Ji:Ji=Re()}function xr(e){return e.mode&1?ge&2&&We!==0?We&-We:D0.transition!==null?(Yi===0&&(Yi=Ku()),Yi):(e=ye,e!==0||(e=window.event,e=e===void 0?16:eh(e.type)),e):1}function Lt(e,t,s,i){if(50<Qs)throw Qs=0,No=null,Error(te(185));vi(e,s,i),(!(ge&2)||e!==He)&&(e===He&&(!(ge&2)&&(Wn|=s),Fe===4&&ar(e,We)),dt(e,i),s===1&&ge===0&&!(t.mode&1)&&(vs=Re()+500,zn&&jr()))}function dt(e,t){var s=e.callbackNode;Dg(e,t);var i=on(e,e===He?We:0);if(i===0)s!==null&&Fc(s),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(s!=null&&Fc(s),t===1)e.tag===0?R0(Ld.bind(null,e)):yh(Ld.bind(null,e)),P0(function(){!(ge&6)&&jr()}),s=null;else{switch(Vu(i)){case 1:s=il;break;case 4:s=qu;break;case 16:s=an;break;case 536870912:s=Qu;break;default:s=an}s=vf(s,uf.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function uf(e,t){if(Ji=-1,Yi=0,ge&6)throw Error(te(327));var s=e.callbackNode;if(ds()&&e.callbackNode!==s)return null;var i=on(e,e===He?We:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=jn(e,i);else{t=i;var n=ge;ge|=2;var l=ff();(He!==e||We!==t)&&(Ht=null,vs=Re()+500,Tr(e,t));do try{tp();break}catch(a){hf(e,a)}while(!0);xl(),wn.current=l,ge=n,Ie!==null?t=0:(He=null,We=0,t=Fe)}if(t!==0){if(t===2&&(n=Za(e),n!==0&&(i=n,t=Eo(e,n))),t===1)throw s=di,Tr(e,0),ar(e,i),dt(e,Re()),s;if(t===6)ar(e,i);else{if(n=e.current.alternate,!(i&30)&&!Z0(n)&&(t=jn(e,i),t===2&&(l=Za(e),l!==0&&(i=l,t=Eo(e,l))),t===1))throw s=di,Tr(e,0),ar(e,i),dt(e,Re()),s;switch(e.finishedWork=n,e.finishedLanes=i,t){case 0:case 1:throw Error(te(345));case 2:Er(e,at,Ht);break;case 3:if(ar(e,i),(i&130023424)===i&&(t=Tl+500-Re(),10<t)){if(on(e,0)!==0)break;if(n=e.suspendedLanes,(n&i)!==i){tt(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=oo(Er.bind(null,e,at,Ht),t);break}Er(e,at,Ht);break;case 4:if(ar(e,i),(i&4194240)===i)break;for(t=e.eventTimes,n=-1;0<i;){var f=31-Pt(i);l=1<<f,f=t[f],f>n&&(n=f),i&=~l}if(i=n,i=Re()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*X0(i/1960))-i,10<i){e.timeoutHandle=oo(Er.bind(null,e,at,Ht),i);break}Er(e,at,Ht);break;case 5:Er(e,at,Ht);break;default:throw Error(te(329))}}}return dt(e,Re()),e.callbackNode===s?uf.bind(null,e):null}function Eo(e,t){var s=qs;return e.current.memoizedState.isDehydrated&&(Tr(e,t).flags|=256),e=jn(e,t),e!==2&&(t=at,at=s,t!==null&&Mo(t)),e}function Mo(e){at===null?at=e:at.push.apply(at,e)}function Z0(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var i=0;i<s.length;i++){var n=s[i],l=n.getSnapshot;n=n.value;try{if(!Tt(l(),n))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ar(e,t){for(t&=~Ll,t&=~Wn,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-Pt(t),i=1<<s;e[s]=-1,t&=~i}}function Ld(e){if(ge&6)throw Error(te(327));ds();var t=on(e,0);if(!(t&1))return dt(e,Re()),null;var s=jn(e,t);if(e.tag!==0&&s===2){var i=Za(e);i!==0&&(t=i,s=Eo(e,i))}if(s===1)throw s=di,Tr(e,0),ar(e,t),dt(e,Re()),s;if(s===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Er(e,at,Ht),dt(e,Re()),null}function Al(e,t){var s=ge;ge|=1;try{return e(t)}finally{ge=s,ge===0&&(vs=Re()+500,zn&&jr())}}function Br(e){lr!==null&&lr.tag===0&&!(ge&6)&&ds();var t=ge;ge|=1;var s=St.transition,i=ye;try{if(St.transition=null,ye=1,e)return e()}finally{ye=i,St.transition=s,ge=t,!(ge&6)&&jr()}}function Rl(){ft=rs.current,ke(rs)}function Tr(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,M0(s)),Ie!==null)for(s=Ie.return;s!==null;){var i=s;switch(ml(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&hn();break;case 3:ps(),ke(lt),ke(Ye),Sl();break;case 5:wl(i);break;case 4:ps();break;case 13:ke(Me);break;case 19:ke(Me);break;case 10:vl(i.type._context);break;case 22:case 23:Rl()}s=s.return}if(He=e,Ie=e=vr(e.current,null),We=ft=t,Fe=0,di=null,Ll=Wn=Or=0,at=qs=null,Pr!==null){for(t=0;t<Pr.length;t++)if(s=Pr[t],i=s.interleaved,i!==null){s.interleaved=null;var n=i.next,l=s.pending;if(l!==null){var f=l.next;l.next=n,i.next=f}s.pending=i}Pr=null}return e}function hf(e,t){do{var s=Ie;try{if(xl(),Ki.current=_n,bn){for(var i=Pe.memoizedState;i!==null;){var n=i.queue;n!==null&&(n.pending=null),i=i.next}bn=!1}if(Ir=0,ze=Be=Pe=null,$s=!1,oi=0,Pl.current=null,s===null||s.return===null){Fe=1,di=t,Ie=null;break}e:{var l=e,f=s.return,a=s,o=t;if(t=We,a.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){var m=o,p=a,g=p.tag;if(!(p.mode&1)&&(g===0||g===11||g===15)){var v=p.alternate;v?(p.updateQueue=v.updateQueue,p.memoizedState=v.memoizedState,p.lanes=v.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=vd(f);if(S!==null){S.flags&=-257,yd(S,f,a,l,t),S.mode&1&&xd(l,m,t),t=S,o=m;var w=t.updateQueue;if(w===null){var y=new Set;y.add(o),t.updateQueue=y}else w.add(o);break e}else{if(!(t&1)){xd(l,m,t),Dl();break e}o=Error(te(426))}}else if(Ce&&a.mode&1){var d=vd(f);if(d!==null){!(d.flags&65536)&&(d.flags|=256),yd(d,f,a,l,t),gl(xs(o,a));break e}}l=o=xs(o,a),Fe!==4&&(Fe=2),qs===null?qs=[l]:qs.push(l),l=f;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var u=Vh(l,o,t);ud(l,u);break e;case 1:a=o;var c=l.type,h=l.stateNode;if(!(l.flags&128)&&(typeof c.getDerivedStateFromError=="function"||h!==null&&typeof h.componentDidCatch=="function"&&(pr===null||!pr.has(h)))){l.flags|=65536,t&=-t,l.lanes|=t;var x=Gh(l,a,t);ud(l,x);break e}}l=l.return}while(l!==null)}gf(s)}catch(_){t=_,Ie===s&&s!==null&&(Ie=s=s.return);continue}break}while(!0)}function ff(){var e=wn.current;return wn.current=_n,e===null?_n:e}function Dl(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),He===null||!(Or&268435455)&&!(Wn&268435455)||ar(He,We)}function jn(e,t){var s=ge;ge|=2;var i=ff();(He!==e||We!==t)&&(Ht=null,Tr(e,t));do try{ep();break}catch(n){hf(e,n)}while(!0);if(xl(),ge=s,wn.current=i,Ie!==null)throw Error(te(261));return He=null,We=0,Fe}function ep(){for(;Ie!==null;)mf(Ie)}function tp(){for(;Ie!==null&&!Cg();)mf(Ie)}function mf(e){var t=xf(e.alternate,e,ft);e.memoizedProps=e.pendingProps,t===null?gf(e):Ie=t,Pl.current=null}function gf(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=V0(s,t),s!==null){s.flags&=32767,Ie=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Fe=6,Ie=null;return}}else if(s=K0(s,t,ft),s!==null){Ie=s;return}if(t=t.sibling,t!==null){Ie=t;return}Ie=t=e}while(t!==null);Fe===0&&(Fe=5)}function Er(e,t,s){var i=ye,n=St.transition;try{St.transition=null,ye=1,rp(e,t,s,i)}finally{St.transition=n,ye=i}return null}function rp(e,t,s,i){do ds();while(lr!==null);if(ge&6)throw Error(te(327));s=e.finishedWork;var n=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var l=s.lanes|s.childLanes;if(Ig(e,l),e===He&&(Ie=He=null,We=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Fi||(Fi=!0,vf(an,function(){return ds(),null})),l=(s.flags&15990)!==0,s.subtreeFlags&15990||l){l=St.transition,St.transition=null;var f=ye;ye=1;var a=ge;ge|=4,Pl.current=null,J0(e,s),cf(s,e),w0(no),ln=!!io,no=io=null,e.current=s,Y0(s),Ng(),ge=a,ye=f,St.transition=l}else e.current=s;if(Fi&&(Fi=!1,lr=e,kn=n),l=e.pendingLanes,l===0&&(pr=null),Pg(s.stateNode),dt(e,Re()),t!==null)for(i=e.onRecoverableError,s=0;s<t.length;s++)n=t[s],i(n.value,{componentStack:n.stack,digest:n.digest});if(Sn)throw Sn=!1,e=Co,Co=null,e;return kn&1&&e.tag!==0&&ds(),l=e.pendingLanes,l&1?e===No?Qs++:(Qs=0,No=e):Qs=0,jr(),null}function ds(){if(lr!==null){var e=Vu(kn),t=St.transition,s=ye;try{if(St.transition=null,ye=16>e?16:e,lr===null)var i=!1;else{if(e=lr,lr=null,kn=0,ge&6)throw Error(te(331));var n=ge;for(ge|=4,ie=e.current;ie!==null;){var l=ie,f=l.child;if(ie.flags&16){var a=l.deletions;if(a!==null){for(var o=0;o<a.length;o++){var m=a[o];for(ie=m;ie!==null;){var p=ie;switch(p.tag){case 0:case 11:case 15:Ws(8,p,l)}var g=p.child;if(g!==null)g.return=p,ie=g;else for(;ie!==null;){p=ie;var v=p.sibling,S=p.return;if(af(p),p===m){ie=null;break}if(v!==null){v.return=S,ie=v;break}ie=S}}}var w=l.alternate;if(w!==null){var y=w.child;if(y!==null){w.child=null;do{var d=y.sibling;y.sibling=null,y=d}while(y!==null)}}ie=l}}if(l.subtreeFlags&2064&&f!==null)f.return=l,ie=f;else e:for(;ie!==null;){if(l=ie,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Ws(9,l,l.return)}var u=l.sibling;if(u!==null){u.return=l.return,ie=u;break e}ie=l.return}}var c=e.current;for(ie=c;ie!==null;){f=ie;var h=f.child;if(f.subtreeFlags&2064&&h!==null)h.return=f,ie=h;else e:for(f=c;ie!==null;){if(a=ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:$n(9,a)}}catch(_){Te(a,a.return,_)}if(a===f){ie=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,ie=x;break e}ie=a.return}}if(ge=n,jr(),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Dn,e)}catch{}i=!0}return i}finally{ye=s,St.transition=t}}return!1}function Td(e,t,s){t=xs(s,t),t=Vh(e,t,1),e=gr(e,t,1),t=tt(),e!==null&&(vi(e,1,t),dt(e,t))}function Te(e,t,s){if(e.tag===3)Td(e,e,s);else for(;t!==null;){if(t.tag===3){Td(t,e,s);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(pr===null||!pr.has(i))){e=xs(s,e),e=Gh(t,e,1),t=gr(t,e,1),e=tt(),t!==null&&(vi(t,1,e),dt(t,e));break}}t=t.return}}function sp(e,t,s){var i=e.pingCache;i!==null&&i.delete(t),t=tt(),e.pingedLanes|=e.suspendedLanes&s,He===e&&(We&s)===s&&(Fe===4||Fe===3&&(We&130023424)===We&&500>Re()-Tl?Tr(e,0):Ll|=s),dt(e,t)}function pf(e,t){t===0&&(e.mode&1?(t=Mi,Mi<<=1,!(Mi&130023424)&&(Mi=4194304)):t=1);var s=tt();e=Vt(e,t),e!==null&&(vi(e,t,s),dt(e,s))}function ip(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),pf(e,s)}function np(e,t){var s=0;switch(e.tag){case 13:var i=e.stateNode,n=e.memoizedState;n!==null&&(s=n.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(te(314))}i!==null&&i.delete(t),pf(e,s)}var xf;xf=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||lt.current)ot=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return ot=!1,Q0(e,t,s);ot=!!(e.flags&131072)}else ot=!1,Ce&&t.flags&1048576&&bh(t,gn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Gi(e,t),e=t.pendingProps;var n=fs(t,Ye.current);cs(t,s),n=jl(null,t,i,e,n,s);var l=Cl();return t.flags|=1,typeof n=="object"&&n!==null&&typeof n.render=="function"&&n.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ct(i)?(l=!0,fn(t)):l=!1,t.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,bl(t),n.updater=Un,t.stateNode=n,n._reactInternals=t,go(t,i,e,s),t=vo(null,t,i,!0,l,s)):(t.tag=0,Ce&&l&&fl(t),et(null,t,n,s),t=t.child),t;case 16:i=t.elementType;e:{switch(Gi(e,t),e=t.pendingProps,n=i._init,i=n(i._payload),t.type=i,n=t.tag=op(i),e=Nt(i,e),n){case 0:t=xo(null,t,i,e,s);break e;case 1:t=wd(null,t,i,e,s);break e;case 11:t=bd(null,t,i,e,s);break e;case 14:t=_d(null,t,i,Nt(i.type,e),s);break e}throw Error(te(306,i,""))}return t;case 0:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Nt(i,n),xo(e,t,i,n,s);case 1:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Nt(i,n),wd(e,t,i,n,s);case 3:e:{if(Zh(t),e===null)throw Error(te(387));i=t.pendingProps,l=t.memoizedState,n=l.element,Ch(e,t),vn(t,i,null,s);var f=t.memoizedState;if(i=f.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:f.cache,pendingSuspenseBoundaries:f.pendingSuspenseBoundaries,transitions:f.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){n=xs(Error(te(423)),t),t=Sd(e,t,i,s,n);break e}else if(i!==n){n=xs(Error(te(424)),t),t=Sd(e,t,i,s,n);break e}else for(mt=mr(t.stateNode.containerInfo.firstChild),gt=t,Ce=!0,Mt=null,s=kh(t,null,i,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ms(),i===n){t=Gt(e,t,s);break e}et(e,t,i,s)}t=t.child}return t;case 5:return Nh(t),e===null&&ho(t),i=t.type,n=t.pendingProps,l=e!==null?e.memoizedProps:null,f=n.children,ao(i,n)?f=null:l!==null&&ao(i,l)&&(t.flags|=32),Xh(e,t),et(e,t,f,s),t.child;case 6:return e===null&&ho(t),null;case 13:return ef(e,t,s);case 4:return _l(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=gs(t,null,i,s):et(e,t,i,s),t.child;case 11:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Nt(i,n),bd(e,t,i,n,s);case 7:return et(e,t,t.pendingProps,s),t.child;case 8:return et(e,t,t.pendingProps.children,s),t.child;case 12:return et(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(i=t.type._context,n=t.pendingProps,l=t.memoizedProps,f=n.value,_e(pn,i._currentValue),i._currentValue=f,l!==null)if(Tt(l.value,f)){if(l.children===n.children&&!lt.current){t=Gt(e,t,s);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var a=l.dependencies;if(a!==null){f=l.child;for(var o=a.firstContext;o!==null;){if(o.context===i){if(l.tag===1){o=qt(-1,s&-s),o.tag=2;var m=l.updateQueue;if(m!==null){m=m.shared;var p=m.pending;p===null?o.next=o:(o.next=p.next,p.next=o),m.pending=o}}l.lanes|=s,o=l.alternate,o!==null&&(o.lanes|=s),fo(l.return,s,t),a.lanes|=s;break}o=o.next}}else if(l.tag===10)f=l.type===t.type?null:l.child;else if(l.tag===18){if(f=l.return,f===null)throw Error(te(341));f.lanes|=s,a=f.alternate,a!==null&&(a.lanes|=s),fo(f,s,t),f=l.sibling}else f=l.child;if(f!==null)f.return=l;else for(f=l;f!==null;){if(f===t){f=null;break}if(l=f.sibling,l!==null){l.return=f.return,f=l;break}f=f.return}l=f}et(e,t,n.children,s),t=t.child}return t;case 9:return n=t.type,i=t.pendingProps.children,cs(t,s),n=kt(n),i=i(n),t.flags|=1,et(e,t,i,s),t.child;case 14:return i=t.type,n=Nt(i,t.pendingProps),n=Nt(i.type,n),_d(e,t,i,n,s);case 15:return Jh(e,t,t.type,t.pendingProps,s);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Nt(i,n),Gi(e,t),t.tag=1,ct(i)?(e=!0,fn(t)):e=!1,cs(t,s),Kh(t,i,n),go(t,i,n,s),vo(null,t,i,!0,e,s);case 19:return tf(e,t,s);case 22:return Yh(e,t,s)}throw Error(te(156,t.tag))};function vf(e,t){return Wu(e,t)}function ap(e,t,s,i){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wt(e,t,s,i){return new ap(e,t,s,i)}function Il(e){return e=e.prototype,!(!e||!e.isReactComponent)}function op(e){if(typeof e=="function")return Il(e)?1:0;if(e!=null){if(e=e.$$typeof,e===tl)return 11;if(e===rl)return 14}return 2}function vr(e,t){var s=e.alternate;return s===null?(s=wt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Xi(e,t,s,i,n,l){var f=2;if(i=e,typeof e=="function")Il(e)&&(f=1);else if(typeof e=="string")f=5;else e:switch(e){case Qr:return Ar(s.children,n,l,t);case el:f=8,n|=8;break;case Ba:return e=wt(12,s,t,n|2),e.elementType=Ba,e.lanes=l,e;case Fa:return e=wt(13,s,t,n),e.elementType=Fa,e.lanes=l,e;case za:return e=wt(19,s,t,n),e.elementType=za,e.lanes=l,e;case Nu:return qn(s,n,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ju:f=10;break e;case Cu:f=9;break e;case tl:f=11;break e;case rl:f=14;break e;case rr:f=16,i=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=wt(f,s,t,n),t.elementType=e,t.type=i,t.lanes=l,t}function Ar(e,t,s,i){return e=wt(7,e,i,t),e.lanes=s,e}function qn(e,t,s,i){return e=wt(22,e,i,t),e.elementType=Nu,e.lanes=s,e.stateNode={isHidden:!1},e}function Na(e,t,s){return e=wt(6,e,null,t),e.lanes=s,e}function Ea(e,t,s){return t=wt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function lp(e,t,s,i,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=la(0),this.expirationTimes=la(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=la(0),this.identifierPrefix=i,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function Ol(e,t,s,i,n,l,f,a,o){return e=new lp(e,t,s,a,o),t===1?(t=1,l===!0&&(t|=8)):t=0,l=wt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:i,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},bl(l),e}function cp(e,t,s){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qr,key:i==null?null:""+i,children:e,containerInfo:t,implementation:s}}function yf(e){if(!e)return _r;e=e._reactInternals;e:{if(zr(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var s=e.type;if(ct(s))return vh(e,s,t)}return t}function bf(e,t,s,i,n,l,f,a,o){return e=Ol(s,i,!0,e,n,l,f,a,o),e.context=yf(null),s=e.current,i=tt(),n=xr(s),l=qt(i,n),l.callback=t??null,gr(s,l,n),e.current.lanes=n,vi(e,n,i),dt(e,i),e}function Qn(e,t,s,i){var n=t.current,l=tt(),f=xr(n);return s=yf(s),t.context===null?t.context=s:t.pendingContext=s,t=qt(l,f),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=gr(n,t,f),e!==null&&(Lt(e,n,f,l),Qi(e,n,f)),f}function Cn(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ad(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Bl(e,t){Ad(e,t),(e=e.alternate)&&Ad(e,t)}function dp(){return null}var _f=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fl(e){this._internalRoot=e}Kn.prototype.render=Fl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));Qn(e,t,null,null)};Kn.prototype.unmount=Fl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Br(function(){Qn(null,e,null,null)}),t[Kt]=null}};function Kn(e){this._internalRoot=e}Kn.prototype.unstable_scheduleHydration=function(e){if(e){var t=Yu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<nr.length&&t!==0&&t<nr[s].priority;s++);nr.splice(s,0,e),s===0&&Zu(e)}};function zl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Vn(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Rd(){}function up(e,t,s,i,n){if(n){if(typeof i=="function"){var l=i;i=function(){var m=Cn(f);l.call(m)}}var f=bf(t,i,e,0,null,!1,!1,"",Rd);return e._reactRootContainer=f,e[Kt]=f.current,ri(e.nodeType===8?e.parentNode:e),Br(),f}for(;n=e.lastChild;)e.removeChild(n);if(typeof i=="function"){var a=i;i=function(){var m=Cn(o);a.call(m)}}var o=Ol(e,0,!1,null,null,!1,!1,"",Rd);return e._reactRootContainer=o,e[Kt]=o.current,ri(e.nodeType===8?e.parentNode:e),Br(function(){Qn(t,o,s,i)}),o}function Gn(e,t,s,i,n){var l=s._reactRootContainer;if(l){var f=l;if(typeof n=="function"){var a=n;n=function(){var o=Cn(f);a.call(o)}}Qn(t,f,e,n)}else f=up(s,t,e,n,i);return Cn(f)}Gu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Is(t.pendingLanes);s!==0&&(nl(t,s|1),dt(t,Re()),!(ge&6)&&(vs=Re()+500,jr()))}break;case 13:Br(function(){var i=Vt(e,1);if(i!==null){var n=tt();Lt(i,e,1,n)}}),Bl(e,1)}};al=function(e){if(e.tag===13){var t=Vt(e,134217728);if(t!==null){var s=tt();Lt(t,e,134217728,s)}Bl(e,134217728)}};Ju=function(e){if(e.tag===13){var t=xr(e),s=Vt(e,t);if(s!==null){var i=tt();Lt(s,e,t,i)}Bl(e,t)}};Yu=function(){return ye};Xu=function(e,t){var s=ye;try{return ye=e,t()}finally{ye=s}};Ja=function(e,t,s){switch(t){case"input":if($a(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var i=s[t];if(i!==e&&i.form===e.form){var n=Fn(i);if(!n)throw Error(te(90));Mu(i),$a(i,n)}}}break;case"textarea":Lu(e,s);break;case"select":t=s.value,t!=null&&ns(e,!!s.multiple,t,!1)}};Bu=Al;Fu=Br;var hp={usingClientEntryPoint:!1,Events:[bi,Jr,Fn,Iu,Ou,Al]},As={findFiberByHostInstance:Mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fp={bundleType:As.bundleType,version:As.version,rendererPackageName:As.rendererPackageName,rendererConfig:As.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Uu(e),e===null?null:e.stateNode},findFiberByHostInstance:As.findFiberByHostInstance||dp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zi.isDisabled&&zi.supportsFiber)try{Dn=zi.inject(fp),Ft=zi}catch{}}xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hp;xt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zl(t))throw Error(te(200));return cp(e,t,null,s)};xt.createRoot=function(e,t){if(!zl(e))throw Error(te(299));var s=!1,i="",n=_f;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(n=t.onRecoverableError)),t=Ol(e,1,!1,null,null,s,!1,i,n),e[Kt]=t.current,ri(e.nodeType===8?e.parentNode:e),new Fl(t)};xt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=Uu(t),e=e===null?null:e.stateNode,e};xt.flushSync=function(e){return Br(e)};xt.hydrate=function(e,t,s){if(!Vn(t))throw Error(te(200));return Gn(null,e,t,!0,s)};xt.hydrateRoot=function(e,t,s){if(!zl(e))throw Error(te(405));var i=s!=null&&s.hydratedSources||null,n=!1,l="",f=_f;if(s!=null&&(s.unstable_strictMode===!0&&(n=!0),s.identifierPrefix!==void 0&&(l=s.identifierPrefix),s.onRecoverableError!==void 0&&(f=s.onRecoverableError)),t=bf(t,null,e,1,s??null,n,!1,l,f),e[Kt]=t.current,ri(e),i)for(e=0;e<i.length;e++)s=i[e],n=s._getVersion,n=n(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,n]:t.mutableSourceEagerHydrationData.push(s,n);return new Kn(t)};xt.render=function(e,t,s){if(!Vn(t))throw Error(te(200));return Gn(null,e,t,!1,s)};xt.unmountComponentAtNode=function(e){if(!Vn(e))throw Error(te(40));return e._reactRootContainer?(Br(function(){Gn(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1};xt.unstable_batchedUpdates=Al;xt.unstable_renderSubtreeIntoContainer=function(e,t,s,i){if(!Vn(s))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return Gn(e,t,s,!1,i)};xt.version="18.3.1-next-f1338f8080-20240426";function wf(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(wf)}catch(e){console.error(e)}}wf(),_u.exports=xt;var mp=_u.exports,Dd=mp;Ia.createRoot=Dd.createRoot,Ia.hydrateRoot=Dd.hydrateRoot;class Hr{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){const s={listener:t};return this.listeners.add(s),this.onSubscribe(),()=>{this.listeners.delete(s),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const ui=typeof window>"u"||"Deno"in window;function yt(){}function gp(e,t){return typeof e=="function"?e(t):e}function Po(e){return typeof e=="number"&&e>=0&&e!==1/0}function Id(e,t){return e.filter(s=>!t.includes(s))}function pp(e,t,s){const i=e.slice(0);return i[t]=s,i}function Sf(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ss(e,t,s){return wi(e)?typeof t=="function"?{...s,queryKey:e,queryFn:t}:{...t,queryKey:e}:e}function xp(e,t,s){return wi(e)?{...t,mutationKey:e}:typeof e=="function"?{...t,mutationFn:e}:{...e}}function ir(e,t,s){return wi(e)?[{...t,queryKey:e},s]:[e||{},t]}function Od(e,t){const{type:s="all",exact:i,fetchStatus:n,predicate:l,queryKey:f,stale:a}=e;if(wi(f)){if(i){if(t.queryHash!==Hl(f,t.options))return!1}else if(!Nn(t.queryKey,f))return!1}if(s!=="all"){const o=t.isActive();if(s==="active"&&!o||s==="inactive"&&o)return!1}return!(typeof a=="boolean"&&t.isStale()!==a||typeof n<"u"&&n!==t.state.fetchStatus||l&&!l(t))}function Bd(e,t){const{exact:s,fetching:i,predicate:n,mutationKey:l}=e;if(wi(l)){if(!t.options.mutationKey)return!1;if(s){if(cr(t.options.mutationKey)!==cr(l))return!1}else if(!Nn(t.options.mutationKey,l))return!1}return!(typeof i=="boolean"&&t.state.status==="loading"!==i||n&&!n(t))}function Hl(e,t){return((t==null?void 0:t.queryKeyHashFn)||cr)(e)}function cr(e){return JSON.stringify(e,(t,s)=>Lo(s)?Object.keys(s).sort().reduce((i,n)=>(i[n]=s[n],i),{}):s)}function Nn(e,t){return kf(e,t)}function kf(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(s=>!kf(e[s],t[s])):!1}function jf(e,t){if(e===t)return e;const s=Fd(e)&&Fd(t);if(s||Lo(e)&&Lo(t)){const i=s?e.length:Object.keys(e).length,n=s?t:Object.keys(t),l=n.length,f=s?[]:{};let a=0;for(let o=0;o<l;o++){const m=s?o:n[o];f[m]=jf(e[m],t[m]),f[m]===e[m]&&a++}return i===l&&a===i?e:f}return t}function En(e,t){if(e&&!t||t&&!e)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Fd(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Lo(e){if(!zd(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const s=t.prototype;return!(!zd(s)||!s.hasOwnProperty("isPrototypeOf"))}function zd(e){return Object.prototype.toString.call(e)==="[object Object]"}function wi(e){return Array.isArray(e)}function Cf(e){return new Promise(t=>{setTimeout(t,e)})}function Hd(e){Cf(0).then(e)}function vp(){if(typeof AbortController=="function")return new AbortController}function To(e,t,s){return s.isDataEqual!=null&&s.isDataEqual(e,t)?e:typeof s.structuralSharing=="function"?s.structuralSharing(e,t):s.structuralSharing!==!1?jf(e,t):t}class yp extends Hr{constructor(){super(),this.setup=t=>{if(!ui&&window.addEventListener){const s=()=>t();return window.addEventListener("visibilitychange",s,!1),window.addEventListener("focus",s,!1),()=>{window.removeEventListener("visibilitychange",s),window.removeEventListener("focus",s)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var s;this.setup=t,(s=this.cleanup)==null||s.call(this),this.cleanup=t(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()})}setFocused(t){this.focused!==t&&(this.focused=t,this.onFocus())}onFocus(){this.listeners.forEach(({listener:t})=>{t()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Mn=new yp,Ud=["online","offline"];class bp extends Hr{constructor(){super(),this.setup=t=>{if(!ui&&window.addEventListener){const s=()=>t();return Ud.forEach(i=>{window.addEventListener(i,s,!1)}),()=>{Ud.forEach(i=>{window.removeEventListener(i,s)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.cleanup)==null||t.call(this),this.cleanup=void 0}}setEventListener(t){var s;this.setup=t,(s=this.cleanup)==null||s.call(this),this.cleanup=t(i=>{typeof i=="boolean"?this.setOnline(i):this.onOnline()})}setOnline(t){this.online!==t&&(this.online=t,this.onOnline())}onOnline(){this.listeners.forEach(({listener:t})=>{t()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Pn=new bp;function _p(e){return Math.min(1e3*2**e,3e4)}function Jn(e){return(e??"online")==="online"?Pn.isOnline():!0}class Nf{constructor(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}}function Zi(e){return e instanceof Nf}function Ef(e){let t=!1,s=0,i=!1,n,l,f;const a=new Promise((d,u)=>{l=d,f=u}),o=d=>{i||(S(new Nf(d)),e.abort==null||e.abort())},m=()=>{t=!0},p=()=>{t=!1},g=()=>!Mn.isFocused()||e.networkMode!=="always"&&!Pn.isOnline(),v=d=>{i||(i=!0,e.onSuccess==null||e.onSuccess(d),n==null||n(),l(d))},S=d=>{i||(i=!0,e.onError==null||e.onError(d),n==null||n(),f(d))},w=()=>new Promise(d=>{n=u=>{const c=i||!g();return c&&d(u),c},e.onPause==null||e.onPause()}).then(()=>{n=void 0,i||e.onContinue==null||e.onContinue()}),y=()=>{if(i)return;let d;try{d=e.fn()}catch(u){d=Promise.reject(u)}Promise.resolve(d).then(v).catch(u=>{var c,h;if(i)return;const x=(c=e.retry)!=null?c:3,_=(h=e.retryDelay)!=null?h:_p,k=typeof _=="function"?_(s,u):_,j=x===!0||typeof x=="number"&&s<x||typeof x=="function"&&x(s,u);if(t||!j){S(u);return}s++,e.onFail==null||e.onFail(s,u),Cf(k).then(()=>{if(g())return w()}).then(()=>{t?S(u):y()})})};return Jn(e.networkMode)?y():w().then(y),{promise:a,cancel:o,continue:()=>(n==null?void 0:n())?a:Promise.resolve(),cancelRetry:m,continueRetry:p}}const Ul=console;function wp(){let e=[],t=0,s=p=>{p()},i=p=>{p()};const n=p=>{let g;t++;try{g=p()}finally{t--,t||a()}return g},l=p=>{t?e.push(p):Hd(()=>{s(p)})},f=p=>(...g)=>{l(()=>{p(...g)})},a=()=>{const p=e;e=[],p.length&&Hd(()=>{i(()=>{p.forEach(g=>{s(g)})})})};return{batch:n,batchCalls:f,schedule:l,setNotifyFunction:p=>{s=p},setBatchNotifyFunction:p=>{i=p}}}const Se=wp();class Mf{destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Po(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(t){this.cacheTime=Math.max(this.cacheTime||0,t??(ui?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class Sp extends Mf{constructor(t){super(),this.abortSignalConsumed=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.logger=t.logger||Ul,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||kp(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(t,s){const i=To(this.state.data,t,this.options);return this.dispatch({data:i,type:"success",dataUpdatedAt:s==null?void 0:s.updatedAt,manual:s==null?void 0:s.manual}),i}setState(t,s){this.dispatch({type:"setState",state:t,setStateOptions:s})}cancel(t){var s;const i=this.promise;return(s=this.retryer)==null||s.cancel(t),i?i.then(yt).catch(yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(t=>t.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(t=>t.getCurrentResult().isStale)}isStaleByTime(t=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!Sf(this.state.dataUpdatedAt,t)}onFocus(){var t;const s=this.observers.find(i=>i.shouldFetchOnWindowFocus());s&&s.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}onOnline(){var t;const s=this.observers.find(i=>i.shouldFetchOnReconnect());s&&s.refetch({cancelRefetch:!1}),(t=this.retryer)==null||t.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(s=>s!==t),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(t,s){var i,n;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&s!=null&&s.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var l;return(l=this.retryer)==null||l.continueRetry(),this.promise}}if(t&&this.setOptions(t),!this.options.queryFn){const S=this.observers.find(w=>w.options.queryFn);S&&this.setOptions(S.options)}const f=vp(),a={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},o=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>{if(f)return this.abortSignalConsumed=!0,f.signal}})};o(a);const m=()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(a)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),p={fetchOptions:s,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:m};if(o(p),(i=this.options.behavior)==null||i.onFetch(p),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((n=p.fetchOptions)==null?void 0:n.meta)){var g;this.dispatch({type:"fetch",meta:(g=p.fetchOptions)==null?void 0:g.meta})}const v=S=>{if(Zi(S)&&S.silent||this.dispatch({type:"error",error:S}),!Zi(S)){var w,y,d,u;(w=(y=this.cache.config).onError)==null||w.call(y,S,this),(d=(u=this.cache.config).onSettled)==null||d.call(u,this.state.data,S,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.retryer=Ef({fn:p.fetchFn,abort:f==null?void 0:f.abort.bind(f),onSuccess:S=>{var w,y,d,u;if(typeof S>"u"){v(new Error(this.queryHash+" data is undefined"));return}this.setData(S),(w=(y=this.cache.config).onSuccess)==null||w.call(y,S,this),(d=(u=this.cache.config).onSettled)==null||d.call(u,S,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:v,onFail:(S,w)=>{this.dispatch({type:"failed",failureCount:S,error:w})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:p.options.retry,retryDelay:p.options.retryDelay,networkMode:p.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(t){const s=i=>{var n,l;switch(t.type){case"failed":return{...i,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(n=t.meta)!=null?n:null,fetchStatus:Jn(this.options.networkMode)?"fetching":"paused",...!i.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...i,data:t.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:(l=t.dataUpdatedAt)!=null?l:Date.now(),error:null,isInvalidated:!1,status:"success",...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const f=t.error;return Zi(f)&&f.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...i,error:f,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:f,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...t.state}}};this.state=s(this.state),Se.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate(t)}),this.cache.notify({query:this,type:"updated",action:t})})}}function kp(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,s=typeof t<"u",i=s?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"loading",fetchStatus:"idle"}}class jp extends Hr{constructor(t){super(),this.config=t||{},this.queries=[],this.queriesMap={}}build(t,s,i){var n;const l=s.queryKey,f=(n=s.queryHash)!=null?n:Hl(l,s);let a=this.get(f);return a||(a=new Sp({cache:this,logger:t.getLogger(),queryKey:l,queryHash:f,options:t.defaultQueryOptions(s),state:i,defaultOptions:t.getQueryDefaults(l)}),this.add(a)),a}add(t){this.queriesMap[t.queryHash]||(this.queriesMap[t.queryHash]=t,this.queries.push(t),this.notify({type:"added",query:t}))}remove(t){const s=this.queriesMap[t.queryHash];s&&(t.destroy(),this.queries=this.queries.filter(i=>i!==t),s===t&&delete this.queriesMap[t.queryHash],this.notify({type:"removed",query:t}))}clear(){Se.batch(()=>{this.queries.forEach(t=>{this.remove(t)})})}get(t){return this.queriesMap[t]}getAll(){return this.queries}find(t,s){const[i]=ir(t,s);return typeof i.exact>"u"&&(i.exact=!0),this.queries.find(n=>Od(i,n))}findAll(t,s){const[i]=ir(t,s);return Object.keys(i).length>0?this.queries.filter(n=>Od(i,n)):this.queries}notify(t){Se.batch(()=>{this.listeners.forEach(({listener:s})=>{s(t)})})}onFocus(){Se.batch(()=>{this.queries.forEach(t=>{t.onFocus()})})}onOnline(){Se.batch(()=>{this.queries.forEach(t=>{t.onOnline()})})}}class Cp extends Mf{constructor(t){super(),this.defaultOptions=t.defaultOptions,this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.logger=t.logger||Ul,this.observers=[],this.state=t.state||Pf(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options={...this.defaultOptions,...t},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(t){this.dispatch({type:"setState",state:t})}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){this.observers=this.observers.filter(s=>s!==t),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var t,s;return(t=(s=this.retryer)==null?void 0:s.continue())!=null?t:this.execute()}async execute(){const t=()=>{var j;return this.retryer=Ef({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(b,C)=>{this.dispatch({type:"failed",failureCount:b,error:C})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(j=this.options.retry)!=null?j:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},s=this.state.status==="loading";try{var i,n,l,f,a,o,m,p;if(!s){var g,v,S,w;this.dispatch({type:"loading",variables:this.options.variables}),await((g=(v=this.mutationCache.config).onMutate)==null?void 0:g.call(v,this.state.variables,this));const b=await((S=(w=this.options).onMutate)==null?void 0:S.call(w,this.state.variables));b!==this.state.context&&this.dispatch({type:"loading",context:b,variables:this.state.variables})}const j=await t();return await((i=(n=this.mutationCache.config).onSuccess)==null?void 0:i.call(n,j,this.state.variables,this.state.context,this)),await((l=(f=this.options).onSuccess)==null?void 0:l.call(f,j,this.state.variables,this.state.context)),await((a=(o=this.mutationCache.config).onSettled)==null?void 0:a.call(o,j,null,this.state.variables,this.state.context,this)),await((m=(p=this.options).onSettled)==null?void 0:m.call(p,j,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:j}),j}catch(j){try{var y,d,u,c,h,x,_,k;throw await((y=(d=this.mutationCache.config).onError)==null?void 0:y.call(d,j,this.state.variables,this.state.context,this)),await((u=(c=this.options).onError)==null?void 0:u.call(c,j,this.state.variables,this.state.context)),await((h=(x=this.mutationCache.config).onSettled)==null?void 0:h.call(x,void 0,j,this.state.variables,this.state.context,this)),await((_=(k=this.options).onSettled)==null?void 0:_.call(k,void 0,j,this.state.variables,this.state.context)),j}finally{this.dispatch({type:"error",error:j})}}}dispatch(t){const s=i=>{switch(t.type){case"failed":return{...i,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"loading":return{...i,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!Jn(this.options.networkMode),status:"loading",variables:t.variables};case"success":return{...i,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:t.error,failureCount:i.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"};case"setState":return{...i,...t.state}}};this.state=s(this.state),Se.batch(()=>{this.observers.forEach(i=>{i.onMutationUpdate(t)}),this.mutationCache.notify({mutation:this,type:"updated",action:t})})}}function Pf(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}class Np extends Hr{constructor(t){super(),this.config=t||{},this.mutations=[],this.mutationId=0}build(t,s,i){const n=new Cp({mutationCache:this,logger:t.getLogger(),mutationId:++this.mutationId,options:t.defaultMutationOptions(s),state:i,defaultOptions:s.mutationKey?t.getMutationDefaults(s.mutationKey):void 0});return this.add(n),n}add(t){this.mutations.push(t),this.notify({type:"added",mutation:t})}remove(t){this.mutations=this.mutations.filter(s=>s!==t),this.notify({type:"removed",mutation:t})}clear(){Se.batch(()=>{this.mutations.forEach(t=>{this.remove(t)})})}getAll(){return this.mutations}find(t){return typeof t.exact>"u"&&(t.exact=!0),this.mutations.find(s=>Bd(t,s))}findAll(t){return this.mutations.filter(s=>Bd(t,s))}notify(t){Se.batch(()=>{this.listeners.forEach(({listener:s})=>{s(t)})})}resumePausedMutations(){var t;return this.resuming=((t=this.resuming)!=null?t:Promise.resolve()).then(()=>{const s=this.mutations.filter(i=>i.state.isPaused);return Se.batch(()=>s.reduce((i,n)=>i.then(()=>n.continue().catch(yt)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function Ao(){return{onFetch:e=>{e.fetchFn=()=>{var t,s,i,n,l,f;const a=(t=e.fetchOptions)==null||(s=t.meta)==null?void 0:s.refetchPage,o=(i=e.fetchOptions)==null||(n=i.meta)==null?void 0:n.fetchMore,m=o==null?void 0:o.pageParam,p=(o==null?void 0:o.direction)==="forward",g=(o==null?void 0:o.direction)==="backward",v=((l=e.state.data)==null?void 0:l.pages)||[],S=((f=e.state.data)==null?void 0:f.pageParams)||[];let w=S,y=!1;const d=k=>{Object.defineProperty(k,"signal",{enumerable:!0,get:()=>{var j;if((j=e.signal)!=null&&j.aborted)y=!0;else{var b;(b=e.signal)==null||b.addEventListener("abort",()=>{y=!0})}return e.signal}})},u=e.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+e.options.queryHash+"'")),c=(k,j,b,C)=>(w=C?[j,...w]:[...w,j],C?[b,...k]:[...k,b]),h=(k,j,b,C)=>{if(y)return Promise.reject("Cancelled");if(typeof b>"u"&&!j&&k.length)return Promise.resolve(k);const M={queryKey:e.queryKey,pageParam:b,meta:e.options.meta};d(M);const L=u(M);return Promise.resolve(L).then(D=>c(k,b,D,C))};let x;if(!v.length)x=h([]);else if(p){const k=typeof m<"u",j=k?m:Ro(e.options,v);x=h(v,k,j)}else if(g){const k=typeof m<"u",j=k?m:Lf(e.options,v);x=h(v,k,j,!0)}else{w=[];const k=typeof e.options.getNextPageParam>"u";x=(a&&v[0]?a(v[0],0,v):!0)?h([],k,S[0]):Promise.resolve(c([],S[0],v[0]));for(let b=1;b<v.length;b++)x=x.then(C=>{if(a&&v[b]?a(v[b],b,v):!0){const L=k?S[b]:Ro(e.options,C);return h(C,k,L)}return Promise.resolve(c(C,S[b],v[b]))})}return x.then(k=>({pages:k,pageParams:w}))}}}}function Ro(e,t){return e.getNextPageParam==null?void 0:e.getNextPageParam(t[t.length-1],t)}function Lf(e,t){return e.getPreviousPageParam==null?void 0:e.getPreviousPageParam(t[0],t)}function Ep(e,t){if(e.getNextPageParam&&Array.isArray(t)){const s=Ro(e,t);return typeof s<"u"&&s!==null&&s!==!1}}function Mp(e,t){if(e.getPreviousPageParam&&Array.isArray(t)){const s=Lf(e,t);return typeof s<"u"&&s!==null&&s!==!1}}class Pp{constructor(t={}){this.queryCache=t.queryCache||new jp,this.mutationCache=t.mutationCache||new Np,this.logger=t.logger||Ul,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Mn.subscribe(()=>{Mn.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Pn.subscribe(()=>{Pn.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var t,s;this.mountCount--,this.mountCount===0&&((t=this.unsubscribeFocus)==null||t.call(this),this.unsubscribeFocus=void 0,(s=this.unsubscribeOnline)==null||s.call(this),this.unsubscribeOnline=void 0)}isFetching(t,s){const[i]=ir(t,s);return i.fetchStatus="fetching",this.queryCache.findAll(i).length}isMutating(t){return this.mutationCache.findAll({...t,fetching:!0}).length}getQueryData(t,s){var i;return(i=this.queryCache.find(t,s))==null?void 0:i.state.data}ensureQueryData(t,s,i){const n=ss(t,s,i),l=this.getQueryData(n.queryKey);return l?Promise.resolve(l):this.fetchQuery(n)}getQueriesData(t){return this.getQueryCache().findAll(t).map(({queryKey:s,state:i})=>{const n=i.data;return[s,n]})}setQueryData(t,s,i){const n=this.queryCache.find(t),l=n==null?void 0:n.state.data,f=gp(s,l);if(typeof f>"u")return;const a=ss(t),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(f,{...i,manual:!0})}setQueriesData(t,s,i){return Se.batch(()=>this.getQueryCache().findAll(t).map(({queryKey:n})=>[n,this.setQueryData(n,s,i)]))}getQueryState(t,s){var i;return(i=this.queryCache.find(t,s))==null?void 0:i.state}removeQueries(t,s){const[i]=ir(t,s),n=this.queryCache;Se.batch(()=>{n.findAll(i).forEach(l=>{n.remove(l)})})}resetQueries(t,s,i){const[n,l]=ir(t,s,i),f=this.queryCache,a={type:"active",...n};return Se.batch(()=>(f.findAll(n).forEach(o=>{o.reset()}),this.refetchQueries(a,l)))}cancelQueries(t,s,i){const[n,l={}]=ir(t,s,i);typeof l.revert>"u"&&(l.revert=!0);const f=Se.batch(()=>this.queryCache.findAll(n).map(a=>a.cancel(l)));return Promise.all(f).then(yt).catch(yt)}invalidateQueries(t,s,i){const[n,l]=ir(t,s,i);return Se.batch(()=>{var f,a;if(this.queryCache.findAll(n).forEach(m=>{m.invalidate()}),n.refetchType==="none")return Promise.resolve();const o={...n,type:(f=(a=n.refetchType)!=null?a:n.type)!=null?f:"active"};return this.refetchQueries(o,l)})}refetchQueries(t,s,i){const[n,l]=ir(t,s,i),f=Se.batch(()=>this.queryCache.findAll(n).filter(o=>!o.isDisabled()).map(o=>{var m;return o.fetch(void 0,{...l,cancelRefetch:(m=l==null?void 0:l.cancelRefetch)!=null?m:!0,meta:{refetchPage:n.refetchPage}})}));let a=Promise.all(f).then(yt);return l!=null&&l.throwOnError||(a=a.catch(yt)),a}fetchQuery(t,s,i){const n=ss(t,s,i),l=this.defaultQueryOptions(n);typeof l.retry>"u"&&(l.retry=!1);const f=this.queryCache.build(this,l);return f.isStaleByTime(l.staleTime)?f.fetch(l):Promise.resolve(f.state.data)}prefetchQuery(t,s,i){return this.fetchQuery(t,s,i).then(yt).catch(yt)}fetchInfiniteQuery(t,s,i){const n=ss(t,s,i);return n.behavior=Ao(),this.fetchQuery(n)}prefetchInfiniteQuery(t,s,i){return this.fetchInfiniteQuery(t,s,i).then(yt).catch(yt)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(t){this.defaultOptions=t}setQueryDefaults(t,s){const i=this.queryDefaults.find(n=>cr(t)===cr(n.queryKey));i?i.defaultOptions=s:this.queryDefaults.push({queryKey:t,defaultOptions:s})}getQueryDefaults(t){if(!t)return;const s=this.queryDefaults.find(i=>Nn(t,i.queryKey));return s==null?void 0:s.defaultOptions}setMutationDefaults(t,s){const i=this.mutationDefaults.find(n=>cr(t)===cr(n.mutationKey));i?i.defaultOptions=s:this.mutationDefaults.push({mutationKey:t,defaultOptions:s})}getMutationDefaults(t){if(!t)return;const s=this.mutationDefaults.find(i=>Nn(t,i.mutationKey));return s==null?void 0:s.defaultOptions}defaultQueryOptions(t){if(t!=null&&t._defaulted)return t;const s={...this.defaultOptions.queries,...this.getQueryDefaults(t==null?void 0:t.queryKey),...t,_defaulted:!0};return!s.queryHash&&s.queryKey&&(s.queryHash=Hl(s.queryKey,s)),typeof s.refetchOnReconnect>"u"&&(s.refetchOnReconnect=s.networkMode!=="always"),typeof s.useErrorBoundary>"u"&&(s.useErrorBoundary=!!s.suspense),s}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...this.defaultOptions.mutations,...this.getMutationDefaults(t==null?void 0:t.mutationKey),...t,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}class $l extends Hr{constructor(t,s){super(),this.client=t,this.options=s,this.trackedProps=new Set,this.selectError=null,this.bindMethods(),this.setOptions(s)}bindMethods(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.currentQuery.addObserver(this),$d(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Do(this.currentQuery,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Do(this.currentQuery,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.clearStaleTimeout(),this.clearRefetchInterval(),this.currentQuery.removeObserver(this)}setOptions(t,s){const i=this.options,n=this.currentQuery;if(this.options=this.client.defaultQueryOptions(t),En(i,this.options)||this.client.getQueryCache().notify({type:"observerOptionsUpdated",query:this.currentQuery,observer:this}),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=i.queryKey),this.updateQuery();const l=this.hasListeners();l&&Wd(this.currentQuery,n,this.options,i)&&this.executeFetch(),this.updateResult(s),l&&(this.currentQuery!==n||this.options.enabled!==i.enabled||this.options.staleTime!==i.staleTime)&&this.updateStaleTimeout();const f=this.computeRefetchInterval();l&&(this.currentQuery!==n||this.options.enabled!==i.enabled||f!==this.currentRefetchInterval)&&this.updateRefetchInterval(f)}getOptimisticResult(t){const s=this.client.getQueryCache().build(this.client,t),i=this.createResult(s,t);return Tp(this,i,t)&&(this.currentResult=i,this.currentResultOptions=this.options,this.currentResultState=this.currentQuery.state),i}getCurrentResult(){return this.currentResult}trackResult(t){const s={};return Object.keys(t).forEach(i=>{Object.defineProperty(s,i,{configurable:!1,enumerable:!0,get:()=>(this.trackedProps.add(i),t[i])})}),s}getCurrentQuery(){return this.currentQuery}remove(){this.client.getQueryCache().remove(this.currentQuery)}refetch({refetchPage:t,...s}={}){return this.fetch({...s,meta:{refetchPage:t}})}fetchOptimistic(t){const s=this.client.defaultQueryOptions(t),i=this.client.getQueryCache().build(this.client,s);return i.isFetchingOptimistic=!0,i.fetch().then(()=>this.createResult(i,s))}fetch(t){var s;return this.executeFetch({...t,cancelRefetch:(s=t.cancelRefetch)!=null?s:!0}).then(()=>(this.updateResult(),this.currentResult))}executeFetch(t){this.updateQuery();let s=this.currentQuery.fetch(this.options,t);return t!=null&&t.throwOnError||(s=s.catch(yt)),s}updateStaleTimeout(){if(this.clearStaleTimeout(),ui||this.currentResult.isStale||!Po(this.options.staleTime))return;const s=Sf(this.currentResult.dataUpdatedAt,this.options.staleTime)+1;this.staleTimeoutId=setTimeout(()=>{this.currentResult.isStale||this.updateResult()},s)}computeRefetchInterval(){var t;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(t=this.options.refetchInterval)!=null?t:!1}updateRefetchInterval(t){this.clearRefetchInterval(),this.currentRefetchInterval=t,!(ui||this.options.enabled===!1||!Po(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(()=>{(this.options.refetchIntervalInBackground||Mn.isFocused())&&this.executeFetch()},this.currentRefetchInterval))}updateTimers(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())}clearStaleTimeout(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)}clearRefetchInterval(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)}createResult(t,s){const i=this.currentQuery,n=this.options,l=this.currentResult,f=this.currentResultState,a=this.currentResultOptions,o=t!==i,m=o?t.state:this.currentQueryInitialState,p=o?this.currentResult:this.previousQueryResult,{state:g}=t;let{dataUpdatedAt:v,error:S,errorUpdatedAt:w,fetchStatus:y,status:d}=g,u=!1,c=!1,h;if(s._optimisticResults){const b=this.hasListeners(),C=!b&&$d(t,s),M=b&&Wd(t,i,s,n);(C||M)&&(y=Jn(t.options.networkMode)?"fetching":"paused",v||(d="loading")),s._optimisticResults==="isRestoring"&&(y="idle")}if(s.keepPreviousData&&!g.dataUpdatedAt&&p!=null&&p.isSuccess&&d!=="error")h=p.data,v=p.dataUpdatedAt,d=p.status,u=!0;else if(s.select&&typeof g.data<"u")if(l&&g.data===(f==null?void 0:f.data)&&s.select===this.selectFn)h=this.selectResult;else try{this.selectFn=s.select,h=s.select(g.data),h=To(l==null?void 0:l.data,h,s),this.selectResult=h,this.selectError=null}catch(b){this.selectError=b}else h=g.data;if(typeof s.placeholderData<"u"&&typeof h>"u"&&d==="loading"){let b;if(l!=null&&l.isPlaceholderData&&s.placeholderData===(a==null?void 0:a.placeholderData))b=l.data;else if(b=typeof s.placeholderData=="function"?s.placeholderData():s.placeholderData,s.select&&typeof b<"u")try{b=s.select(b),this.selectError=null}catch(C){this.selectError=C}typeof b<"u"&&(d="success",h=To(l==null?void 0:l.data,b,s),c=!0)}this.selectError&&(S=this.selectError,h=this.selectResult,w=Date.now(),d="error");const x=y==="fetching",_=d==="loading",k=d==="error";return{status:d,fetchStatus:y,isLoading:_,isSuccess:d==="success",isError:k,isInitialLoading:_&&x,data:h,dataUpdatedAt:v,error:S,errorUpdatedAt:w,failureCount:g.fetchFailureCount,failureReason:g.fetchFailureReason,errorUpdateCount:g.errorUpdateCount,isFetched:g.dataUpdateCount>0||g.errorUpdateCount>0,isFetchedAfterMount:g.dataUpdateCount>m.dataUpdateCount||g.errorUpdateCount>m.errorUpdateCount,isFetching:x,isRefetching:x&&!_,isLoadingError:k&&g.dataUpdatedAt===0,isPaused:y==="paused",isPlaceholderData:c,isPreviousData:u,isRefetchError:k&&g.dataUpdatedAt!==0,isStale:Wl(t,s),refetch:this.refetch,remove:this.remove}}updateResult(t){const s=this.currentResult,i=this.createResult(this.currentQuery,this.options);if(this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,En(i,s))return;this.currentResult=i;const n={cache:!0},l=()=>{if(!s)return!0;const{notifyOnChangeProps:f}=this.options,a=typeof f=="function"?f():f;if(a==="all"||!a&&!this.trackedProps.size)return!0;const o=new Set(a??this.trackedProps);return this.options.useErrorBoundary&&o.add("error"),Object.keys(this.currentResult).some(m=>{const p=m;return this.currentResult[p]!==s[p]&&o.has(p)})};(t==null?void 0:t.listeners)!==!1&&l()&&(n.listeners=!0),this.notify({...n,...t})}updateQuery(){const t=this.client.getQueryCache().build(this.client,this.options);if(t===this.currentQuery)return;const s=this.currentQuery;this.currentQuery=t,this.currentQueryInitialState=t.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(s==null||s.removeObserver(this),t.addObserver(this))}onQueryUpdate(t){const s={};t.type==="success"?s.onSuccess=!t.manual:t.type==="error"&&!Zi(t.error)&&(s.onError=!0),this.updateResult(s),this.hasListeners()&&this.updateTimers()}notify(t){Se.batch(()=>{if(t.onSuccess){var s,i,n,l;(s=(i=this.options).onSuccess)==null||s.call(i,this.currentResult.data),(n=(l=this.options).onSettled)==null||n.call(l,this.currentResult.data,null)}else if(t.onError){var f,a,o,m;(f=(a=this.options).onError)==null||f.call(a,this.currentResult.error),(o=(m=this.options).onSettled)==null||o.call(m,void 0,this.currentResult.error)}t.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)}),t.cache&&this.client.getQueryCache().notify({query:this.currentQuery,type:"observerResultsUpdated"})})}}function Lp(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function $d(e,t){return Lp(e,t)||e.state.dataUpdatedAt>0&&Do(e,t,t.refetchOnMount)}function Do(e,t,s){if(t.enabled!==!1){const i=typeof s=="function"?s(e):s;return i==="always"||i!==!1&&Wl(e,t)}return!1}function Wd(e,t,s,i){return s.enabled!==!1&&(e!==t||i.enabled===!1)&&(!s.suspense||e.state.status!=="error")&&Wl(e,s)}function Wl(e,t){return e.isStaleByTime(t.staleTime)}function Tp(e,t,s){return s.keepPreviousData?!1:s.placeholderData!==void 0?t.isPlaceholderData:!En(e.getCurrentResult(),t)}class Ap extends Hr{constructor(t,s){super(),this.client=t,this.queries=[],this.result=[],this.observers=[],this.observersMap={},s&&this.setQueries(s)}onSubscribe(){this.listeners.size===1&&this.observers.forEach(t=>{t.subscribe(s=>{this.onUpdate(t,s)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.observers.forEach(t=>{t.destroy()})}setQueries(t,s){this.queries=t,Se.batch(()=>{const i=this.observers,n=this.findMatchingObservers(this.queries);n.forEach(m=>m.observer.setOptions(m.defaultedQueryOptions,s));const l=n.map(m=>m.observer),f=Object.fromEntries(l.map(m=>[m.options.queryHash,m])),a=l.map(m=>m.getCurrentResult()),o=l.some((m,p)=>m!==i[p]);i.length===l.length&&!o||(this.observers=l,this.observersMap=f,this.result=a,this.hasListeners()&&(Id(i,l).forEach(m=>{m.destroy()}),Id(l,i).forEach(m=>{m.subscribe(p=>{this.onUpdate(m,p)})}),this.notify()))})}getCurrentResult(){return this.result}getQueries(){return this.observers.map(t=>t.getCurrentQuery())}getObservers(){return this.observers}getOptimisticResult(t){return this.findMatchingObservers(t).map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions))}findMatchingObservers(t){const s=this.observers,i=new Map(s.map(S=>[S.options.queryHash,S])),n=t.map(S=>this.client.defaultQueryOptions(S)),l=n.flatMap(S=>{const w=i.get(S.queryHash);return w!=null?[{defaultedQueryOptions:S,observer:w}]:[]}),f=new Set(l.map(S=>S.defaultedQueryOptions.queryHash)),a=n.filter(S=>!f.has(S.queryHash)),o=new Set(l.map(S=>S.observer)),m=s.filter(S=>!o.has(S)),p=S=>{const w=this.client.defaultQueryOptions(S),y=this.observersMap[w.queryHash];return y??new $l(this.client,w)},g=a.map((S,w)=>{if(S.keepPreviousData){const y=m[w];if(y!==void 0)return{defaultedQueryOptions:S,observer:y}}return{defaultedQueryOptions:S,observer:p(S)}}),v=(S,w)=>n.indexOf(S.defaultedQueryOptions)-n.indexOf(w.defaultedQueryOptions);return l.concat(g).sort(v)}onUpdate(t,s){const i=this.observers.indexOf(t);i!==-1&&(this.result=pp(this.result,i,s),this.notify())}notify(){Se.batch(()=>{this.listeners.forEach(({listener:t})=>{t(this.result)})})}}class Rp extends $l{constructor(t,s){super(t,s)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(t,s){super.setOptions({...t,behavior:Ao()},s)}getOptimisticResult(t){return t.behavior=Ao(),super.getOptimisticResult(t)}fetchNextPage({pageParam:t,...s}={}){return this.fetch({...s,meta:{fetchMore:{direction:"forward",pageParam:t}}})}fetchPreviousPage({pageParam:t,...s}={}){return this.fetch({...s,meta:{fetchMore:{direction:"backward",pageParam:t}}})}createResult(t,s){var i,n,l,f,a,o;const{state:m}=t,p=super.createResult(t,s),{isFetching:g,isRefetching:v}=p,S=g&&((i=m.fetchMeta)==null||(n=i.fetchMore)==null?void 0:n.direction)==="forward",w=g&&((l=m.fetchMeta)==null||(f=l.fetchMore)==null?void 0:f.direction)==="backward";return{...p,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Ep(s,(a=m.data)==null?void 0:a.pages),hasPreviousPage:Mp(s,(o=m.data)==null?void 0:o.pages),isFetchingNextPage:S,isFetchingPreviousPage:w,isRefetching:v&&!S&&!w}}}let Dp=class extends Hr{constructor(t,s){super(),this.client=t,this.setOptions(s),this.bindMethods(),this.updateResult()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var s;const i=this.options;this.options=this.client.defaultMutationOptions(t),En(i,this.options)||this.client.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.currentMutation,observer:this}),(s=this.currentMutation)==null||s.setOptions(this.options)}onUnsubscribe(){if(!this.hasListeners()){var t;(t=this.currentMutation)==null||t.removeObserver(this)}}onMutationUpdate(t){this.updateResult();const s={listeners:!0};t.type==="success"?s.onSuccess=!0:t.type==="error"&&(s.onError=!0),this.notify(s)}getCurrentResult(){return this.currentResult}reset(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})}mutate(t,s){return this.mutateOptions=s,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,{...this.options,variables:typeof t<"u"?t:this.options.variables}),this.currentMutation.addObserver(this),this.currentMutation.execute()}updateResult(){const t=this.currentMutation?this.currentMutation.state:Pf(),s=t.status==="loading",i={...t,isLoading:s,isPending:s,isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset};this.currentResult=i}notify(t){Se.batch(()=>{if(this.mutateOptions&&this.hasListeners()){if(t.onSuccess){var s,i,n,l;(s=(i=this.mutateOptions).onSuccess)==null||s.call(i,this.currentResult.data,this.currentResult.variables,this.currentResult.context),(n=(l=this.mutateOptions).onSettled)==null||n.call(l,this.currentResult.data,null,this.currentResult.variables,this.currentResult.context)}else if(t.onError){var f,a,o,m;(f=(a=this.mutateOptions).onError)==null||f.call(a,this.currentResult.error,this.currentResult.variables,this.currentResult.context),(o=(m=this.mutateOptions).onSettled)==null||o.call(m,void 0,this.currentResult.error,this.currentResult.variables,this.currentResult.context)}}t.listeners&&this.listeners.forEach(({listener:p})=>{p(this.currentResult)})})}};var Tf={exports:{}},Af={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ys=R;function Ip(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Op=typeof Object.is=="function"?Object.is:Ip,Bp=ys.useState,Fp=ys.useEffect,zp=ys.useLayoutEffect,Hp=ys.useDebugValue;function Up(e,t){var s=t(),i=Bp({inst:{value:s,getSnapshot:t}}),n=i[0].inst,l=i[1];return zp(function(){n.value=s,n.getSnapshot=t,Ma(n)&&l({inst:n})},[e,s,t]),Fp(function(){return Ma(n)&&l({inst:n}),e(function(){Ma(n)&&l({inst:n})})},[e]),Hp(s),s}function Ma(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Op(e,s)}catch{return!0}}function $p(e,t){return t()}var Wp=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?$p:Up;Af.useSyncExternalStore=ys.useSyncExternalStore!==void 0?ys.useSyncExternalStore:Wp;Tf.exports=Af;var qp=Tf.exports;const ql=qp.useSyncExternalStore,qd=R.createContext(void 0),Rf=R.createContext(!1);function Df(e,t){return e||(t&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=qd),window.ReactQueryClientContext):qd)}const Yn=({context:e}={})=>{const t=R.useContext(Df(e,R.useContext(Rf)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Qp=({client:e,children:t,context:s,contextSharing:i=!1})=>{R.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]);const n=Df(s,i);return R.createElement(Rf.Provider,{value:!s&&i},R.createElement(n.Provider,{value:e},t))},If=R.createContext(!1),Of=()=>R.useContext(If);If.Provider;function Kp(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}const Vp=R.createContext(Kp()),Bf=()=>R.useContext(Vp);function Ff(e,t){return typeof e=="function"?e(...t):!!e}const zf=(e,t)=>{(e.suspense||e.useErrorBoundary)&&(t.isReset()||(e.retryOnMount=!1))},Hf=e=>{R.useEffect(()=>{e.clearReset()},[e])},Uf=({result:e,errorResetBoundary:t,useErrorBoundary:s,query:i})=>e.isError&&!t.isReset()&&!e.isFetching&&Ff(s,[e.error,i]),$f=e=>{e.suspense&&(typeof e.staleTime!="number"&&(e.staleTime=1e3),typeof e.cacheTime=="number"&&(e.cacheTime=Math.max(e.cacheTime,1e3)))},Wf=(e,t)=>e.isLoading&&e.isFetching&&!t,Io=(e,t,s)=>(e==null?void 0:e.suspense)&&Wf(t,s),Oo=(e,t,s)=>t.fetchOptimistic(e).then(({data:i})=>{e.onSuccess==null||e.onSuccess(i),e.onSettled==null||e.onSettled(i,null)}).catch(i=>{s.clearReset(),e.onError==null||e.onError(i),e.onSettled==null||e.onSettled(void 0,i)});function Gp({queries:e,context:t}){const s=Yn({context:t}),i=Of(),n=Bf(),l=R.useMemo(()=>e.map(v=>{const S=s.defaultQueryOptions(v);return S._optimisticResults=i?"isRestoring":"optimistic",S}),[e,s,i]);l.forEach(v=>{$f(v),zf(v,n)}),Hf(n);const[f]=R.useState(()=>new Ap(s,l)),a=f.getOptimisticResult(l);ql(R.useCallback(v=>i?()=>{}:f.subscribe(Se.batchCalls(v)),[f,i]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),R.useEffect(()=>{f.setQueries(l,{listeners:!1})},[l,f]);const m=a.some((v,S)=>Io(l[S],v,i))?a.flatMap((v,S)=>{const w=l[S],y=f.getObservers()[S];if(w&&y){if(Io(w,v,i))return Oo(w,y,n);Wf(v,i)&&Oo(w,y,n)}return[]}):[];if(m.length>0)throw Promise.all(m);const p=f.getQueries(),g=a.find((v,S)=>{var w,y;return Uf({result:v,errorResetBoundary:n,useErrorBoundary:(w=(y=l[S])==null?void 0:y.useErrorBoundary)!=null?w:!1,query:p[S]})});if(g!=null&&g.error)throw g.error;return a}function qf(e,t){const s=Yn({context:e.context}),i=Of(),n=Bf(),l=s.defaultQueryOptions(e);l._optimisticResults=i?"isRestoring":"optimistic",l.onError&&(l.onError=Se.batchCalls(l.onError)),l.onSuccess&&(l.onSuccess=Se.batchCalls(l.onSuccess)),l.onSettled&&(l.onSettled=Se.batchCalls(l.onSettled)),$f(l),zf(l,n),Hf(n);const[f]=R.useState(()=>new t(s,l)),a=f.getOptimisticResult(l);if(ql(R.useCallback(o=>{const m=i?()=>{}:f.subscribe(Se.batchCalls(o));return f.updateResult(),m},[f,i]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),R.useEffect(()=>{f.setOptions(l,{listeners:!1})},[l,f]),Io(l,a,i))throw Oo(l,f,n);if(Uf({result:a,errorResetBoundary:n,useErrorBoundary:l.useErrorBoundary,query:f.getCurrentQuery()}))throw a.error;return l.notifyOnChangeProps?a:f.trackResult(a)}function Jp(e,t,s){const i=ss(e,t,s);return qf(i,$l)}function Yp(e,t,s){const i=xp(e,t),n=Yn({context:i.context}),[l]=R.useState(()=>new Dp(n,i));R.useEffect(()=>{l.setOptions(i)},[l,i]);const f=ql(R.useCallback(o=>l.subscribe(Se.batchCalls(o)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),a=R.useCallback((o,m)=>{l.mutate(o,m).catch(Xp)},[l]);if(f.error&&Ff(l.options.useErrorBoundary,[f.error]))throw f.error;return{...f,mutate:a,mutateAsync:f.mutate}}function Xp(){}function Zp(e,t,s){const i=ss(e,t,s);return qf(i,Rp)}/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function hi(){return hi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},hi.apply(this,arguments)}var dr;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(dr||(dr={}));const Qd="popstate";function ex(e){e===void 0&&(e={});function t(i,n){let{pathname:l,search:f,hash:a}=i.location;return Bo("",{pathname:l,search:f,hash:a},n.state&&n.state.usr||null,n.state&&n.state.key||"default")}function s(i,n){return typeof n=="string"?n:Ln(n)}return rx(t,s,null,e)}function De(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Qf(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function tx(){return Math.random().toString(36).substr(2,8)}function Kd(e,t){return{usr:e.state,key:e.key,idx:t}}function Bo(e,t,s,i){return s===void 0&&(s=null),hi({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ks(t):t,{state:s,key:t&&t.key||i||tx()})}function Ln(e){let{pathname:t="/",search:s="",hash:i=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function ks(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function rx(e,t,s,i){i===void 0&&(i={});let{window:n=document.defaultView,v5Compat:l=!1}=i,f=n.history,a=dr.Pop,o=null,m=p();m==null&&(m=0,f.replaceState(hi({},f.state,{idx:m}),""));function p(){return(f.state||{idx:null}).idx}function g(){a=dr.Pop;let d=p(),u=d==null?null:d-m;m=d,o&&o({action:a,location:y.location,delta:u})}function v(d,u){a=dr.Push;let c=Bo(y.location,d,u);m=p()+1;let h=Kd(c,m),x=y.createHref(c);try{f.pushState(h,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;n.location.assign(x)}l&&o&&o({action:a,location:y.location,delta:1})}function S(d,u){a=dr.Replace;let c=Bo(y.location,d,u);m=p();let h=Kd(c,m),x=y.createHref(c);f.replaceState(h,"",x),l&&o&&o({action:a,location:y.location,delta:0})}function w(d){let u=n.location.origin!=="null"?n.location.origin:n.location.href,c=typeof d=="string"?d:Ln(d);return c=c.replace(/ $/,"%20"),De(u,"No window.location.(origin|href) available to create URL for href: "+c),new URL(c,u)}let y={get action(){return a},get location(){return e(n,f)},listen(d){if(o)throw new Error("A history only accepts one active listener");return n.addEventListener(Qd,g),o=d,()=>{n.removeEventListener(Qd,g),o=null}},createHref(d){return t(n,d)},createURL:w,encodeLocation(d){let u=w(d);return{pathname:u.pathname,search:u.search,hash:u.hash}},push:v,replace:S,go(d){return f.go(d)}};return y}var Vd;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Vd||(Vd={}));function sx(e,t,s){return s===void 0&&(s="/"),ix(e,t,s)}function ix(e,t,s,i){let n=typeof t=="string"?ks(t):t,l=Ql(n.pathname||"/",s);if(l==null)return null;let f=Kf(e);nx(f);let a=null;for(let o=0;a==null&&o<f.length;++o){let m=xx(l);a=mx(f[o],m)}return a}function Kf(e,t,s,i){t===void 0&&(t=[]),s===void 0&&(s=[]),i===void 0&&(i="");let n=(l,f,a)=>{let o={relativePath:a===void 0?l.path||"":a,caseSensitive:l.caseSensitive===!0,childrenIndex:f,route:l};o.relativePath.startsWith("/")&&(De(o.relativePath.startsWith(i),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(i.length));let m=yr([i,o.relativePath]),p=s.concat(o);l.children&&l.children.length>0&&(De(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+m+'".')),Kf(l.children,t,p,m)),!(l.path==null&&!l.index)&&t.push({path:m,score:hx(m,l.index),routesMeta:p})};return e.forEach((l,f)=>{var a;if(l.path===""||!((a=l.path)!=null&&a.includes("?")))n(l,f);else for(let o of Vf(l.path))n(l,f,o)}),t}function Vf(e){let t=e.split("/");if(t.length===0)return[];let[s,...i]=t,n=s.endsWith("?"),l=s.replace(/\?$/,"");if(i.length===0)return n?[l,""]:[l];let f=Vf(i.join("/")),a=[];return a.push(...f.map(o=>o===""?l:[l,o].join("/"))),n&&a.push(...f),a.map(o=>e.startsWith("/")&&o===""?"/":o)}function nx(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:fx(t.routesMeta.map(i=>i.childrenIndex),s.routesMeta.map(i=>i.childrenIndex)))}const ax=/^:[\w-]+$/,ox=3,lx=2,cx=1,dx=10,ux=-2,Gd=e=>e==="*";function hx(e,t){let s=e.split("/"),i=s.length;return s.some(Gd)&&(i+=ux),t&&(i+=lx),s.filter(n=>!Gd(n)).reduce((n,l)=>n+(ax.test(l)?ox:l===""?cx:dx),i)}function fx(e,t){return e.length===t.length&&e.slice(0,-1).every((i,n)=>i===t[n])?e[e.length-1]-t[t.length-1]:0}function mx(e,t,s){let{routesMeta:i}=e,n={},l="/",f=[];for(let a=0;a<i.length;++a){let o=i[a],m=a===i.length-1,p=l==="/"?t:t.slice(l.length)||"/",g=gx({path:o.relativePath,caseSensitive:o.caseSensitive,end:m},p),v=o.route;if(!g)return null;Object.assign(n,g.params),f.push({params:n,pathname:yr([l,g.pathname]),pathnameBase:_x(yr([l,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(l=yr([l,g.pathnameBase]))}return f}function gx(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,i]=px(e.path,e.caseSensitive,e.end),n=t.match(s);if(!n)return null;let l=n[0],f=l.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:i.reduce((m,p,g)=>{let{paramName:v,isOptional:S}=p;if(v==="*"){let y=a[g]||"";f=l.slice(0,l.length-y.length).replace(/(.)\/+$/,"$1")}const w=a[g];return S&&!w?m[v]=void 0:m[v]=(w||"").replace(/%2F/g,"/"),m},{}),pathname:l,pathnameBase:f,pattern:e}}function px(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Qf(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(f,a,o)=>(i.push({paramName:a,isOptional:o!=null}),o?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),i]}function xx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Qf(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ql(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,i=e.charAt(s);return i&&i!=="/"?null:e.slice(s)||"/"}function vx(e,t){t===void 0&&(t="/");let{pathname:s,search:i="",hash:n=""}=typeof e=="string"?ks(e):e;return{pathname:s?s.startsWith("/")?s:yx(s,t):t,search:wx(i),hash:Sx(n)}}function yx(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?s.length>1&&s.pop():n!=="."&&s.push(n)}),s.length>1?s.join("/"):"/"}function Pa(e,t,s,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function bx(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function Kl(e,t){let s=bx(e);return t?s.map((i,n)=>n===s.length-1?i.pathname:i.pathnameBase):s.map(i=>i.pathnameBase)}function Vl(e,t,s,i){i===void 0&&(i=!1);let n;typeof e=="string"?n=ks(e):(n=hi({},e),De(!n.pathname||!n.pathname.includes("?"),Pa("?","pathname","search",n)),De(!n.pathname||!n.pathname.includes("#"),Pa("#","pathname","hash",n)),De(!n.search||!n.search.includes("#"),Pa("#","search","hash",n)));let l=e===""||n.pathname==="",f=l?"/":n.pathname,a;if(f==null)a=s;else{let g=t.length-1;if(!i&&f.startsWith("..")){let v=f.split("/");for(;v[0]==="..";)v.shift(),g-=1;n.pathname=v.join("/")}a=g>=0?t[g]:"/"}let o=vx(n,a),m=f&&f!=="/"&&f.endsWith("/"),p=(l||f===".")&&s.endsWith("/");return!o.pathname.endsWith("/")&&(m||p)&&(o.pathname+="/"),o}const yr=e=>e.join("/").replace(/\/\/+/g,"/"),_x=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Sx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function kx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Gf=["post","put","patch","delete"];new Set(Gf);const jx=["get",...Gf];new Set(jx);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fi(){return fi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},fi.apply(this,arguments)}const Gl=R.createContext(null),Cx=R.createContext(null),Cr=R.createContext(null),Xn=R.createContext(null),Yt=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Jf=R.createContext(null);function Nx(e,t){let{relative:s}=t===void 0?{}:t;js()||De(!1);let{basename:i,navigator:n}=R.useContext(Cr),{hash:l,pathname:f,search:a}=Xf(e,{relative:s}),o=f;return i!=="/"&&(o=f==="/"?i:yr([i,f])),n.createHref({pathname:o,search:a,hash:l})}function js(){return R.useContext(Xn)!=null}function Ur(){return js()||De(!1),R.useContext(Xn).location}function Yf(e){R.useContext(Cr).static||R.useLayoutEffect(e)}function Jl(){let{isDataRoute:e}=R.useContext(Yt);return e?Ux():Ex()}function Ex(){js()||De(!1);let e=R.useContext(Gl),{basename:t,future:s,navigator:i}=R.useContext(Cr),{matches:n}=R.useContext(Yt),{pathname:l}=Ur(),f=JSON.stringify(Kl(n,s.v7_relativeSplatPath)),a=R.useRef(!1);return Yf(()=>{a.current=!0}),R.useCallback(function(m,p){if(p===void 0&&(p={}),!a.current)return;if(typeof m=="number"){i.go(m);return}let g=Vl(m,JSON.parse(f),l,p.relative==="path");e==null&&t!=="/"&&(g.pathname=g.pathname==="/"?t:yr([t,g.pathname])),(p.replace?i.replace:i.push)(g,p.state,p)},[t,i,f,l,e])}const Mx=R.createContext(null);function Px(e){let t=R.useContext(Yt).outlet;return t&&R.createElement(Mx.Provider,{value:e},t)}function Xf(e,t){let{relative:s}=t===void 0?{}:t,{future:i}=R.useContext(Cr),{matches:n}=R.useContext(Yt),{pathname:l}=Ur(),f=JSON.stringify(Kl(n,i.v7_relativeSplatPath));return R.useMemo(()=>Vl(e,JSON.parse(f),l,s==="path"),[e,f,l,s])}function Lx(e,t){return Tx(e,t)}function Tx(e,t,s,i){js()||De(!1);let{navigator:n}=R.useContext(Cr),{matches:l}=R.useContext(Yt),f=l[l.length-1],a=f?f.params:{};f&&f.pathname;let o=f?f.pathnameBase:"/";f&&f.route;let m=Ur(),p;if(t){var g;let d=typeof t=="string"?ks(t):t;o==="/"||(g=d.pathname)!=null&&g.startsWith(o)||De(!1),p=d}else p=m;let v=p.pathname||"/",S=v;if(o!=="/"){let d=o.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(d.length).join("/")}let w=sx(e,{pathname:S}),y=Ox(w&&w.map(d=>Object.assign({},d,{params:Object.assign({},a,d.params),pathname:yr([o,n.encodeLocation?n.encodeLocation(d.pathname).pathname:d.pathname]),pathnameBase:d.pathnameBase==="/"?o:yr([o,n.encodeLocation?n.encodeLocation(d.pathnameBase).pathname:d.pathnameBase])})),l,s,i);return t&&y?R.createElement(Xn.Provider,{value:{location:fi({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:dr.Pop}},y):y}function Ax(){let e=Hx(),t=kx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,n={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),s?R.createElement("pre",{style:n},s):null,null)}const Rx=R.createElement(Ax,null);class Dx extends R.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?R.createElement(Yt.Provider,{value:this.props.routeContext},R.createElement(Jf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Ix(e){let{routeContext:t,match:s,children:i}=e,n=R.useContext(Gl);return n&&n.static&&n.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=s.route.id),R.createElement(Yt.Provider,{value:t},i)}function Ox(e,t,s,i){var n;if(t===void 0&&(t=[]),s===void 0&&(s=null),i===void 0&&(i=null),e==null){var l;if(!s)return null;if(s.errors)e=s.matches;else if((l=i)!=null&&l.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let f=e,a=(n=s)==null?void 0:n.errors;if(a!=null){let p=f.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);p>=0||De(!1),f=f.slice(0,Math.min(f.length,p+1))}let o=!1,m=-1;if(s&&i&&i.v7_partialHydration)for(let p=0;p<f.length;p++){let g=f[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(m=p),g.route.id){let{loaderData:v,errors:S}=s,w=g.route.loader&&v[g.route.id]===void 0&&(!S||S[g.route.id]===void 0);if(g.route.lazy||w){o=!0,m>=0?f=f.slice(0,m+1):f=[f[0]];break}}}return f.reduceRight((p,g,v)=>{let S,w=!1,y=null,d=null;s&&(S=a&&g.route.id?a[g.route.id]:void 0,y=g.route.errorElement||Rx,o&&(m<0&&v===0?($x("route-fallback"),w=!0,d=null):m===v&&(w=!0,d=g.route.hydrateFallbackElement||null)));let u=t.concat(f.slice(0,v+1)),c=()=>{let h;return S?h=y:w?h=d:g.route.Component?h=R.createElement(g.route.Component,null):g.route.element?h=g.route.element:h=p,R.createElement(Ix,{match:g,routeContext:{outlet:p,matches:u,isDataRoute:s!=null},children:h})};return s&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?R.createElement(Dx,{location:s.location,revalidation:s.revalidation,component:y,error:S,children:c(),routeContext:{outlet:null,matches:u,isDataRoute:!0}}):c()},null)}var Zf=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Zf||{}),em=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(em||{});function Bx(e){let t=R.useContext(Gl);return t||De(!1),t}function Fx(e){let t=R.useContext(Cx);return t||De(!1),t}function zx(e){let t=R.useContext(Yt);return t||De(!1),t}function tm(e){let t=zx(),s=t.matches[t.matches.length-1];return s.route.id||De(!1),s.route.id}function Hx(){var e;let t=R.useContext(Jf),s=Fx(),i=tm();return t!==void 0?t:(e=s.errors)==null?void 0:e[i]}function Ux(){let{router:e}=Bx(Zf.UseNavigateStable),t=tm(em.UseNavigateStable),s=R.useRef(!1);return Yf(()=>{s.current=!0}),R.useCallback(function(n,l){l===void 0&&(l={}),s.current&&(typeof n=="number"?e.navigate(n):e.navigate(n,fi({fromRouteId:t},l)))},[e,t])}const Jd={};function $x(e,t,s){Jd[e]||(Jd[e]=!0)}function Wx(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Yd(e){let{to:t,replace:s,state:i,relative:n}=e;js()||De(!1);let{future:l,static:f}=R.useContext(Cr),{matches:a}=R.useContext(Yt),{pathname:o}=Ur(),m=Jl(),p=Vl(t,Kl(a,l.v7_relativeSplatPath),o,n==="path"),g=JSON.stringify(p);return R.useEffect(()=>m(JSON.parse(g),{replace:s,state:i,relative:n}),[m,g,n,s,i]),null}function qx(e){return Px(e.context)}function pe(e){De(!1)}function Qx(e){let{basename:t="/",children:s=null,location:i,navigationType:n=dr.Pop,navigator:l,static:f=!1,future:a}=e;js()&&De(!1);let o=t.replace(/^\/*/,"/"),m=R.useMemo(()=>({basename:o,navigator:l,static:f,future:fi({v7_relativeSplatPath:!1},a)}),[o,a,l,f]);typeof i=="string"&&(i=ks(i));let{pathname:p="/",search:g="",hash:v="",state:S=null,key:w="default"}=i,y=R.useMemo(()=>{let d=Ql(p,o);return d==null?null:{location:{pathname:d,search:g,hash:v,state:S,key:w},navigationType:n}},[o,p,g,v,S,w,n]);return y==null?null:R.createElement(Cr.Provider,{value:m},R.createElement(Xn.Provider,{children:s,value:y}))}function Kx(e){let{children:t,location:s}=e;return Lx(Fo(t),s)}new Promise(()=>{});function Fo(e,t){t===void 0&&(t=[]);let s=[];return R.Children.forEach(e,(i,n)=>{if(!R.isValidElement(i))return;let l=[...t,n];if(i.type===R.Fragment){s.push.apply(s,Fo(i.props.children,l));return}i.type!==pe&&De(!1),!i.props.index||!i.props.children||De(!1);let f={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(f.children=Fo(i.props.children,l)),s.push(f)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function zo(){return zo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(e[i]=s[i])}return e},zo.apply(this,arguments)}function Vx(e,t){if(e==null)return{};var s={},i=Object.keys(e),n,l;for(l=0;l<i.length;l++)n=i[l],!(t.indexOf(n)>=0)&&(s[n]=e[n]);return s}function Gx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Jx(e,t){return e.button===0&&(!t||t==="_self")&&!Gx(e)}const Yx=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Xx="6";try{window.__reactRouterVersion=Xx}catch{}const Zx="startTransition",Xd=sg[Zx];function ev(e){let{basename:t,children:s,future:i,window:n}=e,l=R.useRef();l.current==null&&(l.current=ex({window:n,v5Compat:!0}));let f=l.current,[a,o]=R.useState({action:f.action,location:f.location}),{v7_startTransition:m}=i||{},p=R.useCallback(g=>{m&&Xd?Xd(()=>o(g)):o(g)},[o,m]);return R.useLayoutEffect(()=>f.listen(p),[f,p]),R.useEffect(()=>Wx(i),[i]),R.createElement(Qx,{basename:t,children:s,location:a.location,navigationType:a.action,navigator:f,future:i})}const tv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",rv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,en=R.forwardRef(function(t,s){let{onClick:i,relative:n,reloadDocument:l,replace:f,state:a,target:o,to:m,preventScrollReset:p,viewTransition:g}=t,v=Vx(t,Yx),{basename:S}=R.useContext(Cr),w,y=!1;if(typeof m=="string"&&rv.test(m)&&(w=m,tv))try{let h=new URL(window.location.href),x=m.startsWith("//")?new URL(h.protocol+m):new URL(m),_=Ql(x.pathname,S);x.origin===h.origin&&_!=null?m=_+x.search+x.hash:y=!0}catch{}let d=Nx(m,{relative:n}),u=sv(m,{replace:f,state:a,target:o,preventScrollReset:p,relative:n,viewTransition:g});function c(h){i&&i(h),h.defaultPrevented||u(h)}return R.createElement("a",zo({},v,{href:w||d,onClick:y||l?i:c,ref:s,target:o}))});var Zd;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Zd||(Zd={}));var eu;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(eu||(eu={}));function sv(e,t){let{target:s,replace:i,state:n,preventScrollReset:l,relative:f,viewTransition:a}=t===void 0?{}:t,o=Jl(),m=Ur(),p=Xf(e,{relative:f});return R.useCallback(g=>{if(Jx(g,s)){g.preventDefault();let v=i!==void 0?i:Ln(m)===Ln(p);o(e,{replace:v,state:n,preventScrollReset:l,relative:f,viewTransition:a})}},[m,o,p,i,n,s,e,l,f,a])}function iv(e){return e}function nv(e){return e.length===0?iv:e.length===1?e[0]:function(s){return e.reduce((i,n)=>n(i),s)}}function rm(e){const t={subscribe(s){let i=null,n=!1,l=!1,f=!1;function a(){if(i===null){f=!0;return}l||(l=!0,typeof i=="function"?i():i&&i.unsubscribe())}return i=e({next(o){var m;n||(m=s.next)==null||m.call(s,o)},error(o){var m;n||(n=!0,(m=s.error)==null||m.call(s,o),a())},complete(){var o;n||(n=!0,(o=s.complete)==null||o.call(s),a())}}),f&&a(),{unsubscribe:a}},pipe(...s){return nv(s)(t)}};return t}function av(e){return t=>{let s=0,i=null;const n=[];function l(){i||(i=t.subscribe({next(a){var o;for(const m of n)(o=m.next)==null||o.call(m,a)},error(a){var o;for(const m of n)(o=m.error)==null||o.call(m,a)},complete(){var a;for(const o of n)(a=o.complete)==null||a.call(o)}}))}function f(){if(s===0&&i){const a=i;i=null,a.unsubscribe()}}return{subscribe(a){return s++,n.push(a),l(),{unsubscribe(){s--,f();const o=n.findIndex(m=>m===a);o>-1&&n.splice(o,1)}}}}}}class Yl extends Error{constructor(t){super(t),this.name="ObservableAbortError",Object.setPrototypeOf(this,Yl.prototype)}}function ov(e){let t;return{promise:new Promise((i,n)=>{let l=!1;function f(){l||(l=!0,n(new Yl("This operation was aborted.")),a.unsubscribe())}const a=e.subscribe({next(o){l=!0,i(o),f()},error(o){l=!0,n(o),f()},complete(){l=!0,f()}});t=f}),abort:t}}function lv(e){return rm(t=>{function s(n=0,l=e.op){const f=e.links[n];if(!f)throw new Error("No more links to execute - did you forget to add an ending link?");return f({op:l,next(o){return s(n+1,o)}})}return s().subscribe(t)})}function sm(e){const t=Object.create(null);for(const s in e){const i=e[s];t[i]=s}return t}const im={PARSE_ERROR:-32700,BAD_REQUEST:-32600,INTERNAL_SERVER_ERROR:-32603,NOT_IMPLEMENTED:-32603,UNAUTHORIZED:-32001,FORBIDDEN:-32003,NOT_FOUND:-32004,METHOD_NOT_SUPPORTED:-32005,TIMEOUT:-32008,CONFLICT:-32009,PRECONDITION_FAILED:-32012,PAYLOAD_TOO_LARGE:-32013,UNPROCESSABLE_CONTENT:-32022,TOO_MANY_REQUESTS:-32029,CLIENT_CLOSED_REQUEST:-32099};sm(im);sm(im);const nm=()=>{};function am(e,t){return new Proxy(nm,{get(i,n){if(!(typeof n!="string"||n==="then"))return am(e,[...t,n])},apply(i,n,l){const f=t[t.length-1]==="apply";return e({args:f?l.length>=2?l[1]:[]:l,path:f?t.slice(0,-1):t})}})}const Zn=e=>am(e,[]),Xl=e=>new Proxy(nm,{get(t,s){if(!(typeof s!="string"||s==="then"))return e(s)}});function cv(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}class dv extends Error{}function uv(e){if(e instanceof Error)return e;const t=typeof e;if(!(t==="undefined"||t==="function"||e===null)){if(t!=="object")return new Error(String(e));if(cv(e)){const s=new dv;for(const i in e)s[i]=e[i];return s}}}function Tn(e){return!!e&&!Array.isArray(e)&&typeof e=="object"}function hv(e,t){if("error"in e){const i=t.transformer.deserialize(e.error);return{ok:!1,error:{...e,error:i}}}return{ok:!0,result:{...e.result,...(!e.result.type||e.result.type==="data")&&{type:"data",data:t.transformer.deserialize(e.result.data)}}}}class La extends Error{constructor(){super("Unable to transform response from server")}}function fv(e,t){let s;try{s=hv(e,t)}catch{throw new La}if(!s.ok&&(!Tn(s.error.error)||typeof s.error.error.code!="number"))throw new La;if(s.ok&&!Tn(s.result))throw new La;return s}function mv(e){return e instanceof Bt||e instanceof Error&&e.name==="TRPCClientError"}function gv(e){return Tn(e)&&Tn(e.error)&&typeof e.error.code=="number"&&typeof e.error.message=="string"}class Bt extends Error{static from(t,s={}){const i=t;return mv(i)?(s.meta&&(i.meta={...i.meta,...s.meta}),i):gv(i)?new Bt(i.error.message,{...s,result:i}):i instanceof Error?new Bt(i.message,{...s,cause:uv(i)}):new Bt("Unknown error",{...s,cause:i})}constructor(t,s){var n,l;const i=s==null?void 0:s.cause;super(t,{cause:i}),this.meta=s==null?void 0:s.meta,this.cause=i,this.shape=(n=s==null?void 0:s.result)==null?void 0:n.error,this.data=(l=s==null?void 0:s.result)==null?void 0:l.error.data,this.name="TRPCClientError",Object.setPrototypeOf(this,Bt.prototype)}}const tu=e=>typeof e=="function";function pv(e){if(e)return e;if(typeof window<"u"&&tu(window.fetch))return window.fetch;if(typeof globalThis<"u"&&tu(globalThis.fetch))return globalThis.fetch;throw new Error("No fetch implementation found")}function xv(e){return e||(typeof window<"u"&&window.AbortController?window.AbortController:typeof globalThis<"u"&&globalThis.AbortController?globalThis.AbortController:null)}function vv(e){return{url:e.url.toString().replace(/\/$/,""),fetch:e.fetch,AbortController:xv(e.AbortController)}}function yv(e){const t={};for(let s=0;s<e.length;s++){const i=e[s];t[s]=i}return t}const bv={query:"GET",mutation:"POST"};function om(e){return"input"in e?e.runtime.transformer.serialize(e.input):yv(e.inputs.map(t=>e.runtime.transformer.serialize(t)))}const lm=e=>{let t=e.url+"/"+e.path;const s=[];if("inputs"in e&&s.push("batch=1"),e.type==="query"){const i=om(e);i!==void 0&&s.push(`input=${encodeURIComponent(JSON.stringify(i))}`)}return s.length&&(t+="?"+s.join("&")),t},_v=e=>{if(e.type==="query")return;const t=om(e);return t!==void 0?JSON.stringify(t):void 0},wv=e=>kv({...e,contentTypeHeader:"application/json",getUrl:lm,getBody:_v});async function Sv(e,t){const s=e.getUrl(e),i=e.getBody(e),{type:n}=e,l=await e.headers();/* istanbul ignore if -- @preserve */if(n==="subscription")throw new Error("Subscriptions should use wsLink");const f={...e.contentTypeHeader?{"content-type":e.contentTypeHeader}:{},...e.batchModeHeader?{"trpc-batch-mode":e.batchModeHeader}:{},...l};return pv(e.fetch)(s,{method:bv[n],signal:t==null?void 0:t.signal,body:i,headers:f})}function kv(e){const t=e.AbortController?new e.AbortController:null,s={};let i=!1;return{promise:new Promise((f,a)=>{Sv(e,t).then(o=>(s.response=o,i=!0,o.json())).then(o=>{s.responseJSON=o,f({json:o,meta:s})}).catch(o=>{i=!0,a(Bt.from(o,{meta:s}))})}),cancel:()=>{i||t==null||t.abort()}}}const Ta=()=>{throw new Error("Something went wrong. Please submit an issue at https://github.com/trpc/trpc/issues/new")};function Aa(e){let t=null,s=null;const i=()=>{clearTimeout(s),s=null,t=null};function n(a){var p,g;const o=[[]];let m=0;for(;;){const v=a[m];if(!v)break;const S=o[o.length-1];if(v.aborted){(p=v.reject)==null||p.call(v,new Error("Aborted")),m++;continue}if(e.validate(S.concat(v).map(y=>y.key))){S.push(v),m++;continue}if(S.length===0){(g=v.reject)==null||g.call(v,new Error("Input is too big for a single dispatch")),m++;continue}o.push([])}return o}function l(){const a=n(t);i();for(const o of a){if(!o.length)continue;const m={items:o,cancel:Ta};for(const S of o)S.batch=m;const p=(S,w)=>{var d;const y=m.items[S];(d=y.resolve)==null||d.call(y,w),y.batch=null,y.reject=null,y.resolve=null},{promise:g,cancel:v}=e.fetch(m.items.map(S=>S.key),p);m.cancel=v,g.then(S=>{var w;for(let y=0;y<S.length;y++){const d=S[y];p(y,d)}for(const y of m.items)(w=y.reject)==null||w.call(y,new Error("Missing result")),y.batch=null}).catch(S=>{var w;for(const y of m.items)(w=y.reject)==null||w.call(y,S),y.batch=null})}}function f(a){const o={aborted:!1,key:a,batch:null,resolve:Ta,reject:Ta},m=new Promise((g,v)=>{o.reject=v,o.resolve=g,t||(t=[]),t.push(o)});return s||(s=setTimeout(l)),{promise:m,cancel:()=>{var g;o.aborted=!0,(g=o.batch)!=null&&g.items.every(v=>v.aborted)&&(o.batch.cancel(),o.batch=null)}}}return{load:f}}function jv(e){return function(s){const i=vv(s),n=s.maxURLLength??1/0;return l=>{const f=g=>{const v=w=>{if(n===1/0)return!0;const y=w.map(c=>c.path).join(","),d=w.map(c=>c.input);return lm({...i,runtime:l,type:g,path:y,inputs:d}).length<=n},S=e({...i,runtime:l,type:g,opts:s});return{validate:v,fetch:S}},a=Aa(f("query")),o=Aa(f("mutation")),m=Aa(f("subscription")),p={query:a,subscription:m,mutation:o};return({op:g})=>rm(v=>{const S=p[g.type],{promise:w,cancel:y}=S.load(g);let d;return w.then(u=>{d=u;const c=fv(u.json,l);if(!c.ok){v.error(Bt.from(c.error,{meta:u.meta}));return}v.next({context:u.meta,result:c.result}),v.complete()}).catch(u=>{v.error(Bt.from(u,{meta:d==null?void 0:d.meta}))}),()=>{y()}})}}}const Cv=e=>t=>{const s=t.map(f=>f.path).join(","),i=t.map(f=>f.input),{promise:n,cancel:l}=wv({...e,path:s,inputs:i,headers(){return e.opts.headers?typeof e.opts.headers=="function"?e.opts.headers({opList:t}):e.opts.headers:{}}});return{promise:n.then(f=>(Array.isArray(f.json)?f.json:t.map(()=>f.json)).map(m=>({meta:f.meta,json:m}))),cancel:l}},Nv=jv(Cv);class Ev{$request({type:t,input:s,path:i,context:n={}}){return lv({links:this.links,op:{id:++this.requestId,type:t,path:i,input:s,context:n}}).pipe(av())}requestAsPromise(t){const s=this.$request(t),{promise:i,abort:n}=ov(s);return new Promise((f,a)=>{var o;(o=t.signal)==null||o.addEventListener("abort",n),i.then(m=>{f(m.result.data)}).catch(m=>{a(Bt.from(m))})})}query(t,s,i){return this.requestAsPromise({type:"query",path:t,input:s,context:i==null?void 0:i.context,signal:i==null?void 0:i.signal})}mutation(t,s,i){return this.requestAsPromise({type:"mutation",path:t,input:s,context:i==null?void 0:i.context,signal:i==null?void 0:i.signal})}subscription(t,s,i){return this.$request({type:"subscription",path:t,input:s,context:i==null?void 0:i.context}).subscribe({next(l){var f,a,o;l.result.type==="started"?(f=i.onStarted)==null||f.call(i):l.result.type==="stopped"?(a=i.onStopped)==null||a.call(i):(o=i.onData)==null||o.call(i,l.result.data)},error(l){var f;(f=i.onError)==null||f.call(i,l)},complete(){var l;(l=i.onComplete)==null||l.call(i)}})}constructor(t){this.requestId=0;const s=(()=>{const i=t.transformer;return i?"input"in i?t.transformer:{input:i,output:i}:{input:{serialize:n=>n,deserialize:n=>n},output:{serialize:n=>n,deserialize:n=>n}}})();this.runtime={transformer:{serialize:i=>s.input.serialize(i),deserialize:i=>s.output.deserialize(i)},combinedTransformer:s},this.links=t.links.map(i=>i(this.runtime))}}function Mv(e){return new Ev(e)}const Pv={query:"query",mutate:"mutation",subscribe:"subscription"},Lv=e=>Pv[e];function Tv(e){return Xl(t=>e.hasOwnProperty(t)?e[t]:t==="__untypedClient"?e:Zn(({path:s,args:i})=>{const n=[t,...s],l=Lv(n.pop()),f=n.join(".");return e[l](f,...i)}))}function Ee(e,t){const s=Array.isArray(e)?e:[e],[i,n]=s,l=typeof i!="string"||i===""?[]:i.split(".");return!n&&(!t||t==="any")?l.length?[l]:[]:[l,{...typeof n<"u"&&{input:n},...t&&t!=="any"&&{type:t}}]}function An(e,t){return e.length?t===void 0?[e]:[e,t]:[]}function Av(e,t){return Zn(s=>{const i=s.args,n=[e,...s.path],l=n.pop(),f=n.join(".");if(l==="useMutation")return t[l](f,...i);const[a,...o]=i,m=An(f,a);if(l==="getQueryKey")return Ee(m,o[0]??"any");if(l==="_def")return{path:n};if(l.startsWith("useSuspense")){const p=o[0]||{},v=t[l==="useSuspenseQuery"?"useQuery":"useInfiniteQuery"](m,{...p,suspense:!0,enabled:!0});return[v.data,v]}return t[l](m,...o)})}const Rv=["client","ssrContext","ssrState","abortOnUnmount"],Dv=R.createContext(null);function Iv(e){return Xl(t=>{const s=t;return s==="client"?Tv(e.client):Rv.includes(s)?e[s]:Zn(({path:i,args:n})=>{const l=[t,...i],f=l.pop(),a=l.join("."),o=S=>{if(["setData","setInfiniteData"].includes(S)){const[u,c,...h]=n;return{queryKey:An(a,u),updater:c,rest:h}}const[w,...y]=n;return{queryKey:An(a,w),rest:y}},{queryKey:m,rest:p,updater:g}=o(f);return{fetch:()=>e.fetchQuery(m,...p),fetchInfinite:()=>e.fetchInfiniteQuery(m,...p),prefetch:()=>e.prefetchQuery(m,...p),prefetchInfinite:()=>e.prefetchInfiniteQuery(m,...p),ensureData:()=>e.ensureQueryData(m,...p),invalidate:()=>e.invalidateQueries(m,...p),reset:()=>e.resetQueries(m,...p),refetch:()=>e.refetchQueries(m,...p),cancel:()=>e.cancelQuery(m,...p),setData:()=>{e.setQueryData(m,g,...p)},setInfiniteData:()=>{e.setInfiniteQueryData(m,g,...p)},getData:()=>e.getQueryData(m),getInfiniteData:()=>e.getInfiniteQueryData(m)}[f]()})})}function Ov(e){return Zn(t=>{const s=t.path.join("."),[i,n]=t.args;return{queryKey:An(s,i),queryFn:()=>e.query(s,i,n==null?void 0:n.trpc),...n}})}function er(e,t){const[s,i]=e;return[s,i,t==null?void 0:t.trpc]}function Ra(e){const{path:t}=e;return R.useMemo(()=>({path:t}),[t])}function Bv(e){const t=w=>w.originalFn(),s=Dv,i=e==null?void 0:e.reactQueryContext,n=w=>Mv(w),l=w=>{const{abortOnUnmount:y=!1,client:d,queryClient:u,ssrContext:c}=w,[h,x]=R.useState(w.ssrState??!1);return R.useEffect(()=>{x(_=>_?"mounted":!1)},[]),us.createElement(s.Provider,{value:{abortOnUnmount:y,queryClient:u,client:d,ssrContext:c??null,ssrState:h,fetchQuery:R.useCallback((_,k)=>u.fetchQuery({...k,queryKey:Ee(_,"query"),queryFn:()=>d.query(...er(_,k))}),[d,u]),fetchInfiniteQuery:R.useCallback((_,k)=>u.fetchInfiniteQuery({...k,queryKey:Ee(_,"infinite"),queryFn:({pageParam:j})=>{const[b,C]=_,M={...C,cursor:j};return d.query(...er([b,M],k))}}),[d,u]),prefetchQuery:R.useCallback((_,k)=>u.prefetchQuery({...k,queryKey:Ee(_,"query"),queryFn:()=>d.query(...er(_,k))}),[d,u]),prefetchInfiniteQuery:R.useCallback((_,k)=>u.prefetchInfiniteQuery({...k,queryKey:Ee(_,"infinite"),queryFn:({pageParam:j})=>{const[b,C]=_,M={...C,cursor:j};return d.query(...er([b,M],k))}}),[d,u]),ensureQueryData:R.useCallback((_,k)=>u.ensureQueryData({...k,queryKey:Ee(_,"query"),queryFn:()=>d.query(...er(_,k))}),[d,u]),invalidateQueries:R.useCallback((_,k,j)=>u.invalidateQueries({...k,queryKey:Ee(_,"any")},j),[u]),resetQueries:R.useCallback((..._)=>{const[k,j,b]=_;return u.resetQueries({...j,queryKey:Ee(k,"any")},b)},[u]),refetchQueries:R.useCallback((..._)=>{const[k,j,b]=_;return u.refetchQueries({...j,queryKey:Ee(k,"any")},b)},[u]),cancelQuery:R.useCallback(_=>u.cancelQueries({queryKey:Ee(_,"any")}),[u]),setQueryData:R.useCallback((..._)=>{const[k,...j]=_;return u.setQueryData(Ee(k,"query"),...j)},[u]),getQueryData:R.useCallback((..._)=>{const[k,...j]=_;return u.getQueryData(Ee(k,"query"),...j)},[u]),setInfiniteQueryData:R.useCallback((..._)=>{const[k,...j]=_;return u.setQueryData(Ee(k,"infinite"),...j)},[u]),getInfiniteQueryData:R.useCallback((..._)=>{const[k,...j]=_;return u.getQueryData(Ee(k,"infinite"),...j)},[u])}},w.children)};function f(){return us.useContext(s)}function a(w,y,d){var h;const{queryClient:u,ssrState:c}=f();return c&&c!=="mounted"&&((h=u.getQueryCache().find(Ee(w,y)))==null?void 0:h.state.status)==="error"?{retryOnMount:!1,...d}:d}function o(w,y){var M,L;const d=f();if(!d)throw new Error("Unable to retrieve application context. Did you forget to wrap your App inside `withTRPC` HoC?");const{abortOnUnmount:u,client:c,ssrState:h,queryClient:x,prefetchQuery:_}=d,k=x.getQueryDefaults(Ee(w,"query"));typeof window>"u"&&h==="prepass"&&((M=y==null?void 0:y.trpc)==null?void 0:M.ssr)!==!1&&((y==null?void 0:y.enabled)??(k==null?void 0:k.enabled))!==!1&&!x.getQueryCache().find(Ee(w,"query"))&&_(w,y);const j=a(w,"query",{...k,...y}),b=((L=y==null?void 0:y.trpc)==null?void 0:L.abortOnUnmount)??(e==null?void 0:e.abortOnUnmount)??u,C=Jp({...j,queryKey:Ee(w,"query"),queryFn:P=>{const D={...j,trpc:{...j==null?void 0:j.trpc,...b?{signal:P.signal}:{}}};return c.query(...er(w,D))},context:i});return C.trpc=Ra({path:w[0]}),C}function m(w,y){const{client:d}=f(),u=Yn({context:i}),c=Array.isArray(w)?w[0]:w,h=u.getMutationDefaults([c.split(".")]),x=Yp({...y,mutationKey:[c.split(".")],mutationFn:_=>d.mutation(...er([c,_],y)),context:i,onSuccess(..._){return t({originalFn:()=>{var j,b;return((j=y==null?void 0:y.onSuccess)==null?void 0:j.call(y,..._))??((b=h==null?void 0:h.onSuccess)==null?void 0:b.call(h,..._))},queryClient:u,meta:(y==null?void 0:y.meta)??(h==null?void 0:h.meta)??{}})}});return x.trpc=Ra({path:c}),x}/* istanbul ignore next -- @preserve */function p(w,y){const d=(y==null?void 0:y.enabled)??!0,u=cr(w),{client:c}=f(),h=R.useRef(y);h.current=y,R.useEffect(()=>{if(!d)return;const[x,_]=w;let k=!1;const j=c.subscription(x,_??void 0,{onStarted:()=>{var b,C;k||(C=(b=h.current).onStarted)==null||C.call(b)},onData:b=>{k||h.current.onData(b)},onError:b=>{var C,M;k||(M=(C=h.current).onError)==null||M.call(C,b)}});return()=>{k=!0,j.unsubscribe()}},[u,d])}function g(w,y){var L,P;const[d,u]=w,{client:c,ssrState:h,prefetchInfiniteQuery:x,queryClient:_,abortOnUnmount:k}=f(),j=_.getQueryDefaults(Ee(w,"infinite"));typeof window>"u"&&h==="prepass"&&((L=y==null?void 0:y.trpc)==null?void 0:L.ssr)!==!1&&((y==null?void 0:y.enabled)??(j==null?void 0:j.enabled))!==!1&&!_.getQueryCache().find(Ee(w,"infinite"))&&x(w,{...j,...y});const b=a(w,"infinite",{...j,...y}),C=((P=y==null?void 0:y.trpc)==null?void 0:P.abortOnUnmount)??k,M=Zp({...b,queryKey:Ee(w,"infinite"),queryFn:D=>{const W={...b,trpc:{...b==null?void 0:b.trpc,...C?{signal:D.signal}:{}}},V={...u??{},cursor:D.pageParam??(y==null?void 0:y.initialCursor)};return c.query(...er([d,V],W))},context:i});return M.trpc=Ra({path:d}),M}return{Provider:l,createClient:n,useContext:f,useUtils:f,useQuery:o,useQueries:(w,y)=>{var k;const{ssrState:d,queryClient:u,prefetchQuery:c,client:h}=f(),x=Ov(h),_=w(x);if(typeof window>"u"&&d==="prepass")for(const j of _){const b=j;((k=b.trpc)==null?void 0:k.ssr)!==!1&&!u.getQueryCache().find(Ee(b.queryKey,"query"))&&c(b.queryKey,b)}return Gp({queries:_.map(j=>({...j,queryKey:Ee(j.queryKey,"query")})),context:y})},useMutation:m,useSubscription:p,useDehydratedState:(w,y)=>R.useMemo(()=>y&&w.runtime.transformer.deserialize(y),[y,w]),useInfiniteQuery:g}}function Fv(e){return Bv(e)}function zv(e){return Xl(t=>t==="useContext"||t==="useUtils"?()=>{const s=e.useUtils();return R.useMemo(()=>Iv(s),[s])}:e.hasOwnProperty(t)?e[t]:Av(t,e))}function Hv(e){const t=Fv(e);return zv(t)}class Uv{constructor(){this.keyToValue=new Map,this.valueToKey=new Map}set(t,s){this.keyToValue.set(t,s),this.valueToKey.set(s,t)}getByKey(t){return this.keyToValue.get(t)}getByValue(t){return this.valueToKey.get(t)}clear(){this.keyToValue.clear(),this.valueToKey.clear()}}class cm{constructor(t){this.generateIdentifier=t,this.kv=new Uv}register(t,s){this.kv.getByValue(t)||(s||(s=this.generateIdentifier(t)),this.kv.set(s,t))}clear(){this.kv.clear()}getIdentifier(t){return this.kv.getByValue(t)}getValue(t){return this.kv.getByKey(t)}}class $v extends cm{constructor(){super(t=>t.name),this.classToAllowedProps=new Map}register(t,s){typeof s=="object"?(s.allowProps&&this.classToAllowedProps.set(t,s.allowProps),super.register(t,s.identifier)):super.register(t,s)}getAllowedProps(t){return this.classToAllowedProps.get(t)}}function Wv(e){if("values"in Object)return Object.values(e);const t=[];for(const s in e)e.hasOwnProperty(s)&&t.push(e[s]);return t}function qv(e,t){const s=Wv(e);if("find"in s)return s.find(t);const i=s;for(let n=0;n<i.length;n++){const l=i[n];if(t(l))return l}}function bs(e,t){Object.entries(e).forEach(([s,i])=>t(i,s))}function tn(e,t){return e.indexOf(t)!==-1}function ru(e,t){for(let s=0;s<e.length;s++){const i=e[s];if(t(i))return i}}class Qv{constructor(){this.transfomers={}}register(t){this.transfomers[t.name]=t}findApplicable(t){return qv(this.transfomers,s=>s.isApplicable(t))}findByName(t){return this.transfomers[t]}}const Kv=e=>Object.prototype.toString.call(e).slice(8,-1),dm=e=>typeof e>"u",Vv=e=>e===null,mi=e=>typeof e!="object"||e===null||e===Object.prototype?!1:Object.getPrototypeOf(e)===null?!0:Object.getPrototypeOf(e)===Object.prototype,Ho=e=>mi(e)&&Object.keys(e).length===0,wr=e=>Array.isArray(e),Gv=e=>typeof e=="string",Jv=e=>typeof e=="number"&&!isNaN(e),Yv=e=>typeof e=="boolean",Xv=e=>e instanceof RegExp,gi=e=>e instanceof Map,pi=e=>e instanceof Set,um=e=>Kv(e)==="Symbol",Zv=e=>e instanceof Date&&!isNaN(e.valueOf()),hm=e=>e instanceof Error,su=e=>typeof e=="number"&&isNaN(e),ey=e=>Yv(e)||Vv(e)||dm(e)||Jv(e)||Gv(e)||um(e),ty=e=>typeof e=="bigint",ry=e=>e===1/0||e===-1/0,sy=e=>ArrayBuffer.isView(e)&&!(e instanceof DataView),iy=e=>e instanceof URL,Uo=e=>e.replace(/\\/g,"\\\\").replace(/\./g,"\\."),Da=e=>e.map(String).map(Uo).join("."),Ks=(e,t)=>{const s=[];let i="";for(let l=0;l<e.length;l++){let f=e.charAt(l);if(!t&&f==="\\"){const m=e.charAt(l+1);if(m==="\\"){i+="\\",l++;continue}else if(m!==".")throw Error("invalid path")}if(f==="\\"&&e.charAt(l+1)==="."){i+=".",l++;continue}if(f==="."){s.push(i),i="";continue}i+=f}const n=i;return s.push(n),s};function Dt(e,t,s,i){return{isApplicable:e,annotation:t,transform:s,untransform:i}}const fm=[Dt(dm,"undefined",()=>null,()=>{}),Dt(ty,"bigint",e=>e.toString(),e=>typeof BigInt<"u"?BigInt(e):(console.error("Please add a BigInt polyfill."),e)),Dt(Zv,"Date",e=>e.toISOString(),e=>new Date(e)),Dt(hm,"Error",(e,t)=>{const s={name:e.name,message:e.message};return"cause"in e&&(s.cause=e.cause),t.allowedErrorProps.forEach(i=>{s[i]=e[i]}),s},(e,t)=>{const s=new Error(e.message,{cause:e.cause});return s.name=e.name,s.stack=e.stack,t.allowedErrorProps.forEach(i=>{s[i]=e[i]}),s}),Dt(Xv,"regexp",e=>""+e,e=>{const t=e.slice(1,e.lastIndexOf("/")),s=e.slice(e.lastIndexOf("/")+1);return new RegExp(t,s)}),Dt(pi,"set",e=>[...e.values()],e=>new Set(e)),Dt(gi,"map",e=>[...e.entries()],e=>new Map(e)),Dt(e=>su(e)||ry(e),"number",e=>su(e)?"NaN":e>0?"Infinity":"-Infinity",Number),Dt(e=>e===0&&1/e===-1/0,"number",()=>"-0",Number),Dt(iy,"URL",e=>e.toString(),e=>new URL(e))];function ea(e,t,s,i){return{isApplicable:e,annotation:t,transform:s,untransform:i}}const mm=ea((e,t)=>um(e)?!!t.symbolRegistry.getIdentifier(e):!1,(e,t)=>["symbol",t.symbolRegistry.getIdentifier(e)],e=>e.description,(e,t,s)=>{const i=s.symbolRegistry.getValue(t[1]);if(!i)throw new Error("Trying to deserialize unknown symbol");return i}),ny=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,Uint8ClampedArray].reduce((e,t)=>(e[t.name]=t,e),{}),gm=ea(sy,e=>["typed-array",e.constructor.name],e=>[...e],(e,t)=>{const s=ny[t[1]];if(!s)throw new Error("Trying to deserialize unknown typed array");return new s(e)});function pm(e,t){return e!=null&&e.constructor?!!t.classRegistry.getIdentifier(e.constructor):!1}const xm=ea(pm,(e,t)=>["class",t.classRegistry.getIdentifier(e.constructor)],(e,t)=>{const s=t.classRegistry.getAllowedProps(e.constructor);if(!s)return{...e};const i={};return s.forEach(n=>{i[n]=e[n]}),i},(e,t,s)=>{const i=s.classRegistry.getValue(t[1]);if(!i)throw new Error(`Trying to deserialize unknown class '${t[1]}' - check https://github.com/blitz-js/superjson/issues/116#issuecomment-773996564`);return Object.assign(Object.create(i.prototype),e)}),vm=ea((e,t)=>!!t.customTransformerRegistry.findApplicable(e),(e,t)=>["custom",t.customTransformerRegistry.findApplicable(e).name],(e,t)=>t.customTransformerRegistry.findApplicable(e).serialize(e),(e,t,s)=>{const i=s.customTransformerRegistry.findByName(t[1]);if(!i)throw new Error("Trying to deserialize unknown custom value");return i.deserialize(e)}),ay=[xm,mm,vm,gm],iu=(e,t)=>{const s=ru(ay,n=>n.isApplicable(e,t));if(s)return{value:s.transform(e,t),type:s.annotation(e,t)};const i=ru(fm,n=>n.isApplicable(e,t));if(i)return{value:i.transform(e,t),type:i.annotation}},ym={};fm.forEach(e=>{ym[e.annotation]=e});const oy=(e,t,s)=>{if(wr(t))switch(t[0]){case"symbol":return mm.untransform(e,t,s);case"class":return xm.untransform(e,t,s);case"custom":return vm.untransform(e,t,s);case"typed-array":return gm.untransform(e,t,s);default:throw new Error("Unknown transformation: "+t)}else{const i=ym[t];if(!i)throw new Error("Unknown transformation: "+t);return i.untransform(e,s)}},is=(e,t)=>{if(t>e.size)throw new Error("index out of bounds");const s=e.keys();for(;t>0;)s.next(),t--;return s.next().value};function bm(e){if(tn(e,"__proto__"))throw new Error("__proto__ is not allowed as a property");if(tn(e,"prototype"))throw new Error("prototype is not allowed as a property");if(tn(e,"constructor"))throw new Error("constructor is not allowed as a property")}const ly=(e,t)=>{bm(t);for(let s=0;s<t.length;s++){const i=t[s];if(pi(e))e=is(e,+i);else if(gi(e)){const n=+i,l=+t[++s]==0?"key":"value",f=is(e,n);switch(l){case"key":e=f;break;case"value":e=e.get(f);break}}else e=e[i]}return e},$o=(e,t,s)=>{if(bm(t),t.length===0)return s(e);let i=e;for(let l=0;l<t.length-1;l++){const f=t[l];if(wr(i)){const a=+f;i=i[a]}else if(mi(i))i=i[f];else if(pi(i)){const a=+f;i=is(i,a)}else if(gi(i)){if(l===t.length-2)break;const o=+f,m=+t[++l]==0?"key":"value",p=is(i,o);switch(m){case"key":i=p;break;case"value":i=i.get(p);break}}}const n=t[t.length-1];if(wr(i)?i[+n]=s(i[+n]):mi(i)&&(i[n]=s(i[n])),pi(i)){const l=is(i,+n),f=s(l);l!==f&&(i.delete(l),i.add(f))}if(gi(i)){const l=+t[t.length-2],f=is(i,l);switch(+n==0?"key":"value"){case"key":{const o=s(f);i.set(o,i.get(f)),o!==f&&i.delete(f);break}case"value":{i.set(f,s(i.get(f)));break}}}return e},_m=e=>e<1;function Wo(e,t,s,i=[]){if(!e)return;const n=_m(s);if(!wr(e)){bs(e,(a,o)=>Wo(a,t,s,[...i,...Ks(o,n)]));return}const[l,f]=e;f&&bs(f,(a,o)=>{Wo(a,t,s,[...i,...Ks(o,n)])}),t(l,i)}function cy(e,t,s,i){return Wo(t,(n,l)=>{e=$o(e,l,f=>oy(f,n,i))},s),e}function dy(e,t,s){const i=_m(s);function n(l,f){const a=ly(e,Ks(f,i));l.map(o=>Ks(o,i)).forEach(o=>{e=$o(e,o,()=>a)})}if(wr(t)){const[l,f]=t;l.forEach(a=>{e=$o(e,Ks(a,i),()=>e)}),f&&bs(f,n)}else bs(t,n);return e}const uy=(e,t)=>mi(e)||wr(e)||gi(e)||pi(e)||hm(e)||pm(e,t);function hy(e,t,s){const i=s.get(e);i?i.push(t):s.set(e,[t])}function fy(e,t){const s={};let i;return e.forEach(n=>{if(n.length<=1)return;t||(n=n.map(a=>a.map(String)).sort((a,o)=>a.length-o.length));const[l,...f]=n;l.length===0?i=f.map(Da):s[Da(l)]=f.map(Da)}),i?Ho(s)?[i]:[i,s]:Ho(s)?void 0:s}const wm=(e,t,s,i,n=[],l=[],f=new Map)=>{const a=ey(e);if(!a){hy(e,n,t);const S=f.get(e);if(S)return i?{transformedValue:null}:S}if(!uy(e,s)){const S=iu(e,s),w=S?{transformedValue:S.value,annotations:[S.type]}:{transformedValue:e};return a||f.set(e,w),w}if(tn(l,e))return{transformedValue:null};const o=iu(e,s),m=(o==null?void 0:o.value)??e,p=wr(m)?[]:{},g={};bs(m,(S,w)=>{if(w==="__proto__"||w==="constructor"||w==="prototype")throw new Error(`Detected property ${w}. This is a prototype pollution risk, please remove it from your object.`);const y=wm(S,t,s,i,[...n,w],[...l,e],f);p[w]=y.transformedValue,wr(y.annotations)?g[Uo(w)]=y.annotations:mi(y.annotations)&&bs(y.annotations,(d,u)=>{g[Uo(w)+"."+u]=d})});const v=Ho(g)?{transformedValue:p,annotations:o?[o.type]:void 0}:{transformedValue:p,annotations:o?[o.type,g]:g};return a||f.set(e,v),v};function Sm(e){return Object.prototype.toString.call(e).slice(8,-1)}function nu(e){return Sm(e)==="Array"}function my(e){if(Sm(e)!=="Object")return!1;const t=Object.getPrototypeOf(e);return!!t&&t.constructor===Object&&t===Object.prototype}function gy(e,t,s,i,n){const l={}.propertyIsEnumerable.call(i,t)?"enumerable":"nonenumerable";l==="enumerable"&&(e[t]=s),n&&l==="nonenumerable"&&Object.defineProperty(e,t,{value:s,enumerable:!1,writable:!0,configurable:!0})}function qo(e,t={}){if(nu(e))return e.map(n=>qo(n,t));if(!my(e))return e;const s=Object.getOwnPropertyNames(e),i=Object.getOwnPropertySymbols(e);return[...s,...i].reduce((n,l)=>{if(l==="__proto__"||nu(t.props)&&!t.props.includes(l))return n;const f=e[l],a=qo(f,t);return gy(n,l,a,e,t.nonenumerable),n},{})}class ue{constructor({dedupe:t=!1}={}){this.classRegistry=new $v,this.symbolRegistry=new cm(s=>s.description??""),this.customTransformerRegistry=new Qv,this.allowedErrorProps=[],this.dedupe=t}serialize(t){const s=new Map,i=wm(t,s,this,this.dedupe),n={json:i.transformedValue};i.annotations&&(n.meta={...n.meta,values:i.annotations});const l=fy(s,this.dedupe);return l&&(n.meta={...n.meta,referentialEqualities:l}),n.meta&&(n.meta.v=1),n}deserialize(t,s){const{json:i,meta:n}=t;let l=s!=null&&s.inPlace?i:qo(i);return n!=null&&n.values&&(l=cy(l,n.values,n.v??0,this)),n!=null&&n.referentialEqualities&&(l=dy(l,n.referentialEqualities,n.v??0)),l}stringify(t){return JSON.stringify(this.serialize(t))}parse(t){return this.deserialize(JSON.parse(t),{inPlace:!0})}registerClass(t,s){this.classRegistry.register(t,s)}registerSymbol(t,s){this.symbolRegistry.register(t,s)}registerCustom(t,s){this.customTransformerRegistry.register({name:s,...t})}allowErrorProps(...t){this.allowedErrorProps.push(...t)}}ue.defaultInstance=new ue;ue.serialize=ue.defaultInstance.serialize.bind(ue.defaultInstance);ue.deserialize=ue.defaultInstance.deserialize.bind(ue.defaultInstance);ue.stringify=ue.defaultInstance.stringify.bind(ue.defaultInstance);ue.parse=ue.defaultInstance.parse.bind(ue.defaultInstance);ue.registerClass=ue.defaultInstance.registerClass.bind(ue.defaultInstance);ue.registerSymbol=ue.defaultInstance.registerSymbol.bind(ue.defaultInstance);ue.registerCustom=ue.defaultInstance.registerCustom.bind(ue.defaultInstance);ue.allowErrorProps=ue.defaultInstance.allowErrorProps.bind(ue.defaultInstance);ue.serialize;ue.deserialize;ue.stringify;ue.parse;ue.registerClass;ue.registerCustom;ue.registerSymbol;ue.allowErrorProps;const G=Hv(),py=G.createClient({transformer:ue,links:[Nv({url:"/api/trpc",headers(){const e=localStorage.getItem("auth_token");return{authorization:e?`Bearer ${e}`:""}}})]}),km=R.createContext(void 0),xy={id:1,email:"admin@orquestrador.local",name:"Administrador",username:"admin",role:"admin"};function vy({children:e}){const[t]=R.useState(xy),[s]=R.useState("no-auth-token"),[i,n]=R.useState(!1);R.useEffect(()=>{n(!1)},[]);const o={user:t,token:s,isAuthenticated:!0,isLoading:!1,login:async(m,p)=>{console.log(" Sistema configurado SEM autenticao - Acesso direto permitido")},register:async(m,p,g,v)=>{console.log(" Sistema configurado SEM autenticao - Registro no necessrio")},logout:()=>{console.log(" Sistema configurado SEM autenticao - Logout no necessrio")}};return r.jsx(km.Provider,{value:o,children:e})}function $r(){const e=R.useContext(km);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const jm=R.createContext(void 0);function yy({children:e}){const[t,s]=R.useState(()=>{const l=localStorage.getItem("theme");return l||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")});R.useEffect(()=>{const l=window.document.documentElement;l.classList.remove("light","dark"),l.classList.add(t),localStorage.setItem("theme",t)},[t]);const n={theme:t,toggleTheme:()=>{s(l=>l==="light"?"dark":"light")},isDark:t==="dark"};return r.jsx(jm.Provider,{value:n,children:e})}function by(){const e=R.useContext(jm);if(e===void 0)throw new Error("useTheme must be used within a ThemeProvider");return e}const _y=({toast:e,onClose:t})=>{const[s,i]=R.useState(!1);R.useEffect(()=>{const a=e.duration||5e3,o=setTimeout(()=>{i(!0),setTimeout(()=>t(e.id),300)},a);return()=>clearTimeout(o)},[e,t]);const n=()=>{i(!0),setTimeout(()=>t(e.id),300)},l=()=>{switch(e.type){case"success":return r.jsx("svg",{className:"w-6 h-6 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"error":return r.jsx("svg",{className:"w-6 h-6 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})});case"warning":return r.jsx("svg",{className:"w-6 h-6 text-yellow-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":default:return r.jsx("svg",{className:"w-6 h-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},f=()=>{switch(e.type){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-800";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-800";case"info":default:return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800"}};return r.jsx("div",{className:`${f()} border rounded-lg shadow-lg p-4 max-w-sm w-full transition-all duration-300 ${s?"opacity-0 translate-x-full":"opacity-100 translate-x-0"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:l()}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.title}),e.message&&r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:e.message})]}),r.jsx("button",{onClick:n,className:"ml-4 inline-flex text-gray-400 hover:text-gray-500 dark:text-gray-500 dark:hover:text-gray-400 focus:outline-none",children:r.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})})},wy=({toasts:e,onClose:t})=>r.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-4",children:e.map(s=>r.jsx(_y,{toast:s,onClose:t},s.id))}),Cm=us.createContext(void 0),Sy=({children:e})=>{const[t,s]=R.useState([]),i=l=>{const f=Math.random().toString(36).substring(7);s(a=>[...a,{...l,id:f}])},n=l=>{s(f=>f.filter(a=>a.id!==l))};return r.jsxs(Cm.Provider,{value:{showToast:i,hideToast:n},children:[e,r.jsx(wy,{toasts:t,onClose:n})]})},Zl=()=>{const e=us.useContext(Cm);if(e===void 0)throw new Error("useToast must be used within a ToastProvider");return e};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var ky={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jy=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),me=(e,t)=>{const s=R.forwardRef(({color:i="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:f,className:a="",children:o,...m},p)=>R.createElement("svg",{ref:p,...ky,width:n,height:n,stroke:i,strokeWidth:f?Number(l)*24/Number(n):l,className:["lucide",`lucide-${jy(e)}`,a].join(" "),...m},[...t.map(([g,v])=>R.createElement(g,v)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s};/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cy=me("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ny=me("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ey=me("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=me("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const au=me("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Py=me("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=me("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ty=me("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ay=me("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=me("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=me("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=me("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oy=me("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=me("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=me("ListTodo",[["rect",{x:"3",y:"5",width:"6",height:"6",rx:"1",key:"1defrl"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ou=me("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=me("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hy=me("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=me("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $y=me("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wy=me("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qo=me("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qy=me("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qy=me("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=me("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=me("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gy=me("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jy=me("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yy=me("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=me("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zy=me("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lu=me("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eb=me("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nm=me("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),tb=[{name:"Dashboard",path:"/",icon:""},{name:"Tasks",path:"/tasks",icon:""},{name:"Chat",path:"/chat",icon:""},{name:"Analytics",path:"/analytics",icon:""},{name:"Workflows",path:"/workflows",icon:""},{name:"Models",path:"/models",icon:""},{name:"Training",path:"/model-training",icon:""},{name:"Specialized AIs",path:"/specialized-ais",icon:""},{name:"Knowledge Base",path:"/knowledge-base",icon:""},{name:"Providers",path:"/providers",icon:""},{name:"Credentials",path:"/credentials",icon:""},{name:"Logs",path:"/execution-logs",icon:""},{name:"Settings",path:"/settings",icon:""}],rb=()=>{const[e,t]=R.useState(!1),s=Ur(),i=()=>t(!e),n=()=>t(!1);return r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:i,className:"lg:hidden fixed top-4 left-4 z-50 p-2 bg-blue-600 text-white rounded-lg shadow-lg hover:bg-blue-700 transition","aria-label":"Toggle menu",children:e?r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e&&r.jsx("div",{className:"lg:hidden fixed inset-0 bg-black bg-opacity-50 z-40",onClick:n}),r.jsx("div",{className:`lg:hidden fixed top-0 left-0 h-full w-64 bg-white shadow-xl z-40 transform transition-transform duration-300 ease-in-out ${e?"translate-x-0":"-translate-x-full"}`,children:r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-blue-600 mb-6",children:"Orquestrador IA"}),r.jsx("nav",{className:"space-y-1",children:tb.map(l=>{const f=s.pathname===l.path;return r.jsxs(en,{to:l.path,onClick:n,className:`flex items-center space-x-3 px-4 py-3 rounded-lg transition ${f?"bg-blue-100 text-blue-700 font-semibold":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx("span",{className:"text-xl",children:l.icon}),r.jsx("span",{children:l.name})]},l.path)})})]})})]})},sb=(e={})=>{const{url:t=`ws://${window.location.hostname}:3001/ws`,reconnectInterval:s=3e3,maxReconnectAttempts:i=5}=e,[n,l]=R.useState(!1),[f,a]=R.useState(null),o=R.useRef(null),m=R.useRef(0),p=R.useRef(),g=R.useCallback(()=>{try{const w=new WebSocket(t);w.onopen=()=>{console.log("WebSocket connected"),l(!0),m.current=0},w.onmessage=y=>{try{const d=JSON.parse(y.data);a(d)}catch(d){console.error("Failed to parse WebSocket message:",d)}},w.onerror=y=>{console.error("WebSocket error:",y)},w.onclose=()=>{console.log("WebSocket disconnected"),l(!1),o.current=null,m.current<i&&(m.current++,console.log(`Attempting reconnect ${m.current}/${i}...`),p.current=setTimeout(g,s))},o.current=w}catch(w){console.error("Failed to create WebSocket connection:",w)}},[t,s,i]),v=R.useCallback(()=>{p.current&&clearTimeout(p.current),o.current&&(o.current.close(),o.current=null),l(!1)},[]),S=R.useCallback(w=>{o.current&&o.current.readyState===WebSocket.OPEN?o.current.send(JSON.stringify(w)):console.warn("WebSocket is not connected")},[]);return R.useEffect(()=>(g(),()=>{v()}),[g,v]),{connected:n,lastMessage:f,sendMessage:S,disconnect:v,reconnect:g}},ib=()=>{const[e,t]=R.useState([]),[s,i]=R.useState([]),[n,l]=R.useState(!1),{connected:f}=sb();R.useEffect(()=>{const p=[{id:1,name:"You",status:"online",currentPage:window.location.pathname,lastActivity:new Date},{id:2,name:"AI Assistant",status:"online",currentPage:"/chat",lastActivity:new Date(Date.now()-5e3)}];t(p);const g=setInterval(()=>{const v=["user_activity","task_update"],S={type:v[Math.floor(Math.random()*v.length)],userId:2,userName:"AI Assistant",timestamp:new Date,data:{message:"Processing task..."}};i(w=>[S,...w.slice(0,9)])},1e4);return()=>clearInterval(g)},[]),R.useEffect(()=>{t(p=>p.map(g=>g.id===1?{...g,currentPage:window.location.pathname,lastActivity:new Date}:g))},[window.location.pathname]);const a=p=>{switch(p){case"online":return"bg-green-500";case"away":return"bg-yellow-500";case"busy":return"bg-red-500";default:return"bg-gray-500"}},o=p=>p?p.split("/").filter(Boolean)[0]||"Dashboard":"Unknown",m=p=>{const g=Math.floor((new Date().getTime()-p.getTime())/1e3);return g<60?"just now":g<3600?`${Math.floor(g/60)}m ago`:g<86400?`${Math.floor(g/3600)}h ago`:`${Math.floor(g/86400)}d ago`};return r.jsxs("div",{className:"fixed bottom-4 right-4 z-30",children:[!n&&r.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white rounded-full p-4 shadow-lg hover:bg-blue-700 transition flex items-center space-x-2",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("span",{className:"bg-green-500 text-xs font-bold px-2 py-1 rounded-full",children:e.length})]}),n&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-2xl w-80 max-h-96 overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-blue-600 text-white px-4 py-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold",children:"Active Users"}),r.jsx("p",{className:"text-xs opacity-75",children:f?"Connected":"Disconnected"})]})]}),r.jsx("button",{onClick:()=>l(!1),className:"hover:bg-blue-700 rounded p-1 transition",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700 max-h-48 overflow-y-auto",children:r.jsx("div",{className:"space-y-3",children:e.map(p=>r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:p.name[0]}),r.jsx("div",{className:`absolute bottom-0 right-0 w-3 h-3 rounded-full border-2 border-white ${a(p.status)}`})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-sm text-gray-900 dark:text-white truncate",children:p.name}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[o(p.currentPage),"  ",m(p.lastActivity)]})]})]},p.id))})}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-200 mb-2",children:"Recent Activity"}),s.length===0?r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 text-center py-4",children:"No recent activity"}):r.jsx("div",{className:"space-y-2",children:s.map((p,g)=>r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300 bg-gray-50 rounded p-2",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("span",{className:"font-semibold",children:p.userName}),r.jsxs("span",{children:[p.type==="user_joined"&&"joined",p.type==="user_left"&&"left",p.type==="user_activity"&&"is active",p.type==="task_update"&&"updated a task",p.type==="chat_message"&&"sent a message"]})]}),r.jsx("p",{className:"text-gray-400 mt-1",children:m(p.timestamp)})]},g))})]}),r.jsx("div",{className:"border-t border-gray-200 px-4 py-2 bg-gray-50 dark:bg-gray-900",children:r.jsx("button",{className:"w-full text-xs text-blue-600 hover:text-blue-700 font-medium",children:"View All Activity "})})]})]})},nb=()=>{var m;const[e,t]=R.useState(!0),s=Ur(),{user:i,logout:n}=$r(),{theme:l,toggleTheme:f,isDark:a}=by(),o=[{path:"/",label:"Dashboard",icon:Oy},{path:"/analytics",label:"Analytics",icon:Zy},{path:"/teams",label:"Equipes",icon:eb},{path:"/projects",label:"Projetos",icon:Ry},{path:"/tasks",label:"Tarefas",icon:Fy},{path:"/prompts",label:"Prompts",icon:$y},{path:"/providers",label:"Provedores",icon:Py},{path:"/models",label:"Modelos",icon:au},{path:"/specialized-ais",label:"IAs Especializadas",icon:Ey},{path:"/credentials",label:"Credenciais",icon:Iy},{path:"/templates",label:"Templates",icon:Ay},{path:"/workflows",label:"Workflows",icon:Dy},{path:"/instructions",label:"Instrues",icon:Ny},{path:"/knowledge-base",label:"Base de Conhecimento",icon:By},{path:"/chat",label:"Chat",icon:Hy},{path:"/services",label:"Servios Externos",icon:Wy},{path:"/external-api-accounts",label:"Contas API",icon:My},{path:"/monitoring",label:"Monitoramento",icon:Cy},{path:"/execution-logs",label:"Logs",icon:Ty},{path:"/terminal",label:"Terminal",icon:Yy},{path:"/model-training",label:"Treinamento",icon:au},{path:"/settings",label:"Configuraes",icon:Vy}];return r.jsxs("div",{className:"flex h-screen bg-slate-900",children:[r.jsx(rb,{}),r.jsxs("aside",{className:`${e?"w-64":"w-20"} bg-slate-800 border-r border-slate-700 transition-all duration-300 flex-col hidden lg:flex`,children:[r.jsxs("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between",children:[e&&r.jsx("h1",{className:"text-xl font-bold text-white",children:"Orquestrador v3.6.0"}),r.jsx("button",{onClick:()=>t(!e),className:"p-2 rounded-lg hover:bg-slate-700 text-gray-400",children:e?r.jsx(Nm,{size:20}):r.jsx(zy,{size:20})})]}),r.jsx("nav",{className:"flex-1 overflow-y-auto py-4",children:o.map(p=>{const g=p.icon,v=s.pathname===p.path;return r.jsxs(en,{to:p.path,className:`flex items-center px-4 py-3 mx-2 rounded-lg transition-colors ${v?"bg-blue-600 text-white":"text-gray-400 hover:bg-slate-700 hover:text-white"}`,title:e?"":p.label,children:[r.jsx(g,{size:20,className:"flex-shrink-0"}),e&&r.jsx("span",{className:"ml-3",children:p.label})]},p.path)})}),r.jsx("div",{className:"p-4 border-t border-slate-700",children:e?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center text-white font-semibold",children:((m=i==null?void 0:i.name)==null?void 0:m.charAt(0).toUpperCase())||"U"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-white truncate",children:(i==null?void 0:i.name)||"Usurio"}),r.jsx("p",{className:"text-xs text-gray-400 truncate",children:i==null?void 0:i.email})]})]}),r.jsx("div",{className:"flex space-x-2 mb-2",children:r.jsxs("button",{onClick:f,className:"flex-1 flex items-center justify-center px-3 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm text-gray-300 transition-colors",title:a?"Modo Claro":"Modo Escuro",children:[a?r.jsx(Jy,{size:16,className:"mr-2"}):r.jsx(Uy,{size:16,className:"mr-2"}),a?"Claro":"Escuro"]})}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsxs(en,{to:"/profile",className:"flex-1 flex items-center justify-center px-3 py-2 bg-slate-700 hover:bg-slate-600 rounded-lg text-sm text-gray-300 transition-colors",children:[r.jsx(lu,{size:16,className:"mr-2"}),"Perfil"]}),r.jsxs("button",{onClick:n,className:"flex-1 flex items-center justify-center px-3 py-2 bg-red-600 hover:bg-red-700 rounded-lg text-sm text-white transition-colors",children:[r.jsx(ou,{size:16,className:"mr-2"}),"Sair"]})]}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:"v3.6.0 - Sistema de Orquestrao"})]}):r.jsxs("div",{className:"flex flex-col space-y-2",children:[r.jsx(en,{to:"/profile",className:"p-2 rounded-lg hover:bg-slate-700 text-gray-400",title:"Perfil",children:r.jsx(lu,{size:20})}),r.jsx("button",{onClick:n,className:"p-2 rounded-lg hover:bg-red-600 text-gray-400",title:"Sair",children:r.jsx(ou,{size:20})})]})})]}),r.jsx("main",{className:"flex-1 overflow-y-auto",children:r.jsx("div",{className:"container mx-auto p-4 lg:p-6",children:r.jsx(qx,{})})}),r.jsx(ib,{})]})},tr=({title:e,value:t,icon:s,color:i,trend:n,subtitle:l})=>r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:e}),r.jsx("p",{className:`text-3xl font-bold ${i} mt-2`,children:t}),l&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:l}),n!==void 0&&r.jsxs("p",{className:`text-sm mt-2 font-medium ${n>=0?"text-green-600":"text-red-600"}`,children:[n>=0?"":""," ",Math.abs(n),"% este ms"]})]}),r.jsx("div",{className:"text-5xl opacity-20",children:s})]})});function ab(){var A,O,B,J;const{user:e}=$r(),[t,s]=R.useState(new Date),{data:i}=G.teams.list.useQuery({limit:100,offset:0}),{data:n}=G.projects.list.useQuery({limit:100,offset:0}),{data:l}=G.tasks.list.useQuery({limit:100,offset:0}),{data:f}=G.prompts.list.useQuery({userId:e==null?void 0:e.id,limit:100,offset:0}),{data:a}=G.workflows.list.useQuery({limit:100,offset:0}),{data:o}=G.templates.list.useQuery({limit:100,offset:0}),{data:m}=G.monitoring.getCurrentMetrics.useQuery(),{data:p}=G.monitoring.getServiceStatus.useQuery(),{data:g}=G.tasks.getStats.useQuery({}),{data:v}=G.workflows.getStats.useQuery(),{data:S}=G.templates.getStats.useQuery();R.useEffect(()=>{const H=setInterval(()=>s(new Date),1e3);return()=>clearInterval(H)},[]);const w=(i==null?void 0:i.data)||[],y=(n==null?void 0:n.data)||[],d=(l==null?void 0:l.tasks)||[],u=(f==null?void 0:f.data)||[],c=(a==null?void 0:a.items)||[],h=(o==null?void 0:o.items)||[],x=m==null?void 0:m.metrics,_=y.filter(H=>H.status==="active").length,k=y.filter(H=>H.status==="completed").length,j=w.reduce((H,I)=>H+(I.memberCount||0),0),b=d.filter(H=>H.status==="pending").length,C=d.filter(H=>H.status==="in_progress").length,M=d.filter(H=>H.status==="completed").length,L=c.filter(H=>H.isActive).length,P=h.filter(H=>H.isPublic).length,D={planning:y.filter(H=>H.status==="planning").length,active:y.filter(H=>H.status==="active").length,on_hold:y.filter(H=>H.status==="on_hold").length,completed:y.filter(H=>H.status==="completed").length,archived:y.filter(H=>H.status==="archived").length},W={pending:b,in_progress:C,completed:M,blocked:d.filter(H=>H.status==="blocked").length},V=[...d.slice(0,2).map((H,I)=>({id:`task-${I}`,type:"task",message:`Tarefa: ${H.title}`,timestamp:new Date(H.createdAt),user:e==null?void 0:e.name})),...y.slice(0,2).map((H,I)=>({id:`project-${I}`,type:"project",message:`Projeto: ${H.name}`,timestamp:new Date(H.createdAt),user:e==null?void 0:e.name})),...c.slice(0,1).map((H,I)=>({id:`workflow-${I}`,type:"workflow",message:`Workflow: ${H.name}`,timestamp:new Date(H.createdAt),user:e==null?void 0:e.name}))].sort((H,I)=>I.timestamp.getTime()-H.timestamp.getTime()).slice(0,5),Z=H=>{const I=Math.floor((Date.now()-H.getTime())/1e3);if(I<60)return`${I}s atrs`;const T=Math.floor(I/60);if(T<60)return`${T}m atrs`;const z=Math.floor(T/60);return z<24?`${z}h atrs`:`${Math.floor(z/24)}d atrs`},ee=y.length>0?Math.round(k/y.length*100):0,N=d.length>0?Math.round(M/d.length*100):0;return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:["Bem-vindo, ",(e==null?void 0:e.name)||"Usurio","! "]}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300 mt-2",children:[t.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," - ",t.toLocaleTimeString("pt-BR")]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(tr,{title:"Projetos",value:y.length,subtitle:`${_} ativos`,icon:"",color:"text-blue-600",trend:12}),r.jsx(tr,{title:"Tarefas",value:d.length,subtitle:`${C} em progresso`,icon:"",color:"text-green-600",trend:8}),r.jsx(tr,{title:"Workflows",value:c.length,subtitle:`${L} ativos`,icon:"",color:"text-purple-600",trend:5}),r.jsx(tr,{title:"Templates",value:h.length,subtitle:`${P} pblicos`,icon:"",color:"text-orange-600",trend:15})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(tr,{title:"Equipes",value:w.length,subtitle:`${j} membros`,icon:"",color:"text-indigo-600"}),r.jsx(tr,{title:"Prompts",value:u.length,subtitle:"Total de prompts",icon:"",color:"text-pink-600",trend:-3}),r.jsx(tr,{title:"Taxa de Concluso",value:`${ee}%`,subtitle:"Projetos completos",icon:"",color:"text-teal-600"}),r.jsx(tr,{title:"Tarefas Pendentes",value:b,subtitle:"Aguardando execuo",icon:"",color:"text-yellow-600"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Status dos Projetos"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Planejamento"}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:D.planning})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-gray-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${D.planning/Math.max(y.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Ativo"}),r.jsx("span",{className:"font-semibold text-green-600",children:D.active})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-green-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${D.active/Math.max(y.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Em Espera"}),r.jsx("span",{className:"font-semibold text-yellow-600",children:D.on_hold})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-yellow-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${D.on_hold/Math.max(y.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Concludo"}),r.jsx("span",{className:"font-semibold text-blue-600",children:D.completed})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${D.completed/Math.max(y.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Arquivado"}),r.jsx("span",{className:"font-semibold text-red-600",children:D.archived})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-red-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${D.archived/Math.max(y.length,1)*100}%`}})})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Status das Tarefas"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Pendente"}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:W.pending})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-gray-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${W.pending/Math.max(d.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Em Progresso"}),r.jsx("span",{className:"font-semibold text-blue-600",children:W.in_progress})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-blue-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${W.in_progress/Math.max(d.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Concluda"}),r.jsx("span",{className:"font-semibold text-green-600",children:W.completed})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-green-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${W.completed/Math.max(d.length,1)*100}%`}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Bloqueada"}),r.jsx("span",{className:"font-semibold text-red-600",children:W.blocked})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:r.jsx("div",{className:"bg-red-500 h-2.5 rounded-full transition-all duration-500",style:{width:`${W.blocked/Math.max(d.length,1)*100}%`}})})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Tarefas Pendentes Recentes"}),b===0?r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:" Nenhuma tarefa pendente!"}):r.jsx("div",{className:"space-y-3",children:d.filter(H=>H.status==="pending").slice(0,5).map(H=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white line-clamp-1",children:H.title}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Prioridade: ",r.jsx("span",{className:`font-semibold ${H.priority==="urgent"?"text-red-600":H.priority==="high"?"text-orange-600":H.priority==="medium"?"text-yellow-600":"text-gray-600"}`,children:H.priority})]})]}),r.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200 rounded",children:"Pendente"})]},H.id))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Mtricas do Sistema"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsx("div",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400",children:typeof(x==null?void 0:x.cpu)=="number"?`${x.cpu.toFixed(1)}%`:"0.0%"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"CPU"}),r.jsx("div",{className:"w-full bg-blue-200 dark:bg-blue-900 rounded-full h-1.5 mt-2",children:r.jsx("div",{className:"bg-blue-600 dark:bg-blue-400 h-1.5 rounded-full transition-all duration-500",style:{width:`${(x==null?void 0:x.cpu)||0}%`}})})]}),r.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[r.jsx("div",{className:"text-3xl font-bold text-green-600 dark:text-green-400",children:typeof(x==null?void 0:x.memory)=="number"?`${x.memory.toFixed(1)}%`:"0.0%"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Memria"}),r.jsx("div",{className:"w-full bg-green-200 dark:bg-green-900 rounded-full h-1.5 mt-2",children:r.jsx("div",{className:"bg-green-600 dark:bg-green-400 h-1.5 rounded-full transition-all duration-500",style:{width:`${(x==null?void 0:x.memory)||0}%`}})})]}),r.jsxs("div",{className:"text-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800",children:[r.jsx("div",{className:"text-3xl font-bold text-yellow-600 dark:text-yellow-400",children:typeof(x==null?void 0:x.disk)=="number"?`${x.disk.toFixed(1)}%`:"0.0%"}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:"Disco"}),r.jsx("div",{className:"w-full bg-yellow-200 dark:bg-yellow-900 rounded-full h-1.5 mt-2",children:r.jsx("div",{className:"bg-yellow-600 dark:bg-yellow-400 h-1.5 rounded-full transition-all duration-500",style:{width:`${(x==null?void 0:x.disk)||0}%`}})})]})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg border border-blue-400 dark:border-purple-700 p-6 text-white",children:[r.jsx("h2",{className:"text-lg font-semibold mb-2",children:" Taxa de Concluso"}),r.jsxs("div",{className:"text-5xl font-bold mb-2",children:[ee,"%"]}),r.jsxs("p",{className:"text-sm opacity-90 mb-4",children:[k," de ",y.length," projetos concludos"]}),r.jsx("div",{className:"bg-white/20 rounded-full h-2.5",children:r.jsx("div",{className:"bg-white h-2.5 rounded-full transition-all duration-500",style:{width:`${ee}%`}})}),r.jsxs("div",{className:"mt-4 pt-4 border-t border-white/20",children:[r.jsxs("p",{className:"text-sm opacity-90 mb-1",children:["Tarefas: ",N,"%"]}),r.jsx("div",{className:"bg-white/20 rounded-full h-1.5",children:r.jsx("div",{className:"bg-white h-1.5 rounded-full transition-all duration-500",style:{width:`${N}%`}})})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Atividade Recente"}),V.length===0?r.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400 text-sm",children:"Nenhuma atividade recente"}):r.jsx("div",{className:"space-y-4",children:V.map(H=>r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:`w-2.5 h-2.5 rounded-full mt-2 ${H.type==="project"?"bg-green-500":H.type==="team"?"bg-blue-500":H.type==="task"?"bg-purple-500":H.type==="workflow"?"bg-orange-500":"bg-gray-500"}`})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white line-clamp-2",children:H.message}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[H.user,"  ",Z(H.timestamp)]})]})]},H.id))})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:" Status do Sistema"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Banco de Dados"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${(A=p==null?void 0:p.status)!=null&&A.database?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"}`,children:(O=p==null?void 0:p.status)!=null&&O.database?" Online":" Offline"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"API tRPC"}),r.jsx("span",{className:"text-xs px-2 py-1 rounded-full font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:" Online"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"LM Studio"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${(B=p==null?void 0:p.status)!=null&&B.lmstudio?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200"}`,children:(J=p==null?void 0:p.status)!=null&&J.lmstudio?" Online":" Offline"})]}),r.jsxs("div",{className:"flex items-center justify-between p-2 rounded hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:[r.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-300",children:"WebSocket"}),r.jsx("span",{className:"text-xs px-2 py-1 rounded-full font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:" Online"})]})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-teal-600 rounded-lg border border-green-400 dark:border-teal-700 p-6 text-white",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:" Resumo Rpido"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm opacity-90",children:"Total de Itens"}),r.jsx("span",{className:"text-xl font-bold",children:y.length+d.length+c.length+h.length})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm opacity-90",children:"Workflows Ativos"}),r.jsx("span",{className:"text-xl font-bold",children:L})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm opacity-90",children:"Templates Pblicos"}),r.jsx("span",{className:"text-xl font-bold",children:P})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm opacity-90",children:"Uso de Templates"}),r.jsx("span",{className:"text-xl font-bold",children:(S==null?void 0:S.stats.totalUsage)||0})]})]})]})]})]})]})}function ob(){const{user:e}=$r(),[t,s]=R.useState("profile"),[i,n]=R.useState({type:"",text:""}),[l,f]=R.useState({name:"",email:"",role:"user",avatarUrl:"",bio:"",username:""}),[a,o]=R.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[m,p]=R.useState({emailNotifications:!0,darkMode:!0,language:"pt-BR",timezone:"America/Sao_Paulo"}),[g,v]=R.useState(!1),[S,w]=R.useState(""),{data:y,isLoading:d,refetch:u}=G.users.getProfile.useQuery({userId:(e==null?void 0:e.id)||1},{enabled:!!(e!=null&&e.id)}),{data:c,refetch:h}=G.users.getStatistics.useQuery({userId:(e==null?void 0:e.id)||1},{enabled:!!(e!=null&&e.id)}),{data:x,refetch:_}=G.users.getActivity.useQuery({userId:(e==null?void 0:e.id)||1,limit:50},{enabled:!!(e!=null&&e.id)&&t==="activity"}),{data:k,refetch:j}=G.users.getSessions.useQuery({userId:(e==null?void 0:e.id)||1},{enabled:!!(e!=null&&e.id)&&t==="sessions"}),b=G.users.updateProfile.useMutation({onSuccess:()=>{n({type:"success",text:"Perfil atualizado com sucesso!"}),setTimeout(()=>n({type:"",text:""}),3e3),u(),h()},onError:I=>{n({type:"error",text:I.message||"Erro ao atualizar perfil"}),setTimeout(()=>n({type:"",text:""}),3e3)}}),C=G.users.changePassword.useMutation({onSuccess:()=>{n({type:"success",text:"Senha alterada com sucesso!"}),o({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>n({type:"",text:""}),3e3)},onError:I=>{n({type:"error",text:I.message||"Erro ao alterar senha"}),setTimeout(()=>n({type:"",text:""}),3e3)}}),M=G.users.updatePreferences.useMutation({onSuccess:()=>{n({type:"success",text:"Preferncias atualizadas!"}),setTimeout(()=>n({type:"",text:""}),3e3)},onError:I=>{n({type:"error",text:I.message||"Erro ao atualizar preferncias"}),setTimeout(()=>n({type:"",text:""}),3e3)}}),L=G.users.uploadAvatar.useMutation({onSuccess:I=>{I.avatarUrl&&(f({...l,avatarUrl:I.avatarUrl}),n({type:"success",text:"Avatar atualizado!"}),u()),setTimeout(()=>n({type:"",text:""}),3e3)},onError:I=>{n({type:"error",text:I.message||"Erro ao fazer upload do avatar"}),setTimeout(()=>n({type:"",text:""}),3e3)}}),P=G.users.revokeSession.useMutation({onSuccess:()=>{n({type:"success",text:"Sesso revogada!"}),j(),setTimeout(()=>n({type:"",text:""}),3e3)},onError:I=>{n({type:"error",text:I.message||"Erro ao revogar sesso"}),setTimeout(()=>n({type:"",text:""}),3e3)}}),D=G.users.deleteAccount.useMutation({onSuccess:()=>{alert("Conta deletada com sucesso. Voc ser redirecionado."),window.location.href="/login"},onError:I=>{n({type:"error",text:I.message||"Erro ao deletar conta"}),setTimeout(()=>n({type:"",text:""}),3e3)}}),W=G.users.exportData.useMutation();R.useEffect(()=>{if(y!=null&&y.profile&&(f({name:y.profile.name||"",email:y.profile.email||"",role:y.profile.role||"user",avatarUrl:y.profile.avatarUrl||"",bio:y.profile.bio||"",username:y.profile.username||""}),y.profile.preferences))try{const I=typeof y.profile.preferences=="string"?JSON.parse(y.profile.preferences):y.profile.preferences;p({...m,...I})}catch(I){console.error("Erro ao parsear preferncias:",I)}},[y]);const V=async I=>{I.preventDefault(),n({type:"",text:""});try{await b.mutateAsync({userId:(e==null?void 0:e.id)||1,name:l.name,email:l.email,avatarUrl:l.avatarUrl||void 0,bio:l.bio||void 0,username:l.username||void 0})}catch{}},Z=async I=>{if(I.preventDefault(),n({type:"",text:""}),a.newPassword!==a.confirmPassword){n({type:"error",text:"As senhas no coincidem"}),setTimeout(()=>n({type:"",text:""}),3e3);return}if(a.newPassword.length<8){n({type:"error",text:"A senha deve ter pelo menos 8 caracteres"}),setTimeout(()=>n({type:"",text:""}),3e3);return}try{await C.mutateAsync({userId:(e==null?void 0:e.id)||1,currentPassword:a.currentPassword,newPassword:a.newPassword})}catch{}},ee=async()=>{try{await M.mutateAsync({userId:(e==null?void 0:e.id)||1,preferences:m})}catch{}},N=async I=>{var E;const T=(E=I.target.files)==null?void 0:E[0];if(!T)return;if(T.size>5*1024*1024){n({type:"error",text:"O arquivo deve ter no mximo 5MB"}),setTimeout(()=>n({type:"",text:""}),3e3);return}const z=new FileReader;z.onloadend=async()=>{try{await L.mutateAsync({userId:(e==null?void 0:e.id)||1,avatarData:z.result})}catch{}},z.readAsDataURL(T)},A=async I=>{if(confirm("Tem certeza que deseja revogar esta sesso?"))try{await P.mutateAsync({userId:(e==null?void 0:e.id)||1,sessionId:I})}catch{}},O=async()=>{if(!S){n({type:"error",text:"Digite sua senha para confirmar"}),setTimeout(()=>n({type:"",text:""}),3e3);return}try{await D.mutateAsync({userId:(e==null?void 0:e.id)||1,password:S})}catch{}},B=async()=>{try{const I=await W.mutateAsync({userId:(e==null?void 0:e.id)||1}),T=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),z=URL.createObjectURL(T),E=document.createElement("a");E.href=z,E.download=`user_data_export_${new Date().toISOString()}.json`,document.body.appendChild(E),E.click(),document.body.removeChild(E),URL.revokeObjectURL(z),n({type:"success",text:"Dados exportados com sucesso!"}),setTimeout(()=>n({type:"",text:""}),3e3)}catch{n({type:"error",text:"Erro ao exportar dados"}),setTimeout(()=>n({type:"",text:""}),3e3)}},J=(c==null?void 0:c.statistics)||{totalTasks:0,completedTasks:0,totalProjects:0,totalConversations:0,totalTemplates:0,totalWorkflows:0},H=[{id:"profile",label:"Perfil",icon:""},{id:"security",label:"Segurana",icon:""},{id:"activity",label:"Atividade",icon:""},{id:"sessions",label:"Sesses",icon:""},{id:"preferences",label:"Preferncias",icon:""},{id:"data",label:"Dados",icon:""}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between gap-6 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"relative",children:[l.avatarUrl?r.jsx("img",{src:l.avatarUrl,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-gray-700"}):r.jsx("div",{className:"w-24 h-24 rounded-full bg-blue-600 flex items-center justify-center text-white text-3xl font-bold border-4 border-gray-700",children:l.name.charAt(0).toUpperCase()}),r.jsxs("label",{className:"absolute bottom-0 right-0 bg-gray-800 rounded-full p-2 shadow-lg hover:bg-gray-700 cursor-pointer border-2 border-gray-900",children:[r.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden"}),r.jsxs("svg",{className:"h-5 w-5 text-gray-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})]})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:l.name}),r.jsx("p",{className:"text-gray-400",children:l.email}),l.username&&r.jsxs("p",{className:"text-gray-500 text-sm",children:["@",l.username]}),r.jsx("span",{className:`inline-block mt-2 text-xs px-3 py-1 rounded-full ${l.role==="admin"?"bg-purple-600 text-white":"bg-blue-600 text-white"}`,children:l.role==="admin"?" Administrador":" Usurio"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:J.totalTasks}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Tarefas"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:J.totalProjects}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Projetos"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-white",children:J.totalConversations}),r.jsx("div",{className:"text-gray-400 text-xs",children:"Conversas"})]})]})]}),l.bio&&r.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:r.jsx("p",{className:"text-gray-300",children:l.bio})})]}),i.text&&r.jsx("div",{className:`card ${i.type==="success"?"bg-green-900 border-green-600":"bg-red-900 border-red-600"}`,children:r.jsx("p",{className:"text-white",children:i.text})}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:H.map(I=>r.jsxs("button",{onClick:()=>s(I.id),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${t===I.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[I.icon," ",I.label]},I.id))})}),r.jsxs("div",{className:"card",children:[t==="profile"&&r.jsxs("form",{onSubmit:V,className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Informaes do Perfil"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome Completo"}),r.jsx("input",{type:"text",value:l.name,onChange:I=>f({...l,name:I.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome de Usurio"}),r.jsx("input",{type:"text",value:l.username,onChange:I=>f({...l,username:I.target.value}),className:"input w-full",placeholder:"seu_usuario"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:l.email,onChange:I=>f({...l,email:I.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Bio"}),r.jsx("textarea",{value:l.bio,onChange:I=>f({...l,bio:I.target.value}),rows:4,className:"input w-full",placeholder:"Conte um pouco sobre voc..."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",disabled:b.isLoading||d,className:"btn-primary",children:b.isLoading?" Salvando...":" Salvar Alteraes"}),r.jsx("button",{type:"button",onClick:()=>{y!=null&&y.profile&&f({name:y.profile.name||"",email:y.profile.email||"",role:y.profile.role||"user",avatarUrl:y.profile.avatarUrl||"",bio:y.profile.bio||"",username:y.profile.username||""})},className:"btn-secondary",children:" Cancelar"})]})]}),t==="security"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Segurana da Conta"}),r.jsxs("form",{onSubmit:Z,className:"bg-gray-800 rounded-lg p-4 space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white",children:"Alterar Senha"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Senha Atual"}),r.jsx("input",{type:"password",value:a.currentPassword,onChange:I=>o({...a,currentPassword:I.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nova Senha"}),r.jsx("input",{type:"password",value:a.newPassword,onChange:I=>o({...a,newPassword:I.target.value}),className:"input w-full",minLength:8,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Confirmar Nova Senha"}),r.jsx("input",{type:"password",value:a.confirmPassword,onChange:I=>o({...a,confirmPassword:I.target.value}),className:"input w-full",minLength:8,required:!0})]}),r.jsx("button",{type:"submit",disabled:C.isLoading,className:"btn-primary",children:C.isLoading?" Alterando...":" Alterar Senha"})]}),r.jsxs("div",{className:"bg-red-900 border border-red-600 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:" Zona de Perigo"}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Deletar sua conta  permanente e no pode ser desfeito. Todos os seus dados sero removidos."}),r.jsx("button",{onClick:()=>v(!0),className:"btn-danger",children:" Deletar Minha Conta"})]})]}),t==="activity"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" Atividade Recente"}),r.jsx("button",{onClick:()=>_(),className:"btn-secondary text-sm",children:" Atualizar"})]}),x!=null&&x.activities&&x.activities.length>0?r.jsx("div",{className:"space-y-2",children:x.activities.map(I=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-start gap-3",children:[r.jsx("div",{className:"text-2xl",children:""}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-white font-semibold",children:I.action}),I.resourceType&&r.jsxs("div",{className:"text-gray-400 text-sm",children:[I.resourceType," #",I.resourceId]}),r.jsx("div",{className:"text-gray-500 text-xs mt-1",children:new Date(I.timestamp).toLocaleString("pt-BR")})]})]},I.id))}):r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhuma atividade recente"}),r.jsx("p",{className:"text-sm",children:"Suas aes aparecero aqui"})]})]}),t==="sessions"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" Sesses Ativas"}),r.jsx("button",{onClick:()=>j(),className:"btn-secondary text-sm",children:" Atualizar"})]}),k!=null&&k.sessions&&k.sessions.length>0?r.jsx("div",{className:"space-y-3",children:k.sessions.map(I=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"text-3xl",children:I.deviceName.includes("iPhone")||I.deviceName.includes("Android")?"":""}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-white font-semibold flex items-center gap-2",children:[I.deviceName,I.isCurrent&&r.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:"Atual"})]}),r.jsx("div",{className:"text-gray-400 text-sm",children:I.location}),r.jsxs("div",{className:"text-gray-500 text-xs",children:["IP: ",I.ipAddress,"  ltima atividade:"," ",new Date(I.lastActive).toLocaleString("pt-BR")]})]})]}),!I.isCurrent&&r.jsx("button",{onClick:()=>A(I.id),className:"btn-danger text-sm",children:" Revogar"})]},I.id))}):r.jsx("div",{className:"text-center py-12 text-gray-400",children:r.jsx("p",{className:"text-lg mb-2",children:"Nenhuma sesso ativa"})})]}),t==="preferences"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Preferncias do Sistema"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-white",children:"Notificaes por Email"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Receba atualizaes por email"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.emailNotifications,onChange:I=>p({...m,emailNotifications:I.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-white",children:"Modo Escuro"}),r.jsx("p",{className:"text-sm text-gray-400",children:"Ativar tema escuro"})]}),r.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m.darkMode,onChange:I=>p({...m,darkMode:I.target.checked}),className:"sr-only peer"}),r.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-800 rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("label",{className:"block text-white font-semibold mb-2",children:"Idioma"}),r.jsxs("select",{value:m.language,onChange:I=>p({...m,language:I.target.value}),className:"input w-full",children:[r.jsx("option",{value:"pt-BR",children:"Portugus (Brasil)"}),r.jsx("option",{value:"en-US",children:"English (US)"}),r.jsx("option",{value:"es-ES",children:"Espaol"})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("label",{className:"block text-white font-semibold mb-2",children:"Fuso Horrio"}),r.jsxs("select",{value:m.timezone,onChange:I=>p({...m,timezone:I.target.value}),className:"input w-full",children:[r.jsx("option",{value:"America/Sao_Paulo",children:"So Paulo (GMT-3)"}),r.jsx("option",{value:"America/New_York",children:"New York (GMT-5)"}),r.jsx("option",{value:"Europe/London",children:"London (GMT+0)"}),r.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (GMT+9)"})]})]})]}),r.jsx("button",{onClick:ee,disabled:M.isLoading,className:"btn-primary",children:M.isLoading?" Salvando...":" Salvar Preferncias"})]}),t==="data"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Gerenciar Dados"}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Exportar Dados"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Baixe uma cpia de todos os seus dados em formato JSON"}),r.jsx("button",{onClick:B,disabled:W.isLoading,className:"btn-primary",children:W.isLoading?" Exportando...":" Exportar Meus Dados"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Estatsticas Completas"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mt-4",children:[r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Tarefas Totais"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:J.totalTasks})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Tarefas Completas"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:J.completedTasks})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Projetos"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:J.totalProjects})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Conversas"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:J.totalConversations})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Templates"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:J.totalTemplates})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Workflows"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:J.totalWorkflows})]})]})]})]})]}),g&&r.jsx("div",{className:"modal-overlay",onClick:()=>v(!1),children:r.jsxs("div",{className:"modal-content",onClick:I=>I.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Deletar Conta"}),r.jsxs("p",{className:"text-gray-300 mb-4",children:["Esta ao  ",r.jsx("strong",{children:"permanente e irreversvel"}),". Todos os seus dados, incluindo tarefas, projetos, conversas e templates sero deletados."]}),r.jsx("p",{className:"text-gray-300 mb-4",children:"Digite sua senha para confirmar:"}),r.jsx("input",{type:"password",value:S,onChange:I=>w(I.target.value),className:"input w-full mb-4",placeholder:"Digite sua senha"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:O,disabled:D.isLoading,className:"btn-danger flex-1",children:D.isLoading?" Deletando...":" Confirmar Deleo"}),r.jsx("button",{onClick:()=>{v(!1),w("")},className:"btn-secondary flex-1",children:" Cancelar"})]})]})})]})}const lb={planning:"bg-gray-100 text-gray-800",active:"bg-green-100 text-green-800",on_hold:"bg-yellow-100 text-yellow-800",completed:"bg-blue-100 text-blue-800",archived:"bg-red-100 text-red-800"},cb={planning:"Planejamento",active:"Ativo",on_hold:"Em Espera",completed:"Concludo",archived:"Arquivado"};function db(){const{user:e}=$r(),{showToast:t}=Zl(),[s,i]=R.useState(!1),[n,l]=R.useState(null),[f,a]=R.useState({name:"",description:"",status:"planning"}),[o,m]=R.useState(""),[p,g]=R.useState("all"),{data:v,isLoading:S,refetch:w}=G.projects.list.useQuery({limit:50,offset:0}),{data:y}=G.teams.list.useQuery({limit:100,offset:0}),d=G.projects.create.useMutation({onSuccess:()=>{w(),j(),t({type:"success",title:"Projeto criado!",message:"O projeto foi criado com sucesso.",duration:5e3})},onError:M=>{console.error("Erro ao criar projeto:",M),t({type:"error",title:"Erro ao criar projeto",message:M.message||"Ocorreu um erro inesperado.",duration:7e3})}}),u=G.projects.update.useMutation({onSuccess:()=>{w(),j(),t({type:"success",title:"Projeto atualizado!",message:"As alteraes foram salvas com sucesso.",duration:5e3})},onError:M=>{console.error("Erro ao atualizar projeto:",M),t({type:"error",title:"Erro ao atualizar projeto",message:M.message||"Ocorreu um erro inesperado.",duration:7e3})}}),c=G.projects.delete.useMutation({onSuccess:()=>{w(),t({type:"success",title:"Projeto excludo!",message:"O projeto foi removido com sucesso.",duration:5e3})},onError:M=>{console.error("Erro ao excluir projeto:",M),t({type:"error",title:"Erro ao excluir projeto",message:M.message||"Ocorreu um erro inesperado.",duration:7e3})}}),h=(v==null?void 0:v.data)||[],x=(y==null?void 0:y.data)||[],_=h.filter(M=>{var D;const L=M.name.toLowerCase().includes(o.toLowerCase())||((D=M.description)==null?void 0:D.toLowerCase().includes(o.toLowerCase())),P=p==="all"||M.status===p;return L&&P}),k=M=>{M?(l(M),a({name:M.name,description:M.description||"",status:M.status,teamId:M.teamId})):(l(null),a({name:"",description:"",status:"planning"})),i(!0)},j=()=>{i(!1),l(null),a({name:"",description:"",status:"planning"})},b=async M=>{M.preventDefault(),n?await u.mutateAsync({id:n.id,name:f.name,description:f.description,status:f.status,teamId:f.teamId}):await d.mutateAsync({name:f.name,description:f.description,teamId:f.teamId})},C=async M=>{confirm("Tem certeza que deseja excluir este projeto?")&&await c.mutateAsync({id:M})};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Projetos"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Gerencie seus projetos e tarefas"})]}),r.jsxs("button",{onClick:()=>k(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Projeto"]})]}),r.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",placeholder:"Buscar projetos...",value:o,onChange:M=>m(M.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),r.jsxs("select",{value:p,onChange:M=>g(M.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"all",children:"Todos os Status"}),r.jsx("option",{value:"planning",children:"Planejamento"}),r.jsx("option",{value:"active",children:"Ativo"}),r.jsx("option",{value:"on_hold",children:"Em Espera"}),r.jsx("option",{value:"completed",children:"Concludo"}),r.jsx("option",{value:"archived",children:"Arquivado"})]})]}),S?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Carregando projetos..."})]}):_.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:o||p!=="all"?"Nenhum projeto encontrado":"Nenhum projeto"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:o||p!=="all"?"Tente uma busca diferente.":"Comece criando um novo projeto."}),!o&&p==="all"&&r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>k(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Criar Projeto"})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(M=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex-1",children:M.name}),r.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${lb[M.status]}`,children:cb[M.status]})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm line-clamp-3 mb-4",children:M.description||"Sem descrio"}),r.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mb-4",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),new Date(M.createdAt).toLocaleDateString("pt-BR")]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>k(M),className:"flex-1 text-blue-600 hover:text-blue-700 text-sm font-medium border border-blue-600 rounded px-3 py-1 hover:bg-blue-50 transition-colors",children:"Editar"}),r.jsx("button",{onClick:()=>C(M.id),disabled:c.isLoading,className:"flex-1 text-red-600 hover:text-red-700 text-sm font-medium border border-red-600 rounded px-3 py-1 hover:bg-red-50 transition-colors disabled:opacity-50",children:"Excluir"})]})]},M.id))}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Editar Projeto":"Novo Projeto"}),r.jsx("button",{onClick:j,className:"text-gray-400 hover:text-gray-600 dark:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:b,className:"flex flex-col flex-1 min-h-0",children:[r.jsxs("div",{className:"space-y-4 p-6 overflow-y-auto flex-1",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Nome do Projeto *"}),r.jsx("input",{id:"name",type:"text",value:f.name,onChange:M=>a({...f,name:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Descrio"}),r.jsx("textarea",{id:"description",value:f.description,onChange:M=>a({...f,description:M.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva o objetivo do projeto..."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Status *"}),r.jsxs("select",{id:"status",value:f.status,onChange:M=>a({...f,status:M.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,children:[r.jsx("option",{value:"planning",children:"Planejamento"}),r.jsx("option",{value:"active",children:"Ativo"}),r.jsx("option",{value:"on_hold",children:"Em Espera"}),r.jsx("option",{value:"completed",children:"Concludo"}),r.jsx("option",{value:"archived",children:"Arquivado"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"teamId",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Equipe (opcional)"}),r.jsxs("select",{id:"teamId",value:f.teamId||"",onChange:M=>a({...f,teamId:M.target.value?parseInt(M.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Sem equipe"}),x.map(M=>r.jsx("option",{value:M.id,children:M.name},M.id))]})]})]}),r.jsxs("div",{className:"flex gap-3 p-6 pt-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-b-lg",children:[r.jsx("button",{type:"button",onClick:j,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:d.isLoading||u.isLoading,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d.isLoading||u.isLoading?"Salvando...":n?"Salvar":"Criar"})]})]})]})})]})}function ub(){const{user:e}=$r(),{showToast:t}=Zl(),[s,i]=R.useState(!1),[n,l]=R.useState(null),[f,a]=R.useState({name:"",description:""}),[o,m]=R.useState(""),{data:p,isLoading:g,refetch:v}=G.teams.list.useQuery({limit:50,offset:0}),S=G.teams.create.useMutation({onSuccess:()=>{v(),h(),t({type:"success",title:"Equipe criada!",message:"A equipe foi criada com sucesso.",duration:5e3})},onError:k=>{console.error("Erro ao criar equipe:",k),t({type:"error",title:"Erro ao criar equipe",message:k.message||"Ocorreu um erro inesperado.",duration:7e3})}}),w=G.teams.update.useMutation({onSuccess:()=>{v(),h(),t({type:"success",title:"Equipe atualizada!",message:"As alteraes foram salvas com sucesso.",duration:5e3})},onError:k=>{console.error("Erro ao atualizar equipe:",k),t({type:"error",title:"Erro ao atualizar equipe",message:k.message||"Ocorreu um erro inesperado.",duration:7e3})}}),y=G.teams.delete.useMutation({onSuccess:()=>{v(),t({type:"success",title:"Equipe excluda!",message:"A equipe foi removida com sucesso.",duration:5e3})},onError:k=>{console.error("Erro ao excluir equipe:",k),t({type:"error",title:"Erro ao excluir equipe",message:k.message||"Ocorreu um erro inesperado.",duration:7e3})}}),u=((p==null?void 0:p.data)||[]).filter(k=>{var j;return k.name.toLowerCase().includes(o.toLowerCase())||((j=k.description)==null?void 0:j.toLowerCase().includes(o.toLowerCase()))}),c=k=>{k?(l(k),a({name:k.name,description:k.description||""})):(l(null),a({name:"",description:""})),i(!0)},h=()=>{i(!1),l(null),a({name:"",description:""})},x=async k=>{k.preventDefault(),n?await w.mutateAsync({id:n.id,name:f.name,description:f.description}):await S.mutateAsync({name:f.name,description:f.description,ownerId:(e==null?void 0:e.id)||1})},_=async k=>{confirm("Tem certeza que deseja excluir esta equipe?")&&await y.mutateAsync({id:k})};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Equipes"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Gerencie equipes e membros"})]}),r.jsxs("button",{onClick:()=>c(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Nova Equipe"]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Buscar equipes...",value:o,onChange:k=>m(k.target.value),className:"w-full px-4 py-2 pl-10 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})}),g?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Carregando equipes..."})]}):u.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:o?"Nenhuma equipe encontrada":"Nenhuma equipe"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:o?"Tente uma busca diferente.":"Comece criando uma nova equipe."}),!o&&r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>c(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Criar Equipe"})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(k=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:k.name}),r.jsxs("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[k.memberCount||0," membros"]})]}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm line-clamp-2 mb-4",children:k.description||"Sem descrio"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>c(k),className:"flex-1 text-blue-600 hover:text-blue-700 text-sm font-medium border border-blue-600 rounded px-3 py-1 hover:bg-blue-50 transition-colors",children:"Editar"}),r.jsx("button",{onClick:()=>_(k.id),disabled:y.isLoading,className:"flex-1 text-red-600 hover:text-red-700 text-sm font-medium border border-red-600 rounded px-3 py-1 hover:bg-red-50 transition-colors disabled:opacity-50",children:"Excluir"})]})]},k.id))}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-md w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:n?"Editar Equipe":"Nova Equipe"}),r.jsx("button",{onClick:h,className:"text-gray-400 hover:text-gray-600 dark:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:x,className:"flex flex-col flex-1 min-h-0",children:[r.jsxs("div",{className:"space-y-4 p-6 overflow-y-auto flex-1",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Nome da Equipe *"}),r.jsx("input",{id:"name",type:"text",value:f.name,onChange:k=>a({...f,name:k.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Descrio"}),r.jsx("textarea",{id:"description",value:f.description,onChange:k=>a({...f,description:k.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Descreva o objetivo da equipe..."})]})]}),r.jsxs("div",{className:"flex gap-3 p-6 pt-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-b-lg",children:[r.jsx("button",{type:"button",onClick:h,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:S.isLoading||w.isLoading,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.isLoading||w.isLoading?"Salvando...":n?"Salvar":"Criar"})]})]})]})})]})}function Xt({columns:e,data:t,onAdd:s,onEdit:i,onDelete:n,onView:l,loading:f=!1,searchQuery:a="",onSearchChange:o,title:m}){return r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-white",children:m}),r.jsxs("div",{className:"flex items-center gap-4",children:[o&&r.jsxs("div",{className:"relative",children:[r.jsx(Qy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Buscar...",value:a,onChange:p=>o(p.target.value),className:"pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-md text-white focus:ring-2 focus:ring-blue-500"})]}),s&&r.jsxs("button",{onClick:s,className:"btn-primary flex items-center gap-2",children:[r.jsx(Qo,{size:20}),"Adicionar"]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b border-slate-700",children:[e.map((p,g)=>r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400 uppercase tracking-wider",children:p.label},g)),(i||n||l)&&r.jsx("th",{className:"px-4 py-3 text-left text-sm font-medium text-gray-400 uppercase tracking-wider",children:"Aes"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-700",children:f?r.jsx("tr",{children:r.jsx("td",{colSpan:e.length+1,className:"px-4 py-8 text-center",children:r.jsxs("div",{className:"flex items-center justify-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),r.jsx("span",{className:"ml-3 text-gray-400",children:"Carregando..."})]})})}):t.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:e.length+1,className:"px-4 py-8 text-center text-gray-400",children:"Nenhum registro encontrado"})}):t.map((p,g)=>r.jsxs("tr",{className:"hover:bg-slate-700/50 transition-colors",children:[e.map((v,S)=>r.jsx("td",{className:"px-4 py-3 text-sm text-gray-300",children:v.render?v.render(p):String(p[v.key]||"-")},S)),(i||n||l)&&r.jsx("td",{className:"px-4 py-3 text-sm",children:r.jsxs("div",{className:"flex items-center gap-2",children:[l&&r.jsx("button",{onClick:()=>l(p),className:"p-1 rounded hover:bg-slate-600 text-blue-400",title:"Visualizar",children:r.jsx(Ly,{size:18})}),i&&r.jsx("button",{onClick:()=>i(p),className:"p-1 rounded hover:bg-slate-600 text-yellow-400",title:"Editar",children:r.jsx(Gy,{size:18})}),n&&r.jsx("button",{onClick:()=>n(p),className:"p-1 rounded hover:bg-slate-600 text-red-400",title:"Deletar",children:r.jsx(Xy,{size:18})})]})})]},g))})]})})]})}const hb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.providers.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Provedores de IA",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},fb=()=>{var Ze,fe;const[e,t]=R.useState("models"),[s,i]=R.useState(""),[n,l]=R.useState(null),[f,a]=R.useState(!1),[o,m]=R.useState(!1),[p,g]=R.useState(null),[v,S]=R.useState(!1),[w,y]=R.useState(null),[d,u]=R.useState([]),[c,h]=R.useState({providerId:0,name:"",modelId:"",capabilities:[],contextWindow:4096,isLoaded:!1,priority:50,isActive:!0,modelPath:"",quantization:"",parameters:"",sizeBytes:0}),[x,_]=R.useState({name:"",description:"",category:"",defaultModelId:void 0,fallbackModelIds:[],systemPrompt:"",capabilities:[],isActive:!0}),[k,j]=R.useState(""),[b,C]=R.useState(""),{data:M,isLoading:L,refetch:P}=G.models.list.useQuery({limit:50,offset:0}),D={providers:[]},{data:W,refetch:V}=G.models.listSpecialized.useQuery({limit:50,offset:0}),Z=(M==null?void 0:M.data)||[],ee=(W==null?void 0:W.specializedAIs)||[],N={totalModels:Z.length,activeModels:Z.filter(F=>F.isActive).length,loadedModels:Z.filter(F=>F.isLoaded).length,totalProviders:new Set(Z.map(F=>F.providerId)).size,totalSpecializedAIs:ee.length,activeSpecializedAIs:ee.filter(F=>F.isActive).length,avgContextWindow:Z.length>0?Math.round(Z.reduce((F,K)=>F+(K.contextWindow||0),0)/Z.length):0,totalCapabilities:new Set(Z.flatMap(F=>F.capabilities||[])).size},A=()=>{P(),V()},{data:O,refetch:B}=G.models.discoverModels.useQuery({},{enabled:e==="discovery"}),J=G.models.create.useMutation({onSuccess:()=>{alert("Modelo criado com sucesso!"),a(!1),P(),A(),se()},onError:F=>{alert(`Erro ao criar modelo: ${F.message}`)}}),H=G.models.update.useMutation({onSuccess:()=>{alert("Modelo atualizado com sucesso!"),m(!1),g(null),P(),A()},onError:F=>{alert(`Erro ao atualizar modelo: ${F.message}`)}}),I=G.models.delete.useMutation({onSuccess:()=>{alert("Modelo excludo com sucesso!"),P(),A()},onError:F=>{alert(`Erro ao excluir modelo: ${F.message}`)}}),T=G.models.toggleActive.useMutation({onSuccess:()=>{P(),A()},onError:F=>{alert(`Erro ao atualizar modelo: ${F.message}`)}}),z={mutate:async({ids:F,isActive:K})=>{try{for(const ne of F)await T.mutateAsync({id:ne,isActive:K});alert("Modelos atualizados em massa!"),u([])}catch(ne){alert(`Erro na atualizao em massa: ${ne.message}`)}}},E=G.models.createSpecialized.useMutation({onSuccess:()=>{alert("IA Especializada criada com sucesso!"),S(!1),V(),A(),re()},onError:F=>{alert(`Erro ao criar IA: ${F.message}`)}}),U=G.models.updateSpecialized.useMutation({onSuccess:()=>{alert("IA Especializada atualizada!"),S(!1),y(null),V()},onError:F=>{alert(`Erro ao atualizar IA: ${F.message}`)}}),X=G.models.deleteSpecialized.useMutation({onSuccess:()=>{alert("IA Especializada excluda!"),V(),A()},onError:F=>{alert(`Erro ao excluir IA: ${F.message}`)}}),Y={mutate:({discoveredId:F})=>{var ne;const K=(ne=O==null?void 0:O.discovered)==null?void 0:ne.find(Ae=>Ae.id===F);if(!K){alert("Modelo descoberto no encontrado");return}J.mutate({providerId:1,name:K.modelName||K.modelId,modelId:K.modelId,capabilities:[],contextWindow:4096,isLoaded:!1,priority:50,isActive:!0})}},se=()=>{h({providerId:0,name:"",modelId:"",capabilities:[],contextWindow:4096,isLoaded:!1,priority:50,isActive:!0,modelPath:"",quantization:"",parameters:"",sizeBytes:0})},re=()=>{_({name:"",description:"",category:"",defaultModelId:void 0,fallbackModelIds:[],systemPrompt:"",capabilities:[],isActive:!0})},$=F=>{g(F),h({providerId:F.providerId,name:F.name,modelId:F.modelId,capabilities:F.capabilities||[],contextWindow:F.contextWindow||4096,isLoaded:F.isLoaded||!1,priority:F.priority||50,isActive:F.isActive,modelPath:F.modelPath||"",quantization:F.quantization||"",parameters:F.parameters||"",sizeBytes:F.sizeBytes||0}),m(!0)},ae=F=>{F?(y(F),_({name:F.name,description:F.description||"",category:F.category||"",defaultModelId:F.defaultModelId,fallbackModelIds:F.fallbackModelIds||[],systemPrompt:F.systemPrompt,capabilities:F.capabilities||[],isActive:F.isActive})):re(),S(!0)},be=F=>{confirm("Tem certeza que deseja excluir este modelo?")&&I.mutate({id:F})},je=F=>{confirm("Tem certeza que deseja excluir esta IA Especializada?")&&X.mutate({id:F})},oe=F=>{H.mutate({id:F.id,isActive:!F.isActive})},Ne=async F=>{if(F.preventDefault(),!c.name||!c.modelId||c.providerId===0){alert("Preencha todos os campos obrigatrios");return}try{p?await H.mutateAsync({id:p.id,...c}):await J.mutateAsync(c)}catch{}},ut=async F=>{if(F.preventDefault(),!x.name||!x.systemPrompt){alert("Preencha todos os campos obrigatrios");return}try{w?await U.mutateAsync({id:w.id,...x}):await E.mutateAsync({...x,userId:1})}catch{}},Qe=()=>{k.trim()&&!c.capabilities.includes(k.trim())&&(h({...c,capabilities:[...c.capabilities,k.trim()]}),j(""))},it=F=>{h({...c,capabilities:c.capabilities.filter(K=>K!==F)})},Xe=()=>{b.trim()&&!x.capabilities.includes(b.trim())&&(_({...x,capabilities:[...x.capabilities,b.trim()]}),C(""))},de=F=>{_({...x,capabilities:x.capabilities.filter(K=>K!==F)})},q=F=>{d.includes(F)?u(d.filter(K=>K!==F)):u([...d,F])},xe=()=>{if(d.length===0){alert("Selecione pelo menos um modelo");return}z.mutate({ids:d,isActive:!0})},Oe=()=>{if(d.length===0){alert("Selecione pelo menos um modelo");return}z.mutate({ids:d,isActive:!1})},ht=F=>{confirm("Importar este modelo descoberto?")&&Y.mutate({discoveredId:F})},Ke=Z.filter(F=>{var Ae,Ue;const K=!s||((Ae=F.name)==null?void 0:Ae.toLowerCase().includes(s.toLowerCase()))||((Ue=F.modelId)==null?void 0:Ue.toLowerCase().includes(s.toLowerCase())),ne=!n||F.providerId===n;return K&&ne}),le=[{id:"models",label:"Modelos",icon:""},{id:"specialized",label:"IAs Especializadas",icon:""},{id:"discovery",label:"Descoberta",icon:""},{id:"statistics",label:"Estatsticas",icon:""}],he=N||{totalModels:0,activeModels:0,loadedModels:0,totalProviders:0,totalSpecializedAIs:0,activeSpecializedAIs:0,avgContextWindow:0,totalCapabilities:0};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:" Modelos de IA"}),r.jsx("p",{className:"text-gray-400",children:"Gerencie modelos, IAs especializadas e descubra novos recursos"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>P(),className:"btn-secondary",children:" Atualizar"}),r.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ Adicionar Modelo"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total de Modelos"}),r.jsx("div",{className:"text-white text-xl font-bold",children:he.totalModels})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Modelos Ativos"}),r.jsx("div",{className:"text-white text-xl font-bold",children:he.activeModels})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"IAs Especializadas"}),r.jsx("div",{className:"text-white text-xl font-bold",children:he.totalSpecializedAIs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Providers"}),r.jsx("div",{className:"text-white text-xl font-bold",children:he.totalProviders})]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:le.map(F=>r.jsxs("button",{onClick:()=>t(F.id),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${e===F.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[F.icon," ",F.label]},F.id))})}),(e==="models"||e==="specialized")&&r.jsx("div",{className:"card",children:r.jsxs("div",{className:"flex flex-wrap gap-4",children:[r.jsx("input",{type:"text",value:s,onChange:F=>i(F.target.value),placeholder:"Buscar...",className:"input flex-1 min-w-[250px]"}),e==="models"&&r.jsxs("select",{value:n||"",onChange:F=>l(F.target.value?Number(F.target.value):null),className:"input",children:[r.jsx("option",{value:"",children:"Todos os Providers"}),D==null?void 0:D.providers.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]})}),e==="models"&&d.length>0&&r.jsx("div",{className:"card bg-blue-900 border-blue-600",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("p",{className:"text-white",children:[d.length," modelo(s) selecionado(s)"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:xe,className:"btn-primary text-sm",children:" Ativar Todos"}),r.jsx("button",{onClick:Oe,className:"btn-secondary text-sm",children:" Desativar Todos"}),r.jsx("button",{onClick:()=>u([]),className:"btn-secondary text-sm",children:" Limpar Seleo"})]})]})}),r.jsxs("div",{className:"space-y-4",children:[e==="models"&&r.jsx(r.Fragment,{children:L?r.jsxs("div",{className:"card text-center py-12 text-gray-400",children:[r.jsx("div",{className:"animate-spin text-4xl mb-4",children:""}),r.jsx("p",{children:"Carregando modelos..."})]}):Ke.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Ke.map(F=>{var ne;const K=D==null?void 0:D.providers.find(Ae=>Ae.id===F.providerId);return r.jsxs("div",{className:`card ${d.includes(F.id)?"border-blue-600":""}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:d.includes(F.id),onChange:()=>q(F.id),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:F.name}),r.jsx("p",{className:"text-gray-400 text-sm",children:K==null?void 0:K.name})]})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${F.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:F.isActive?"Ativo":"Inativo"})]}),r.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Model ID:"}),r.jsx("span",{className:"text-white font-mono text-xs",children:F.modelId})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Context:"}),r.jsx("span",{className:"text-white",children:(ne=F.contextWindow)==null?void 0:ne.toLocaleString()})]}),F.parameters&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Parmetros:"}),r.jsx("span",{className:"text-white",children:F.parameters})]}),F.sizeBytes&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tamanho:"}),r.jsxs("span",{className:"text-white",children:[(F.sizeBytes/1024/1024/1024).toFixed(2)," GB"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Prioridade:"}),r.jsxs("span",{className:"text-white",children:[F.priority,"/100"]})]})]}),F.capabilities&&F.capabilities.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Capacidades:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:F.capabilities.map((Ae,Ue)=>r.jsx("span",{className:"px-2 py-1 bg-blue-600/20 text-blue-400 text-xs rounded",children:Ae},Ue))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>oe(F),className:"btn-secondary text-sm flex-1",children:F.isActive?" Desativar":" Ativar"}),r.jsx("button",{onClick:()=>$(F),className:"btn-primary text-sm flex-1",children:" Editar"}),r.jsx("button",{onClick:()=>be(F.id),className:"btn-danger text-sm",children:""})]})]},F.id)})}):r.jsxs("div",{className:"card text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum modelo encontrado"}),r.jsx("p",{className:"text-sm mb-4",children:s?"Tente ajustar sua busca":"Adicione seu primeiro modelo de IA"}),r.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ Adicionar Primeiro Modelo"})]})}),e==="specialized"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card",children:r.jsx("button",{onClick:()=>ae(),className:"btn-primary w-full",children:"+ Nova IA Especializada"})}),W!=null&&W.specializedAIs&&W.specializedAIs.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:W.specializedAIs.map(F=>r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:F.name}),F.category&&r.jsx("p",{className:"text-gray-400 text-sm",children:F.category})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${F.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:F.isActive?"Ativo":"Inativo"})]}),F.description&&r.jsx("p",{className:"text-gray-400 text-sm mb-3",children:F.description}),r.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[F.defaultModelId&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Modelo Padro:"}),r.jsxs("span",{className:"text-white",children:["#",F.defaultModelId]})]}),F.fallbackModelIds&&F.fallbackModelIds.length>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Fallbacks:"}),r.jsx("span",{className:"text-white",children:F.fallbackModelIds.length})]})]}),F.capabilities&&F.capabilities.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("p",{className:"text-xs text-gray-400 mb-1",children:"Capacidades:"}),r.jsx("div",{className:"flex flex-wrap gap-1",children:F.capabilities.map((K,ne)=>r.jsx("span",{className:"px-2 py-1 bg-purple-600/20 text-purple-400 text-xs rounded",children:K},ne))})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ae(F),className:"btn-primary text-sm flex-1",children:" Editar"}),r.jsx("button",{onClick:()=>je(F.id),className:"btn-danger text-sm flex-1",children:" Excluir"})]})]},F.id))}):r.jsxs("div",{className:"card text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhuma IA Especializada"}),r.jsx("p",{className:"text-sm mb-4",children:"Crie sua primeira IA especializada"}),r.jsx("button",{onClick:()=>ae(),className:"btn-primary",children:"+ Nova IA Especializada"})]})]}),e==="discovery"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card",children:r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" Descoberta Automtica"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Modelos descobertos automaticamente no sistema"})]}),r.jsx("button",{onClick:()=>B(),className:"btn-secondary",children:" Escanear Novamente"})]})}),O!=null&&O.discovered&&O.discovered.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:O.discovered.map(F=>r.jsxs("div",{className:"card",children:[r.jsx("h3",{className:"text-white font-semibold mb-2",children:F.modelName}),r.jsx("p",{className:"text-gray-400 text-sm mb-3 break-all",children:F.modelPath}),r.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[F.sizeBytes&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tamanho:"}),r.jsxs("span",{className:"text-white",children:[(F.sizeBytes/1024/1024/1024).toFixed(2)," GB"]})]}),F.quantization&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Quantizao:"}),r.jsx("span",{className:"text-white",children:F.quantization})]}),F.parameters&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Parmetros:"}),r.jsx("span",{className:"text-white",children:F.parameters})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Descoberto:"}),r.jsx("span",{className:"text-white",children:new Date(F.discoveredAt).toLocaleDateString("pt-BR")})]})]}),r.jsx("button",{onClick:()=>ht(F.id),disabled:F.isImported,className:`w-full ${F.isImported?"btn-secondary":"btn-primary"}`,children:F.isImported?" J Importado":" Importar Modelo"})]},F.id))}):r.jsxs("div",{className:"card text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum modelo descoberto"}),r.jsx("p",{className:"text-sm",children:"Execute o scan para descobrir modelos no sistema"})]})]}),e==="statistics"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Estatsticas Detalhadas"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total de Modelos"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.totalModels})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Modelos Ativos"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.activeModels})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Modelos Carregados"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.loadedModels})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total de Providers"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.totalProviders})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"IAs Especializadas"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.totalSpecializedAIs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"IAs Ativas"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.activeSpecializedAIs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Context Window Mdio"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:(Ze=he.avgContextWindow)==null?void 0:Ze.toLocaleString()})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Capacidades nicas"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:he.totalCapabilities})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Taxa de Ativao"}),r.jsxs("div",{className:"text-white text-3xl font-bold",children:[he.totalModels>0?Math.round(he.activeModels/he.totalModels*100):0,"%"]})]})]})]})})]}),(f||o)&&r.jsx("div",{className:"modal-overlay",onClick:()=>{a(!1),m(!1)},children:r.jsxs("div",{className:"modal-content max-w-3xl",onClick:F=>F.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:p?"Editar Modelo":"Adicionar Modelo"}),r.jsxs("form",{onSubmit:Ne,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome *"}),r.jsx("input",{type:"text",value:c.name,onChange:F=>h({...c,name:F.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Provider *"}),r.jsxs("select",{value:c.providerId,onChange:F=>h({...c,providerId:Number(F.target.value)}),className:"input w-full",required:!0,children:[r.jsx("option",{value:"0",children:"Selecione um provider"}),D==null?void 0:D.providers.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Model ID *"}),r.jsx("input",{type:"text",value:c.modelId,onChange:F=>h({...c,modelId:F.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Context Window"}),r.jsx("input",{type:"number",value:c.contextWindow,onChange:F=>h({...c,contextWindow:Number(F.target.value)}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Prioridade (0-100)"}),r.jsx("input",{type:"number",min:"0",max:"100",value:c.priority,onChange:F=>h({...c,priority:Number(F.target.value)}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Quantizao"}),r.jsx("input",{type:"text",value:c.quantization,onChange:F=>h({...c,quantization:F.target.value}),className:"input w-full",placeholder:"Q4_K_M, Q8_0, etc"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Parmetros"}),r.jsx("input",{type:"text",value:c.parameters,onChange:F=>h({...c,parameters:F.target.value}),className:"input w-full",placeholder:"7B, 13B, 70B, etc"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Caminho do Modelo"}),r.jsx("input",{type:"text",value:c.modelPath,onChange:F=>h({...c,modelPath:F.target.value}),className:"input w-full",placeholder:"/path/to/model.gguf"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Tamanho (bytes)"}),r.jsx("input",{type:"number",value:c.sizeBytes,onChange:F=>h({...c,sizeBytes:Number(F.target.value)}),className:"input w-full"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:c.isLoaded,onChange:F=>h({...c,isLoaded:F.target.checked}),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-300",children:"Carregado"})]}),r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:c.isActive,onChange:F=>h({...c,isActive:F.target.checked}),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-300",children:"Ativo"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Capacidades"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:k,onChange:F=>j(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),Qe()),className:"input flex-1",placeholder:"Digite e pressione Enter"}),r.jsx("button",{type:"button",onClick:Qe,className:"btn-secondary",children:"+ Adicionar"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:c.capabilities.map(F=>r.jsxs("span",{className:"px-3 py-1 bg-blue-600 text-white rounded flex items-center gap-2",children:[F,r.jsx("button",{type:"button",onClick:()=>it(F),className:"text-white hover:text-red-300",children:""})]},F))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs("button",{type:"submit",className:"btn-primary flex-1",children:[" ",p?"Atualizar":"Criar"]}),r.jsx("button",{type:"button",onClick:()=>{a(!1),m(!1),g(null),se()},className:"btn-secondary flex-1",children:" Cancelar"})]})]})]})}),v&&r.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:r.jsxs("div",{className:"modal-content max-w-3xl",onClick:F=>F.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:w?"Editar IA Especializada":"Nova IA Especializada"}),r.jsxs("form",{onSubmit:ut,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome *"}),r.jsx("input",{type:"text",value:x.name,onChange:F=>_({...x,name:F.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Categoria"}),r.jsx("input",{type:"text",value:x.category,onChange:F=>_({...x,category:F.target.value}),className:"input w-full",placeholder:"code, analysis, writing, etc"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Descrio"}),r.jsx("textarea",{value:x.description,onChange:F=>_({...x,description:F.target.value}),rows:3,className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Modelo Padro"}),r.jsxs("select",{value:x.defaultModelId||"",onChange:F=>_({...x,defaultModelId:F.target.value?Number(F.target.value):void 0}),className:"input w-full",children:[r.jsx("option",{value:"",children:"Nenhum"}),(fe=M==null?void 0:M.data)==null?void 0:fe.map(F=>r.jsx("option",{value:F.id,children:F.name},F.id))]})]}),r.jsx("div",{className:"flex items-center",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:x.isActive,onChange:F=>_({...x,isActive:F.target.checked}),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-300",children:"Ativo"})]})}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"System Prompt *"}),r.jsx("textarea",{value:x.systemPrompt,onChange:F=>_({...x,systemPrompt:F.target.value}),rows:6,className:"input w-full",required:!0,placeholder:"Voc  um assistente especializado em..."})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Capacidades"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:b,onChange:F=>C(F.target.value),onKeyPress:F=>F.key==="Enter"&&(F.preventDefault(),Xe()),className:"input flex-1",placeholder:"Digite e pressione Enter"}),r.jsx("button",{type:"button",onClick:Xe,className:"btn-secondary",children:"+ Adicionar"})]}),r.jsx("div",{className:"flex flex-wrap gap-2",children:x.capabilities.map(F=>r.jsxs("span",{className:"px-3 py-1 bg-purple-600 text-white rounded flex items-center gap-2",children:[F,r.jsx("button",{type:"button",onClick:()=>de(F),className:"text-white hover:text-red-300",children:""})]},F))})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsxs("button",{type:"submit",className:"btn-primary flex-1",children:[" ",w?"Atualizar":"Criar"]}),r.jsx("button",{type:"button",onClick:()=>{S(!1),y(null),re()},className:"btn-secondary flex-1",children:" Cancelar"})]})]})]})})]})},mb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.specializedais.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"IAs Especializadas",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},gb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.credentials.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Credenciais",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},pb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.tasks.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Tarefas",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},xb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.subtasks.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Subtarefas",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})};function vb(){const{user:e}=$r(),{showToast:t}=Zl(),[s,i]=R.useState("all"),[n,l]=R.useState(!1),[f,a]=R.useState(null),[o,m]=R.useState({title:"",content:"",category:"",tags:"",isPublic:!1}),[p,g]=R.useState(""),{data:v,isLoading:S,refetch:w}=G.prompts.list.useQuery({userId:e==null?void 0:e.id,isPublic:s==="all"?void 0:s==="public",limit:50,offset:0}),y=G.prompts.create.useMutation({onSuccess:()=>{w(),_(),t({type:"success",title:"Prompt criado!",message:"O prompt foi criado com sucesso.",duration:5e3})},onError:C=>{console.error("Erro ao criar prompt:",C),t({type:"error",title:"Erro ao criar prompt",message:C.message||"Ocorreu um erro inesperado.",duration:7e3})}}),d=G.prompts.update.useMutation({onSuccess:()=>{w(),_(),t({type:"success",title:"Prompt atualizado!",message:"As alteraes foram salvas com sucesso.",duration:5e3})},onError:C=>{console.error("Erro ao atualizar prompt:",C),t({type:"error",title:"Erro ao atualizar prompt",message:C.message||"Ocorreu um erro inesperado.",duration:7e3})}}),u=G.prompts.delete.useMutation({onSuccess:()=>{w(),t({type:"success",title:"Prompt excludo!",message:"O prompt foi removido com sucesso.",duration:5e3})},onError:C=>{console.error("Erro ao excluir prompt:",C),t({type:"error",title:"Erro ao excluir prompt",message:C.message||"Ocorreu um erro inesperado.",duration:7e3})}}),h=((v==null?void 0:v.data)||[]).filter(C=>{var L,P;const M=C.title.toLowerCase().includes(p.toLowerCase())||((L=C.content)==null?void 0:L.toLowerCase().includes(p.toLowerCase()))||((P=C.category)==null?void 0:P.toLowerCase().includes(p.toLowerCase()));return s==="mine"?M&&C.userId===(e==null?void 0:e.id):s==="public"?M&&C.isPublic:M}),x=C=>{if(C){a(C);const M=Array.isArray(C.tags)?C.tags.join(", "):C.tags||"";m({title:C.title,content:C.content||"",category:C.category||"",tags:M,isPublic:C.isPublic||!1})}else a(null),m({title:"",content:"",category:"",tags:"",isPublic:!1});l(!0)},_=()=>{l(!1),a(null),m({title:"",content:"",category:"",tags:"",isPublic:!1})},k=async C=>{C.preventDefault(),f?await d.mutateAsync({id:f.id,title:o.title,content:o.content,category:o.category||void 0,tags:o.tags||void 0,isPublic:o.isPublic}):await y.mutateAsync({title:o.title,content:o.content,category:o.category||void 0,tags:o.tags||void 0,isPublic:o.isPublic,userId:(e==null?void 0:e.id)||1})},j=async C=>{confirm("Tem certeza que deseja excluir este prompt?")&&await u.mutateAsync({id:C})},b=async C=>{await y.mutateAsync({title:`${C.title} (cpia)`,content:C.content,category:C.category,tags:C.tags,isPublic:!1,userId:(e==null?void 0:e.id)||1})};return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Biblioteca de Prompts"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Gerencie seus prompts para IAs"})]}),r.jsxs("button",{onClick:()=>x(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Novo Prompt"]})]}),r.jsxs("div",{className:"mb-6 flex flex-col md:flex-row gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("input",{type:"text",placeholder:"Buscar prompts...",value:p,onChange:C=>g(C.target.value),className:"w-full px-4 py-2 pl-10 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-400 dark:placeholder-gray-500"}),r.jsx("svg",{className:"absolute left-3 top-2.5 h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>i("all"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="all"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Todos"}),r.jsx("button",{onClick:()=>i("mine"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="mine"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Meus Prompts"}),r.jsx("button",{onClick:()=>i("public"),className:`px-4 py-2 rounded-lg font-medium transition-colors ${s==="public"?"bg-blue-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Pblicos"})]})]}),S?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Carregando prompts..."})]}):h.length===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg border-2 border-dashed border-gray-300",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:p?"Nenhum prompt encontrado":"Nenhum prompt"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:p?"Tente uma busca diferente.":"Comece criando um novo prompt."}),!p&&r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:()=>x(),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"Criar Prompt"})})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(C=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white flex-1 line-clamp-1",children:C.title}),C.isPublic&&r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full ml-2",children:"Pblico"})]}),C.category&&r.jsx("span",{className:"inline-block text-xs bg-gray-100 text-gray-700 dark:text-gray-200 px-2 py-1 rounded mb-3",children:C.category}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm line-clamp-3 mb-4",children:C.content||"Sem contedo"}),C.tags&&r.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:(typeof C.tags=="string"?C.tags.split(",").map(L=>L.trim()).filter(Boolean):Array.isArray(C.tags)?C.tags:[]).slice(0,3).map((L,P)=>r.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 dark:bg-blue-900 dark:text-blue-200 px-2 py-1 rounded",children:L},P))}),r.jsxs("div",{className:"flex gap-2",children:[C.userId===(e==null?void 0:e.id)&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>x(C),className:"flex-1 text-blue-600 hover:text-blue-700 text-sm font-medium border border-blue-600 rounded px-3 py-1 hover:bg-blue-50 transition-colors",children:"Editar"}),r.jsx("button",{onClick:()=>j(C.id),disabled:u.isLoading,className:"flex-1 text-red-600 hover:text-red-700 text-sm font-medium border border-red-600 rounded px-3 py-1 hover:bg-red-50 transition-colors disabled:opacity-50",children:"Excluir"})]}),r.jsx("button",{onClick:()=>b(C),disabled:y.isLoading,className:"flex-1 text-gray-600 hover:text-gray-700 dark:text-gray-200 text-sm font-medium border border-gray-600 rounded px-3 py-1 hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Duplicar"})]})]},C.id))}),n&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col",children:[r.jsxs("div",{className:"flex justify-between items-center p-6 pb-4 border-b border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:f?"Editar Prompt":"Novo Prompt"}),r.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 dark:text-gray-300",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:k,className:"flex flex-col flex-1 min-h-0",children:[r.jsxs("div",{className:"space-y-4 p-6 overflow-y-auto flex-1",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Ttulo do Prompt *"}),r.jsx("input",{id:"title",type:"text",value:o.title,onChange:C=>m({...o,title:C.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-400 dark:placeholder-gray-500",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Contedo do Prompt *"}),r.jsx("textarea",{id:"content",value:o.content,onChange:C=>m({...o,content:C.target.value}),rows:8,className:"w-full px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent font-mono placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Escreva seu prompt aqui...",required:!0}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Dica: Use variveis como ","{","nome","}"," para personalizar seu prompt"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Categoria"}),r.jsx("input",{id:"category",type:"text",value:o.category,onChange:C=>m({...o,category:C.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-400 dark:placeholder-gray-500",placeholder:"Ex: Marketing, Cdigo, Criativo"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Tags"}),r.jsx("input",{id:"tags",type:"text",value:o.tags,onChange:C=>m({...o,tags:C.target.value}),className:"w-full px-3 py-2 bg-white dark:bg-gray-700 text-gray-900 dark:text-white border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-transparent placeholder-gray-400 dark:placeholder-gray-500",placeholder:"tag1, tag2, tag3"})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"isPublic",type:"checkbox",checked:o.isPublic,onChange:C=>m({...o,isPublic:C.target.checked}),className:"w-4 h-4 text-blue-600 border-gray-300 dark:border-gray-600 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isPublic",className:"ml-2 block text-sm text-gray-700 dark:text-gray-200",children:"Tornar este prompt pblico (outros usurios podero v-lo)"})]})]}),r.jsxs("div",{className:"flex gap-3 p-6 pt-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-900 rounded-b-lg",children:[r.jsx("button",{type:"button",onClick:_,className:"flex-1 px-4 py-2 border border-gray-300 rounded-md text-gray-700 dark:text-gray-200 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:y.isLoading||d.isLoading,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y.isLoading||d.isLoading?"Salvando...":f?"Salvar":"Criar"})]})]})]})})]})}const yb=()=>{const[e,t]=R.useState(""),[s,i]=R.useState(!1),[n,l]=R.useState(null),[f,a]=R.useState("all"),[o,m]=R.useState("my"),[p,g]=R.useState(!1),[v,S]=R.useState(null),[w,y]=R.useState({}),[d,u]=R.useState({name:"",description:"",category:"general",templateData:{systemPrompt:"",userPromptTemplate:"",variables:[],modelConfig:{}},isPublic:!1}),{data:c,isLoading:h,refetch:x}=G.templates.list.useQuery({query:e,category:f==="all"?void 0:f,isPublic:o==="public"}),{data:_}=G.templates.getStats.useQuery(),{data:k}=G.templates.getCategories.useQuery(),{data:j}=G.templates.getPopular.useQuery({limit:5}),b=G.templates.create.useMutation({onSuccess:()=>{x(),V(),alert(" Template criado com sucesso!")},onError:I=>{alert(" Erro ao criar template: "+I.message)}}),C=G.templates.update.useMutation({onSuccess:()=>{x(),V(),alert(" Template atualizado com sucesso!")},onError:I=>{alert(" Erro ao atualizar template: "+I.message)}}),M=G.templates.delete.useMutation({onSuccess:()=>{x(),alert(" Template deletado com sucesso!")},onError:I=>{alert(" Erro ao deletar template: "+I.message)}}),L=G.templates.duplicate.useMutation({onSuccess:()=>{x(),alert(" Template duplicado com sucesso!")},onError:I=>{alert(" Erro ao duplicar template: "+I.message)}}),P=G.templates.use.useMutation({onSuccess:I=>{g(!1),S(null),alert(` Template processado com sucesso!

Prompt gerado:
${I.processedPrompt.substring(0,200)}...`),navigator.clipboard.writeText(I.processedPrompt)},onError:I=>{alert(" Erro ao processar template: "+I.message)}}),D=()=>{u({name:"",description:"",category:"general",templateData:{systemPrompt:"",userPromptTemplate:"",variables:[],modelConfig:{}},isPublic:!1}),l(null),i(!0)},W=I=>{u({name:I.name,description:I.description||"",category:I.category||"general",templateData:I.templateData,isPublic:I.isPublic}),l(I),i(!0)},V=()=>{i(!1),l(null)},Z=I=>{var T;if(I.preventDefault(),!d.name.trim()){alert(" Nome  obrigatrio");return}if(!((T=d.templateData.userPromptTemplate)!=null&&T.trim())){alert(" Template de prompt  obrigatrio");return}n?C.mutate({id:n.id,...d}):b.mutate(d)},ee=I=>{confirm("Tem certeza que deseja deletar este template?")&&M.mutate({id:I})},N=I=>{const T=prompt("Nome para o template duplicado:",`${I.name} (Cpia)`);T&&L.mutate({id:I.id,newName:T})},A=I=>{var z;S(I);const T={};(z=I.templateData.variables)==null||z.forEach(E=>{T[E.name]=E.defaultValue!==void 0?E.defaultValue:""}),y(T),g(!0)},O=I=>{I.preventDefault(),v&&P.mutate({id:v.id,variables:w})},B=()=>{const I={name:"variable",type:"text",label:"Nova Varivel",required:!1};u({...d,templateData:{...d.templateData,variables:[...d.templateData.variables||[],I]}})},J=(I,T)=>{const z=[...d.templateData.variables||[]];z[I]={...z[I],...T},u({...d,templateData:{...d.templateData,variables:z}})},H=I=>{const T=(d.templateData.variables||[]).filter((z,E)=>E!==I);u({...d,templateData:{...d.templateData,variables:T}})};return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Templates de IA"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerencie templates reutilizveis para gerao de prompts"})]}),r.jsxs("button",{onClick:D,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx("span",{children:"+"}),"Novo Template"]})]}),_&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:_.stats.total})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Pblicos"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:_.stats.public})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Privados"}),r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:_.stats.private})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Usos Totais"}),r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:_.stats.totalUsage})]})]}),j&&j.templates.length>0&&o==="public"&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-3",children:" Templates Mais Usados"}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:j.templates.map(I=>r.jsxs("button",{onClick:()=>A(I),className:"px-3 py-2 bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-200 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-800 transition-colors text-sm",children:[I.name," (",I.usageCount," usos)"]},I.id))})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Buscar templates...",value:e,onChange:I=>t(I.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>m("my"),className:`px-4 py-2 rounded-lg transition-colors ${o==="my"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Meus"}),r.jsx("button",{onClick:()=>m("public"),className:`px-4 py-2 rounded-lg transition-colors ${o==="public"?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Pblicos"})]}),r.jsxs("select",{value:f,onChange:I=>a(I.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"all",children:"Todas Categorias"}),k==null?void 0:k.categories.map(I=>r.jsx("option",{value:I,children:I},I))]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h?r.jsx("div",{className:"col-span-full p-8 text-center text-gray-600 dark:text-gray-400",children:"Carregando templates..."}):!(c!=null&&c.items)||c.items.length===0?r.jsx("div",{className:"col-span-full p-8 text-center text-gray-600 dark:text-gray-400",children:e?"Nenhum template encontrado.":"Nenhum template cadastrado. Crie seu primeiro template!"}):c.items.map(I=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 line-clamp-1",children:I.name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:I.category}),I.isPublic&&r.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-200 rounded",children:"Pblico"})]})]}),r.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[I.usageCount," usos"]})]}),I.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-2",children:I.description}),I.templateData.variables&&I.templateData.variables.length>0&&r.jsxs("div",{className:"mb-3",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:"Variveis:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.templateData.variables.slice(0,3).map((T,z)=>r.jsx("span",{className:"text-xs px-2 py-1 bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-200 rounded",children:T.name},z)),I.templateData.variables.length>3&&r.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:["+",I.templateData.variables.length-3]})]})]}),r.jsxs("div",{className:"flex justify-between items-center pt-3 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>A(I),className:"px-3 py-1 bg-green-600 hover:bg-green-700 text-white text-sm rounded transition-colors",children:" Usar"}),r.jsx("div",{className:"flex gap-2",children:o==="my"&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>N(I),className:"text-purple-600 hover:text-purple-900 dark:hover:text-purple-400",title:"Duplicar",children:""}),r.jsx("button",{onClick:()=>W(I),className:"text-indigo-600 hover:text-indigo-900 dark:hover:text-indigo-400",title:"Editar",children:""}),r.jsx("button",{onClick:()=>ee(I.id),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",title:"Deletar",children:""})]})})]})]},I.id))}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50 overflow-y-auto",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full my-8",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n?"Editar Template":"Novo Template"})}),r.jsxs("form",{onSubmit:Z,className:"p-6 space-y-6 max-h-[calc(90vh-200px)] overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome *"}),r.jsx("input",{type:"text",value:d.name,onChange:I=>u({...d,name:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Nome do template",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descrio"}),r.jsx("textarea",{value:d.description,onChange:I=>u({...d,description:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Descrio do template",rows:3})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Categoria"}),r.jsx("input",{type:"text",value:d.category,onChange:I=>u({...d,category:I.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"ex: code, writing, analysis"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"System Prompt (Opcional)"}),r.jsx("textarea",{value:d.templateData.systemPrompt||"",onChange:I=>u({...d,templateData:{...d.templateData,systemPrompt:I.target.value}}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-mono text-sm",placeholder:"System prompt para configurar o modelo",rows:3})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Template de Prompt * ",r.jsxs("span",{className:"text-xs text-gray-500",children:["(Use ",{variavel}," para variveis)"]})]}),r.jsx("textarea",{value:d.templateData.userPromptTemplate||"",onChange:I=>u({...d,templateData:{...d.templateData,userPromptTemplate:I.target.value}}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 font-mono text-sm",placeholder:"ex: Escreva um {{tipo}} sobre {{tema}} em {{idioma}}",rows:5,required:!0})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Variveis"}),r.jsx("button",{type:"button",onClick:B,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"+ Adicionar Varivel"})]}),d.templateData.variables&&d.templateData.variables.length>0?r.jsx("div",{className:"space-y-3",children:d.templateData.variables.map((I,T)=>r.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Varivel #",T+1]}),r.jsx("button",{type:"button",onClick:()=>H(T),className:"text-red-600 hover:text-red-800 dark:hover:text-red-400 text-sm",children:""})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("input",{type:"text",value:I.name,onChange:z=>J(T,{name:z.target.value}),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Nome da varivel"}),r.jsx("input",{type:"text",value:I.label,onChange:z=>J(T,{label:z.target.value}),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Label"}),r.jsxs("select",{value:I.type,onChange:z=>J(T,{type:z.target.value}),className:"px-3 py-1 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"text",children:"Text"}),r.jsx("option",{value:"number",children:"Number"}),r.jsx("option",{value:"boolean",children:"Boolean"}),r.jsx("option",{value:"select",children:"Select"})]}),r.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300",children:[r.jsx("input",{type:"checkbox",checked:I.required||!1,onChange:z=>J(T,{required:z.target.checked}),className:"w-4 h-4"}),"Obrigatria"]})]})]},T))}):r.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-center text-gray-600 dark:text-gray-400 text-sm",children:"Nenhuma varivel definida"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isPublic",checked:d.isPublic,onChange:I=>u({...d,isPublic:I.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isPublic",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Tornar pblico (outros usurios podero usar)"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:V,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:b.isLoading||C.isLoading,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:b.isLoading||C.isLoading?"Salvando...":n?"Atualizar":"Criar"})]})]})]})}),p&&v&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:["Usar Template: ",v.name]}),v.description&&r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:v.description})]}),r.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[v.templateData.variables&&v.templateData.variables.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:"Preencha as variveis do template:"}),v.templateData.variables.map((I,T)=>r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:[I.label,I.required&&r.jsx("span",{className:"text-red-500",children:" *"})]}),I.description&&r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-1",children:I.description}),I.type==="text"&&r.jsx("input",{type:"text",value:w[I.name]||"",onChange:z=>y({...w,[I.name]:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:I.required}),I.type==="number"&&r.jsx("input",{type:"number",value:w[I.name]||"",onChange:z=>y({...w,[I.name]:Number(z.target.value)}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:I.required}),I.type==="select"&&I.options&&r.jsxs("select",{value:w[I.name]||"",onChange:z=>y({...w,[I.name]:z.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",required:I.required,children:[r.jsx("option",{value:"",children:"Selecione..."}),I.options.map(z=>r.jsx("option",{value:z,children:z},z))]}),I.type==="boolean"&&r.jsxs("label",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:w[I.name]||!1,onChange:z=>y({...w,[I.name]:z.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Sim"})]})]},T))]}):r.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-center text-gray-600 dark:text-gray-400",children:"Este template no requer variveis"}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:P.isLoading,className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg transition-colors disabled:opacity-50",children:P.isLoading?"Gerando...":" Gerar Prompt"})]})]})]})})]})},bb=()=>{const[e,t]=R.useState(""),[s,i]=R.useState(!1),[n,l]=R.useState(null),[f,a]=R.useState(null),[o,m]=R.useState(!1),[p,g]=R.useState("all"),[v,S]=R.useState({name:"",description:"",steps:[],isActive:!0}),{data:w,isLoading:y,refetch:d}=G.workflows.list.useQuery({query:e,isActive:p==="all"?void 0:p==="active"}),{data:u}=G.workflows.getStats.useQuery(),{data:c}=G.workflows.getTemplates.useQuery(),h=G.workflows.create.useMutation({onSuccess:()=>{d(),P(),alert(" Workflow criado com sucesso!")},onError:T=>{alert(" Erro ao criar workflow: "+T.message)}}),x=G.workflows.update.useMutation({onSuccess:()=>{d(),P(),alert(" Workflow atualizado com sucesso!")},onError:T=>{alert(" Erro ao atualizar workflow: "+T.message)}}),_=G.workflows.delete.useMutation({onSuccess:()=>{d(),alert(" Workflow deletado com sucesso!")},onError:T=>{alert(" Erro ao deletar workflow: "+T.message)}}),k=G.workflows.duplicate.useMutation({onSuccess:()=>{d(),alert(" Workflow duplicado com sucesso!")},onError:T=>{alert(" Erro ao duplicar workflow: "+T.message)}}),j=G.workflows.toggleActive.useMutation({onSuccess:()=>{d()},onError:T=>{alert(" Erro ao alterar status: "+T.message)}}),b=G.workflows.execute.useMutation({onSuccess:T=>{a(null),alert(` Workflow executado com sucesso!

Steps executados: ${T.execution.steps.length}`)},onError:T=>{a(null),alert(" Erro ao executar workflow: "+T.message)}}),C=G.workflows.createFromTemplate.useMutation({onSuccess:()=>{d(),m(!1),alert(" Workflow criado a partir do template!")},onError:T=>{alert(" Erro ao criar workflow: "+T.message)}}),M=()=>{S({name:"",description:"",steps:[],isActive:!0}),l(null),i(!0)},L=T=>{S({name:T.name,description:T.description||"",steps:T.steps,isActive:T.isActive}),l(T),i(!0)},P=()=>{i(!1),l(null)},D=T=>{if(T.preventDefault(),!v.name.trim()){alert(" Nome  obrigatrio");return}if(v.steps.length===0){alert(" O workflow deve ter pelo menos um step");return}n?x.mutate({id:n.id,...v}):h.mutate(v)},W=T=>{confirm("Tem certeza que deseja deletar este workflow?")&&_.mutate({id:T})},V=T=>{const z=prompt("Nome para o workflow duplicado:",`${T.name} (Cpia)`);z&&k.mutate({id:T.id,newName:z})},Z=T=>{j.mutate({id:T.id,isActive:!T.isActive})},ee=T=>{if(!T.isActive){alert(" Workflow est inativo. Ative-o antes de executar.");return}confirm(`Executar workflow "${T.name}"?`)&&(a(T.id),b.mutate({id:T.id}))},N=(T,z)=>{const E=prompt("Nome para o novo workflow:",z);E&&C.mutate({templateId:T,name:E})},A=()=>{const T={id:`step_${Date.now()}`,name:"Novo Step",type:"task",description:""};S({...v,steps:[...v.steps,T]})},O=(T,z)=>{const E=[...v.steps];E[T]={...E[T],...z},S({...v,steps:E})},B=T=>{const z=v.steps.filter((E,U)=>U!==T);S({...v,steps:z})},J=(T,z)=>{const E=[...v.steps],U=z==="up"?T-1:T+1;U>=0&&U<E.length&&([E[T],E[U]]=[E[U],E[T]],S({...v,steps:E}))},H=T=>({task:"bg-blue-500",condition:"bg-yellow-500",loop:"bg-purple-500",parallel:"bg-green-500",ai_generation:"bg-indigo-500",api_call:"bg-orange-500",notification:"bg-pink-500"})[T]||"bg-gray-500",I=T=>({task:"Tarefa",condition:"Condio",loop:"Loop",parallel:"Paralelo",ai_generation:"IA",api_call:"API",notification:"Notificao"})[T]||T;return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:"Workflows"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerencie e execute workflows automatizados"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx("span",{children:""}),"Templates"]}),r.jsxs("button",{onClick:M,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx("span",{children:"+"}),"Novo Workflow"]})]})]}),u&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:u.stats.total})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ativos"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:u.stats.active})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Inativos"}),r.jsx("div",{className:"text-2xl font-bold text-gray-600",children:u.stats.inactive})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Mdia de Steps"}),r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:u.stats.averageSteps.toFixed(1)})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Buscar workflows...",value:e,onChange:T=>t(T.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg transition-colors ${p==="all"?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Todos"}),r.jsx("button",{onClick:()=>g("active"),className:`px-4 py-2 rounded-lg transition-colors ${p==="active"?"bg-green-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Ativos"}),r.jsx("button",{onClick:()=>g("inactive"),className:`px-4 py-2 rounded-lg transition-colors ${p==="inactive"?"bg-gray-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:"Inativos"})]})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:y?r.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-400",children:"Carregando workflows..."}):!(w!=null&&w.items)||w.items.length===0?r.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-400",children:e?"Nenhum workflow encontrado.":"Nenhum workflow cadastrado. Crie seu primeiro workflow!"}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Workflow"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Steps"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Criado"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"Aes"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:w.items.map(T=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:T.name}),T.description&&r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 line-clamp-2",children:T.description})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${T.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-400"}`,children:T.isActive?"Ativo":"Inativo"})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsxs("div",{className:"flex gap-1",children:[T.steps.slice(0,5).map((z,E)=>r.jsx("div",{className:`w-2 h-6 rounded ${H(z.type)}`,title:`${z.name} (${I(z.type)})`},E)),T.steps.length>5&&r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 ml-1",children:["+",T.steps.length-5]})]}),r.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[T.steps.length," ",T.steps.length===1?"step":"steps"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(T.createdAt).toLocaleDateString("pt-BR")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:()=>ee(T),disabled:!T.isActive||f===T.id,className:`text-green-600 hover:text-green-900 dark:hover:text-green-400 disabled:opacity-50 disabled:cursor-not-allowed ${f===T.id?"animate-pulse":""}`,title:"Executar",children:""}),r.jsx("button",{onClick:()=>Z(T),className:"text-blue-600 hover:text-blue-900 dark:hover:text-blue-400",title:T.isActive?"Desativar":"Ativar",children:T.isActive?"":""}),r.jsx("button",{onClick:()=>V(T),className:"text-purple-600 hover:text-purple-900 dark:hover:text-purple-400",title:"Duplicar",children:""}),r.jsx("button",{onClick:()=>L(T),className:"text-indigo-600 hover:text-indigo-900 dark:hover:text-indigo-400",title:"Editar",children:""}),r.jsx("button",{onClick:()=>W(T.id),className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",title:"Deletar",children:""})]})})]},T.id))})]})})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n?"Editar Workflow":"Novo Workflow"})}),r.jsxs("form",{onSubmit:D,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nome *"}),r.jsx("input",{type:"text",value:v.name,onChange:T=>S({...v,name:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Nome do workflow",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Descrio"}),r.jsx("textarea",{value:v.description,onChange:T=>S({...v,description:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Descrio do workflow",rows:3})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:v.isActive,onChange:T=>S({...v,isActive:T.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Workflow ativo"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Steps *"}),r.jsx("button",{type:"button",onClick:A,className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"+ Adicionar Step"})]}),v.steps.length===0?r.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg text-center text-gray-600 dark:text-gray-400",children:'Nenhum step adicionado. Clique em "Adicionar Step" para comear.'}):r.jsx("div",{className:"space-y-3",children:v.steps.map((T,z)=>r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:["#",z+1]}),r.jsx("span",{className:`px-2 py-1 text-xs rounded text-white ${H(T.type)}`,children:I(T.type)})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{type:"button",onClick:()=>J(z,"up"),disabled:z===0,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-30",title:"Mover para cima",children:""}),r.jsx("button",{type:"button",onClick:()=>J(z,"down"),disabled:z===v.steps.length-1,className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 disabled:opacity-30",title:"Mover para baixo",children:""}),r.jsx("button",{type:"button",onClick:()=>B(z),className:"text-red-600 hover:text-red-800 dark:hover:text-red-400",title:"Remover",children:""})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("div",{children:r.jsx("input",{type:"text",value:T.name,onChange:E=>O(z,{name:E.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Nome do step"})}),r.jsx("div",{children:r.jsxs("select",{value:T.type,onChange:E=>O(z,{type:E.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"task",children:"Tarefa"}),r.jsx("option",{value:"condition",children:"Condio"}),r.jsx("option",{value:"loop",children:"Loop"}),r.jsx("option",{value:"parallel",children:"Paralelo"}),r.jsx("option",{value:"ai_generation",children:"IA"}),r.jsx("option",{value:"api_call",children:"API"}),r.jsx("option",{value:"notification",children:"Notificao"})]})})]}),r.jsx("div",{className:"mt-2",children:r.jsx("textarea",{value:T.description||"",onChange:E=>O(z,{description:E.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100",placeholder:"Descrio do step",rows:2})})]},T.id))})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:P,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:h.isLoading||x.isLoading,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:h.isLoading||x.isLoading?"Salvando...":n?"Atualizar":"Criar"})]})]})]})}),o&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Templates de Workflow"}),r.jsx("button",{onClick:()=>m(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})]})}),r.jsx("div",{className:"p-6",children:c!=null&&c.templates?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.templates.map(T=>r.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600 hover:border-blue-500 transition-colors",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-gray-100 mb-2",children:T.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:T.description}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[T.steps.length," steps"]}),r.jsx("button",{onClick:()=>N(T.id,T.name),className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"Usar Template"})]})]},T.id))}):r.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-400",children:"Carregando templates..."})})]})})]})},_b=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.instructions.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Instrues",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},wb=()=>{const[e,t]=R.useState(""),[s,i]=R.useState(!1),[n,l]=R.useState(null),[f,a]=R.useState("all"),[o,m]=R.useState([]),[p,g]=R.useState(""),[v,S]=R.useState("grid"),[w,y]=R.useState(!1),[d,u]=R.useState(null),[c,h]=R.useState({title:"",content:"",category:"general",tags:[],isActive:!0}),{data:x,isLoading:_,refetch:k}=G.knowledgebase.list.useQuery({query:e,category:f==="all"?void 0:f}),{data:j}=G.knowledgebase.getStats.useQuery(),{data:b}=G.knowledgebase.getCategories.useQuery(),{data:C}=G.knowledgebase.getTags.useQuery(),M=G.knowledgebase.create.useMutation({onSuccess:()=>{k(),Z(),alert(" Item criado com sucesso!")},onError:T=>{alert(" Erro ao criar item: "+T.message)}}),L=G.knowledgebase.update.useMutation({onSuccess:()=>{k(),Z(),alert(" Item atualizado com sucesso!")},onError:T=>{alert(" Erro ao atualizar item: "+T.message)}}),P=G.knowledgebase.delete.useMutation({onSuccess:()=>{k(),alert(" Item deletado com sucesso!")},onError:T=>{alert(" Erro ao deletar item: "+T.message)}}),D=G.knowledgebase.duplicate.useMutation({onSuccess:()=>{k(),alert(" Item duplicado com sucesso!")},onError:T=>{alert(" Erro ao duplicar item: "+T.message)}}),W=()=>{h({title:"",content:"",category:"general",tags:[],isActive:!0}),l(null),i(!0)},V=T=>{h({title:T.title,content:T.content,category:T.category||"general",tags:T.tags||[],isActive:T.isActive}),l(T),i(!0)},Z=()=>{i(!1),l(null)},ee=T=>{if(T.preventDefault(),!c.title.trim()){alert(" Ttulo  obrigatrio");return}if(!c.content.trim()){alert(" Contedo  obrigatrio");return}n?L.mutate({id:n.id,...c}):M.mutate(c)},N=T=>{confirm("Tem certeza que deseja deletar este item?")&&P.mutate({id:T})},A=T=>{const z=prompt("Ttulo para o item duplicado:",`${T.title} (Cpia)`);z&&D.mutate({id:T.id,newTitle:z})},O=()=>{p.trim()&&!c.tags.includes(p.trim())&&(h({...c,tags:[...c.tags,p.trim()]}),g(""))},B=T=>{h({...c,tags:c.tags.filter(z=>z!==T)})},J=T=>{o.includes(T)?m(o.filter(z=>z!==T)):m([...o,T])},H=T=>{u(T),y(!0)},I=(x==null?void 0:x.items.filter(T=>{if(o.length===0)return!0;const z=T.tags||[];return o.some(E=>z.includes(E))}))||[];return r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-gray-100",children:" Base de Conhecimento"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerencie documentos e conhecimento da organizao"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>S(v==="grid"?"list":"grid"),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",title:v==="grid"?"Ver em lista":"Ver em grade",children:v==="grid"?"":""}),r.jsxs("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx("span",{children:"+"}),"Novo Item"]})]})]}),j&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Total"}),r.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:j.stats.total})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Ativos"}),r.jsx("div",{className:"text-2xl font-bold text-green-600",children:j.stats.active})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Categorias"}),r.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Object.keys(j.stats.categories).length})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Tags"}),r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:j.stats.totalTags})]})]}),r.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-lg border border-gray-200 dark:border-gray-700",children:r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx("div",{className:"flex-1",children:r.jsx("input",{type:"text",placeholder:"Buscar na base de conhecimento...",value:e,onChange:T=>t(T.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"})}),r.jsxs("select",{value:f,onChange:T=>a(T.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",children:[r.jsx("option",{value:"all",children:"Todas Categorias"}),b==null?void 0:b.categories.map(T=>r.jsx("option",{value:T,children:T},T))]})]}),C&&C.tags.length>0&&r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2",children:"Filtrar por tags:"}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[C.tags.slice(0,10).map(T=>r.jsx("button",{onClick:()=>J(T),className:`px-3 py-1 text-sm rounded-full transition-colors ${o.includes(T)?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:T},T)),o.length>0&&r.jsx("button",{onClick:()=>m([]),className:"px-3 py-1 text-sm rounded-full bg-red-600 text-white hover:bg-red-700",children:"Limpar filtros"})]})]})]})}),_?r.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-400",children:"Carregando itens..."}):I.length===0?r.jsx("div",{className:"p-8 text-center text-gray-600 dark:text-gray-400",children:e||o.length>0?"Nenhum item encontrado com os filtros aplicados.":"Nenhum item cadastrado. Crie seu primeiro item!"}):v==="grid"?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(T=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-4 hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>H(T),children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 line-clamp-2 flex-1",children:T.title}),r.jsx("span",{className:`px-2 py-1 text-xs rounded ${T.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-400"}`,children:T.isActive?"Ativo":"Inativo"})]}),r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3 line-clamp-3",children:T.content}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 dark:text-gray-400 mb-3",children:[r.jsx("span",{className:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded",children:T.category||"general"}),r.jsx("span",{children:new Date(T.createdAt).toLocaleDateString("pt-BR")})]}),T.tags&&T.tags.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[T.tags.slice(0,3).map((z,E)=>r.jsx("span",{className:"px-2 py-1 text-xs bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-200 rounded",children:z},E)),T.tags.length>3&&r.jsxs("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300 rounded",children:["+",T.tags.length-3]})]}),r.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:z=>{z.stopPropagation(),A(T)},className:"text-purple-600 hover:text-purple-900 dark:hover:text-purple-400",title:"Duplicar",children:""}),r.jsx("button",{onClick:z=>{z.stopPropagation(),V(T)},className:"text-indigo-600 hover:text-indigo-900 dark:hover:text-indigo-400",title:"Editar",children:""}),r.jsx("button",{onClick:z=>{z.stopPropagation(),N(T.id)},className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",title:"Deletar",children:""})]})]},T.id))}):r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[r.jsx("thead",{className:"bg-gray-50 dark:bg-gray-900",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Ttulo"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Categoria"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Tags"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Data"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase",children:"Aes"})]})}),r.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:I.map(T=>r.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>H(T),children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 line-clamp-1",children:T.title}),r.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400 line-clamp-1 mt-1",children:T.content})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:T.category||"general"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-1",children:[T.tags&&T.tags.slice(0,2).map((z,E)=>r.jsx("span",{className:"px-2 py-1 text-xs bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-200 rounded",children:z},E)),T.tags&&T.tags.length>2&&r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:["+",T.tags.length-2]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs rounded ${T.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-400"}`,children:T.isActive?"Ativo":"Inativo"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:new Date(T.createdAt).toLocaleDateString("pt-BR")}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx("button",{onClick:z=>{z.stopPropagation(),A(T)},className:"text-purple-600 hover:text-purple-900 dark:hover:text-purple-400",title:"Duplicar",children:""}),r.jsx("button",{onClick:z=>{z.stopPropagation(),V(T)},className:"text-indigo-600 hover:text-indigo-900 dark:hover:text-indigo-400",title:"Editar",children:""}),r.jsx("button",{onClick:z=>{z.stopPropagation(),N(T.id)},className:"text-red-600 hover:text-red-900 dark:hover:text-red-400",title:"Deletar",children:""})]})})]},T.id))})]})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:n?"Editar Item":"Novo Item"})}),r.jsxs("form",{onSubmit:ee,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Ttulo *"}),r.jsx("input",{type:"text",value:c.title,onChange:T=>h({...c,title:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Ttulo do documento",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Categoria"}),r.jsx("input",{type:"text",value:c.category,onChange:T=>h({...c,category:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"ex: manual, tutorial, referncia"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Contedo *"}),r.jsx("textarea",{value:c.content,onChange:T=>h({...c,content:T.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Contedo do documento",rows:10,required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("input",{type:"text",value:p,onChange:T=>g(T.target.value),onKeyPress:T=>T.key==="Enter"&&(T.preventDefault(),O()),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100",placeholder:"Digite uma tag e pressione Enter"}),r.jsx("button",{type:"button",onClick:O,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Adicionar"})]}),c.tags.length>0&&r.jsx("div",{className:"flex flex-wrap gap-2",children:c.tags.map((T,z)=>r.jsxs("span",{className:"px-3 py-1 bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full text-sm flex items-center gap-2",children:[T,r.jsx("button",{type:"button",onClick:()=>B(T),className:"text-blue-600 dark:text-blue-300 hover:text-blue-800 dark:hover:text-blue-100",children:""})]},z))})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:c.isActive,onChange:T=>h({...c,isActive:T.target.checked}),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Item ativo"})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{type:"button",onClick:Z,className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Cancelar"}),r.jsx("button",{type:"submit",disabled:M.isLoading||L.isLoading,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors disabled:opacity-50",children:M.isLoading||L.isLoading?"Salvando...":n?"Atualizar":"Criar"})]})]})]})}),w&&d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:d.title}),r.jsx("button",{onClick:()=>y(!1),className:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300",children:""})]}),r.jsxs("div",{className:"flex items-center gap-3 mt-3",children:[r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded",children:d.category||"general"}),r.jsx("span",{className:`px-2 py-1 text-xs rounded ${d.isActive?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-400"}`,children:d.isActive?"Ativo":"Inativo"}),r.jsx("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(d.createdAt).toLocaleDateString("pt-BR")})]})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[d.tags&&d.tags.length>0&&r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:d.tags.map((T,z)=>r.jsx("span",{className:"px-3 py-1 bg-blue-50 dark:bg-blue-900 text-blue-600 dark:text-blue-200 rounded-full text-sm",children:T},z))})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Contedo"}),r.jsx("div",{className:"prose dark:prose-invert max-w-none",children:r.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:d.content})})]}),r.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("button",{onClick:()=>{y(!1),V(d)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg transition-colors",children:"Editar"}),r.jsx("button",{onClick:()=>y(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors",children:"Fechar"})]})]})]})})]})},Sb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.knowledgesources.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Fontes de Conhecimento",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},kb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.executionlogs.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Logs de Execuo",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})},jb=()=>{const[e,t]=R.useState([]),[s,i]=R.useState(""),[n,l]=R.useState(!1),[f,a]=R.useState(!1),[o,m]=R.useState(""),p=R.useRef(null),g=R.useRef(null),v=()=>{var y;(y=g.current)==null||y.scrollIntoView({behavior:"smooth"})};R.useEffect(()=>{v()},[e,o]),R.useEffect(()=>{const d=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,u=new WebSocket(d);return u.onopen=()=>{console.log(" WebSocket conectado"),l(!0),u.send(JSON.stringify({type:"chat:history",data:{conversationId:1,limit:50}}))},u.onmessage=c=>{try{const h=JSON.parse(c.data);switch(h.type){case"chat:history":t(h.data);break;case"chat:message":h.data.role==="assistant"&&f&&(a(!1),m("")),t(x=>x.find(k=>k.id===h.data.id)?x:[...x,h.data]);break;case"chat:streaming":h.data.done?a(!1):(a(!0),m(x=>x+h.data.chunk));break;case"error":console.error("Erro do servidor:",h.data.message),alert(`Erro: ${h.data.message}`);break}}catch(h){console.error("Erro ao processar mensagem:",h)}},u.onerror=c=>{console.error(" Erro no WebSocket:",c),l(!1)},u.onclose=()=>{console.log(" WebSocket desconectado"),l(!1),setTimeout(()=>{console.log(" Tentando reconectar..."),window.location.reload()},3e3)},p.current=u,()=>{u.close()}},[]);const S=()=>{!s.trim()||!p.current||!n||(p.current.send(JSON.stringify({type:"chat:send",data:{message:s.trim(),conversationId:1}})),i(""))},w=y=>{y.key==="Enter"&&!y.shiftKey&&(y.preventDefault(),S())};return r.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] p-4 gap-4",children:[r.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Chat com IA"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Converse com o assistente do Orquestrador V3.2"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500":"bg-red-500"}`,title:n?"Conectado":"Desconectado"}),r.jsx("span",{className:"text-sm text-gray-400",children:n?"Online":"Offline"})]})]}),r.jsxs("div",{className:"flex-1 card p-4 overflow-y-auto space-y-4",children:[e.length===0&&!f&&r.jsxs("div",{className:"text-center text-gray-400 py-12",children:[r.jsx("p",{className:"text-lg mb-2",children:" Bem-vindo!"}),r.jsx("p",{children:"Envie uma mensagem para comear a conversar."})]}),e.map((y,d)=>r.jsx("div",{className:`flex ${y.role==="user"?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] px-4 py-3 rounded-lg ${y.role==="user"?"bg-blue-600 text-white":"bg-gray-700 text-gray-100"}`,children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:y.role==="user"?"Voc":"Assistente"}),r.jsx("p",{className:"whitespace-pre-wrap",children:y.content}),r.jsx("p",{className:"text-xs opacity-70 mt-2",children:new Date(y.timestamp).toLocaleTimeString("pt-BR")})]})},y.id||d)),f&&o&&r.jsx("div",{className:"flex justify-start",children:r.jsxs("div",{className:"max-w-[70%] px-4 py-3 rounded-lg bg-gray-700 text-gray-100",children:[r.jsx("p",{className:"text-sm font-medium mb-1",children:"Assistente"}),r.jsx("p",{className:"whitespace-pre-wrap",children:o}),r.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[r.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),r.jsx("p",{className:"text-xs opacity-70",children:"Digitando..."})]})]})}),r.jsx("div",{ref:g})]}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("textarea",{value:s,onChange:y=>i(y.target.value),onKeyPress:w,placeholder:n?"Digite sua mensagem... (Enter para enviar)":"Aguardando conexo...",disabled:!n||f,className:"flex-1 bg-gray-700 text-white rounded-lg px-4 py-3 resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",rows:3}),r.jsxs("button",{onClick:S,disabled:!n||!s.trim()||f,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center gap-2",children:[r.jsx(Ky,{size:20}),"Enviar"]})]}),!n&&r.jsx("p",{className:"text-amber-500 text-sm mt-2",children:" Desconectado do servidor. Tentando reconectar..."})]})]})},Cb=()=>{const[e,t]=R.useState(""),{data:s,isLoading:i}=G.externalapiaccounts.list.useQuery({query:e});return r.jsx("div",{children:r.jsx(Xt,{title:"Contas de API Externa",columns:[{key:"id",label:"ID"},{key:"name",label:"Nome"}],data:(s==null?void 0:s.items)||[],loading:i,searchQuery:e,onSearchChange:t,onAdd:()=>console.log("Add"),onEdit:()=>console.log("Edit"),onDelete:()=>console.log("Delete")})})};function Nb(){var ec,tc,rc,sc,ic,nc,ac,oc,lc,cc,dc,uc,hc,fc,mc,gc,pc,xc,vc,yc,bc,_c,wc,Sc,kc,jc,Cc;const{user:e}=$r(),[t,s]=R.useState("services"),[i,n]=R.useState(!1),[l,f]=R.useState(null),[a,o]=R.useState(null),[m,p]=R.useState(!1),[g,v]=R.useState({serviceName:"openai",credentialName:"",apiKey:"",apiSecret:""}),[S,w]=R.useState({owner:"",repo:""}),[y,d]=R.useState(!1),[u,c]=R.useState({owner:"",repo:"",title:"",body:"",labels:[]}),[h,x]=R.useState("open"),[_,k]=R.useState(!1),[j,b]=R.useState({to:[],subject:"",body:"",cc:[],bcc:[]}),[C,M]=R.useState(""),[L,P]=R.useState(!1),[D,W]=R.useState({name:"",mimeType:"text/plain",content:""}),[V,Z]=R.useState(null),[ee,N]=R.useState(!1),[A,O]=R.useState({spreadsheetId:"",range:"Sheet1!A1:Z100",sheetName:"Sheet1",values:[[""]]}),[B,J]=R.useState("read"),{data:H,isLoading:I,refetch:T}=G.services.listServices.useQuery({userId:e==null?void 0:e.id}),{data:z,isLoading:E,refetch:U}=G.services.listOAuthTokens.useQuery({userId:(e==null?void 0:e.id)||0},{enabled:!!(e!=null&&e.id)&&t==="oauth"}),{data:X,isLoading:Y,refetch:se}=G.services.listApiCredentials.useQuery({userId:(e==null?void 0:e.id)||0},{enabled:!!(e!=null&&e.id)&&t==="credentials"}),{data:re,isLoading:$}=G.services.githubListRepos.useQuery({serviceId:((tc=(ec=H==null?void 0:H.services)==null?void 0:ec.find(Q=>Q.serviceName==="github"))==null?void 0:tc.id)||0},{enabled:t==="github"&&!!((rc=H==null?void 0:H.services)!=null&&rc.find(Q=>Q.serviceName==="github"&&Q.isActive))}),{data:ae,isLoading:be}=G.services.githubListIssues.useQuery({serviceId:((ic=(sc=H==null?void 0:H.services)==null?void 0:sc.find(Q=>Q.serviceName==="github"))==null?void 0:ic.id)||0,owner:S.owner,repo:S.repo,state:h},{enabled:t==="github"&&!!S.owner&&!!S.repo}),{data:je,isLoading:oe}=G.services.gmailListMessages.useQuery({serviceId:((ac=(nc=H==null?void 0:H.services)==null?void 0:nc.find(Q=>Q.serviceName==="gmail"))==null?void 0:ac.id)||0,maxResults:20,query:C},{enabled:t==="gmail"&&!!((oc=H==null?void 0:H.services)!=null&&oc.find(Q=>Q.serviceName==="gmail"&&Q.isActive))}),{data:Ne,isLoading:ut}=G.services.driveListFiles.useQuery({serviceId:((cc=(lc=H==null?void 0:H.services)==null?void 0:lc.find(Q=>Q.serviceName==="drive"))==null?void 0:cc.id)||0,pageSize:50},{enabled:t==="drive"&&!!((dc=H==null?void 0:H.services)!=null&&dc.find(Q=>Q.serviceName==="drive"&&Q.isActive))}),Qe=G.services.createService.useMutation({onSuccess:()=>{T(),alert("Service connected successfully!")},onError:Q=>{alert(`Failed to connect service: ${Q.message}`)}}),it=G.services.updateService.useMutation({onSuccess:()=>{T(),n(!1),alert("Service configuration updated!")}}),Xe=G.services.deleteService.useMutation({onSuccess:()=>{T(),alert("Service disconnected!")}}),de=G.services.createApiCredential.useMutation({onSuccess:()=>{se(),p(!1),v({serviceName:"openai",credentialName:"",apiKey:"",apiSecret:""}),alert("Credential added successfully!")}}),q=G.services.deleteApiCredential.useMutation({onSuccess:()=>{se(),alert("Credential deleted!")}}),xe=G.services.revokeOAuthToken.useMutation({onSuccess:()=>{U(),alert("Token revoked successfully!")}}),Oe=G.services.githubCreateIssue.useMutation({onSuccess:()=>{d(!1),c({owner:"",repo:"",title:"",body:"",labels:[]}),alert("GitHub issue created!")}}),ht=G.services.gmailSendMessage.useMutation({onSuccess:()=>{k(!1),b({to:[],subject:"",body:"",cc:[],bcc:[]}),alert("Email sent successfully!")}}),Ke=G.services.driveUploadFile.useMutation({onSuccess:()=>{P(!1),W({name:"",mimeType:"text/plain",content:""}),alert("File uploaded to Drive!")}}),le=G.services.driveDeleteFile.useMutation({onSuccess:()=>{alert("File deleted from Drive!")}}),he={github:"",gmail:"",drive:"",sheets:"",notion:"",slack:"",discord:""},Ze={github:"Acesse repositrios, issues e pull requests",gmail:"Envie e receba emails automaticamente",drive:"Gerencie arquivos e pastas na nuvem",sheets:"Leia e escreva em planilhas",notion:"Sincronize pginas e bancos de dados",slack:"Envie mensagens para canais e usurios",discord:"Integre com servidores Discord"},F=["github","gmail","drive","sheets","notion","slack","discord"].map(Q=>{var nt;const ve=(nt=H==null?void 0:H.services)==null?void 0:nt.find(At=>At.serviceName===Q);return{name:Q.charAt(0).toUpperCase()+Q.slice(1),serviceName:Q,status:ve!=null&&ve.isActive?"connected":"disconnected",icon:he[Q]||"",id:ve==null?void 0:ve.id,config:ve==null?void 0:ve.config}}),K=Q=>{e!=null&&e.id&&Qe.mutate({userId:e.id,serviceName:Q,config:{}})},ne=Q=>{confirm("Are you sure you want to disconnect this service?")&&Xe.mutate({id:Q})},Ae=Q=>{f({serviceId:Q.id,serviceName:Q.serviceName,config:Q.config?JSON.parse(Q.config):{}}),n(!0)},Ue=()=>{if(!(e!=null&&e.id))return;if(!g.credentialName||!g.apiKey){alert("Please fill in all required fields");return}const Q=btoa(JSON.stringify({apiKey:g.apiKey,apiSecret:g.apiSecret}));de.mutate({userId:e.id,serviceName:g.serviceName,credentialName:g.credentialName,encryptedData:Q})},Si=()=>{var ve,nt;if(!u.owner||!u.repo||!u.title){alert("Please fill in owner, repo, and title");return}const Q=(nt=(ve=H==null?void 0:H.services)==null?void 0:ve.find(At=>At.serviceName==="github"))==null?void 0:nt.id;if(!Q){alert("GitHub service not connected");return}Oe.mutate({serviceId:Q,owner:u.owner,repo:u.repo,title:u.title,body:u.body,labels:u.labels})},Lm=()=>{var ve,nt;if(!j.to.length||!j.subject){alert("Please fill in recipient and subject");return}const Q=(nt=(ve=H==null?void 0:H.services)==null?void 0:ve.find(At=>At.serviceName==="gmail"))==null?void 0:nt.id;if(!Q){alert("Gmail service not connected");return}ht.mutate({serviceId:Q,to:j.to,subject:j.subject,body:j.body,cc:j.cc,bcc:j.bcc})},Tm=()=>{var ve,nt;if(!D.name||!D.content){alert("Please fill in name and content");return}const Q=(nt=(ve=H==null?void 0:H.services)==null?void 0:ve.find(At=>At.serviceName==="drive"))==null?void 0:nt.id;if(!Q){alert("Drive service not connected");return}Ke.mutate({serviceId:Q,name:D.name,mimeType:D.mimeType,content:btoa(D.content),folderId:D.folderId})},ta=F.length,ra=F.filter(Q=>Q.status==="connected").length,Am=((uc=z==null?void 0:z.tokens)==null?void 0:uc.length)||0,Rm=((hc=X==null?void 0:X.credentials)==null?void 0:hc.length)||0,Dm=((fc=re==null?void 0:re.repos)==null?void 0:fc.length)||0,Im=((mc=je==null?void 0:je.messages)==null?void 0:mc.length)||0,Om=((gc=Ne==null?void 0:Ne.files)==null?void 0:gc.length)||0,Bm=[{id:"services",label:"Services",icon:""},{id:"oauth",label:"OAuth Tokens",icon:""},{id:"credentials",label:"API Credentials",icon:""},{id:"github",label:"GitHub",icon:""},{id:"gmail",label:"Gmail",icon:""},{id:"drive",label:"Drive",icon:""},{id:"sheets",label:"Sheets",icon:""},{id:"statistics",label:"Statistics",icon:""}];return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"External Services"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Connect and manage integrations with external services"})]}),r.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700 mb-6",children:r.jsx("nav",{className:"-mb-px flex space-x-8 overflow-x-auto",children:Bm.map(Q=>r.jsxs("button",{onClick:()=>s(Q.id),className:`
                whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors
                ${t===Q.id?"border-blue-500 text-blue-600 dark:text-blue-400":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 dark:text-gray-400 dark:hover:text-gray-300"}
              `,children:[r.jsx("span",{className:"mr-2",children:Q.icon}),Q.label]},Q.id))})}),t==="services"&&r.jsx("div",{children:I?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Loading services..."})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(Q=>r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex items-start justify-between mb-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:Q.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Q.name}),r.jsx("span",{className:`inline-block text-xs px-2 py-1 rounded-full mt-1 ${Q.status==="connected"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:Q.status==="connected"?"Connected":"Disconnected"})]})]})}),r.jsx("div",{className:"space-y-2 text-sm text-gray-600 dark:text-gray-300 mb-4",children:r.jsx("p",{children:Ze[Q.serviceName]||"Integration service"})}),r.jsx("div",{className:"flex gap-2",children:Q.status==="connected"?r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:()=>Ae(Q),className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Configure"}),r.jsx("button",{onClick:()=>ne(Q.id),className:"flex-1 border border-red-300 text-red-600 px-4 py-2 rounded-lg hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors text-sm font-medium",children:"Disconnect"})]}):r.jsx("button",{onClick:()=>K(Q.serviceName),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"Connect"})})]})},Q.name))})}),t==="oauth"&&r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"OAuth Tokens"}),r.jsx("button",{onClick:()=>U(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Refresh"})]}),E?r.jsx("div",{className:"text-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):((pc=z==null?void 0:z.tokens)==null?void 0:pc.length)===0?r.jsx("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"No OAuth tokens found"})}):r.jsx("div",{className:"grid grid-cols-1 gap-4",children:(xc=z==null?void 0:z.tokens)==null?void 0:xc.map(Q=>r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Q.provider}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:["Created: ",new Date(Q.createdAt).toLocaleDateString()]}),Q.expiresAt&&r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:["Expires: ",new Date(Q.expiresAt).toLocaleDateString()]})]}),r.jsx("button",{onClick:()=>xe.mutate({tokenId:Q.id}),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"Revoke"})]})},Q.id))})]}),t==="credentials"&&r.jsxs("div",{children:[r.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Credentials"}),r.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Add Credential"})]}),Y?r.jsx("div",{className:"text-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"})}):((vc=X==null?void 0:X.credentials)==null?void 0:vc.length)===0?r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No credentials configured"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Add API keys for OpenAI, Anthropic, and other services"})]}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(yc=X==null?void 0:X.credentials)==null?void 0:yc.map(Q=>r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:Q.credentialName}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:Q.serviceName})]}),r.jsx("span",{className:"px-2 py-1 text-xs bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200 rounded-full",children:"Active"})]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-4",children:["Created: ",new Date(Q.createdAt).toLocaleDateString()]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:()=>q.mutate({id:Q.id}),className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 text-sm",children:"Delete"})})]},Q.id))})]}),t==="github"&&r.jsx("div",{children:r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"GitHub Integration"}),F.find(Q=>Q.serviceName==="github"&&Q.status==="connected")?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Select Repository"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx("input",{type:"text",placeholder:"Owner (e.g., facebook)",value:S.owner,onChange:Q=>w({...S,owner:Q.target.value}),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"}),r.jsx("input",{type:"text",placeholder:"Repo (e.g., react)",value:S.repo,onChange:Q=>w({...S,repo:Q.target.value}),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),S.owner&&S.repo&&r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"Issues"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:h,onChange:Q=>x(Q.target.value),className:"px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm",children:[r.jsx("option",{value:"open",children:"Open"}),r.jsx("option",{value:"closed",children:"Closed"}),r.jsx("option",{value:"all",children:"All"})]}),r.jsx("button",{onClick:()=>{c({...u,owner:S.owner,repo:S.repo}),d(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Create Issue"})]})]}),be?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):r.jsx("div",{className:"space-y-2",children:((bc=ae==null?void 0:ae.issues)==null?void 0:bc.length)===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center py-4",children:"No issues found"}):(_c=ae==null?void 0:ae.issues)==null?void 0:_c.map(Q=>{var ve;return r.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{children:[r.jsxs("h4",{className:"font-semibold text-gray-900 dark:text-white",children:["#",Q.number," ",Q.title]}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[(ve=Q.body)==null?void 0:ve.substring(0,100),"..."]})]}),r.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${Q.state==="open"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:Q.state})]})},Q.number)})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Your Repositories"}),$?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(wc=re==null?void 0:re.repos)==null?void 0:wc.slice(0,6).map(Q=>r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-blue-500 cursor-pointer",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:Q.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:Q.description||"No description"}),r.jsxs("div",{className:"flex gap-4 mt-2 text-sm text-gray-500 dark:text-gray-400",children:[r.jsxs("span",{children:[" ",Q.stargazers_count||0]}),r.jsxs("span",{children:[" ",Q.forks_count||0]})]})]},Q.id))})]})]}):r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please connect GitHub service first"}),r.jsx("button",{onClick:()=>s("services"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Services"})]})]})}),t==="gmail"&&r.jsx("div",{children:r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Gmail Integration"}),F.find(Q=>Q.serviceName==="gmail"&&Q.status==="connected")&&r.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Compose Email"})]}),F.find(Q=>Q.serviceName==="gmail"&&Q.status==="connected")?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-4",children:r.jsx("input",{type:"text",placeholder:"Search emails...",value:C,onChange:Q=>M(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Recent Messages"}),oe?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):r.jsx("div",{className:"space-y-2",children:((Sc=je==null?void 0:je.messages)==null?void 0:Sc.length)===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center py-4",children:"No messages found"}):(kc=je==null?void 0:je.messages)==null?void 0:kc.map(Q=>{var ve;return r.jsx("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-blue-500 cursor-pointer",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:Q.from||"Unknown"}),r.jsx("p",{className:"text-sm text-gray-900 dark:text-white mt-1",children:Q.subject||"(No subject)"}),r.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:[(ve=Q.snippet)==null?void 0:ve.substring(0,100),"..."]})]}),r.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:Q.date})]})},Q.id)})})]})]}):r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please connect Gmail service first"}),r.jsx("button",{onClick:()=>s("services"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Services"})]})]})}),t==="drive"&&r.jsx("div",{children:r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Google Drive Integration"}),F.find(Q=>Q.serviceName==="drive"&&Q.status==="connected")&&r.jsx("button",{onClick:()=>P(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Upload File"})]}),F.find(Q=>Q.serviceName==="drive"&&Q.status==="connected")?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Your Files"}),ut?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:((jc=Ne==null?void 0:Ne.files)==null?void 0:jc.length)===0?r.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-center py-4 col-span-full",children:"No files found"}):(Cc=Ne==null?void 0:Ne.files)==null?void 0:Cc.map(Q=>r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg hover:border-blue-500",children:[r.jsxs("div",{className:"flex items-start justify-between mb-2",children:[r.jsx("span",{className:"text-2xl",children:""}),r.jsx("button",{onClick:()=>{var nt,At;const ve=(At=(nt=H==null?void 0:H.services)==null?void 0:nt.find(Fm=>Fm.serviceName==="drive"))==null?void 0:At.id;ve&&confirm("Delete this file?")&&le.mutate({serviceId:ve,fileId:Q.id})},className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]}),r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white",children:Q.name}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-1",children:Q.mimeType}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:Q.size?`${(Q.size/1024).toFixed(2)} KB`:"Unknown size"})]},Q.id))})]}):r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please connect Drive service first"}),r.jsx("button",{onClick:()=>s("services"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Services"})]})]})}),t==="sheets"&&r.jsx("div",{children:r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Google Sheets Integration"}),F.find(Q=>Q.serviceName==="sheets"&&Q.status==="connected")&&r.jsx("button",{onClick:()=>N(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm",children:"Open Sheets Tool"})]}),F.find(Q=>Q.serviceName==="sheets"&&Q.status==="connected")?r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-md font-semibold text-gray-900 dark:text-white mb-4",children:"Sheets Operations"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Use the Sheets Tool to read, write, and manage spreadsheet data."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:" Read Data"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Read values from any range in your spreadsheets"})]}),r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:" Write Data"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Update cells and ranges with new values"})]}),r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:" Append Rows"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Add new rows to existing sheets"})]}),r.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white mb-2",children:" Create Sheets"}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Create new spreadsheets programmatically"})]})]})]}):r.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Please connect Sheets service first"}),r.jsx("button",{onClick:()=>s("services"),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Services"})]})]})}),t==="statistics"&&r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-6",children:"Service Statistics"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Total Services"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:ta})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Connected Services"}),r.jsx("p",{className:"text-3xl font-bold text-green-600 dark:text-green-400 mt-2",children:ra})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Connection Rate"}),r.jsxs("p",{className:"text-3xl font-bold text-blue-600 dark:text-blue-400 mt-2",children:[ta>0?Math.round(ra/ta*100):0,"%"]})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"OAuth Tokens"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:Am})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"API Credentials"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:Rm})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"GitHub Repos"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:Dm})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Gmail Messages"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:Im})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Drive Files"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 dark:text-white mt-2",children:Om})]}),r.jsx("span",{className:"text-4xl",children:""})]})}),r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Active Integrations"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600 dark:text-purple-400 mt-2",children:ra})]}),r.jsx("span",{className:"text-4xl",children:""})]})})]}),r.jsxs("div",{className:"mt-8 bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Service Status Breakdown"}),r.jsx("div",{className:"space-y-3",children:F.map(Q=>r.jsxs("div",{className:"flex items-center justify-between p-3 border border-gray-200 dark:border-gray-700 rounded-lg",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-2xl",children:Q.icon}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:Q.name})]}),r.jsx("span",{className:`px-3 py-1 text-sm rounded-full ${Q.status==="connected"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":"bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-300"}`,children:Q.status==="connected"?"Connected":"Disconnected"})]},Q.serviceName))})]})]}),i&&l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["Configure ",l.serviceName.charAt(0).toUpperCase()+l.serviceName.slice(1)]})}),r.jsxs("div",{className:"p-6",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"Service configuration options will be available here. Current config:"}),r.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-4 rounded-lg text-sm overflow-x-auto",children:JSON.stringify(l.config,null,2)})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>n(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:()=>{it.mutate({id:l.serviceId,config:l.config})},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Save Configuration"})]})]})}),m&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Add API Credential"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Service Name"}),r.jsxs("select",{value:g.serviceName,onChange:Q=>v({...g,serviceName:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"openai",children:"OpenAI"}),r.jsx("option",{value:"anthropic",children:"Anthropic"}),r.jsx("option",{value:"google",children:"Google AI"}),r.jsx("option",{value:"azure",children:"Azure OpenAI"}),r.jsx("option",{value:"aws",children:"AWS Bedrock"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Credential Name"}),r.jsx("input",{type:"text",value:g.credentialName,onChange:Q=>v({...g,credentialName:Q.target.value}),placeholder:"My API Key",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Key"}),r.jsx("input",{type:"password",value:g.apiKey,onChange:Q=>v({...g,apiKey:Q.target.value}),placeholder:"sk-...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"API Secret (Optional)"}),r.jsx("input",{type:"password",value:g.apiSecret,onChange:Q=>v({...g,apiSecret:Q.target.value}),placeholder:"Optional secret key",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:Ue,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Add Credential"})]})]})}),y&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Create GitHub Issue"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Owner"}),r.jsx("input",{type:"text",value:u.owner,onChange:Q=>c({...u,owner:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Repo"}),r.jsx("input",{type:"text",value:u.repo,onChange:Q=>c({...u,repo:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Title"}),r.jsx("input",{type:"text",value:u.title,onChange:Q=>c({...u,title:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Body"}),r.jsx("textarea",{value:u.body,onChange:Q=>c({...u,body:Q.target.value}),rows:6,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:Si,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Create Issue"})]})]})}),_&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Compose Email"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"To (comma-separated)"}),r.jsx("input",{type:"text",value:j.to.join(", "),onChange:Q=>b({...j,to:Q.target.value.split(",").map(ve=>ve.trim())}),placeholder:"email@example.com, another@example.com",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Subject"}),r.jsx("input",{type:"text",value:j.subject,onChange:Q=>b({...j,subject:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Body"}),r.jsx("textarea",{value:j.body,onChange:Q=>b({...j,body:Q.target.value}),rows:8,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:Lm,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Send Email"})]})]})}),L&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Upload File to Drive"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"File Name"}),r.jsx("input",{type:"text",value:D.name,onChange:Q=>W({...D,name:Q.target.value}),placeholder:"document.txt",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"MIME Type"}),r.jsxs("select",{value:D.mimeType,onChange:Q=>W({...D,mimeType:Q.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"text/plain",children:"Text (text/plain)"}),r.jsx("option",{value:"text/html",children:"HTML (text/html)"}),r.jsx("option",{value:"application/json",children:"JSON (application/json)"}),r.jsx("option",{value:"text/csv",children:"CSV (text/csv)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Content"}),r.jsx("textarea",{value:D.content,onChange:Q=>W({...D,content:Q.target.value}),rows:8,placeholder:"File content...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white font-mono text-sm"})]})]}),r.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:[r.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Cancel"}),r.jsx("button",{onClick:Tm,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Upload"})]})]})}),ee&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Google Sheets Tool"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Operation"}),r.jsxs("select",{value:B,onChange:Q=>J(Q.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"read",children:"Read Range"}),r.jsx("option",{value:"write",children:"Write Range"}),r.jsx("option",{value:"append",children:"Append Row"}),r.jsx("option",{value:"create",children:"Create Spreadsheet"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Spreadsheet ID"}),r.jsx("input",{type:"text",value:A.spreadsheetId,onChange:Q=>O({...A,spreadsheetId:Q.target.value}),placeholder:"1BxiMVs0XRA5nFMdKvBdBZjgmUUqptlbs74OgvE2upms",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Range"}),r.jsx("input",{type:"text",value:A.range,onChange:Q=>O({...A,range:Q.target.value}),placeholder:"Sheet1!A1:D10",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:"Use this tool to perform operations on Google Sheets. Provide the spreadsheet ID and range."})]}),r.jsx("div",{className:"p-6 border-t border-gray-200 dark:border-gray-700 flex justify-end gap-3",children:r.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:"Close"})})]})})]})}function Eb(){var o,m,p,g,v,S;const{data:e,isLoading:t}=G.monitoring.getCurrentMetrics.useQuery(),{data:s,isLoading:i}=G.monitoring.getServiceStatus.useQuery(),{data:n,isLoading:l}=G.monitoring.getErrorLogs.useQuery({limit:10,hours:1}),f=t||i||l,a=e==null?void 0:e.metrics;return r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Monitoramento do Sistema"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-1",children:"Acompanhe mtricas, logs e performance em tempo real"})]}),f?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mt-4",children:"Carregando mtricas..."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"CPU"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:typeof(a==null?void 0:a.cpu)=="number"?`${a.cpu.toFixed(1)}%`:"0.0%"})]}),r.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})})]}),r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:`${(a==null?void 0:a.cpu)||0}%`}})})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Memria"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:typeof(a==null?void 0:a.memory)=="number"?`${a.memory.toFixed(1)}%`:"0.0%"})]}),r.jsx("div",{className:"bg-green-100 rounded-full p-3",children:r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2 1 3 3 3h10c2 0 3-1 3-3V7c0-2-1-3-3-3H7c-2 0-3 1-3 3z"})})})]}),r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-green-600 h-2 rounded-full",style:{width:`${(a==null?void 0:a.memory)||0}%`}})})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Disco"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:typeof(a==null?void 0:a.disk)=="number"?`${a.disk.toFixed(1)}%`:"0.0%"})]}),r.jsx("div",{className:"bg-yellow-100 rounded-full p-3",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})})]}),r.jsx("div",{className:"mt-4",children:r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-yellow-600 h-2 rounded-full",style:{width:`${(a==null?void 0:a.disk)||0}%`}})})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-300",children:"Conexes"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:(a==null?void 0:a.connections)||0})]}),r.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:r.jsx("svg",{className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-4",children:"Ativas no momento"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Logs Recentes"})}),r.jsx("div",{className:"p-6",children:n!=null&&n.logs&&n.logs.length>0?r.jsx("div",{className:"space-y-3",children:n.logs.slice(0,5).map((w,y)=>{var d;return r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("span",{className:`text-xs px-2 py-1 rounded ${w.level==="error"?"bg-red-100 text-red-800":w.level==="warning"?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:((d=w.level)==null?void 0:d.toUpperCase())||"INFO"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-gray-900 dark:text-white",children:w.message||"Sem mensagem"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:w.timestamp?new Date(w.timestamp).toLocaleString("pt-BR"):"Sem data"})]})]},w.id||y)})}):r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"Nenhum log recente"})})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow",children:[r.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-gray-700",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Status dos Servios"})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"Banco de Dados"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${(o=s==null?void 0:s.status)!=null&&o.database?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:(m=s==null?void 0:s.status)!=null&&m.database?"Online":"Offline"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"LM Studio"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${(p=s==null?void 0:s.status)!=null&&p.lmstudio?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:(g=s==null?void 0:s.status)!=null&&g.lmstudio?"Online":"Offline"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"API tRPC"}),r.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Online"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-900 dark:text-white",children:"Redis"}),r.jsx("span",{className:`text-xs px-2 py-1 rounded ${(v=s==null?void 0:s.status)!=null&&v.redis?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:(S=s==null?void 0:s.status)!=null&&S.redis?"Online":"Offline"})]})]})})]})]})]})]})}const Mb=()=>{const[e,t]=R.useState("general"),[s,i]=R.useState(""),{data:n,refetch:l}=G.settings.getStatistics.useQuery(),{data:f,refetch:a}=G.settings.list.useQuery({limit:1e3}),{data:o,refetch:m}=G.settings.listNotifications.useQuery({}),{data:p,refetch:g}=G.settings.listProviders.useQuery({}),{data:v,refetch:S}=G.settings.getSecurity.useQuery(),{data:w,refetch:y}=G.settings.listIntegrations.useQuery({}),{data:d,refetch:u}=G.settings.listBackups.useQuery({limit:20}),c=G.settings.upsert.useMutation();G.settings.delete.useMutation();const h=G.settings.reset.useMutation(),x=G.settings.upsertNotification.useMutation();G.settings.deleteNotification.useMutation();const _=G.settings.updateSecurity.useMutation(),k=G.settings.generateBackupCodes.useMutation(),j=G.settings.createProvider.useMutation(),b=G.settings.updateProvider.useMutation(),C=G.settings.deleteProvider.useMutation(),M=G.settings.testProvider.useMutation(),L=G.settings.createIntegration.useMutation(),P=G.settings.updateIntegration.useMutation(),D=G.settings.deleteIntegration.useMutation(),W=G.settings.createBackup.useMutation(),V=G.settings.deleteBackup.useMutation(),Z=G.settings.restoreBackup.useMutation(),ee=G.settings.exportSettings.useMutation(),[N,A]=R.useState({theme:"dark",language:"pt-BR",timezone:"America/Sao_Paulo",dateFormat:"DD/MM/YYYY",timeFormat:"24h"}),[O,B]=R.useState(!1),[J,H]=R.useState(null),[I,T]=R.useState({name:"",type:"local",endpoint:"",apiKey:"",isActive:!0}),[z,E]=R.useState(!1),[U,X]=R.useState(null),[Y,se]=R.useState({serviceName:"",config:{},isActive:!0}),[re,$]=R.useState(!1),[ae,be]=R.useState([]),je=async()=>{try{await c.mutateAsync({settingKey:"general_preferences",settingValue:N,settingType:"user",description:"Preferncias gerais do usurio"}),alert("Configuraes gerais salvas com sucesso!"),a(),l()}catch(K){console.error("Erro ao salvar configuraes gerais:",K),alert("Erro ao salvar configuraes gerais")}},oe=async K=>{if(confirm("Tem certeza que deseja resetar estas configuraes?"))try{await h.mutateAsync({settingType:K}),alert("Configuraes resetadas com sucesso!"),a(),l()}catch(ne){console.error("Erro ao resetar configuraes:",ne),alert("Erro ao resetar configuraes")}},Ne=async()=>{try{const K=await ee.mutateAsync(),ne=new Blob([JSON.stringify(K,null,2)],{type:"application/json"}),Ae=URL.createObjectURL(ne),Ue=document.createElement("a");Ue.href=Ae,Ue.download=`settings_export_${new Date().toISOString()}.json`,document.body.appendChild(Ue),Ue.click(),document.body.removeChild(Ue),URL.revokeObjectURL(Ae)}catch(K){console.error("Erro ao exportar configuraes:",K),alert("Erro ao exportar configuraes")}},ut=async(K,ne,Ae)=>{try{await x.mutateAsync({channel:K,eventType:ne,isEnabled:!Ae}),m(),l()}catch(Ue){console.error("Erro ao atualizar notificao:",Ue),alert("Erro ao atualizar notificao")}},Qe=K=>{K?(H(K),T({name:K.name,type:K.type,endpoint:K.endpoint,apiKey:K.apiKey||"",isActive:K.isActive})):(H(null),T({name:"",type:"local",endpoint:"",apiKey:"",isActive:!0})),B(!0)},it=async()=>{try{J?await b.mutateAsync({id:J.id,data:I}):await j.mutateAsync(I),B(!1),g(),l(),alert("Provider salvo com sucesso!")}catch(K){console.error("Erro ao salvar provider:",K),alert("Erro ao salvar provider")}},Xe=async K=>{if(confirm("Tem certeza que deseja deletar este provider?"))try{await C.mutateAsync({id:K}),g(),l(),alert("Provider deletado com sucesso!")}catch(ne){console.error("Erro ao deletar provider:",ne),alert("Erro ao deletar provider")}},de=async K=>{try{const ne=await M.mutateAsync({id:K});ne.success?alert(` ${ne.message}
Latncia: ${ne.latency}ms`):alert(` ${ne.error}`)}catch(ne){console.error("Erro ao testar provider:",ne),alert("Erro ao testar provider")}},q=async K=>{try{await _.mutateAsync(K),S(),l(),alert("Configuraes de segurana atualizadas!")}catch(ne){console.error("Erro ao atualizar segurana:",ne),alert("Erro ao atualizar segurana")}},xe=async()=>{try{const K=await k.mutateAsync();K.success&&K.backupCodes&&(be(K.backupCodes),$(!0))}catch(K){console.error("Erro ao gerar cdigos de backup:",K),alert("Erro ao gerar cdigos de backup")}},Oe=K=>{K?(X(K),se({serviceName:K.serviceName,config:K.config||{},isActive:K.isActive})):(X(null),se({serviceName:"",config:{},isActive:!0})),E(!0)},ht=async()=>{try{U?await P.mutateAsync({id:U.id,...Y}):await L.mutateAsync(Y),E(!1),y(),l(),alert("Integrao salva com sucesso!")}catch(K){console.error("Erro ao salvar integrao:",K),alert("Erro ao salvar integrao")}},Ke=async K=>{if(confirm("Tem certeza que deseja deletar esta integrao?"))try{await D.mutateAsync({id:K}),y(),l(),alert("Integrao deletada com sucesso!")}catch(ne){console.error("Erro ao deletar integrao:",ne),alert("Erro ao deletar integrao")}},le=async K=>{try{const ne=await W.mutateAsync({backupType:K});alert(ne.message),u()}catch(ne){console.error("Erro ao criar backup:",ne),alert("Erro ao criar backup")}},he=async K=>{if(confirm("Tem certeza que deseja restaurar este backup? Esta ao no pode ser desfeita."))try{const ne=await Z.mutateAsync({id:K});ne.success?alert(ne.message):alert(`Erro: ${ne.error}`),u()}catch(ne){console.error("Erro ao restaurar backup:",ne),alert("Erro ao restaurar backup")}},Ze=async K=>{if(confirm("Tem certeza que deseja deletar este backup?"))try{await V.mutateAsync({id:K}),u(),alert("Backup deletado com sucesso!")}catch(ne){console.error("Erro ao deletar backup:",ne),alert("Erro ao deletar backup")}};R.useEffect(()=>{(async()=>{if(f!=null&&f.settings){const ne=f.settings.find(Ae=>Ae.settingKey==="general_preferences");ne&&typeof ne.settingValue=="object"&&A({...N,...ne.settingValue})}})()},[f]);const fe=n||{settings:{total:0},notifications:{enabled:0},providers:{active:0},integrations:{active:0},backup:{lastBackup:null},security:{twoFactorEnabled:!1}},F=[{id:"general",label:"Geral",icon:""},{id:"notifications",label:"Notificaes",icon:""},{id:"providers",label:"AI Providers",icon:""},{id:"security",label:"Segurana",icon:""},{id:"integrations",label:"Integraes",icon:""},{id:"system",label:"Sistema",icon:""}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:" Configuraes do Sistema"}),r.jsx("p",{className:"text-gray-400",children:"Gerencie todas as configuraes, integraes e preferncias do sistema"})]}),r.jsx("button",{onClick:Ne,className:"btn-secondary",children:" Exportar Configuraes"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mt-6",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Configuraes"}),r.jsx("div",{className:"text-white text-xl font-bold",children:fe.settings.total})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Notificaes"}),r.jsx("div",{className:"text-white text-xl font-bold",children:fe.notifications.enabled})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Providers Ativos"}),r.jsx("div",{className:"text-white text-xl font-bold",children:fe.providers.active})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Integraes"}),r.jsx("div",{className:"text-white text-xl font-bold",children:fe.integrations.active})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"2FA"}),r.jsx("div",{className:"text-white text-xl font-bold",children:fe.security.twoFactorEnabled?"":""})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"ltimo Backup"}),r.jsx("div",{className:"text-white text-xl font-bold",children:fe.backup.lastBackup?"":""})]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:F.map(K=>r.jsxs("button",{onClick:()=>t(K.id),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${e===K.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[K.icon," ",K.label]},K.id))})}),r.jsxs("div",{className:"card",children:[e==="general"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Configuraes Gerais"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Tema"}),r.jsxs("select",{className:"input w-full",value:N.theme,onChange:K=>A({...N,theme:K.target.value}),children:[r.jsx("option",{value:"dark",children:"Escuro"}),r.jsx("option",{value:"light",children:"Claro"}),r.jsx("option",{value:"auto",children:"Automtico"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Idioma"}),r.jsxs("select",{className:"input w-full",value:N.language,onChange:K=>A({...N,language:K.target.value}),children:[r.jsx("option",{value:"pt-BR",children:"Portugus (Brasil)"}),r.jsx("option",{value:"en-US",children:"English (US)"}),r.jsx("option",{value:"es-ES",children:"Espaol"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Fuso Horrio"}),r.jsxs("select",{className:"input w-full",value:N.timezone,onChange:K=>A({...N,timezone:K.target.value}),children:[r.jsx("option",{value:"America/Sao_Paulo",children:"So Paulo (GMT-3)"}),r.jsx("option",{value:"America/New_York",children:"New York (GMT-5)"}),r.jsx("option",{value:"Europe/London",children:"London (GMT+0)"}),r.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (GMT+9)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Formato de Data"}),r.jsxs("select",{className:"input w-full",value:N.dateFormat,onChange:K=>A({...N,dateFormat:K.target.value}),children:[r.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Formato de Hora"}),r.jsxs("select",{className:"input w-full",value:N.timeFormat,onChange:K=>A({...N,timeFormat:K.target.value}),children:[r.jsx("option",{value:"24h",children:"24 horas"}),r.jsx("option",{value:"12h",children:"12 horas (AM/PM)"})]})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:je,className:"btn-primary",children:" Salvar Configuraes"}),r.jsx("button",{onClick:()=>oe("user"),className:"btn-secondary",children:" Resetar para Padro"})]})]}),e==="notifications"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:" Preferncias de Notificaes"})}),r.jsx("div",{className:"space-y-4",children:["task_completed","task_failed","backup_completed","security_alert","new_message"].map(K=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-3 capitalize",children:K.replace("_"," ")}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-3",children:["email","push","slack","discord","telegram"].map(ne=>{const Ae=o==null?void 0:o.preferences.find(Si=>Si.channel===ne&&Si.eventType===K),Ue=(Ae==null?void 0:Ae.isEnabled)??!1;return r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:Ue,onChange:()=>ut(ne,K,Ue),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-300 capitalize",children:ne})]},ne)})})]},K))})]}),e==="providers"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" AI Providers"}),r.jsx("button",{onClick:()=>Qe(),className:"btn-primary",children:"+ Novo Provider"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p==null?void 0:p.providers.map(K=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:K.name}),r.jsx("p",{className:"text-gray-400 text-sm",children:K.type==="local"?" Local":" API"})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${K.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:K.isActive?"Ativo":"Inativo"})]}),r.jsx("p",{className:"text-gray-400 text-sm mb-3 break-all",children:K.endpoint}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>de(K.id),className:"btn-secondary text-sm flex-1",children:" Testar"}),r.jsx("button",{onClick:()=>Qe(K),className:"btn-secondary text-sm flex-1",children:" Editar"}),r.jsx("button",{onClick:()=>Xe(K.id),className:"btn-danger text-sm flex-1",children:""})]})]},K.id))}),(!(p!=null&&p.providers)||p.providers.length===0)&&r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum provider configurado"}),r.jsx("p",{className:"text-sm",children:"Adicione um provider para comear a usar modelos de IA"})]})]}),e==="security"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Configuraes de Segurana"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"Autenticao de Dois Fatores (2FA)"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Adicione uma camada extra de segurana  sua conta"})]}),r.jsx("label",{className:"flex items-center cursor-pointer",children:r.jsx("input",{type:"checkbox",checked:(v==null?void 0:v.twoFactorEnabled)||!1,onChange:K=>q({twoFactorEnabled:K.target.checked}),className:"form-checkbox h-6 w-6 text-blue-600"})})]}),(v==null?void 0:v.twoFactorEnabled)&&r.jsx("button",{onClick:xe,className:"btn-secondary mt-3",children:" Gerar Cdigos de Backup"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("label",{className:"block text-white font-semibold mb-2",children:"Timeout de Sesso (segundos)"}),r.jsx("input",{type:"number",min:"300",max:"86400",value:(v==null?void 0:v.sessionTimeout)||3600,onChange:K=>q({sessionTimeout:parseInt(K.target.value)}),className:"input w-full"}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Tempo de inatividade antes da sesso expirar (300-86400 segundos)"})]}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"Notificaes de Login"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Receba alertas quando houver login na sua conta"})]}),r.jsx("label",{className:"flex items-center cursor-pointer",children:r.jsx("input",{type:"checkbox",checked:(v==null?void 0:v.loginNotifications)||!1,onChange:K=>q({loginNotifications:K.target.checked}),className:"form-checkbox h-6 w-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:"Alertas de Atividade Suspeita"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Seja notificado sobre atividades incomuns na sua conta"})]}),r.jsx("label",{className:"flex items-center cursor-pointer",children:r.jsx("input",{type:"checkbox",checked:(v==null?void 0:v.suspiciousActivityAlerts)||!1,onChange:K=>q({suspiciousActivityAlerts:K.target.checked}),className:"form-checkbox h-6 w-6 text-blue-600"})})]})})]})]}),e==="integrations"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" Integraes Externas"}),r.jsx("button",{onClick:()=>Oe(),className:"btn-primary",children:"+ Nova Integrao"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:w==null?void 0:w.services.map(K=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:K.serviceName}),r.jsx("p",{className:"text-gray-400 text-sm",children:new Date(K.createdAt).toLocaleDateString("pt-BR")})]}),r.jsx("span",{className:`px-2 py-1 rounded text-xs ${K.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"}`,children:K.isActive?"Ativo":"Inativo"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>Oe(K),className:"btn-secondary text-sm flex-1",children:" Editar"}),r.jsx("button",{onClick:()=>Ke(K.id),className:"btn-danger text-sm flex-1",children:""})]})]},K.id))}),(!(w!=null&&w.services)||w.services.length===0)&&r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhuma integrao configurada"}),r.jsx("p",{className:"text-sm",children:"Conecte servios externos para expandir funcionalidades"})]})]}),e==="system"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-4",children:r.jsx("h2",{className:"text-xl font-bold text-white",children:" Backups e Sistema"})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3 mb-6",children:[r.jsx("button",{onClick:()=>le("full"),className:"btn-primary",children:" Backup Completo"}),r.jsx("button",{onClick:()=>le("incremental"),className:"btn-secondary",children:" Incremental"}),r.jsx("button",{onClick:()=>le("differential"),className:"btn-secondary",children:" Diferencial"}),r.jsx("button",{onClick:()=>le("database"),className:"btn-secondary",children:" Database"}),r.jsx("button",{onClick:()=>le("files"),className:"btn-secondary",children:" Arquivos"})]}),r.jsx("div",{className:"space-y-3",children:d==null?void 0:d.backups.map(K=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 flex items-center justify-between",children:[r.jsx("div",{className:"flex-1",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:"text-2xl",children:[K.backupType==="full"&&"",K.backupType==="incremental"&&"",K.backupType==="differential"&&"",K.backupType==="database"&&"",K.backupType==="files"&&""]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-white font-semibold capitalize",children:["Backup ",K.backupType]}),r.jsxs("p",{className:"text-gray-400 text-sm",children:[new Date(K.createdAt).toLocaleString("pt-BR"),K.fileSize&&`  ${(K.fileSize/1024/1024).toFixed(2)} MB`,K.duration&&`  ${(K.duration/1e3).toFixed(1)}s`]})]})]})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:`px-3 py-1 rounded text-sm ${K.status==="completed"?"bg-green-600 text-white":K.status==="failed"?"bg-red-600 text-white":K.status==="in_progress"?"bg-blue-600 text-white":"bg-gray-600 text-gray-300"}`,children:[K.status==="completed"&&" Completo",K.status==="failed"&&" Falhou",K.status==="in_progress"&&" Em Progresso",K.status==="pending"&&" Pendente"]}),K.status==="completed"&&r.jsx("button",{onClick:()=>he(K.id),className:"btn-secondary text-sm",children:" Restaurar"}),r.jsx("button",{onClick:()=>Ze(K.id),className:"btn-danger text-sm",children:""})]})]},K.id))}),(!(d!=null&&d.backups)||d.backups.length===0)&&r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum backup encontrado"}),r.jsx("p",{className:"text-sm",children:"Crie um backup para proteger seus dados"})]})]})]}),O&&r.jsx("div",{className:"modal-overlay",onClick:()=>B(!1),children:r.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:J?"Editar Provider":"Novo Provider"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome"}),r.jsx("input",{type:"text",className:"input w-full",value:I.name,onChange:K=>T({...I,name:K.target.value}),placeholder:"Ex: OpenAI GPT-4"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo"}),r.jsxs("select",{className:"input w-full",value:I.type,onChange:K=>T({...I,type:K.target.value}),children:[r.jsx("option",{value:"local",children:"Local"}),r.jsx("option",{value:"api",children:"API"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Endpoint"}),r.jsx("input",{type:"url",className:"input w-full",value:I.endpoint,onChange:K=>T({...I,endpoint:K.target.value}),placeholder:"https://api.example.com/v1"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"API Key (opcional)"}),r.jsx("input",{type:"password",className:"input w-full",value:I.apiKey,onChange:K=>T({...I,apiKey:K.target.value}),placeholder:"sk-..."})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"provider-active",checked:I.isActive,onChange:K=>T({...I,isActive:K.target.checked}),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("label",{htmlFor:"provider-active",className:"text-gray-300",children:"Ativo"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:it,className:"btn-primary flex-1",children:" Salvar"}),r.jsx("button",{onClick:()=>B(!1),className:"btn-secondary flex-1",children:" Cancelar"})]})]})}),z&&r.jsx("div",{className:"modal-overlay",onClick:()=>E(!1),children:r.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:U?"Editar Integrao":"Nova Integrao"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome do Servio"}),r.jsx("input",{type:"text",className:"input w-full",value:Y.serviceName,onChange:K=>se({...Y,serviceName:K.target.value}),placeholder:"Ex: GitHub, Slack, Discord"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",id:"integration-active",checked:Y.isActive,onChange:K=>se({...Y,isActive:K.target.checked}),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("label",{htmlFor:"integration-active",className:"text-gray-300",children:"Ativo"})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:ht,className:"btn-primary flex-1",children:" Salvar"}),r.jsx("button",{onClick:()=>E(!1),className:"btn-secondary flex-1",children:" Cancelar"})]})]})}),re&&r.jsx("div",{className:"modal-overlay",onClick:()=>$(!1),children:r.jsxs("div",{className:"modal-content",onClick:K=>K.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Cdigos de Backup 2FA"}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Guarde estes cdigos em um local seguro. Cada cdigo pode ser usado apenas uma vez."}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 mb-4",children:r.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae.map((K,ne)=>r.jsx("div",{className:"font-mono text-white bg-gray-800 rounded px-3 py-2 text-center",children:K},ne))})}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>{const K=ae.join(`
`);navigator.clipboard.writeText(K),alert("Cdigos copiados para a rea de transferncia!")},className:"btn-primary flex-1",children:" Copiar Cdigos"}),r.jsx("button",{onClick:()=>$(!1),className:"btn-secondary flex-1",children:" Fechar"})]})]})})]})};var Em={exports:{}};(function(e,t){(function(s,i){e.exports=i()})(self,()=>(()=>{var s={4567:function(f,a,o){var m=this&&this.__decorate||function(h,x,_,k){var j,b=arguments.length,C=b<3?x:k===null?k=Object.getOwnPropertyDescriptor(x,_):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(h,x,_,k);else for(var M=h.length-1;M>=0;M--)(j=h[M])&&(C=(b<3?j(C):b>3?j(x,_,C):j(x,_))||C);return b>3&&C&&Object.defineProperty(x,_,C),C},p=this&&this.__param||function(h,x){return function(_,k){x(_,k,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.AccessibilityManager=void 0;const g=o(9042),v=o(6114),S=o(9924),w=o(844),y=o(5596),d=o(4725),u=o(3656);let c=a.AccessibilityManager=class extends w.Disposable{constructor(h,x){super(),this._terminal=h,this._renderService=x,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=document.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=document.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let _=0;_<this._terminal.rows;_++)this._rowElements[_]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[_]);if(this._topBoundaryFocusListener=_=>this._handleBoundaryFocus(_,0),this._bottomBoundaryFocusListener=_=>this._handleBoundaryFocus(_,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=document.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new S.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize(_=>this._handleResize(_.rows))),this.register(this._terminal.onRender(_=>this._refreshRows(_.start,_.end))),this.register(this._terminal.onScroll(()=>this._refreshRows())),this.register(this._terminal.onA11yChar(_=>this._handleChar(_))),this.register(this._terminal.onLineFeed(()=>this._handleChar(`
`))),this.register(this._terminal.onA11yTab(_=>this._handleTab(_))),this.register(this._terminal.onKey(_=>this._handleKey(_.key))),this.register(this._terminal.onBlur(()=>this._clearLiveRegion())),this.register(this._renderService.onDimensionsChange(()=>this._refreshRowsDimensions())),this._screenDprMonitor=new y.ScreenDprMonitor(window),this.register(this._screenDprMonitor),this._screenDprMonitor.setListener(()=>this._refreshRowsDimensions()),this.register((0,u.addDisposableDomListener)(window,"resize",()=>this._refreshRowsDimensions())),this._refreshRows(),this.register((0,w.toDisposable)(()=>{this._accessibilityContainer.remove(),this._rowElements.length=0}))}_handleTab(h){for(let x=0;x<h;x++)this._handleChar(" ")}_handleChar(h){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,h===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=g.tooMuchOutput)),v.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout(()=>{this._accessibilityContainer.appendChild(this._liveRegion)},0))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0,v.isMac&&this._liveRegion.remove()}_handleKey(h){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(h)||this._charsToConsume.push(h)}_refreshRows(h,x){this._liveRegionDebouncer.refresh(h,x,this._terminal.rows)}_renderRows(h,x){const _=this._terminal.buffer,k=_.lines.length.toString();for(let j=h;j<=x;j++){const b=_.translateBufferLineToString(_.ydisp+j,!0),C=(_.ydisp+j+1).toString(),M=this._rowElements[j];M&&(b.length===0?M.innerText="":M.textContent=b,M.setAttribute("aria-posinset",C),M.setAttribute("aria-setsize",k))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(h,x){const _=h.target,k=this._rowElements[x===0?1:this._rowElements.length-2];if(_.getAttribute("aria-posinset")===(x===0?"1":`${this._terminal.buffer.lines.length}`)||h.relatedTarget!==k)return;let j,b;if(x===0?(j=_,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(j=this._rowElements.shift(),b=_,this._rowContainer.removeChild(j)),j.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),x===0){const C=this._createAccessibilityTreeNode();this._rowElements.unshift(C),this._rowContainer.insertAdjacentElement("afterbegin",C)}else{const C=this._createAccessibilityTreeNode();this._rowElements.push(C),this._rowContainer.appendChild(C)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(x===0?-1:1),this._rowElements[x===0?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}_handleResize(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let x=this._rowContainer.children.length;x<this._terminal.rows;x++)this._rowElements[x]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[x]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}}_refreshRowDimensions(h){h.style.height=`${this._renderService.dimensions.css.cell.height}px`}};a.AccessibilityManager=c=m([p(1,d.IRenderService)],c)},3614:(f,a)=>{function o(v){return v.replace(/\r?\n/g,"\r")}function m(v,S){return S?"\x1B[200~"+v+"\x1B[201~":v}function p(v,S,w,y){v=m(v=o(v),w.decPrivateModes.bracketedPasteMode&&y.rawOptions.ignoreBracketedPasteMode!==!0),w.triggerDataEvent(v,!0),S.value=""}function g(v,S,w){const y=w.getBoundingClientRect(),d=v.clientX-y.left-10,u=v.clientY-y.top-10;S.style.width="20px",S.style.height="20px",S.style.left=`${d}px`,S.style.top=`${u}px`,S.style.zIndex="1000",S.focus()}Object.defineProperty(a,"__esModule",{value:!0}),a.rightClickHandler=a.moveTextAreaUnderMouseCursor=a.paste=a.handlePasteEvent=a.copyHandler=a.bracketTextForPaste=a.prepareTextForTerminal=void 0,a.prepareTextForTerminal=o,a.bracketTextForPaste=m,a.copyHandler=function(v,S){v.clipboardData&&v.clipboardData.setData("text/plain",S.selectionText),v.preventDefault()},a.handlePasteEvent=function(v,S,w,y){v.stopPropagation(),v.clipboardData&&p(v.clipboardData.getData("text/plain"),S,w,y)},a.paste=p,a.moveTextAreaUnderMouseCursor=g,a.rightClickHandler=function(v,S,w,y,d){g(v,S,w),d&&y.rightClickSelect(v),S.value=y.selectionText,S.select()}},7239:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorContrastCache=void 0;const m=o(1505);a.ColorContrastCache=class{constructor(){this._color=new m.TwoKeyMap,this._css=new m.TwoKeyMap}setCss(p,g,v){this._css.set(p,g,v)}getCss(p,g){return this._css.get(p,g)}setColor(p,g,v){this._color.set(p,g,v)}getColor(p,g){return this._color.get(p,g)}clear(){this._color.clear(),this._css.clear()}}},3656:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.addDisposableDomListener=void 0,a.addDisposableDomListener=function(o,m,p,g){o.addEventListener(m,p,g);let v=!1;return{dispose:()=>{v||(v=!0,o.removeEventListener(m,p,g))}}}},6465:function(f,a,o){var m=this&&this.__decorate||function(d,u,c,h){var x,_=arguments.length,k=_<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,c,h);else for(var j=d.length-1;j>=0;j--)(x=d[j])&&(k=(_<3?x(k):_>3?x(u,c,k):x(u,c))||k);return _>3&&k&&Object.defineProperty(u,c,k),k},p=this&&this.__param||function(d,u){return function(c,h){u(c,h,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Linkifier2=void 0;const g=o(3656),v=o(8460),S=o(844),w=o(2585);let y=a.Linkifier2=class extends S.Disposable{get currentLink(){return this._currentLink}constructor(d){super(),this._bufferService=d,this._linkProviders=[],this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new v.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new v.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,S.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,S.toDisposable)(()=>{this._lastMouseEvent=void 0})),this.register(this._bufferService.onResize(()=>{this._clearCurrentLink(),this._wasResized=!0}))}registerLinkProvider(d){return this._linkProviders.push(d),{dispose:()=>{const u=this._linkProviders.indexOf(d);u!==-1&&this._linkProviders.splice(u,1)}}}attachToDom(d,u,c){this._element=d,this._mouseService=u,this._renderService=c,this.register((0,g.addDisposableDomListener)(this._element,"mouseleave",()=>{this._isMouseOut=!0,this._clearCurrentLink()})),this.register((0,g.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,g.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(d){if(this._lastMouseEvent=d,!this._element||!this._mouseService)return;const u=this._positionFromMouseEvent(d,this._element,this._mouseService);if(!u)return;this._isMouseOut=!1;const c=d.composedPath();for(let h=0;h<c.length;h++){const x=c[h];if(x.classList.contains("xterm"))break;if(x.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._handleHover(u),this._lastBufferCell=u)}_handleHover(d){if(this._activeLine!==d.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(d,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,d)||(this._clearCurrentLink(),this._askForLink(d,!0))}_askForLink(d,u){var c,h;this._activeProviderReplies&&u||((c=this._activeProviderReplies)===null||c===void 0||c.forEach(_=>{_==null||_.forEach(k=>{k.link.dispose&&k.link.dispose()})}),this._activeProviderReplies=new Map,this._activeLine=d.y);let x=!1;for(const[_,k]of this._linkProviders.entries())u?!((h=this._activeProviderReplies)===null||h===void 0)&&h.get(_)&&(x=this._checkLinkProviderResult(_,d,x)):k.provideLinks(d.y,j=>{var b,C;if(this._isMouseOut)return;const M=j==null?void 0:j.map(L=>({link:L}));(b=this._activeProviderReplies)===null||b===void 0||b.set(_,M),x=this._checkLinkProviderResult(_,d,x),((C=this._activeProviderReplies)===null||C===void 0?void 0:C.size)===this._linkProviders.length&&this._removeIntersectingLinks(d.y,this._activeProviderReplies)})}_removeIntersectingLinks(d,u){const c=new Set;for(let h=0;h<u.size;h++){const x=u.get(h);if(x)for(let _=0;_<x.length;_++){const k=x[_],j=k.link.range.start.y<d?0:k.link.range.start.x,b=k.link.range.end.y>d?this._bufferService.cols:k.link.range.end.x;for(let C=j;C<=b;C++){if(c.has(C)){x.splice(_--,1);break}c.add(C)}}}}_checkLinkProviderResult(d,u,c){var h;if(!this._activeProviderReplies)return c;const x=this._activeProviderReplies.get(d);let _=!1;for(let k=0;k<d;k++)this._activeProviderReplies.has(k)&&!this._activeProviderReplies.get(k)||(_=!0);if(!_&&x){const k=x.find(j=>this._linkAtPosition(j.link,u));k&&(c=!0,this._handleNewLink(k))}if(this._activeProviderReplies.size===this._linkProviders.length&&!c)for(let k=0;k<this._activeProviderReplies.size;k++){const j=(h=this._activeProviderReplies.get(k))===null||h===void 0?void 0:h.find(b=>this._linkAtPosition(b.link,u));if(j){c=!0,this._handleNewLink(j);break}}return c}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(d){if(!this._element||!this._mouseService||!this._currentLink)return;const u=this._positionFromMouseEvent(d,this._element,this._mouseService);u&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(d,this._currentLink.link.text)}_clearCurrentLink(d,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!d||!u||this._currentLink.link.range.start.y>=d&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,S.disposeArray)(this._linkCacheDisposables))}_handleNewLink(d){if(!this._element||!this._lastMouseEvent||!this._mouseService)return;const u=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);u&&this._linkAtPosition(d.link,u)&&(this._currentLink=d,this._currentLink.state={decorations:{underline:d.link.decorations===void 0||d.link.decorations.underline,pointerCursor:d.link.decorations===void 0||d.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,d.link,this._lastMouseEvent),d.link.decorations={},Object.defineProperties(d.link.decorations,{pointerCursor:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.pointerCursor},set:c=>{var h,x;!((h=this._currentLink)===null||h===void 0)&&h.state&&this._currentLink.state.decorations.pointerCursor!==c&&(this._currentLink.state.decorations.pointerCursor=c,this._currentLink.state.isHovered&&((x=this._element)===null||x===void 0||x.classList.toggle("xterm-cursor-pointer",c)))}},underline:{get:()=>{var c,h;return(h=(c=this._currentLink)===null||c===void 0?void 0:c.state)===null||h===void 0?void 0:h.decorations.underline},set:c=>{var h,x,_;!((h=this._currentLink)===null||h===void 0)&&h.state&&((_=(x=this._currentLink)===null||x===void 0?void 0:x.state)===null||_===void 0?void 0:_.decorations.underline)!==c&&(this._currentLink.state.decorations.underline=c,this._currentLink.state.isHovered&&this._fireUnderlineEvent(d.link,c))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange(c=>{if(!this._currentLink)return;const h=c.start===0?0:c.start+1+this._bufferService.buffer.ydisp,x=this._bufferService.buffer.ydisp+1+c.end;if(this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=x&&(this._clearCurrentLink(h,x),this._lastMouseEvent&&this._element)){const _=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);_&&this._askForLink(_,!1)}})))}_linkHover(d,u,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&d.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(c,u.text)}_fireUnderlineEvent(d,u){const c=d.range,h=this._bufferService.buffer.ydisp,x=this._createLinkUnderlineEvent(c.start.x-1,c.start.y-h-1,c.end.x,c.end.y-h-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(x)}_linkLeave(d,u,c){var h;!((h=this._currentLink)===null||h===void 0)&&h.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&d.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(c,u.text)}_linkAtPosition(d,u){const c=d.range.start.y*this._bufferService.cols+d.range.start.x,h=d.range.end.y*this._bufferService.cols+d.range.end.x,x=u.y*this._bufferService.cols+u.x;return c<=x&&x<=h}_positionFromMouseEvent(d,u,c){const h=c.getCoords(d,u,this._bufferService.cols,this._bufferService.rows);if(h)return{x:h[0],y:h[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(d,u,c,h,x){return{x1:d,y1:u,x2:c,y2:h,cols:this._bufferService.cols,fg:x}}};a.Linkifier2=y=m([p(0,w.IBufferService)],y)},9042:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.tooMuchOutput=a.promptLabel=void 0,a.promptLabel="Terminal input",a.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(f,a,o){var m=this&&this.__decorate||function(y,d,u,c){var h,x=arguments.length,_=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,u):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,d,u,c);else for(var k=y.length-1;k>=0;k--)(h=y[k])&&(_=(x<3?h(_):x>3?h(d,u,_):h(d,u))||_);return x>3&&_&&Object.defineProperty(d,u,_),_},p=this&&this.__param||function(y,d){return function(u,c){d(u,c,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkProvider=void 0;const g=o(511),v=o(2585);let S=a.OscLinkProvider=class{constructor(y,d,u){this._bufferService=y,this._optionsService=d,this._oscLinkService=u}provideLinks(y,d){var u;const c=this._bufferService.buffer.lines.get(y-1);if(!c)return void d(void 0);const h=[],x=this._optionsService.rawOptions.linkHandler,_=new g.CellData,k=c.getTrimmedLength();let j=-1,b=-1,C=!1;for(let M=0;M<k;M++)if(b!==-1||c.hasContent(M)){if(c.loadCell(M,_),_.hasExtendedAttrs()&&_.extended.urlId){if(b===-1){b=M,j=_.extended.urlId;continue}C=_.extended.urlId!==j}else b!==-1&&(C=!0);if(C||b!==-1&&M===k-1){const L=(u=this._oscLinkService.getLinkData(j))===null||u===void 0?void 0:u.uri;if(L){const P={start:{x:b+1,y},end:{x:M+(C||M!==k-1?0:1),y}};let D=!1;if(!(x!=null&&x.allowNonHttpProtocols))try{const W=new URL(L);["http:","https:"].includes(W.protocol)||(D=!0)}catch{D=!0}D||h.push({text:L,range:P,activate:(W,V)=>x?x.activate(W,V,P):w(0,V),hover:(W,V)=>{var Z;return(Z=x==null?void 0:x.hover)===null||Z===void 0?void 0:Z.call(x,W,V,P)},leave:(W,V)=>{var Z;return(Z=x==null?void 0:x.leave)===null||Z===void 0?void 0:Z.call(x,W,V,P)}})}C=!1,_.hasExtendedAttrs()&&_.extended.urlId?(b=M,j=_.extended.urlId):(b=-1,j=-1)}}d(h)}};function w(y,d){if(confirm(`Do you want to navigate to ${d}?

WARNING: This link could potentially be dangerous`)){const u=window.open();if(u){try{u.opener=null}catch{}u.location.href=d}else console.warn("Opening link blocked as opener could not be cleared")}}a.OscLinkProvider=S=m([p(0,v.IBufferService),p(1,v.IOptionsService),p(2,v.IOscLinkService)],S)},6193:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.RenderDebouncer=void 0,a.RenderDebouncer=class{constructor(o,m){this._parentWindow=o,this._renderCallback=m,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._parentWindow.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(o){return this._refreshCallbacks.push(o),this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh())),this._animationFrame}refresh(o,m,p){this._rowCount=p,o=o!==void 0?o:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m,this._animationFrame||(this._animationFrame=this._parentWindow.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const o=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,m),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const o of this._refreshCallbacks)o(0);this._refreshCallbacks=[]}}},5596:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ScreenDprMonitor=void 0;const m=o(844);class p extends m.Disposable{constructor(v){super(),this._parentWindow=v,this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this.register((0,m.toDisposable)(()=>{this.clearListener()}))}setListener(v){this._listener&&this.clearListener(),this._listener=v,this._outerListener=()=>{this._listener&&(this._listener(this._parentWindow.devicePixelRatio,this._currentDevicePixelRatio),this._updateDpr())},this._updateDpr()}_updateDpr(){var v;this._outerListener&&((v=this._resolutionMediaMatchList)===null||v===void 0||v.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)}}a.ScreenDprMonitor=p},3236:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Terminal=void 0;const m=o(3614),p=o(3656),g=o(6465),v=o(9042),S=o(3730),w=o(1680),y=o(3107),d=o(5744),u=o(2950),c=o(1296),h=o(428),x=o(4269),_=o(5114),k=o(8934),j=o(3230),b=o(9312),C=o(4725),M=o(6731),L=o(8055),P=o(8969),D=o(8460),W=o(844),V=o(6114),Z=o(8437),ee=o(2584),N=o(7399),A=o(5941),O=o(9074),B=o(2585),J=o(5435),H=o(4567),I=typeof window<"u"?window.document:null;class T extends P.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(E={}){super(E),this.browser=V,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new W.MutableDisposable),this._onCursorMove=this.register(new D.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new D.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new D.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new D.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new D.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new D.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new D.EventEmitter),this._onBlur=this.register(new D.EventEmitter),this._onA11yCharEmitter=this.register(new D.EventEmitter),this._onA11yTabEmitter=this.register(new D.EventEmitter),this._onWillOpen=this.register(new D.EventEmitter),this._setup(),this.linkifier2=this.register(this._instantiationService.createInstance(g.Linkifier2)),this.linkifier2.registerLinkProvider(this._instantiationService.createInstance(S.OscLinkProvider)),this._decorationService=this._instantiationService.createInstance(O.DecorationService),this._instantiationService.setService(B.IDecorationService,this._decorationService),this.register(this._inputHandler.onRequestBell(()=>this._onBell.fire())),this.register(this._inputHandler.onRequestRefreshRows((U,X)=>this.refresh(U,X))),this.register(this._inputHandler.onRequestSendFocus(()=>this._reportFocus())),this.register(this._inputHandler.onRequestReset(()=>this.reset())),this.register(this._inputHandler.onRequestWindowsOptionsReport(U=>this._reportWindowsOptions(U))),this.register(this._inputHandler.onColor(U=>this._handleColorEvent(U))),this.register((0,D.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,D.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,D.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize(U=>this._afterResize(U.cols,U.rows))),this.register((0,W.toDisposable)(()=>{var U,X;this._customKeyEventHandler=void 0,(X=(U=this.element)===null||U===void 0?void 0:U.parentNode)===null||X===void 0||X.removeChild(this.element)}))}_handleColorEvent(E){if(this._themeService)for(const U of E){let X,Y="";switch(U.index){case 256:X="foreground",Y="10";break;case 257:X="background",Y="11";break;case 258:X="cursor",Y="12";break;default:X="ansi",Y="4;"+U.index}switch(U.type){case 0:const se=L.color.toColorRGB(X==="ansi"?this._themeService.colors.ansi[U.index]:this._themeService.colors[X]);this.coreService.triggerDataEvent(`${ee.C0.ESC}]${Y};${(0,A.toRgbString)(se)}${ee.C1_ESCAPED.ST}`);break;case 1:if(X==="ansi")this._themeService.modifyColors(re=>re.ansi[U.index]=L.rgba.toColor(...U.color));else{const re=X;this._themeService.modifyColors($=>$[re]=L.rgba.toColor(...U.color))}break;case 2:this._themeService.restoreColor(U.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(E){E?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(E){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ee.C0.ESC+"[I"),this.updateCursorStyle(E),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){var E;return(E=this.textarea)===null||E===void 0?void 0:E.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(ee.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const E=this.buffer.ybase+this.buffer.y,U=this.buffer.lines.get(E);if(!U)return;const X=Math.min(this.buffer.x,this.cols-1),Y=this._renderService.dimensions.css.cell.height,se=U.getWidth(X),re=this._renderService.dimensions.css.cell.width*se,$=this.buffer.y*this._renderService.dimensions.css.cell.height,ae=X*this._renderService.dimensions.css.cell.width;this.textarea.style.left=ae+"px",this.textarea.style.top=$+"px",this.textarea.style.width=re+"px",this.textarea.style.height=Y+"px",this.textarea.style.lineHeight=Y+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,p.addDisposableDomListener)(this.element,"copy",U=>{this.hasSelection()&&(0,m.copyHandler)(U,this._selectionService)}));const E=U=>(0,m.handlePasteEvent)(U,this.textarea,this.coreService,this.optionsService);this.register((0,p.addDisposableDomListener)(this.textarea,"paste",E)),this.register((0,p.addDisposableDomListener)(this.element,"paste",E)),V.isFirefox?this.register((0,p.addDisposableDomListener)(this.element,"mousedown",U=>{U.button===2&&(0,m.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})):this.register((0,p.addDisposableDomListener)(this.element,"contextmenu",U=>{(0,m.rightClickHandler)(U,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)})),V.isLinux&&this.register((0,p.addDisposableDomListener)(this.element,"auxclick",U=>{U.button===1&&(0,m.moveTextAreaUnderMouseCursor)(U,this.textarea,this.screenElement)}))}_bindKeys(){this.register((0,p.addDisposableDomListener)(this.textarea,"keyup",E=>this._keyUp(E),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keydown",E=>this._keyDown(E),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"keypress",E=>this._keyPress(E),!0)),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionstart",()=>this._compositionHelper.compositionstart())),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionupdate",E=>this._compositionHelper.compositionupdate(E))),this.register((0,p.addDisposableDomListener)(this.textarea,"compositionend",()=>this._compositionHelper.compositionend())),this.register((0,p.addDisposableDomListener)(this.textarea,"input",E=>this._inputEvent(E),!0)),this.register(this.onRender(()=>this._compositionHelper.updateCompositionElements()))}open(E){var U;if(!E)throw new Error("Terminal requires a parent element.");E.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=E.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),E.appendChild(this.element);const X=I.createDocumentFragment();this._viewportElement=I.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),X.appendChild(this._viewportElement),this._viewportScrollArea=I.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=I.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=I.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),X.appendChild(this.screenElement),this.textarea=I.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",v.promptLabel),V.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this._instantiationService.createInstance(_.CoreBrowserService,this.textarea,(U=this._document.defaultView)!==null&&U!==void 0?U:window),this._instantiationService.setService(C.ICoreBrowserService,this._coreBrowserService),this.register((0,p.addDisposableDomListener)(this.textarea,"focus",Y=>this._handleTextAreaFocus(Y))),this.register((0,p.addDisposableDomListener)(this.textarea,"blur",()=>this._handleTextAreaBlur())),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(h.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(C.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(C.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(x.CharacterJoinerService),this._instantiationService.setService(C.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(j.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(C.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange(Y=>this._onRender.fire(Y))),this.onResize(Y=>this._renderService.resize(Y.cols,Y.rows)),this._compositionView=I.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(u.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(X);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this._mouseService=this._instantiationService.createInstance(k.MouseService),this._instantiationService.setService(C.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(w.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines(Y=>this.scrollLines(Y.amount,Y.suppressScrollEvent,1)),this.register(this._inputHandler.onRequestSyncScrollBar(()=>this.viewport.syncScrollArea())),this.register(this.viewport),this.register(this.onCursorMove(()=>{this._renderService.handleCursorMove(),this._syncTextArea()})),this.register(this.onResize(()=>this._renderService.handleResize(this.cols,this.rows))),this.register(this.onBlur(()=>this._renderService.handleBlur())),this.register(this.onFocus(()=>this._renderService.handleFocus())),this.register(this._renderService.onDimensionsChange(()=>this.viewport.syncScrollArea())),this._selectionService=this.register(this._instantiationService.createInstance(b.SelectionService,this.element,this.screenElement,this.linkifier2)),this._instantiationService.setService(C.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines(Y=>this.scrollLines(Y.amount,Y.suppressScrollEvent))),this.register(this._selectionService.onSelectionChange(()=>this._onSelectionChange.fire())),this.register(this._selectionService.onRequestRedraw(Y=>this._renderService.handleSelectionChanged(Y.start,Y.end,Y.columnSelectMode))),this.register(this._selectionService.onLinuxMouseSelection(Y=>{this.textarea.value=Y,this.textarea.focus(),this.textarea.select()})),this.register(this._onScroll.event(Y=>{this.viewport.syncScrollArea(),this._selectionService.refresh()})),this.register((0,p.addDisposableDomListener)(this._viewportElement,"scroll",()=>this._selectionService.refresh())),this.linkifier2.attachToDom(this.screenElement,this._mouseService,this._renderService),this.register(this._instantiationService.createInstance(y.BufferDecorationRenderer,this.screenElement)),this.register((0,p.addDisposableDomListener)(this.element,"mousedown",Y=>this._selectionService.handleMouseDown(Y))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(H.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",Y=>this._handleScreenReaderModeOptionChange(Y))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",Y=>{!this._overviewRulerRenderer&&Y&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(d.OverviewRulerRenderer,this._viewportElement,this.screenElement)))}),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(c.DomRenderer,this.element,this.screenElement,this._viewportElement,this.linkifier2)}bindMouse(){const E=this,U=this.element;function X(re){const $=E._mouseService.getMouseReportCoords(re,E.screenElement);if(!$)return!1;let ae,be;switch(re.overrideType||re.type){case"mousemove":be=32,re.buttons===void 0?(ae=3,re.button!==void 0&&(ae=re.button<3?re.button:3)):ae=1&re.buttons?0:4&re.buttons?1:2&re.buttons?2:3;break;case"mouseup":be=0,ae=re.button<3?re.button:3;break;case"mousedown":be=1,ae=re.button<3?re.button:3;break;case"wheel":if(E.viewport.getLinesScrolled(re)===0)return!1;be=re.deltaY<0?0:1,ae=4;break;default:return!1}return!(be===void 0||ae===void 0||ae>4)&&E.coreMouseService.triggerMouseEvent({col:$.col,row:$.row,x:$.x,y:$.y,button:ae,action:be,ctrl:re.ctrlKey,alt:re.altKey,shift:re.shiftKey})}const Y={mouseup:null,wheel:null,mousedrag:null,mousemove:null},se={mouseup:re=>(X(re),re.buttons||(this._document.removeEventListener("mouseup",Y.mouseup),Y.mousedrag&&this._document.removeEventListener("mousemove",Y.mousedrag)),this.cancel(re)),wheel:re=>(X(re),this.cancel(re,!0)),mousedrag:re=>{re.buttons&&X(re)},mousemove:re=>{re.buttons||X(re)}};this.register(this.coreMouseService.onProtocolChange(re=>{re?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(re)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&re?Y.mousemove||(U.addEventListener("mousemove",se.mousemove),Y.mousemove=se.mousemove):(U.removeEventListener("mousemove",Y.mousemove),Y.mousemove=null),16&re?Y.wheel||(U.addEventListener("wheel",se.wheel,{passive:!1}),Y.wheel=se.wheel):(U.removeEventListener("wheel",Y.wheel),Y.wheel=null),2&re?Y.mouseup||(U.addEventListener("mouseup",se.mouseup),Y.mouseup=se.mouseup):(this._document.removeEventListener("mouseup",Y.mouseup),U.removeEventListener("mouseup",Y.mouseup),Y.mouseup=null),4&re?Y.mousedrag||(Y.mousedrag=se.mousedrag):(this._document.removeEventListener("mousemove",Y.mousedrag),Y.mousedrag=null)})),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,p.addDisposableDomListener)(U,"mousedown",re=>{if(re.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(re))return X(re),Y.mouseup&&this._document.addEventListener("mouseup",Y.mouseup),Y.mousedrag&&this._document.addEventListener("mousemove",Y.mousedrag),this.cancel(re)})),this.register((0,p.addDisposableDomListener)(U,"wheel",re=>{if(!Y.wheel){if(!this.buffer.hasScrollback){const $=this.viewport.getLinesScrolled(re);if($===0)return;const ae=ee.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(re.deltaY<0?"A":"B");let be="";for(let je=0;je<Math.abs($);je++)be+=ae;return this.coreService.triggerDataEvent(be,!0),this.cancel(re,!0)}return this.viewport.handleWheel(re)?this.cancel(re):void 0}},{passive:!1})),this.register((0,p.addDisposableDomListener)(U,"touchstart",re=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(re),this.cancel(re)},{passive:!0})),this.register((0,p.addDisposableDomListener)(U,"touchmove",re=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(re)?void 0:this.cancel(re)},{passive:!1}))}refresh(E,U){var X;(X=this._renderService)===null||X===void 0||X.refreshRows(E,U)}updateCursorStyle(E){var U;!((U=this._selectionService)===null||U===void 0)&&U.shouldColumnSelect(E)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(E,U,X=0){var Y;X===1?(super.scrollLines(E,U,X),this.refresh(0,this.rows-1)):(Y=this.viewport)===null||Y===void 0||Y.scrollLines(E)}paste(E){(0,m.paste)(E,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(E){this._customKeyEventHandler=E}registerLinkProvider(E){return this.linkifier2.registerLinkProvider(E)}registerCharacterJoiner(E){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const U=this._characterJoinerService.register(E);return this.refresh(0,this.rows-1),U}deregisterCharacterJoiner(E){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(E)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(E){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+E)}registerDecoration(E){return this._decorationService.registerDecoration(E)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(E,U,X){this._selectionService.setSelection(E,U,X)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){var E;(E=this._selectionService)===null||E===void 0||E.clearSelection()}selectAll(){var E;(E=this._selectionService)===null||E===void 0||E.selectAll()}selectLines(E,U){var X;(X=this._selectionService)===null||X===void 0||X.selectLines(E,U)}_keyDown(E){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1)return!1;const U=this.browser.isMac&&this.options.macOptionIsMeta&&E.altKey;if(!U&&!this._compositionHelper.keydown(E))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;U||E.key!=="Dead"&&E.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const X=(0,N.evaluateKeyboardEvent)(E,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(E),X.type===3||X.type===2){const Y=this.rows-1;return this.scrollLines(X.type===2?-Y:Y),this.cancel(E,!0)}return X.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,E)||(X.cancel&&this.cancel(E,!0),!X.key||!!(E.key&&!E.ctrlKey&&!E.altKey&&!E.metaKey&&E.key.length===1&&E.key.charCodeAt(0)>=65&&E.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(X.key!==ee.C0.ETX&&X.key!==ee.C0.CR||(this.textarea.value=""),this._onKey.fire({key:X.key,domEvent:E}),this._showCursor(),this.coreService.triggerDataEvent(X.key,!0),!this.optionsService.rawOptions.screenReaderMode||E.altKey||E.ctrlKey?this.cancel(E,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(E,U){const X=E.isMac&&!this.options.macOptionIsMeta&&U.altKey&&!U.ctrlKey&&!U.metaKey||E.isWindows&&U.altKey&&U.ctrlKey&&!U.metaKey||E.isWindows&&U.getModifierState("AltGraph");return U.type==="keypress"?X:X&&(!U.keyCode||U.keyCode>47)}_keyUp(E){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1||(function(U){return U.keyCode===16||U.keyCode===17||U.keyCode===18}(E)||this.focus(),this.updateCursorStyle(E),this._keyPressHandled=!1)}_keyPress(E){let U;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(E)===!1)return!1;if(this.cancel(E),E.charCode)U=E.charCode;else if(E.which===null||E.which===void 0)U=E.keyCode;else{if(E.which===0||E.charCode===0)return!1;U=E.which}return!(!U||(E.altKey||E.ctrlKey||E.metaKey)&&!this._isThirdLevelShift(this.browser,E)||(U=String.fromCharCode(U),this._onKey.fire({key:U,domEvent:E}),this._showCursor(),this.coreService.triggerDataEvent(U,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(E){if(E.data&&E.inputType==="insertText"&&(!E.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const U=E.data;return this.coreService.triggerDataEvent(U,!0),this.cancel(E),!0}return!1}resize(E,U){E!==this.cols||U!==this.rows?super.resize(E,U):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(E,U){var X,Y;(X=this._charSizeService)===null||X===void 0||X.measure(),(Y=this.viewport)===null||Y===void 0||Y.syncScrollArea(!0)}clear(){var E;if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let U=1;U<this.rows;U++)this.buffer.lines.push(this.buffer.getBlankLine(Z.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),(E=this.viewport)===null||E===void 0||E.reset(),this.refresh(0,this.rows-1)}}reset(){var E,U;this.options.rows=this.rows,this.options.cols=this.cols;const X=this._customKeyEventHandler;this._setup(),super.reset(),(E=this._selectionService)===null||E===void 0||E.reset(),this._decorationService.reset(),(U=this.viewport)===null||U===void 0||U.reset(),this._customKeyEventHandler=X,this.refresh(0,this.rows-1)}clearTextureAtlas(){var E;(E=this._renderService)===null||E===void 0||E.clearTextureAtlas()}_reportFocus(){var E;!((E=this.element)===null||E===void 0)&&E.classList.contains("focus")?this.coreService.triggerDataEvent(ee.C0.ESC+"[I"):this.coreService.triggerDataEvent(ee.C0.ESC+"[O")}_reportWindowsOptions(E){if(this._renderService)switch(E){case J.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const U=this._renderService.dimensions.css.canvas.width.toFixed(0),X=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${ee.C0.ESC}[4;${X};${U}t`);break;case J.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const Y=this._renderService.dimensions.css.cell.width.toFixed(0),se=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${ee.C0.ESC}[6;${se};${Y}t`)}}cancel(E,U){if(this.options.cancelEvents||U)return E.preventDefault(),E.stopPropagation(),!1}}a.Terminal=T},9924:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TimeBasedDebouncer=void 0,a.TimeBasedDebouncer=class{constructor(o,m=1e3){this._renderCallback=o,this._debounceThresholdMS=m,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(o,m,p){this._rowCount=p,o=o!==void 0?o:0,m=m!==void 0?m:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,o):o,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,m):m;const g=Date.now();if(g-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=g,this._innerRefresh();else if(!this._additionalRefreshRequested){const v=g-this._lastRefreshMs,S=this._debounceThresholdMS-v;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout(()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0},S)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const o=Math.max(this._rowStart,0),m=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(o,m)}}},1680:function(f,a,o){var m=this&&this.__decorate||function(u,c,h,x){var _,k=arguments.length,j=k<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,h):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(u,c,h,x);else for(var b=u.length-1;b>=0;b--)(_=u[b])&&(j=(k<3?_(j):k>3?_(c,h,j):_(c,h))||j);return k>3&&j&&Object.defineProperty(c,h,j),j},p=this&&this.__param||function(u,c){return function(h,x){c(h,x,u)}};Object.defineProperty(a,"__esModule",{value:!0}),a.Viewport=void 0;const g=o(3656),v=o(4725),S=o(8460),w=o(844),y=o(2585);let d=a.Viewport=class extends w.Disposable{constructor(u,c,h,x,_,k,j,b){super(),this._viewportElement=u,this._scrollArea=c,this._bufferService=h,this._optionsService=x,this._charSizeService=_,this._renderService=k,this._coreBrowserService=j,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new S.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,g.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(C=>this._activeBuffer=C.activeBuffer)),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange(C=>this._renderDimensions=C)),this._handleThemeChange(b.colors),this.register(b.onChangeColors(C=>this._handleThemeChange(C))),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.syncScrollArea())),setTimeout(()=>this.syncScrollArea())}_handleThemeChange(u){this._viewportElement.style.backgroundColor=u.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame(()=>this.syncScrollArea())}_refresh(u){if(u)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._innerRefresh()))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderService.dimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const c=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.css.canvas.height);this._lastRecordedBufferHeight!==c&&(this._lastRecordedBufferHeight=c,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null}syncScrollArea(u=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(u);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(u)}_handleScroll(u){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const c=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:c,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const u=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(u*(this._smoothScrollState.target-this._smoothScrollState.origin)),u<1?this._coreBrowserService.window.requestAnimationFrame(()=>this._smoothScroll()):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(u,c){const h=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(c<0&&this._viewportElement.scrollTop!==0||c>0&&h<this._lastRecordedBufferHeight)||(u.cancelable&&u.preventDefault(),!1)}handleWheel(u){const c=this._getPixelsScrolled(u);return c!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+c:this._smoothScrollState.target+=c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=c,this._bubbleScroll(u,c))}scrollLines(u){if(u!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const c=u*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+c,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:u,suppressScrollEvent:!1})}_getPixelsScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let c=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_LINE?c*=this._currentRowHeight:u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._currentRowHeight*this._bufferService.rows),c}getBufferElements(u,c){var h;let x,_="";const k=[],j=c??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let C=u;C<j;C++){const M=b.get(C);if(!M)continue;const L=(h=b.get(C+1))===null||h===void 0?void 0:h.isWrapped;if(_+=M.translateToString(!L),!L||C===b.length-1){const P=document.createElement("div");P.textContent=_,k.push(P),_.length>0&&(x=P),_=""}}return{bufferElements:k,cursorElement:x}}getLinesScrolled(u){if(u.deltaY===0||u.shiftKey)return 0;let c=this._applyScrollModifier(u.deltaY,u);return u.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(c/=this._currentRowHeight+0,this._wheelPartialScroll+=c,c=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):u.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(c*=this._bufferService.rows),c}_applyScrollModifier(u,c){const h=this._optionsService.rawOptions.fastScrollModifier;return h==="alt"&&c.altKey||h==="ctrl"&&c.ctrlKey||h==="shift"&&c.shiftKey?u*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:u*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(u){this._lastTouchY=u.touches[0].pageY}handleTouchMove(u){const c=this._lastTouchY-u.touches[0].pageY;return this._lastTouchY=u.touches[0].pageY,c!==0&&(this._viewportElement.scrollTop+=c,this._bubbleScroll(u,c))}};a.Viewport=d=m([p(2,y.IBufferService),p(3,y.IOptionsService),p(4,v.ICharSizeService),p(5,v.IRenderService),p(6,v.ICoreBrowserService),p(7,v.IThemeService)],d)},3107:function(f,a,o){var m=this&&this.__decorate||function(d,u,c,h){var x,_=arguments.length,k=_<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,c,h);else for(var j=d.length-1;j>=0;j--)(x=d[j])&&(k=(_<3?x(k):_>3?x(u,c,k):x(u,c))||k);return _>3&&k&&Object.defineProperty(u,c,k),k},p=this&&this.__param||function(d,u){return function(c,h){u(c,h,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferDecorationRenderer=void 0;const g=o(3656),v=o(4725),S=o(844),w=o(2585);let y=a.BufferDecorationRenderer=class extends S.Disposable{constructor(d,u,c,h){super(),this._screenElement=d,this._bufferService=u,this._decorationService=c,this._renderService=h,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange(()=>this._doRefreshDecorations())),this.register(this._renderService.onDimensionsChange(()=>{this._dimensionsChanged=!0,this._queueRefresh()})),this.register((0,g.addDisposableDomListener)(window,"resize",()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt})),this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh())),this.register(this._decorationService.onDecorationRemoved(x=>this._removeDecoration(x))),this.register((0,S.toDisposable)(()=>{this._container.remove(),this._decorationElements.clear()}))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback(()=>{this._doRefreshDecorations(),this._animationFrame=void 0}))}_doRefreshDecorations(){for(const d of this._decorationService.decorations)this._renderDecoration(d);this._dimensionsChanged=!1}_renderDecoration(d){this._refreshStyle(d),this._dimensionsChanged&&this._refreshXPosition(d)}_createElement(d){var u,c;const h=document.createElement("div");h.classList.add("xterm-decoration"),h.classList.toggle("xterm-decoration-top-layer",((u=d==null?void 0:d.options)===null||u===void 0?void 0:u.layer)==="top"),h.style.width=`${Math.round((d.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,h.style.height=(d.options.height||1)*this._renderService.dimensions.css.cell.height+"px",h.style.top=(d.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",h.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const x=(c=d.options.x)!==null&&c!==void 0?c:0;return x&&x>this._bufferService.cols&&(h.style.display="none"),this._refreshXPosition(d,h),h}_refreshStyle(d){const u=d.marker.line-this._bufferService.buffers.active.ydisp;if(u<0||u>=this._bufferService.rows)d.element&&(d.element.style.display="none",d.onRenderEmitter.fire(d.element));else{let c=this._decorationElements.get(d);c||(c=this._createElement(d),d.element=c,this._decorationElements.set(d,c),this._container.appendChild(c),d.onDispose(()=>{this._decorationElements.delete(d),c.remove()})),c.style.top=u*this._renderService.dimensions.css.cell.height+"px",c.style.display=this._altBufferIsActive?"none":"block",d.onRenderEmitter.fire(c)}}_refreshXPosition(d,u=d.element){var c;if(!u)return;const h=(c=d.options.x)!==null&&c!==void 0?c:0;(d.options.anchor||"left")==="right"?u.style.right=h?h*this._renderService.dimensions.css.cell.width+"px":"":u.style.left=h?h*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(d){var u;(u=this._decorationElements.get(d))===null||u===void 0||u.remove(),this._decorationElements.delete(d),d.dispose()}};a.BufferDecorationRenderer=y=m([p(1,w.IBufferService),p(2,w.IDecorationService),p(3,v.IRenderService)],y)},5871:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ColorZoneStore=void 0,a.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(o){if(o.options.overviewRulerOptions){for(const m of this._zones)if(m.color===o.options.overviewRulerOptions.color&&m.position===o.options.overviewRulerOptions.position){if(this._lineIntersectsZone(m,o.marker.line))return;if(this._lineAdjacentToZone(m,o.marker.line,o.options.overviewRulerOptions.position))return void this._addLineToZone(m,o.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=o.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=o.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=o.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=o.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:o.options.overviewRulerOptions.color,position:o.options.overviewRulerOptions.position,startBufferLine:o.marker.line,endBufferLine:o.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(o){this._linePadding=o}_lineIntersectsZone(o,m){return m>=o.startBufferLine&&m<=o.endBufferLine}_lineAdjacentToZone(o,m,p){return m>=o.startBufferLine-this._linePadding[p||"full"]&&m<=o.endBufferLine+this._linePadding[p||"full"]}_addLineToZone(o,m){o.startBufferLine=Math.min(o.startBufferLine,m),o.endBufferLine=Math.max(o.endBufferLine,m)}}},5744:function(f,a,o){var m=this&&this.__decorate||function(x,_,k,j){var b,C=arguments.length,M=C<3?_:j===null?j=Object.getOwnPropertyDescriptor(_,k):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(x,_,k,j);else for(var L=x.length-1;L>=0;L--)(b=x[L])&&(M=(C<3?b(M):C>3?b(_,k,M):b(_,k))||M);return C>3&&M&&Object.defineProperty(_,k,M),M},p=this&&this.__param||function(x,_){return function(k,j){_(k,j,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OverviewRulerRenderer=void 0;const g=o(5871),v=o(3656),S=o(4725),w=o(844),y=o(2585),d={full:0,left:0,center:0,right:0},u={full:0,left:0,center:0,right:0},c={full:0,left:0,center:0,right:0};let h=a.OverviewRulerRenderer=class extends w.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(x,_,k,j,b,C,M){var L;super(),this._viewportElement=x,this._screenElement=_,this._bufferService=k,this._decorationService=j,this._renderService=b,this._optionsService=C,this._coreBrowseService=M,this._colorZoneStore=new g.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),(L=this._viewportElement.parentElement)===null||L===void 0||L.insertBefore(this._canvas,this._viewportElement);const P=this._canvas.getContext("2d");if(!P)throw new Error("Ctx cannot be null");this._ctx=P,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,w.toDisposable)(()=>{var D;(D=this._canvas)===null||D===void 0||D.remove()}))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered(()=>this._queueRefresh(void 0,!0))),this.register(this._decorationService.onDecorationRemoved(()=>this._queueRefresh(void 0,!0)))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange(()=>this._queueRefresh())),this.register(this._bufferService.buffers.onBufferActivate(()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"})),this.register(this._bufferService.onScroll(()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())}))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender(()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)})),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",()=>this._queueRefresh(!0))),this.register((0,v.addDisposableDomListener)(this._coreBrowseService.window,"resize",()=>this._queueRefresh(!0))),this._queueRefresh(!0)}_refreshDrawConstants(){const x=Math.floor(this._canvas.width/3),_=Math.ceil(this._canvas.width/3);u.full=this._canvas.width,u.left=x,u.center=_,u.right=x,this._refreshDrawHeightConstants(),c.full=0,c.left=0,c.center=u.left,c.right=u.left+u.center}_refreshDrawHeightConstants(){d.full=Math.round(2*this._coreBrowseService.dpr);const x=this._canvas.height/this._bufferService.buffer.lines.length,_=Math.round(Math.max(Math.min(x,12),6)*this._coreBrowseService.dpr);d.left=_,d.center=_,d.right=_}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*d.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowseService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowseService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const _ of this._decorationService.decorations)this._colorZoneStore.addDecoration(_);this._ctx.lineWidth=1;const x=this._colorZoneStore.zones;for(const _ of x)_.position!=="full"&&this._renderColorZone(_);for(const _ of x)_.position==="full"&&this._renderColorZone(_);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(x){this._ctx.fillStyle=x.color,this._ctx.fillRect(c[x.position||"full"],Math.round((this._canvas.height-1)*(x.startBufferLine/this._bufferService.buffers.active.lines.length)-d[x.position||"full"]/2),u[x.position||"full"],Math.round((this._canvas.height-1)*((x.endBufferLine-x.startBufferLine)/this._bufferService.buffers.active.lines.length)+d[x.position||"full"]))}_queueRefresh(x,_){this._shouldUpdateDimensions=x||this._shouldUpdateDimensions,this._shouldUpdateAnchor=_||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowseService.window.requestAnimationFrame(()=>{this._refreshDecorations(),this._animationFrame=void 0}))}};a.OverviewRulerRenderer=h=m([p(2,y.IBufferService),p(3,y.IDecorationService),p(4,S.IRenderService),p(5,y.IOptionsService),p(6,S.ICoreBrowserService)],h)},2950:function(f,a,o){var m=this&&this.__decorate||function(y,d,u,c){var h,x=arguments.length,_=x<3?d:c===null?c=Object.getOwnPropertyDescriptor(d,u):c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(y,d,u,c);else for(var k=y.length-1;k>=0;k--)(h=y[k])&&(_=(x<3?h(_):x>3?h(d,u,_):h(d,u))||_);return x>3&&_&&Object.defineProperty(d,u,_),_},p=this&&this.__param||function(y,d){return function(u,c){d(u,c,y)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CompositionHelper=void 0;const g=o(4725),v=o(2585),S=o(2584);let w=a.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(y,d,u,c,h,x){this._textarea=y,this._compositionView=d,this._bufferService=u,this._optionsService=c,this._coreService=h,this._renderService=x,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(y){this._compositionView.textContent=y.data,this.updateCompositionElements(),setTimeout(()=>{this._compositionPosition.end=this._textarea.value.length},0)}compositionend(){this._finalizeComposition(!0)}keydown(y){if(this._isComposing||this._isSendingComposition){if(y.keyCode===229||y.keyCode===16||y.keyCode===17||y.keyCode===18)return!1;this._finalizeComposition(!1)}return y.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(y){if(this._compositionView.classList.remove("active"),this._isComposing=!1,y){const d={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout(()=>{if(this._isSendingComposition){let u;this._isSendingComposition=!1,d.start+=this._dataAlreadySent.length,u=this._isComposing?this._textarea.value.substring(d.start,d.end):this._textarea.value.substring(d.start),u.length>0&&this._coreService.triggerDataEvent(u,!0)}},0)}else{this._isSendingComposition=!1;const d=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(d,!0)}}_handleAnyTextareaChanges(){const y=this._textarea.value;setTimeout(()=>{if(!this._isComposing){const d=this._textarea.value,u=d.replace(y,"");this._dataAlreadySent=u,d.length>y.length?this._coreService.triggerDataEvent(u,!0):d.length<y.length?this._coreService.triggerDataEvent(`${S.C0.DEL}`,!0):d.length===y.length&&d!==y&&this._coreService.triggerDataEvent(d,!0)}},0)}updateCompositionElements(y){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),u=this._renderService.dimensions.css.cell.height,c=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,h=d*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=h+"px",this._compositionView.style.top=c+"px",this._compositionView.style.height=u+"px",this._compositionView.style.lineHeight=u+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const x=this._compositionView.getBoundingClientRect();this._textarea.style.left=h+"px",this._textarea.style.top=c+"px",this._textarea.style.width=Math.max(x.width,1)+"px",this._textarea.style.height=Math.max(x.height,1)+"px",this._textarea.style.lineHeight=x.height+"px"}y||setTimeout(()=>this.updateCompositionElements(!0),0)}}};a.CompositionHelper=w=m([p(2,v.IBufferService),p(3,v.IOptionsService),p(4,v.ICoreService),p(5,g.IRenderService)],w)},9806:(f,a)=>{function o(m,p,g){const v=g.getBoundingClientRect(),S=m.getComputedStyle(g),w=parseInt(S.getPropertyValue("padding-left")),y=parseInt(S.getPropertyValue("padding-top"));return[p.clientX-v.left-w,p.clientY-v.top-y]}Object.defineProperty(a,"__esModule",{value:!0}),a.getCoords=a.getCoordsRelativeToElement=void 0,a.getCoordsRelativeToElement=o,a.getCoords=function(m,p,g,v,S,w,y,d,u){if(!w)return;const c=o(m,p,g);return c?(c[0]=Math.ceil((c[0]+(u?y/2:0))/y),c[1]=Math.ceil(c[1]/d),c[0]=Math.min(Math.max(c[0],1),v+(u?1:0)),c[1]=Math.min(Math.max(c[1],1),S),c):void 0}},9504:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.moveToCellSequence=void 0;const m=o(2584);function p(d,u,c,h){const x=d-g(d,c),_=u-g(u,c),k=Math.abs(x-_)-function(j,b,C){let M=0;const L=j-g(j,C),P=b-g(b,C);for(let D=0;D<Math.abs(L-P);D++){const W=v(j,b)==="A"?-1:1,V=C.buffer.lines.get(L+W*D);V!=null&&V.isWrapped&&M++}return M}(d,u,c);return y(k,w(v(d,u),h))}function g(d,u){let c=0,h=u.buffer.lines.get(d),x=h==null?void 0:h.isWrapped;for(;x&&d>=0&&d<u.rows;)c++,h=u.buffer.lines.get(--d),x=h==null?void 0:h.isWrapped;return c}function v(d,u){return d>u?"A":"B"}function S(d,u,c,h,x,_){let k=d,j=u,b="";for(;k!==c||j!==h;)k+=x?1:-1,x&&k>_.cols-1?(b+=_.buffer.translateBufferLineToString(j,!1,d,k),k=0,d=0,j++):!x&&k<0&&(b+=_.buffer.translateBufferLineToString(j,!1,0,d+1),k=_.cols-1,d=k,j--);return b+_.buffer.translateBufferLineToString(j,!1,d,k)}function w(d,u){const c=u?"O":"[";return m.C0.ESC+c+d}function y(d,u){d=Math.floor(d);let c="";for(let h=0;h<d;h++)c+=u;return c}a.moveToCellSequence=function(d,u,c,h){const x=c.buffer.x,_=c.buffer.y;if(!c.buffer.hasScrollback)return function(b,C,M,L,P,D){return p(C,L,P,D).length===0?"":y(S(b,C,b,C-g(C,P),!1,P).length,w("D",D))}(x,_,0,u,c,h)+p(_,u,c,h)+function(b,C,M,L,P,D){let W;W=p(C,L,P,D).length>0?L-g(L,P):C;const V=L,Z=function(ee,N,A,O,B,J){let H;return H=p(A,O,B,J).length>0?O-g(O,B):N,ee<A&&H<=O||ee>=A&&H<O?"C":"D"}(b,C,M,L,P,D);return y(S(b,W,M,V,Z==="C",P).length,w(Z,D))}(x,_,d,u,c,h);let k;if(_===u)return k=x>d?"D":"C",y(Math.abs(x-d),w(k,h));k=_>u?"D":"C";const j=Math.abs(_-u);return y(function(b,C){return C.cols-b}(_>u?d:x,c)+(j-1)*c.cols+1+((_>u?x:d)-1),w(k,h))}},1296:function(f,a,o){var m=this&&this.__decorate||function(P,D,W,V){var Z,ee=arguments.length,N=ee<3?D:V===null?V=Object.getOwnPropertyDescriptor(D,W):V;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")N=Reflect.decorate(P,D,W,V);else for(var A=P.length-1;A>=0;A--)(Z=P[A])&&(N=(ee<3?Z(N):ee>3?Z(D,W,N):Z(D,W))||N);return ee>3&&N&&Object.defineProperty(D,W,N),N},p=this&&this.__param||function(P,D){return function(W,V){D(W,V,P)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRenderer=void 0;const g=o(3787),v=o(2550),S=o(2223),w=o(6171),y=o(4725),d=o(8055),u=o(8460),c=o(844),h=o(2585),x="xterm-dom-renderer-owner-",_="xterm-rows",k="xterm-fg-",j="xterm-bg-",b="xterm-focus",C="xterm-selection";let M=1,L=a.DomRenderer=class extends c.Disposable{constructor(P,D,W,V,Z,ee,N,A,O,B){super(),this._element=P,this._screenElement=D,this._viewportElement=W,this._linkifier2=V,this._charSizeService=ee,this._optionsService=N,this._bufferService=A,this._coreBrowserService=O,this._themeService=B,this._terminalClass=M++,this._rowElements=[],this.onRequestRedraw=this.register(new u.EventEmitter).event,this._rowContainer=document.createElement("div"),this._rowContainer.classList.add(_),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=document.createElement("div"),this._selectionContainer.classList.add(C),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,w.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._themeService.onChangeColors(J=>this._injectCss(J))),this._injectCss(this._themeService.colors),this._rowFactory=Z.createInstance(g.DomRendererRowFactory,document),this._element.classList.add(x+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline(J=>this._handleLinkHover(J))),this.register(this._linkifier2.onHideLinkUnderline(J=>this._handleLinkLeave(J))),this.register((0,c.toDisposable)(()=>{this._element.classList.remove(x+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()})),this._widthCache=new v.WidthCache(document),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const P=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*P,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*P),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/P),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/P),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const W of this._rowElements)W.style.width=`${this.dimensions.css.canvas.width}px`,W.style.height=`${this.dimensions.css.cell.height}px`,W.style.lineHeight=`${this.dimensions.css.cell.height}px`,W.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const D=`${this._terminalSelector} .${_} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=D,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(P){this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let D=`${this._terminalSelector} .${_} { color: ${P.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;D+=`${this._terminalSelector} .${_} .xterm-dim { color: ${d.color.multiplyOpacity(P.foreground,.5).css};}`,D+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`,D+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  border-bottom-style: hidden; }}",D+="@keyframes blink_block_"+this._terminalClass+` { 0% {  background-color: ${P.cursor.css};  color: ${P.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${P.cursor.css}; }}`,D+=`${this._terminalSelector} .${_}.${b} .xterm-cursor.xterm-cursor-blink:not(.xterm-cursor-block) { animation: blink_box_shadow_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_}.${b} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: blink_block_`+this._terminalClass+` 1s step-end infinite;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-block { background-color: ${P.cursor.css}; color: ${P.cursorAccent.css};}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${P.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${P.cursor.css} inset;}${this._terminalSelector} .${_} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${P.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,D+=`${this._terminalSelector} .${C} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${C} div { position: absolute; background-color: ${P.selectionBackgroundOpaque.css};}${this._terminalSelector} .${C} div { position: absolute; background-color: ${P.selectionInactiveBackgroundOpaque.css};}`;for(const[W,V]of P.ansi.entries())D+=`${this._terminalSelector} .${k}${W} { color: ${V.css}; }${this._terminalSelector} .${k}${W}.xterm-dim { color: ${d.color.multiplyOpacity(V,.5).css}; }${this._terminalSelector} .${j}${W} { background-color: ${V.css}; }`;D+=`${this._terminalSelector} .${k}${S.INVERTED_DEFAULT_COLOR} { color: ${d.color.opaque(P.background).css}; }${this._terminalSelector} .${k}${S.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${d.color.multiplyOpacity(d.color.opaque(P.background),.5).css}; }${this._terminalSelector} .${j}${S.INVERTED_DEFAULT_COLOR} { background-color: ${P.foreground.css}; }`,this._themeStyleElement.textContent=D}_setDefaultSpacing(){const P=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${P}px`,this._rowFactory.defaultSpacing=P}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(P,D){for(let W=this._rowElements.length;W<=D;W++){const V=document.createElement("div");this._rowContainer.appendChild(V),this._rowElements.push(V)}for(;this._rowElements.length>D;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(P,D){this._refreshRowElements(P,D),this._updateDimensions()}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(b)}handleFocus(){this._rowContainer.classList.add(b),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(P,D,W){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(P,D,W),this.renderRows(0,this._bufferService.rows-1),!P||!D)return;const V=P[1]-this._bufferService.buffer.ydisp,Z=D[1]-this._bufferService.buffer.ydisp,ee=Math.max(V,0),N=Math.min(Z,this._bufferService.rows-1);if(ee>=this._bufferService.rows||N<0)return;const A=document.createDocumentFragment();if(W){const O=P[0]>D[0];A.appendChild(this._createSelectionElement(ee,O?D[0]:P[0],O?P[0]:D[0],N-ee+1))}else{const O=V===ee?P[0]:0,B=ee===Z?D[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(ee,O,B));const J=N-ee-1;if(A.appendChild(this._createSelectionElement(ee+1,0,this._bufferService.cols,J)),ee!==N){const H=Z===N?D[0]:this._bufferService.cols;A.appendChild(this._createSelectionElement(N,0,H))}}this._selectionContainer.appendChild(A)}_createSelectionElement(P,D,W,V=1){const Z=document.createElement("div");return Z.style.height=V*this.dimensions.css.cell.height+"px",Z.style.top=P*this.dimensions.css.cell.height+"px",Z.style.left=D*this.dimensions.css.cell.width+"px",Z.style.width=this.dimensions.css.cell.width*(W-D)+"px",Z}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const P of this._rowElements)P.replaceChildren()}renderRows(P,D){const W=this._bufferService.buffer,V=W.ybase+W.y,Z=Math.min(W.x,this._bufferService.cols-1),ee=this._optionsService.rawOptions.cursorBlink,N=this._optionsService.rawOptions.cursorStyle,A=this._optionsService.rawOptions.cursorInactiveStyle;for(let O=P;O<=D;O++){const B=O+W.ydisp,J=this._rowElements[O],H=W.lines.get(B);if(!J||!H)break;J.replaceChildren(...this._rowFactory.createRow(H,B,B===V,N,A,Z,ee,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${x}${this._terminalClass}`}_handleLinkHover(P){this._setCellUnderline(P.x1,P.x2,P.y1,P.y2,P.cols,!0)}_handleLinkLeave(P){this._setCellUnderline(P.x1,P.x2,P.y1,P.y2,P.cols,!1)}_setCellUnderline(P,D,W,V,Z,ee){W<0&&(P=0),V<0&&(D=0);const N=this._bufferService.rows-1;W=Math.max(Math.min(W,N),0),V=Math.max(Math.min(V,N),0),Z=Math.min(Z,this._bufferService.cols);const A=this._bufferService.buffer,O=A.ybase+A.y,B=Math.min(A.x,Z-1),J=this._optionsService.rawOptions.cursorBlink,H=this._optionsService.rawOptions.cursorStyle,I=this._optionsService.rawOptions.cursorInactiveStyle;for(let T=W;T<=V;++T){const z=T+A.ydisp,E=this._rowElements[T],U=A.lines.get(z);if(!E||!U)break;E.replaceChildren(...this._rowFactory.createRow(U,z,z===O,H,I,B,J,this.dimensions.css.cell.width,this._widthCache,ee?T===W?P:0:-1,ee?(T===V?D:Z)-1:-1))}}};a.DomRenderer=L=m([p(4,h.IInstantiationService),p(5,y.ICharSizeService),p(6,h.IOptionsService),p(7,h.IBufferService),p(8,y.ICoreBrowserService),p(9,y.IThemeService)],L)},3787:function(f,a,o){var m=this&&this.__decorate||function(k,j,b,C){var M,L=arguments.length,P=L<3?j:C===null?C=Object.getOwnPropertyDescriptor(j,b):C;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")P=Reflect.decorate(k,j,b,C);else for(var D=k.length-1;D>=0;D--)(M=k[D])&&(P=(L<3?M(P):L>3?M(j,b,P):M(j,b))||P);return L>3&&P&&Object.defineProperty(j,b,P),P},p=this&&this.__param||function(k,j){return function(b,C){j(b,C,k)}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomRendererRowFactory=void 0;const g=o(2223),v=o(643),S=o(511),w=o(2585),y=o(8055),d=o(4725),u=o(4269),c=o(6171),h=o(3734);let x=a.DomRendererRowFactory=class{constructor(k,j,b,C,M,L,P){this._document=k,this._characterJoinerService=j,this._optionsService=b,this._coreBrowserService=C,this._coreService=M,this._decorationService=L,this._themeService=P,this._workCell=new S.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(k,j,b){this._selectionStart=k,this._selectionEnd=j,this._columnSelectMode=b}createRow(k,j,b,C,M,L,P,D,W,V,Z){const ee=[],N=this._characterJoinerService.getJoinedCharacters(j),A=this._themeService.colors;let O,B=k.getNoBgTrimmedLength();b&&B<L+1&&(B=L+1);let J=0,H="",I=0,T=0,z=0,E=!1,U=0,X=!1,Y=0;const se=[],re=V!==-1&&Z!==-1;for(let $=0;$<B;$++){k.loadCell($,this._workCell);let ae=this._workCell.getWidth();if(ae===0)continue;let be=!1,je=$,oe=this._workCell;if(N.length>0&&$===N[0][0]){be=!0;const fe=N.shift();oe=new u.JoinedCellData(this._workCell,k.translateToString(!0,fe[0],fe[1]),fe[1]-fe[0]),je=fe[1]-1,ae=oe.getWidth()}const Ne=this._isCellInSelection($,j),ut=b&&$===L,Qe=re&&$>=V&&$<=Z;let it=!1;this._decorationService.forEachDecorationAtCell($,j,void 0,fe=>{it=!0});let Xe=oe.getChars()||v.WHITESPACE_CELL_CHAR;if(Xe===" "&&(oe.isUnderline()||oe.isOverline())&&(Xe=""),Y=ae*D-W.get(Xe,oe.isBold(),oe.isItalic()),O){if(J&&(Ne&&X||!Ne&&!X&&oe.bg===I)&&(Ne&&X&&A.selectionForeground||oe.fg===T)&&oe.extended.ext===z&&Qe===E&&Y===U&&!ut&&!be&&!it){H+=Xe,J++;continue}J&&(O.textContent=H),O=this._document.createElement("span"),J=0,H=""}else O=this._document.createElement("span");if(I=oe.bg,T=oe.fg,z=oe.extended.ext,E=Qe,U=Y,X=Ne,be&&L>=$&&L<=je&&(L=$),!this._coreService.isCursorHidden&&ut){if(se.push("xterm-cursor"),this._coreBrowserService.isFocused)P&&se.push("xterm-cursor-blink"),se.push(C==="bar"?"xterm-cursor-bar":C==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":se.push("xterm-cursor-outline");break;case"block":se.push("xterm-cursor-block");break;case"bar":se.push("xterm-cursor-bar");break;case"underline":se.push("xterm-cursor-underline")}}if(oe.isBold()&&se.push("xterm-bold"),oe.isItalic()&&se.push("xterm-italic"),oe.isDim()&&se.push("xterm-dim"),H=oe.isInvisible()?v.WHITESPACE_CELL_CHAR:oe.getChars()||v.WHITESPACE_CELL_CHAR,oe.isUnderline()&&(se.push(`xterm-underline-${oe.extended.underlineStyle}`),H===" "&&(H=""),!oe.isUnderlineColorDefault()))if(oe.isUnderlineColorRGB())O.style.textDecorationColor=`rgb(${h.AttributeData.toColorRGB(oe.getUnderlineColor()).join(",")})`;else{let fe=oe.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&oe.isBold()&&fe<8&&(fe+=8),O.style.textDecorationColor=A.ansi[fe].css}oe.isOverline()&&(se.push("xterm-overline"),H===" "&&(H="")),oe.isStrikethrough()&&se.push("xterm-strikethrough"),Qe&&(O.style.textDecoration="underline");let de=oe.getFgColor(),q=oe.getFgColorMode(),xe=oe.getBgColor(),Oe=oe.getBgColorMode();const ht=!!oe.isInverse();if(ht){const fe=de;de=xe,xe=fe;const F=q;q=Oe,Oe=F}let Ke,le,he,Ze=!1;switch(this._decorationService.forEachDecorationAtCell($,j,void 0,fe=>{fe.options.layer!=="top"&&Ze||(fe.backgroundColorRGB&&(Oe=50331648,xe=fe.backgroundColorRGB.rgba>>8&16777215,Ke=fe.backgroundColorRGB),fe.foregroundColorRGB&&(q=50331648,de=fe.foregroundColorRGB.rgba>>8&16777215,le=fe.foregroundColorRGB),Ze=fe.options.layer==="top")}),!Ze&&Ne&&(Ke=this._coreBrowserService.isFocused?A.selectionBackgroundOpaque:A.selectionInactiveBackgroundOpaque,xe=Ke.rgba>>8&16777215,Oe=50331648,Ze=!0,A.selectionForeground&&(q=50331648,de=A.selectionForeground.rgba>>8&16777215,le=A.selectionForeground)),Ze&&se.push("xterm-decoration-top"),Oe){case 16777216:case 33554432:he=A.ansi[xe],se.push(`xterm-bg-${xe}`);break;case 50331648:he=y.rgba.toColor(xe>>16,xe>>8&255,255&xe),this._addStyle(O,`background-color:#${_((xe>>>0).toString(16),"0",6)}`);break;default:ht?(he=A.foreground,se.push(`xterm-bg-${g.INVERTED_DEFAULT_COLOR}`)):he=A.background}switch(Ke||oe.isDim()&&(Ke=y.color.multiplyOpacity(he,.5)),q){case 16777216:case 33554432:oe.isBold()&&de<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(de+=8),this._applyMinimumContrast(O,he,A.ansi[de],oe,Ke,void 0)||se.push(`xterm-fg-${de}`);break;case 50331648:const fe=y.rgba.toColor(de>>16&255,de>>8&255,255&de);this._applyMinimumContrast(O,he,fe,oe,Ke,le)||this._addStyle(O,`color:#${_(de.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(O,he,A.foreground,oe,Ke,void 0)||ht&&se.push(`xterm-fg-${g.INVERTED_DEFAULT_COLOR}`)}se.length&&(O.className=se.join(" "),se.length=0),ut||be||it?O.textContent=H:J++,Y!==this.defaultSpacing&&(O.style.letterSpacing=`${Y}px`),ee.push(O),$=je}return O&&J&&(O.textContent=H),ee}_applyMinimumContrast(k,j,b,C,M,L){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,c.excludeFromContrastRatioDemands)(C.getCode()))return!1;const P=this._getContrastCache(C);let D;if(M||L||(D=P.getColor(j.rgba,b.rgba)),D===void 0){const W=this._optionsService.rawOptions.minimumContrastRatio/(C.isDim()?2:1);D=y.color.ensureContrastRatio(M||j,L||b,W),P.setColor((M||j).rgba,(L||b).rgba,D??null)}return!!D&&(this._addStyle(k,`color:${D.css}`),!0)}_getContrastCache(k){return k.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(k,j){k.setAttribute("style",`${k.getAttribute("style")||""}${j};`)}_isCellInSelection(k,j){const b=this._selectionStart,C=this._selectionEnd;return!(!b||!C)&&(this._columnSelectMode?b[0]<=C[0]?k>=b[0]&&j>=b[1]&&k<C[0]&&j<=C[1]:k<b[0]&&j>=b[1]&&k>=C[0]&&j<=C[1]:j>b[1]&&j<C[1]||b[1]===C[1]&&j===b[1]&&k>=b[0]&&k<C[0]||b[1]<C[1]&&j===C[1]&&k<C[0]||b[1]<C[1]&&j===b[1]&&k>=b[0])}};function _(k,j,b){for(;k.length<b;)k=j+k;return k}a.DomRendererRowFactory=x=m([p(1,d.ICharacterJoinerService),p(2,w.IOptionsService),p(3,d.ICoreBrowserService),p(4,w.ICoreService),p(5,w.IDecorationService),p(6,d.IThemeService)],x)},2550:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WidthCache=void 0,a.WidthCache=class{constructor(o){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=o.createElement("div"),this._container.style.position="absolute",this._container.style.top="-50000px",this._container.style.width="50000px",this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const m=o.createElement("span"),p=o.createElement("span");p.style.fontWeight="bold";const g=o.createElement("span");g.style.fontStyle="italic";const v=o.createElement("span");v.style.fontWeight="bold",v.style.fontStyle="italic",this._measureElements=[m,p,g,v],this._container.appendChild(m),this._container.appendChild(p),this._container.appendChild(g),this._container.appendChild(v),o.body.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(o,m,p,g){o===this._font&&m===this._fontSize&&p===this._weight&&g===this._weightBold||(this._font=o,this._fontSize=m,this._weight=p,this._weightBold=g,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${p}`,this._measureElements[1].style.fontWeight=`${g}`,this._measureElements[2].style.fontWeight=`${p}`,this._measureElements[3].style.fontWeight=`${g}`,this.clear())}get(o,m,p){let g=0;if(!m&&!p&&o.length===1&&(g=o.charCodeAt(0))<256)return this._flat[g]!==-9999?this._flat[g]:this._flat[g]=this._measure(o,0);let v=o;m&&(v+="B"),p&&(v+="I");let S=this._holey.get(v);if(S===void 0){let w=0;m&&(w|=1),p&&(w|=2),S=this._measure(o,w),this._holey.set(v,S)}return S}_measure(o,m){const p=this._measureElements[m];return p.textContent=o.repeat(32),p.offsetWidth/32}}},2223:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.TEXT_BASELINE=a.DIM_OPACITY=a.INVERTED_DEFAULT_COLOR=void 0;const m=o(6114);a.INVERTED_DEFAULT_COLOR=257,a.DIM_OPACITY=.5,a.TEXT_BASELINE=m.isFirefox||m.isLegacyEdge?"bottom":"ideographic"},6171:(f,a)=>{function o(m){return 57508<=m&&m<=57558}Object.defineProperty(a,"__esModule",{value:!0}),a.createRenderDimensions=a.excludeFromContrastRatioDemands=a.isRestrictedPowerlineGlyph=a.isPowerlineGlyph=a.throwIfFalsy=void 0,a.throwIfFalsy=function(m){if(!m)throw new Error("value must not be falsy");return m},a.isPowerlineGlyph=o,a.isRestrictedPowerlineGlyph=function(m){return 57520<=m&&m<=57527},a.excludeFromContrastRatioDemands=function(m){return o(m)||function(p){return 9472<=p&&p<=9631}(m)},a.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}}},456:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionModel=void 0,a.SelectionModel=class{constructor(o){this._bufferService=o,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?o%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)-1]:[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[o,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const o=this.selectionStart[0]+this.selectionStartLength;return o>this._bufferService.cols?[o%this._bufferService.cols,this.selectionStart[1]+Math.floor(o/this._bufferService.cols)]:[Math.max(o,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const o=this.selectionStart,m=this.selectionEnd;return!(!o||!m)&&(o[1]>m[1]||o[1]===m[1]&&o[0]>m[0])}handleTrim(o){return this.selectionStart&&(this.selectionStart[1]-=o),this.selectionEnd&&(this.selectionEnd[1]-=o),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(f,a,o){var m=this&&this.__decorate||function(d,u,c,h){var x,_=arguments.length,k=_<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,c,h);else for(var j=d.length-1;j>=0;j--)(x=d[j])&&(k=(_<3?x(k):_>3?x(u,c,k):x(u,c))||k);return _>3&&k&&Object.defineProperty(u,c,k),k},p=this&&this.__param||function(d,u){return function(c,h){u(c,h,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharSizeService=void 0;const g=o(2585),v=o(8460),S=o(844);let w=a.CharSizeService=class extends S.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(d,u,c){super(),this._optionsService=c,this.width=0,this.height=0,this._onCharSizeChange=this.register(new v.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event,this._measureStrategy=new y(d,u,this._optionsService),this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],()=>this.measure()))}measure(){const d=this._measureStrategy.measure();d.width===this.width&&d.height===this.height||(this.width=d.width,this.height=d.height,this._onCharSizeChange.fire())}};a.CharSizeService=w=m([p(2,g.IOptionsService)],w);class y{constructor(u,c,h){this._document=u,this._parentElement=c,this._optionsService=h,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`;const u={height:Number(this._measureElement.offsetHeight),width:Number(this._measureElement.offsetWidth)};return u.width!==0&&u.height!==0&&(this._result.width=u.width/32,this._result.height=Math.ceil(u.height)),this._result}}},4269:function(f,a,o){var m=this&&this.__decorate||function(u,c,h,x){var _,k=arguments.length,j=k<3?c:x===null?x=Object.getOwnPropertyDescriptor(c,h):x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")j=Reflect.decorate(u,c,h,x);else for(var b=u.length-1;b>=0;b--)(_=u[b])&&(j=(k<3?_(j):k>3?_(c,h,j):_(c,h))||j);return k>3&&j&&Object.defineProperty(c,h,j),j},p=this&&this.__param||function(u,c){return function(h,x){c(h,x,u)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CharacterJoinerService=a.JoinedCellData=void 0;const g=o(3734),v=o(643),S=o(511),w=o(2585);class y extends g.AttributeData{constructor(c,h,x){super(),this.content=0,this.combinedData="",this.fg=c.fg,this.bg=c.bg,this.combinedData=h,this._width=x}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(c){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.JoinedCellData=y;let d=a.CharacterJoinerService=class Mm{constructor(c){this._bufferService=c,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new S.CellData}register(c){const h={id:this._nextCharacterJoinerId++,handler:c};return this._characterJoiners.push(h),h.id}deregister(c){for(let h=0;h<this._characterJoiners.length;h++)if(this._characterJoiners[h].id===c)return this._characterJoiners.splice(h,1),!0;return!1}getJoinedCharacters(c){if(this._characterJoiners.length===0)return[];const h=this._bufferService.buffer.lines.get(c);if(!h||h.length===0)return[];const x=[],_=h.translateToString(!0);let k=0,j=0,b=0,C=h.getFg(0),M=h.getBg(0);for(let L=0;L<h.getTrimmedLength();L++)if(h.loadCell(L,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==C||this._workCell.bg!==M){if(L-k>1){const P=this._getJoinedRanges(_,b,j,h,k);for(let D=0;D<P.length;D++)x.push(P[D])}k=L,b=j,C=this._workCell.fg,M=this._workCell.bg}j+=this._workCell.getChars().length||v.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-k>1){const L=this._getJoinedRanges(_,b,j,h,k);for(let P=0;P<L.length;P++)x.push(L[P])}return x}_getJoinedRanges(c,h,x,_,k){const j=c.substring(h,x);let b=[];try{b=this._characterJoiners[0].handler(j)}catch(C){console.error(C)}for(let C=1;C<this._characterJoiners.length;C++)try{const M=this._characterJoiners[C].handler(j);for(let L=0;L<M.length;L++)Mm._mergeRanges(b,M[L])}catch(M){console.error(M)}return this._stringRangesToCellRanges(b,_,k),b}_stringRangesToCellRanges(c,h,x){let _=0,k=!1,j=0,b=c[_];if(b){for(let C=x;C<this._bufferService.cols;C++){const M=h.getWidth(C),L=h.getString(C).length||v.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!k&&b[0]<=j&&(b[0]=C,k=!0),b[1]<=j){if(b[1]=C,b=c[++_],!b)break;b[0]<=j?(b[0]=C,k=!0):k=!1}j+=L}}b&&(b[1]=this._bufferService.cols)}}static _mergeRanges(c,h){let x=!1;for(let _=0;_<c.length;_++){const k=c[_];if(x){if(h[1]<=k[0])return c[_-1][1]=h[1],c;if(h[1]<=k[1])return c[_-1][1]=Math.max(h[1],k[1]),c.splice(_,1),c;c.splice(_,1),_--}else{if(h[1]<=k[0])return c.splice(_,0,h),c;if(h[1]<=k[1])return k[0]=Math.min(h[0],k[0]),c;h[0]<k[1]&&(k[0]=Math.min(h[0],k[0]),x=!0)}}return x?c[c.length-1][1]=h[1]:c.push(h),c}};a.CharacterJoinerService=d=m([p(0,w.IBufferService)],d)},5114:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreBrowserService=void 0,a.CoreBrowserService=class{constructor(o,m){this._textarea=o,this.window=m,this._isFocused=!1,this._cachedIsFocused=void 0,this._textarea.addEventListener("focus",()=>this._isFocused=!0),this._textarea.addEventListener("blur",()=>this._isFocused=!1)}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask(()=>this._cachedIsFocused=void 0)),this._cachedIsFocused}}},8934:function(f,a,o){var m=this&&this.__decorate||function(w,y,d,u){var c,h=arguments.length,x=h<3?y:u===null?u=Object.getOwnPropertyDescriptor(y,d):u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")x=Reflect.decorate(w,y,d,u);else for(var _=w.length-1;_>=0;_--)(c=w[_])&&(x=(h<3?c(x):h>3?c(y,d,x):c(y,d))||x);return h>3&&x&&Object.defineProperty(y,d,x),x},p=this&&this.__param||function(w,y){return function(d,u){y(d,u,w)}};Object.defineProperty(a,"__esModule",{value:!0}),a.MouseService=void 0;const g=o(4725),v=o(9806);let S=a.MouseService=class{constructor(w,y){this._renderService=w,this._charSizeService=y}getCoords(w,y,d,u,c){return(0,v.getCoords)(window,w,y,d,u,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,c)}getMouseReportCoords(w,y){const d=(0,v.getCoordsRelativeToElement)(window,w,y);if(this._charSizeService.hasValidSize)return d[0]=Math.min(Math.max(d[0],0),this._renderService.dimensions.css.canvas.width-1),d[1]=Math.min(Math.max(d[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(d[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(d[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(d[0]),y:Math.floor(d[1])}}};a.MouseService=S=m([p(0,g.IRenderService),p(1,g.ICharSizeService)],S)},3230:function(f,a,o){var m=this&&this.__decorate||function(x,_,k,j){var b,C=arguments.length,M=C<3?_:j===null?j=Object.getOwnPropertyDescriptor(_,k):j;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")M=Reflect.decorate(x,_,k,j);else for(var L=x.length-1;L>=0;L--)(b=x[L])&&(M=(C<3?b(M):C>3?b(_,k,M):b(_,k))||M);return C>3&&M&&Object.defineProperty(_,k,M),M},p=this&&this.__param||function(x,_){return function(k,j){_(k,j,x)}};Object.defineProperty(a,"__esModule",{value:!0}),a.RenderService=void 0;const g=o(3656),v=o(6193),S=o(5596),w=o(4725),y=o(8460),d=o(844),u=o(7226),c=o(2585);let h=a.RenderService=class extends d.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(x,_,k,j,b,C,M,L){if(super(),this._rowCount=x,this._charSizeService=j,this._renderer=this.register(new d.MutableDisposable),this._pausedResizeTask=new u.DebouncedIdleTask,this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new y.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new y.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new y.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new y.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new v.RenderDebouncer(M.window,(P,D)=>this._renderRows(P,D)),this.register(this._renderDebouncer),this._screenDprMonitor=new S.ScreenDprMonitor(M.window),this._screenDprMonitor.setListener(()=>this.handleDevicePixelRatioChange()),this.register(this._screenDprMonitor),this.register(C.onResize(()=>this._fullRefresh())),this.register(C.buffers.onBufferActivate(()=>{var P;return(P=this._renderer.value)===null||P===void 0?void 0:P.clear()})),this.register(k.onOptionChange(()=>this._handleOptionsChanged())),this.register(this._charSizeService.onCharSizeChange(()=>this.handleCharSizeChanged())),this.register(b.onDecorationRegistered(()=>this._fullRefresh())),this.register(b.onDecorationRemoved(()=>this._fullRefresh())),this.register(k.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio"],()=>{this.clear(),this.handleResize(C.cols,C.rows),this._fullRefresh()})),this.register(k.onMultipleOptionChange(["cursorBlink","cursorStyle"],()=>this.refreshRows(C.buffer.y,C.buffer.y,!0))),this.register((0,g.addDisposableDomListener)(M.window,"resize",()=>this.handleDevicePixelRatioChange())),this.register(L.onChangeColors(()=>this._fullRefresh())),"IntersectionObserver"in M.window){const P=new M.window.IntersectionObserver(D=>this._handleIntersectionChange(D[D.length-1]),{threshold:0});P.observe(_),this.register({dispose:()=>P.disconnect()})}}_handleIntersectionChange(x){this._isPaused=x.isIntersecting===void 0?x.intersectionRatio===0:!x.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(x,_,k=!1){this._isPaused?this._needsFullRefresh=!0:(k||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(x,_,this._rowCount))}_renderRows(x,_){this._renderer.value&&(x=Math.min(x,this._rowCount-1),_=Math.min(_,this._rowCount-1),this._renderer.value.renderRows(x,_),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:x,end:_}),this._onRender.fire({start:x,end:_}),this._isNextRenderRedrawOnly=!0)}resize(x,_){this._rowCount=_,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(x){this._renderer.value=x,this._renderer.value.onRequestRedraw(_=>this.refreshRows(_.start,_.end,!0)),this._needsSelectionRefresh=!0,this._fullRefresh()}addRefreshCallback(x){return this._renderDebouncer.addRefreshCallback(x)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){var x,_;this._renderer.value&&((_=(x=this._renderer.value).clearTextureAtlas)===null||_===void 0||_.call(x),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(x,_){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set(()=>this._renderer.value.handleResize(x,_)):this._renderer.value.handleResize(x,_),this._fullRefresh())}handleCharSizeChanged(){var x;(x=this._renderer.value)===null||x===void 0||x.handleCharSizeChanged()}handleBlur(){var x;(x=this._renderer.value)===null||x===void 0||x.handleBlur()}handleFocus(){var x;(x=this._renderer.value)===null||x===void 0||x.handleFocus()}handleSelectionChanged(x,_,k){var j;this._selectionState.start=x,this._selectionState.end=_,this._selectionState.columnSelectMode=k,(j=this._renderer.value)===null||j===void 0||j.handleSelectionChanged(x,_,k)}handleCursorMove(){var x;(x=this._renderer.value)===null||x===void 0||x.handleCursorMove()}clear(){var x;(x=this._renderer.value)===null||x===void 0||x.clear()}};a.RenderService=h=m([p(2,c.IOptionsService),p(3,w.ICharSizeService),p(4,c.IDecorationService),p(5,c.IBufferService),p(6,w.ICoreBrowserService),p(7,w.IThemeService)],h)},9312:function(f,a,o){var m=this&&this.__decorate||function(b,C,M,L){var P,D=arguments.length,W=D<3?C:L===null?L=Object.getOwnPropertyDescriptor(C,M):L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")W=Reflect.decorate(b,C,M,L);else for(var V=b.length-1;V>=0;V--)(P=b[V])&&(W=(D<3?P(W):D>3?P(C,M,W):P(C,M))||W);return D>3&&W&&Object.defineProperty(C,M,W),W},p=this&&this.__param||function(b,C){return function(M,L){C(M,L,b)}};Object.defineProperty(a,"__esModule",{value:!0}),a.SelectionService=void 0;const g=o(9806),v=o(9504),S=o(456),w=o(4725),y=o(8460),d=o(844),u=o(6114),c=o(4841),h=o(511),x=o(2585),_="",k=new RegExp(_,"g");let j=a.SelectionService=class extends d.Disposable{constructor(b,C,M,L,P,D,W,V,Z){super(),this._element=b,this._screenElement=C,this._linkifier=M,this._bufferService=L,this._coreService=P,this._mouseService=D,this._optionsService=W,this._renderService=V,this._coreBrowserService=Z,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new h.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new y.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new y.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new y.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new y.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=ee=>this._handleMouseMove(ee),this._mouseUpListener=ee=>this._handleMouseUp(ee),this._coreService.onUserInput(()=>{this.hasSelection&&this.clearSelection()}),this._trimListener=this._bufferService.buffer.lines.onTrim(ee=>this._handleTrim(ee)),this.register(this._bufferService.buffers.onBufferActivate(ee=>this._handleBufferActivate(ee))),this.enable(),this._model=new S.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,d.toDisposable)(()=>{this._removeMouseDownListeners()}))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const b=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;return!(!b||!C||b[0]===C[0]&&b[1]===C[1])}get selectionText(){const b=this._model.finalSelectionStart,C=this._model.finalSelectionEnd;if(!b||!C)return"";const M=this._bufferService.buffer,L=[];if(this._activeSelectionMode===3){if(b[0]===C[0])return"";const P=b[0]<C[0]?b[0]:C[0],D=b[0]<C[0]?C[0]:b[0];for(let W=b[1];W<=C[1];W++){const V=M.translateBufferLineToString(W,!0,P,D);L.push(V)}}else{const P=b[1]===C[1]?C[0]:void 0;L.push(M.translateBufferLineToString(b[1],!0,b[0],P));for(let D=b[1]+1;D<=C[1]-1;D++){const W=M.lines.get(D),V=M.translateBufferLineToString(D,!0);W!=null&&W.isWrapped?L[L.length-1]+=V:L.push(V)}if(b[1]!==C[1]){const D=M.lines.get(C[1]),W=M.translateBufferLineToString(C[1],!0,0,C[0]);D&&D.isWrapped?L[L.length-1]+=W:L.push(W)}}return L.map(P=>P.replace(k," ")).join(u.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(b){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame(()=>this._refresh())),u.isLinux&&b&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(b){const C=this._getMouseBufferCoords(b),M=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!!(M&&L&&C)&&this._areCoordsInSelection(C,M,L)}isCellInSelection(b,C){const M=this._model.finalSelectionStart,L=this._model.finalSelectionEnd;return!(!M||!L)&&this._areCoordsInSelection([b,C],M,L)}_areCoordsInSelection(b,C,M){return b[1]>C[1]&&b[1]<M[1]||C[1]===M[1]&&b[1]===C[1]&&b[0]>=C[0]&&b[0]<M[0]||C[1]<M[1]&&b[1]===M[1]&&b[0]<M[0]||C[1]<M[1]&&b[1]===C[1]&&b[0]>=C[0]}_selectWordAtCursor(b,C){var M,L;const P=(L=(M=this._linkifier.currentLink)===null||M===void 0?void 0:M.link)===null||L===void 0?void 0:L.range;if(P)return this._model.selectionStart=[P.start.x-1,P.start.y-1],this._model.selectionStartLength=(0,c.getRangeLength)(P,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const D=this._getMouseBufferCoords(b);return!!D&&(this._selectWordAt(D,C),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(b,C){this._model.clearSelection(),b=Math.max(b,0),C=Math.min(C,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,b],this._model.selectionEnd=[this._bufferService.cols,C],this.refresh(),this._onSelectionChange.fire()}_handleTrim(b){this._model.handleTrim(b)&&this.refresh()}_getMouseBufferCoords(b){const C=this._mouseService.getCoords(b,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(C)return C[0]--,C[1]--,C[1]+=this._bufferService.buffer.ydisp,C}_getMouseEventScrollAmount(b){let C=(0,g.getCoordsRelativeToElement)(this._coreBrowserService.window,b,this._screenElement)[1];const M=this._renderService.dimensions.css.canvas.height;return C>=0&&C<=M?0:(C>M&&(C-=M),C=Math.min(Math.max(C,-50),50),C/=50,C/Math.abs(C)+Math.round(14*C))}shouldForceSelection(b){return u.isMac?b.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:b.shiftKey}handleMouseDown(b){if(this._mouseDownTimeStamp=b.timeStamp,(b.button!==2||!this.hasSelection)&&b.button===0){if(!this._enabled){if(!this.shouldForceSelection(b))return;b.stopPropagation()}b.preventDefault(),this._dragScrollAmount=0,this._enabled&&b.shiftKey?this._handleIncrementalClick(b):b.detail===1?this._handleSingleClick(b):b.detail===2?this._handleDoubleClick(b):b.detail===3&&this._handleTripleClick(b),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval(()=>this._dragScroll(),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(b){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(b))}_handleSingleClick(b){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(b)?3:0,this._model.selectionStart=this._getMouseBufferCoords(b),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const C=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);C&&C.length!==this._model.selectionStart[0]&&C.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(b){this._selectWordAtCursor(b,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(b){const C=this._getMouseBufferCoords(b);C&&(this._activeSelectionMode=2,this._selectLineAt(C[1]))}shouldColumnSelect(b){return b.altKey&&!(u.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(b){if(b.stopImmediatePropagation(),!this._model.selectionStart)return;const C=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(b),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(b),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){const L=M.lines.get(this._model.selectionEnd[1]);L&&L.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]++}C&&C[0]===this._model.selectionEnd[0]&&C[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const b=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(b.ydisp+this._bufferService.rows,b.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=b.ydisp),this.refresh()}}_handleMouseUp(b){const C=b.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&C<500&&b.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const M=this._mouseService.getCoords(b,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){const L=(0,v.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(L,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const b=this._model.finalSelectionStart,C=this._model.finalSelectionEnd,M=!(!b||!C||b[0]===C[0]&&b[1]===C[1]);M?b&&C&&(this._oldSelectionStart&&this._oldSelectionEnd&&b[0]===this._oldSelectionStart[0]&&b[1]===this._oldSelectionStart[1]&&C[0]===this._oldSelectionEnd[0]&&C[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(b,C,M)):this._oldHasSelection&&this._fireOnSelectionChange(b,C,M)}_fireOnSelectionChange(b,C,M){this._oldSelectionStart=b,this._oldSelectionEnd=C,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(b){this.clearSelection(),this._trimListener.dispose(),this._trimListener=b.activeBuffer.lines.onTrim(C=>this._handleTrim(C))}_convertViewportColToCharacterIndex(b,C){let M=C;for(let L=0;C>=L;L++){const P=b.loadCell(L,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:P>1&&C!==L&&(M+=P-1)}return M}setSelection(b,C,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[b,C],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(b){this._isClickInSelection(b)||(this._selectWordAtCursor(b,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(b,C,M=!0,L=!0){if(b[0]>=this._bufferService.cols)return;const P=this._bufferService.buffer,D=P.lines.get(b[1]);if(!D)return;const W=P.translateBufferLineToString(b[1],!1);let V=this._convertViewportColToCharacterIndex(D,b[0]),Z=V;const ee=b[0]-V;let N=0,A=0,O=0,B=0;if(W.charAt(V)===" "){for(;V>0&&W.charAt(V-1)===" ";)V--;for(;Z<W.length&&W.charAt(Z+1)===" ";)Z++}else{let I=b[0],T=b[0];D.getWidth(I)===0&&(N++,I--),D.getWidth(T)===2&&(A++,T++);const z=D.getString(T).length;for(z>1&&(B+=z-1,Z+=z-1);I>0&&V>0&&!this._isCharWordSeparator(D.loadCell(I-1,this._workCell));){D.loadCell(I-1,this._workCell);const E=this._workCell.getChars().length;this._workCell.getWidth()===0?(N++,I--):E>1&&(O+=E-1,V-=E-1),V--,I--}for(;T<D.length&&Z+1<W.length&&!this._isCharWordSeparator(D.loadCell(T+1,this._workCell));){D.loadCell(T+1,this._workCell);const E=this._workCell.getChars().length;this._workCell.getWidth()===2?(A++,T++):E>1&&(B+=E-1,Z+=E-1),Z++,T++}}Z++;let J=V+ee-N+O,H=Math.min(this._bufferService.cols,Z-V+N+A-O-B);if(C||W.slice(V,Z).trim()!==""){if(M&&J===0&&D.getCodePoint(0)!==32){const I=P.lines.get(b[1]-1);if(I&&D.isWrapped&&I.getCodePoint(this._bufferService.cols-1)!==32){const T=this._getWordAt([this._bufferService.cols-1,b[1]-1],!1,!0,!1);if(T){const z=this._bufferService.cols-T.start;J-=z,H+=z}}}if(L&&J+H===this._bufferService.cols&&D.getCodePoint(this._bufferService.cols-1)!==32){const I=P.lines.get(b[1]+1);if(I!=null&&I.isWrapped&&I.getCodePoint(0)!==32){const T=this._getWordAt([0,b[1]+1],!1,!1,!0);T&&(H+=T.length)}}return{start:J,length:H}}}_selectWordAt(b,C){const M=this._getWordAt(b,C);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,b[1]--;this._model.selectionStart=[M.start,b[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(b){const C=this._getWordAt(b,!0);if(C){let M=b[1];for(;C.start<0;)C.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;C.start+C.length>this._bufferService.cols;)C.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?C.start:C.start+C.length,M]}}_isCharWordSeparator(b){return b.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(b.getChars())>=0}_selectLineAt(b){const C=this._bufferService.buffer.getWrappedRangeForLine(b),M={start:{x:0,y:C.first},end:{x:this._bufferService.cols-1,y:C.last}};this._model.selectionStart=[0,C.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,c.getRangeLength)(M,this._bufferService.cols)}};a.SelectionService=j=m([p(3,x.IBufferService),p(4,x.ICoreService),p(5,w.IMouseService),p(6,x.IOptionsService),p(7,w.IRenderService),p(8,w.ICoreBrowserService)],j)},4725:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IThemeService=a.ICharacterJoinerService=a.ISelectionService=a.IRenderService=a.IMouseService=a.ICoreBrowserService=a.ICharSizeService=void 0;const m=o(8343);a.ICharSizeService=(0,m.createDecorator)("CharSizeService"),a.ICoreBrowserService=(0,m.createDecorator)("CoreBrowserService"),a.IMouseService=(0,m.createDecorator)("MouseService"),a.IRenderService=(0,m.createDecorator)("RenderService"),a.ISelectionService=(0,m.createDecorator)("SelectionService"),a.ICharacterJoinerService=(0,m.createDecorator)("CharacterJoinerService"),a.IThemeService=(0,m.createDecorator)("ThemeService")},6731:function(f,a,o){var m=this&&this.__decorate||function(j,b,C,M){var L,P=arguments.length,D=P<3?b:M===null?M=Object.getOwnPropertyDescriptor(b,C):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")D=Reflect.decorate(j,b,C,M);else for(var W=j.length-1;W>=0;W--)(L=j[W])&&(D=(P<3?L(D):P>3?L(b,C,D):L(b,C))||D);return P>3&&D&&Object.defineProperty(b,C,D),D},p=this&&this.__param||function(j,b){return function(C,M){b(C,M,j)}};Object.defineProperty(a,"__esModule",{value:!0}),a.ThemeService=a.DEFAULT_ANSI_COLORS=void 0;const g=o(7239),v=o(8055),S=o(8460),w=o(844),y=o(2585),d=v.css.toColor("#ffffff"),u=v.css.toColor("#000000"),c=v.css.toColor("#ffffff"),h=v.css.toColor("#000000"),x={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};a.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const j=[v.css.toColor("#2e3436"),v.css.toColor("#cc0000"),v.css.toColor("#4e9a06"),v.css.toColor("#c4a000"),v.css.toColor("#3465a4"),v.css.toColor("#75507b"),v.css.toColor("#06989a"),v.css.toColor("#d3d7cf"),v.css.toColor("#555753"),v.css.toColor("#ef2929"),v.css.toColor("#8ae234"),v.css.toColor("#fce94f"),v.css.toColor("#729fcf"),v.css.toColor("#ad7fa8"),v.css.toColor("#34e2e2"),v.css.toColor("#eeeeec")],b=[0,95,135,175,215,255];for(let C=0;C<216;C++){const M=b[C/36%6|0],L=b[C/6%6|0],P=b[C%6];j.push({css:v.channels.toCss(M,L,P),rgba:v.channels.toRgba(M,L,P)})}for(let C=0;C<24;C++){const M=8+10*C;j.push({css:v.channels.toCss(M,M,M),rgba:v.channels.toRgba(M,M,M)})}return j})());let _=a.ThemeService=class extends w.Disposable{get colors(){return this._colors}constructor(j){super(),this._optionsService=j,this._contrastCache=new g.ColorContrastCache,this._halfContrastCache=new g.ColorContrastCache,this._onChangeColors=this.register(new S.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:d,background:u,cursor:c,cursorAccent:h,selectionForeground:void 0,selectionBackgroundTransparent:x,selectionBackgroundOpaque:v.color.blend(u,x),selectionInactiveBackgroundTransparent:x,selectionInactiveBackgroundOpaque:v.color.blend(u,x),ansi:a.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",()=>this._contrastCache.clear())),this.register(this._optionsService.onSpecificOptionChange("theme",()=>this._setTheme(this._optionsService.rawOptions.theme)))}_setTheme(j={}){const b=this._colors;if(b.foreground=k(j.foreground,d),b.background=k(j.background,u),b.cursor=k(j.cursor,c),b.cursorAccent=k(j.cursorAccent,h),b.selectionBackgroundTransparent=k(j.selectionBackground,x),b.selectionBackgroundOpaque=v.color.blend(b.background,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundTransparent=k(j.selectionInactiveBackground,b.selectionBackgroundTransparent),b.selectionInactiveBackgroundOpaque=v.color.blend(b.background,b.selectionInactiveBackgroundTransparent),b.selectionForeground=j.selectionForeground?k(j.selectionForeground,v.NULL_COLOR):void 0,b.selectionForeground===v.NULL_COLOR&&(b.selectionForeground=void 0),v.color.isOpaque(b.selectionBackgroundTransparent)&&(b.selectionBackgroundTransparent=v.color.opacity(b.selectionBackgroundTransparent,.3)),v.color.isOpaque(b.selectionInactiveBackgroundTransparent)&&(b.selectionInactiveBackgroundTransparent=v.color.opacity(b.selectionInactiveBackgroundTransparent,.3)),b.ansi=a.DEFAULT_ANSI_COLORS.slice(),b.ansi[0]=k(j.black,a.DEFAULT_ANSI_COLORS[0]),b.ansi[1]=k(j.red,a.DEFAULT_ANSI_COLORS[1]),b.ansi[2]=k(j.green,a.DEFAULT_ANSI_COLORS[2]),b.ansi[3]=k(j.yellow,a.DEFAULT_ANSI_COLORS[3]),b.ansi[4]=k(j.blue,a.DEFAULT_ANSI_COLORS[4]),b.ansi[5]=k(j.magenta,a.DEFAULT_ANSI_COLORS[5]),b.ansi[6]=k(j.cyan,a.DEFAULT_ANSI_COLORS[6]),b.ansi[7]=k(j.white,a.DEFAULT_ANSI_COLORS[7]),b.ansi[8]=k(j.brightBlack,a.DEFAULT_ANSI_COLORS[8]),b.ansi[9]=k(j.brightRed,a.DEFAULT_ANSI_COLORS[9]),b.ansi[10]=k(j.brightGreen,a.DEFAULT_ANSI_COLORS[10]),b.ansi[11]=k(j.brightYellow,a.DEFAULT_ANSI_COLORS[11]),b.ansi[12]=k(j.brightBlue,a.DEFAULT_ANSI_COLORS[12]),b.ansi[13]=k(j.brightMagenta,a.DEFAULT_ANSI_COLORS[13]),b.ansi[14]=k(j.brightCyan,a.DEFAULT_ANSI_COLORS[14]),b.ansi[15]=k(j.brightWhite,a.DEFAULT_ANSI_COLORS[15]),j.extendedAnsi){const C=Math.min(b.ansi.length-16,j.extendedAnsi.length);for(let M=0;M<C;M++)b.ansi[M+16]=k(j.extendedAnsi[M],a.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(j){this._restoreColor(j),this._onChangeColors.fire(this.colors)}_restoreColor(j){if(j!==void 0)switch(j){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[j]=this._restoreColors.ansi[j]}else for(let b=0;b<this._restoreColors.ansi.length;++b)this._colors.ansi[b]=this._restoreColors.ansi[b]}modifyColors(j){j(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function k(j,b){if(j!==void 0)try{return v.css.toColor(j)}catch{}return b}a.ThemeService=_=m([p(0,y.IOptionsService)],_)},6349:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CircularList=void 0;const m=o(8460),p=o(844);class g extends p.Disposable{constructor(S){super(),this._maxLength=S,this.onDeleteEmitter=this.register(new m.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new m.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new m.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(S){if(this._maxLength===S)return;const w=new Array(S);for(let y=0;y<Math.min(S,this.length);y++)w[y]=this._array[this._getCyclicIndex(y)];this._array=w,this._maxLength=S,this._startIndex=0}get length(){return this._length}set length(S){if(S>this._length)for(let w=this._length;w<S;w++)this._array[w]=void 0;this._length=S}get(S){return this._array[this._getCyclicIndex(S)]}set(S,w){this._array[this._getCyclicIndex(S)]=w}push(S){this._array[this._getCyclicIndex(this._length)]=S,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(S,w,...y){if(w){for(let d=S;d<this._length-w;d++)this._array[this._getCyclicIndex(d)]=this._array[this._getCyclicIndex(d+w)];this._length-=w,this.onDeleteEmitter.fire({index:S,amount:w})}for(let d=this._length-1;d>=S;d--)this._array[this._getCyclicIndex(d+y.length)]=this._array[this._getCyclicIndex(d)];for(let d=0;d<y.length;d++)this._array[this._getCyclicIndex(S+d)]=y[d];if(y.length&&this.onInsertEmitter.fire({index:S,amount:y.length}),this._length+y.length>this._maxLength){const d=this._length+y.length-this._maxLength;this._startIndex+=d,this._length=this._maxLength,this.onTrimEmitter.fire(d)}else this._length+=y.length}trimStart(S){S>this._length&&(S=this._length),this._startIndex+=S,this._length-=S,this.onTrimEmitter.fire(S)}shiftElements(S,w,y){if(!(w<=0)){if(S<0||S>=this._length)throw new Error("start argument out of range");if(S+y<0)throw new Error("Cannot shift elements in list beyond index 0");if(y>0){for(let u=w-1;u>=0;u--)this.set(S+u+y,this.get(S+u));const d=S+w+y-this._length;if(d>0)for(this._length+=d;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let d=0;d<w;d++)this.set(S+d+y,this.get(S+d))}}_getCyclicIndex(S){return(this._startIndex+S)%this._maxLength}}a.CircularList=g},1439:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.clone=void 0,a.clone=function o(m,p=5){if(typeof m!="object")return m;const g=Array.isArray(m)?[]:{};for(const v in m)g[v]=p<=1?m[v]:m[v]&&o(m[v],p-1);return g}},8055:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.contrastRatio=a.toPaddedHex=a.rgba=a.rgb=a.css=a.color=a.channels=a.NULL_COLOR=void 0;const m=o(6114);let p=0,g=0,v=0,S=0;var w,y,d,u,c;function h(_){const k=_.toString(16);return k.length<2?"0"+k:k}function x(_,k){return _<k?(k+.05)/(_+.05):(_+.05)/(k+.05)}a.NULL_COLOR={css:"#00000000",rgba:0},function(_){_.toCss=function(k,j,b,C){return C!==void 0?`#${h(k)}${h(j)}${h(b)}${h(C)}`:`#${h(k)}${h(j)}${h(b)}`},_.toRgba=function(k,j,b,C=255){return(k<<24|j<<16|b<<8|C)>>>0}}(w||(a.channels=w={})),function(_){function k(j,b){return S=Math.round(255*b),[p,g,v]=c.toChannels(j.rgba),{css:w.toCss(p,g,v,S),rgba:w.toRgba(p,g,v,S)}}_.blend=function(j,b){if(S=(255&b.rgba)/255,S===1)return{css:b.css,rgba:b.rgba};const C=b.rgba>>24&255,M=b.rgba>>16&255,L=b.rgba>>8&255,P=j.rgba>>24&255,D=j.rgba>>16&255,W=j.rgba>>8&255;return p=P+Math.round((C-P)*S),g=D+Math.round((M-D)*S),v=W+Math.round((L-W)*S),{css:w.toCss(p,g,v),rgba:w.toRgba(p,g,v)}},_.isOpaque=function(j){return(255&j.rgba)==255},_.ensureContrastRatio=function(j,b,C){const M=c.ensureContrastRatio(j.rgba,b.rgba,C);if(M)return c.toColor(M>>24&255,M>>16&255,M>>8&255)},_.opaque=function(j){const b=(255|j.rgba)>>>0;return[p,g,v]=c.toChannels(b),{css:w.toCss(p,g,v),rgba:b}},_.opacity=k,_.multiplyOpacity=function(j,b){return S=255&j.rgba,k(j,S*b/255)},_.toColorRGB=function(j){return[j.rgba>>24&255,j.rgba>>16&255,j.rgba>>8&255]}}(y||(a.color=y={})),function(_){let k,j;if(!m.isNode){const b=document.createElement("canvas");b.width=1,b.height=1;const C=b.getContext("2d",{willReadFrequently:!0});C&&(k=C,k.globalCompositeOperation="copy",j=k.createLinearGradient(0,0,1,1))}_.toColor=function(b){if(b.match(/#[\da-f]{3,8}/i))switch(b.length){case 4:return p=parseInt(b.slice(1,2).repeat(2),16),g=parseInt(b.slice(2,3).repeat(2),16),v=parseInt(b.slice(3,4).repeat(2),16),c.toColor(p,g,v);case 5:return p=parseInt(b.slice(1,2).repeat(2),16),g=parseInt(b.slice(2,3).repeat(2),16),v=parseInt(b.slice(3,4).repeat(2),16),S=parseInt(b.slice(4,5).repeat(2),16),c.toColor(p,g,v,S);case 7:return{css:b,rgba:(parseInt(b.slice(1),16)<<8|255)>>>0};case 9:return{css:b,rgba:parseInt(b.slice(1),16)>>>0}}const C=b.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(C)return p=parseInt(C[1]),g=parseInt(C[2]),v=parseInt(C[3]),S=Math.round(255*(C[5]===void 0?1:parseFloat(C[5]))),c.toColor(p,g,v,S);if(!k||!j)throw new Error("css.toColor: Unsupported css format");if(k.fillStyle=j,k.fillStyle=b,typeof k.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(k.fillRect(0,0,1,1),[p,g,v,S]=k.getImageData(0,0,1,1).data,S!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:w.toRgba(p,g,v,S),css:b}}}(d||(a.css=d={})),function(_){function k(j,b,C){const M=j/255,L=b/255,P=C/255;return .2126*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))+.7152*(L<=.03928?L/12.92:Math.pow((L+.055)/1.055,2.4))+.0722*(P<=.03928?P/12.92:Math.pow((P+.055)/1.055,2.4))}_.relativeLuminance=function(j){return k(j>>16&255,j>>8&255,255&j)},_.relativeLuminance2=k}(u||(a.rgb=u={})),function(_){function k(b,C,M){const L=b>>24&255,P=b>>16&255,D=b>>8&255;let W=C>>24&255,V=C>>16&255,Z=C>>8&255,ee=x(u.relativeLuminance2(W,V,Z),u.relativeLuminance2(L,P,D));for(;ee<M&&(W>0||V>0||Z>0);)W-=Math.max(0,Math.ceil(.1*W)),V-=Math.max(0,Math.ceil(.1*V)),Z-=Math.max(0,Math.ceil(.1*Z)),ee=x(u.relativeLuminance2(W,V,Z),u.relativeLuminance2(L,P,D));return(W<<24|V<<16|Z<<8|255)>>>0}function j(b,C,M){const L=b>>24&255,P=b>>16&255,D=b>>8&255;let W=C>>24&255,V=C>>16&255,Z=C>>8&255,ee=x(u.relativeLuminance2(W,V,Z),u.relativeLuminance2(L,P,D));for(;ee<M&&(W<255||V<255||Z<255);)W=Math.min(255,W+Math.ceil(.1*(255-W))),V=Math.min(255,V+Math.ceil(.1*(255-V))),Z=Math.min(255,Z+Math.ceil(.1*(255-Z))),ee=x(u.relativeLuminance2(W,V,Z),u.relativeLuminance2(L,P,D));return(W<<24|V<<16|Z<<8|255)>>>0}_.ensureContrastRatio=function(b,C,M){const L=u.relativeLuminance(b>>8),P=u.relativeLuminance(C>>8);if(x(L,P)<M){if(P<L){const V=k(b,C,M),Z=x(L,u.relativeLuminance(V>>8));if(Z<M){const ee=j(b,C,M);return Z>x(L,u.relativeLuminance(ee>>8))?V:ee}return V}const D=j(b,C,M),W=x(L,u.relativeLuminance(D>>8));if(W<M){const V=k(b,C,M);return W>x(L,u.relativeLuminance(V>>8))?D:V}return D}},_.reduceLuminance=k,_.increaseLuminance=j,_.toChannels=function(b){return[b>>24&255,b>>16&255,b>>8&255,255&b]},_.toColor=function(b,C,M,L){return{css:w.toCss(b,C,M,L),rgba:w.toRgba(b,C,M,L)}}}(c||(a.rgba=c={})),a.toPaddedHex=h,a.contrastRatio=x},8969:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CoreTerminal=void 0;const m=o(844),p=o(2585),g=o(4348),v=o(7866),S=o(744),w=o(7302),y=o(6975),d=o(8460),u=o(1753),c=o(1480),h=o(7994),x=o(9282),_=o(5435),k=o(5981),j=o(2660);let b=!1;class C extends m.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new d.EventEmitter),this._onScroll.event(L=>{var P;(P=this._onScrollApi)===null||P===void 0||P.fire(L.position)})),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(L){for(const P in L)this.optionsService.options[P]=L[P]}constructor(L){super(),this._windowsWrappingHeuristics=this.register(new m.MutableDisposable),this._onBinary=this.register(new d.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new d.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new d.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new d.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new d.EventEmitter),this._instantiationService=new g.InstantiationService,this.optionsService=this.register(new w.OptionsService(L)),this._instantiationService.setService(p.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(S.BufferService)),this._instantiationService.setService(p.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(v.LogService)),this._instantiationService.setService(p.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(y.CoreService)),this._instantiationService.setService(p.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(u.CoreMouseService)),this._instantiationService.setService(p.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(c.UnicodeService)),this._instantiationService.setService(p.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(h.CharsetService),this._instantiationService.setService(p.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(j.OscLinkService),this._instantiationService.setService(p.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new _.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,d.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,d.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,d.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,d.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom(()=>this.scrollToBottom())),this.register(this.coreService.onUserInput(()=>this._writeBuffer.handleUserInput())),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],()=>this._handleWindowsPtyOptionChange())),this.register(this._bufferService.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this.register(this._inputHandler.onScroll(P=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)})),this._writeBuffer=this.register(new k.WriteBuffer((P,D)=>this._inputHandler.parse(P,D))),this.register((0,d.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(L,P){this._writeBuffer.write(L,P)}writeSync(L,P){this._logService.logLevel<=p.LogLevelEnum.WARN&&!b&&(this._logService.warn("writeSync is unreliable and will be removed soon."),b=!0),this._writeBuffer.writeSync(L,P)}resize(L,P){isNaN(L)||isNaN(P)||(L=Math.max(L,S.MINIMUM_COLS),P=Math.max(P,S.MINIMUM_ROWS),this._bufferService.resize(L,P))}scroll(L,P=!1){this._bufferService.scroll(L,P)}scrollLines(L,P,D){this._bufferService.scrollLines(L,P,D)}scrollPages(L){this.scrollLines(L*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(L){const P=L-this._bufferService.buffer.ydisp;P!==0&&this.scrollLines(P)}registerEscHandler(L,P){return this._inputHandler.registerEscHandler(L,P)}registerDcsHandler(L,P){return this._inputHandler.registerDcsHandler(L,P)}registerCsiHandler(L,P){return this._inputHandler.registerCsiHandler(L,P)}registerOscHandler(L,P){return this._inputHandler.registerOscHandler(L,P)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let L=!1;const P=this.optionsService.rawOptions.windowsPty;P&&P.buildNumber!==void 0&&P.buildNumber!==void 0?L=P.backend==="conpty"&&P.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(L=!0),L?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const L=[];L.push(this.onLineFeed(x.updateWindowsModeWrappedState.bind(null,this._bufferService))),L.push(this.registerCsiHandler({final:"H"},()=>((0,x.updateWindowsModeWrappedState)(this._bufferService),!1))),this._windowsWrappingHeuristics.value=(0,m.toDisposable)(()=>{for(const P of L)P.dispose()})}}}a.CoreTerminal=C},8460:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.forwardEvent=a.EventEmitter=void 0,a.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=o=>(this._listeners.push(o),{dispose:()=>{if(!this._disposed){for(let m=0;m<this._listeners.length;m++)if(this._listeners[m]===o)return void this._listeners.splice(m,1)}}})),this._event}fire(o,m){const p=[];for(let g=0;g<this._listeners.length;g++)p.push(this._listeners[g]);for(let g=0;g<p.length;g++)p[g].call(void 0,o,m)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},a.forwardEvent=function(o,m){return o(p=>m.fire(p))}},5435:function(f,a,o){var m=this&&this.__decorate||function(ee,N,A,O){var B,J=arguments.length,H=J<3?N:O===null?O=Object.getOwnPropertyDescriptor(N,A):O;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")H=Reflect.decorate(ee,N,A,O);else for(var I=ee.length-1;I>=0;I--)(B=ee[I])&&(H=(J<3?B(H):J>3?B(N,A,H):B(N,A))||H);return J>3&&H&&Object.defineProperty(N,A,H),H},p=this&&this.__param||function(ee,N){return function(A,O){N(A,O,ee)}};Object.defineProperty(a,"__esModule",{value:!0}),a.InputHandler=a.WindowsOptionsReportType=void 0;const g=o(2584),v=o(7116),S=o(2015),w=o(844),y=o(482),d=o(8437),u=o(8460),c=o(643),h=o(511),x=o(3734),_=o(2585),k=o(6242),j=o(6351),b=o(5941),C={"(":0,")":1,"*":2,"+":3,"-":1,".":2},M=131072;function L(ee,N){if(ee>24)return N.setWinLines||!1;switch(ee){case 1:return!!N.restoreWin;case 2:return!!N.minimizeWin;case 3:return!!N.setWinPosition;case 4:return!!N.setWinSizePixels;case 5:return!!N.raiseWin;case 6:return!!N.lowerWin;case 7:return!!N.refreshWin;case 8:return!!N.setWinSizeChars;case 9:return!!N.maximizeWin;case 10:return!!N.fullscreenWin;case 11:return!!N.getWinState;case 13:return!!N.getWinPosition;case 14:return!!N.getWinSizePixels;case 15:return!!N.getScreenSizePixels;case 16:return!!N.getCellSizePixels;case 18:return!!N.getWinSizeChars;case 19:return!!N.getScreenSizeChars;case 20:return!!N.getIconTitle;case 21:return!!N.getWinTitle;case 22:return!!N.pushTitle;case 23:return!!N.popTitle;case 24:return!!N.setWinLines}return!1}var P;(function(ee){ee[ee.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",ee[ee.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(P||(a.WindowsOptionsReportType=P={}));let D=0;class W extends w.Disposable{getAttrData(){return this._curAttrData}constructor(N,A,O,B,J,H,I,T,z=new S.EscapeSequenceParser){super(),this._bufferService=N,this._charsetService=A,this._coreService=O,this._logService=B,this._optionsService=J,this._oscLinkService=H,this._coreMouseService=I,this._unicodeService=T,this._parser=z,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new y.StringToUtf32,this._utf8Decoder=new y.Utf8ToUtf32,this._workCell=new h.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new u.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new u.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new u.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new u.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new u.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new u.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new u.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new u.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new u.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new u.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new u.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new u.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new u.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new V(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate(E=>this._activeBuffer=E.activeBuffer)),this._parser.setCsiHandlerFallback((E,U)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(E),params:U.toArray()})}),this._parser.setEscHandlerFallback(E=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(E)})}),this._parser.setExecuteHandlerFallback(E=>{this._logService.debug("Unknown EXECUTE code: ",{code:E})}),this._parser.setOscHandlerFallback((E,U,X)=>{this._logService.debug("Unknown OSC code: ",{identifier:E,action:U,data:X})}),this._parser.setDcsHandlerFallback((E,U,X)=>{U==="HOOK"&&(X=X.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(E),action:U,payload:X})}),this._parser.setPrintHandler((E,U,X)=>this.print(E,U,X)),this._parser.registerCsiHandler({final:"@"},E=>this.insertChars(E)),this._parser.registerCsiHandler({intermediates:" ",final:"@"},E=>this.scrollLeft(E)),this._parser.registerCsiHandler({final:"A"},E=>this.cursorUp(E)),this._parser.registerCsiHandler({intermediates:" ",final:"A"},E=>this.scrollRight(E)),this._parser.registerCsiHandler({final:"B"},E=>this.cursorDown(E)),this._parser.registerCsiHandler({final:"C"},E=>this.cursorForward(E)),this._parser.registerCsiHandler({final:"D"},E=>this.cursorBackward(E)),this._parser.registerCsiHandler({final:"E"},E=>this.cursorNextLine(E)),this._parser.registerCsiHandler({final:"F"},E=>this.cursorPrecedingLine(E)),this._parser.registerCsiHandler({final:"G"},E=>this.cursorCharAbsolute(E)),this._parser.registerCsiHandler({final:"H"},E=>this.cursorPosition(E)),this._parser.registerCsiHandler({final:"I"},E=>this.cursorForwardTab(E)),this._parser.registerCsiHandler({final:"J"},E=>this.eraseInDisplay(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"J"},E=>this.eraseInDisplay(E,!0)),this._parser.registerCsiHandler({final:"K"},E=>this.eraseInLine(E,!1)),this._parser.registerCsiHandler({prefix:"?",final:"K"},E=>this.eraseInLine(E,!0)),this._parser.registerCsiHandler({final:"L"},E=>this.insertLines(E)),this._parser.registerCsiHandler({final:"M"},E=>this.deleteLines(E)),this._parser.registerCsiHandler({final:"P"},E=>this.deleteChars(E)),this._parser.registerCsiHandler({final:"S"},E=>this.scrollUp(E)),this._parser.registerCsiHandler({final:"T"},E=>this.scrollDown(E)),this._parser.registerCsiHandler({final:"X"},E=>this.eraseChars(E)),this._parser.registerCsiHandler({final:"Z"},E=>this.cursorBackwardTab(E)),this._parser.registerCsiHandler({final:"`"},E=>this.charPosAbsolute(E)),this._parser.registerCsiHandler({final:"a"},E=>this.hPositionRelative(E)),this._parser.registerCsiHandler({final:"b"},E=>this.repeatPrecedingCharacter(E)),this._parser.registerCsiHandler({final:"c"},E=>this.sendDeviceAttributesPrimary(E)),this._parser.registerCsiHandler({prefix:">",final:"c"},E=>this.sendDeviceAttributesSecondary(E)),this._parser.registerCsiHandler({final:"d"},E=>this.linePosAbsolute(E)),this._parser.registerCsiHandler({final:"e"},E=>this.vPositionRelative(E)),this._parser.registerCsiHandler({final:"f"},E=>this.hVPosition(E)),this._parser.registerCsiHandler({final:"g"},E=>this.tabClear(E)),this._parser.registerCsiHandler({final:"h"},E=>this.setMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"h"},E=>this.setModePrivate(E)),this._parser.registerCsiHandler({final:"l"},E=>this.resetMode(E)),this._parser.registerCsiHandler({prefix:"?",final:"l"},E=>this.resetModePrivate(E)),this._parser.registerCsiHandler({final:"m"},E=>this.charAttributes(E)),this._parser.registerCsiHandler({final:"n"},E=>this.deviceStatus(E)),this._parser.registerCsiHandler({prefix:"?",final:"n"},E=>this.deviceStatusPrivate(E)),this._parser.registerCsiHandler({intermediates:"!",final:"p"},E=>this.softReset(E)),this._parser.registerCsiHandler({intermediates:" ",final:"q"},E=>this.setCursorStyle(E)),this._parser.registerCsiHandler({final:"r"},E=>this.setScrollRegion(E)),this._parser.registerCsiHandler({final:"s"},E=>this.saveCursor(E)),this._parser.registerCsiHandler({final:"t"},E=>this.windowOptions(E)),this._parser.registerCsiHandler({final:"u"},E=>this.restoreCursor(E)),this._parser.registerCsiHandler({intermediates:"'",final:"}"},E=>this.insertColumns(E)),this._parser.registerCsiHandler({intermediates:"'",final:"~"},E=>this.deleteColumns(E)),this._parser.registerCsiHandler({intermediates:'"',final:"q"},E=>this.selectProtected(E)),this._parser.registerCsiHandler({intermediates:"$",final:"p"},E=>this.requestMode(E,!0)),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},E=>this.requestMode(E,!1)),this._parser.setExecuteHandler(g.C0.BEL,()=>this.bell()),this._parser.setExecuteHandler(g.C0.LF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.VT,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.FF,()=>this.lineFeed()),this._parser.setExecuteHandler(g.C0.CR,()=>this.carriageReturn()),this._parser.setExecuteHandler(g.C0.BS,()=>this.backspace()),this._parser.setExecuteHandler(g.C0.HT,()=>this.tab()),this._parser.setExecuteHandler(g.C0.SO,()=>this.shiftOut()),this._parser.setExecuteHandler(g.C0.SI,()=>this.shiftIn()),this._parser.setExecuteHandler(g.C1.IND,()=>this.index()),this._parser.setExecuteHandler(g.C1.NEL,()=>this.nextLine()),this._parser.setExecuteHandler(g.C1.HTS,()=>this.tabSet()),this._parser.registerOscHandler(0,new k.OscHandler(E=>(this.setTitle(E),this.setIconName(E),!0))),this._parser.registerOscHandler(1,new k.OscHandler(E=>this.setIconName(E))),this._parser.registerOscHandler(2,new k.OscHandler(E=>this.setTitle(E))),this._parser.registerOscHandler(4,new k.OscHandler(E=>this.setOrReportIndexedColor(E))),this._parser.registerOscHandler(8,new k.OscHandler(E=>this.setHyperlink(E))),this._parser.registerOscHandler(10,new k.OscHandler(E=>this.setOrReportFgColor(E))),this._parser.registerOscHandler(11,new k.OscHandler(E=>this.setOrReportBgColor(E))),this._parser.registerOscHandler(12,new k.OscHandler(E=>this.setOrReportCursorColor(E))),this._parser.registerOscHandler(104,new k.OscHandler(E=>this.restoreIndexedColor(E))),this._parser.registerOscHandler(110,new k.OscHandler(E=>this.restoreFgColor(E))),this._parser.registerOscHandler(111,new k.OscHandler(E=>this.restoreBgColor(E))),this._parser.registerOscHandler(112,new k.OscHandler(E=>this.restoreCursorColor(E))),this._parser.registerEscHandler({final:"7"},()=>this.saveCursor()),this._parser.registerEscHandler({final:"8"},()=>this.restoreCursor()),this._parser.registerEscHandler({final:"D"},()=>this.index()),this._parser.registerEscHandler({final:"E"},()=>this.nextLine()),this._parser.registerEscHandler({final:"H"},()=>this.tabSet()),this._parser.registerEscHandler({final:"M"},()=>this.reverseIndex()),this._parser.registerEscHandler({final:"="},()=>this.keypadApplicationMode()),this._parser.registerEscHandler({final:">"},()=>this.keypadNumericMode()),this._parser.registerEscHandler({final:"c"},()=>this.fullReset()),this._parser.registerEscHandler({final:"n"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"o"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"|"},()=>this.setgLevel(3)),this._parser.registerEscHandler({final:"}"},()=>this.setgLevel(2)),this._parser.registerEscHandler({final:"~"},()=>this.setgLevel(1)),this._parser.registerEscHandler({intermediates:"%",final:"@"},()=>this.selectDefaultCharset()),this._parser.registerEscHandler({intermediates:"%",final:"G"},()=>this.selectDefaultCharset());for(const E in v.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:E},()=>this.selectCharset("("+E)),this._parser.registerEscHandler({intermediates:")",final:E},()=>this.selectCharset(")"+E)),this._parser.registerEscHandler({intermediates:"*",final:E},()=>this.selectCharset("*"+E)),this._parser.registerEscHandler({intermediates:"+",final:E},()=>this.selectCharset("+"+E)),this._parser.registerEscHandler({intermediates:"-",final:E},()=>this.selectCharset("-"+E)),this._parser.registerEscHandler({intermediates:".",final:E},()=>this.selectCharset("."+E)),this._parser.registerEscHandler({intermediates:"/",final:E},()=>this.selectCharset("/"+E));this._parser.registerEscHandler({intermediates:"#",final:"8"},()=>this.screenAlignmentPattern()),this._parser.setErrorHandler(E=>(this._logService.error("Parsing error: ",E),E)),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new j.DcsHandler((E,U)=>this.requestStatusString(E,U)))}_preserveStack(N,A,O,B){this._parseStack.paused=!0,this._parseStack.cursorStartX=N,this._parseStack.cursorStartY=A,this._parseStack.decodedLength=O,this._parseStack.position=B}_logSlowResolvingAsync(N){this._logService.logLevel<=_.LogLevelEnum.WARN&&Promise.race([N,new Promise((A,O)=>setTimeout(()=>O("#SLOW_TIMEOUT"),5e3))]).catch(A=>{if(A!=="#SLOW_TIMEOUT")throw A;console.warn("async parser handler taking longer than 5000 ms")})}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(N,A){let O,B=this._activeBuffer.x,J=this._activeBuffer.y,H=0;const I=this._parseStack.paused;if(I){if(O=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,A))return this._logSlowResolvingAsync(O),O;B=this._parseStack.cursorStartX,J=this._parseStack.cursorStartY,this._parseStack.paused=!1,N.length>M&&(H=this._parseStack.position+M)}if(this._logService.logLevel<=_.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof N=="string"?` "${N}"`:` "${Array.prototype.map.call(N,T=>String.fromCharCode(T)).join("")}"`),typeof N=="string"?N.split("").map(T=>T.charCodeAt(0)):N),this._parseBuffer.length<N.length&&this._parseBuffer.length<M&&(this._parseBuffer=new Uint32Array(Math.min(N.length,M))),I||this._dirtyRowTracker.clearRange(),N.length>M)for(let T=H;T<N.length;T+=M){const z=T+M<N.length?T+M:N.length,E=typeof N=="string"?this._stringDecoder.decode(N.substring(T,z),this._parseBuffer):this._utf8Decoder.decode(N.subarray(T,z),this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,E))return this._preserveStack(B,J,E,T),this._logSlowResolvingAsync(O),O}else if(!I){const T=typeof N=="string"?this._stringDecoder.decode(N,this._parseBuffer):this._utf8Decoder.decode(N,this._parseBuffer);if(O=this._parser.parse(this._parseBuffer,T))return this._preserveStack(B,J,T,0),this._logSlowResolvingAsync(O),O}this._activeBuffer.x===B&&this._activeBuffer.y===J||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowTracker.start,this._dirtyRowTracker.end)}print(N,A,O){let B,J;const H=this._charsetService.charset,I=this._optionsService.rawOptions.screenReaderMode,T=this._bufferService.cols,z=this._coreService.decPrivateModes.wraparound,E=this._coreService.modes.insertMode,U=this._curAttrData;let X=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&O-A>0&&X.getWidth(this._activeBuffer.x-1)===2&&X.setCellFromCodePoint(this._activeBuffer.x-1,0,1,U.fg,U.bg,U.extended);for(let Y=A;Y<O;++Y){if(B=N[Y],J=this._unicodeService.wcwidth(B),B<127&&H){const se=H[String.fromCharCode(B)];se&&(B=se.charCodeAt(0))}if(I&&this._onA11yChar.fire((0,y.stringFromCodePoint)(B)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),J||!this._activeBuffer.x){if(this._activeBuffer.x+J-1>=T){if(z){for(;this._activeBuffer.x<T;)X.setCellFromCodePoint(this._activeBuffer.x++,0,1,U.fg,U.bg,U.extended);this._activeBuffer.x=0,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),X=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)}else if(this._activeBuffer.x=T-1,J===2)continue}if(E&&(X.insertCells(this._activeBuffer.x,J,this._activeBuffer.getNullCell(U),U),X.getWidth(T-1)===2&&X.setCellFromCodePoint(T-1,c.NULL_CELL_CODE,c.NULL_CELL_WIDTH,U.fg,U.bg,U.extended)),X.setCellFromCodePoint(this._activeBuffer.x++,B,J,U.fg,U.bg,U.extended),J>0)for(;--J;)X.setCellFromCodePoint(this._activeBuffer.x++,0,0,U.fg,U.bg,U.extended)}else X.getWidth(this._activeBuffer.x-1)?X.addCodepointToCell(this._activeBuffer.x-1,B):X.addCodepointToCell(this._activeBuffer.x-2,B)}O-A>0&&(X.loadCell(this._activeBuffer.x-1,this._workCell),this._workCell.getWidth()===2||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),this._activeBuffer.x<T&&O-A>0&&X.getWidth(this._activeBuffer.x)===0&&!X.hasContent(this._activeBuffer.x)&&X.setCellFromCodePoint(this._activeBuffer.x,0,1,U.fg,U.bg,U.extended),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(N,A){return N.final!=="t"||N.prefix||N.intermediates?this._parser.registerCsiHandler(N,A):this._parser.registerCsiHandler(N,O=>!L(O.params[0],this._optionsService.rawOptions.windowOptions)||A(O))}registerDcsHandler(N,A){return this._parser.registerDcsHandler(N,new j.DcsHandler(A))}registerEscHandler(N,A){return this._parser.registerEscHandler(N,A)}registerOscHandler(N,A){return this._parser.registerOscHandler(N,new k.OscHandler(A))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){var N;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&(!((N=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y))===null||N===void 0)&&N.isWrapped)){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);A.hasWidth(this._activeBuffer.x)&&!A.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const N=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-N),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(N=this._bufferService.cols-1){this._activeBuffer.x=Math.min(N,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(N,A){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=N,this._activeBuffer.y=this._activeBuffer.scrollTop+A):(this._activeBuffer.x=N,this._activeBuffer.y=A),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(N,A){this._restrictCursor(),this._setCursor(this._activeBuffer.x+N,this._activeBuffer.y+A)}cursorUp(N){const A=this._activeBuffer.y-this._activeBuffer.scrollTop;return A>=0?this._moveCursor(0,-Math.min(A,N.params[0]||1)):this._moveCursor(0,-(N.params[0]||1)),!0}cursorDown(N){const A=this._activeBuffer.scrollBottom-this._activeBuffer.y;return A>=0?this._moveCursor(0,Math.min(A,N.params[0]||1)):this._moveCursor(0,N.params[0]||1),!0}cursorForward(N){return this._moveCursor(N.params[0]||1,0),!0}cursorBackward(N){return this._moveCursor(-(N.params[0]||1),0),!0}cursorNextLine(N){return this.cursorDown(N),this._activeBuffer.x=0,!0}cursorPrecedingLine(N){return this.cursorUp(N),this._activeBuffer.x=0,!0}cursorCharAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(N){return this._setCursor(N.length>=2?(N.params[1]||1)-1:0,(N.params[0]||1)-1),!0}charPosAbsolute(N){return this._setCursor((N.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(N){return this._moveCursor(N.params[0]||1,0),!0}linePosAbsolute(N){return this._setCursor(this._activeBuffer.x,(N.params[0]||1)-1),!0}vPositionRelative(N){return this._moveCursor(0,N.params[0]||1),!0}hVPosition(N){return this.cursorPosition(N),!0}tabClear(N){const A=N.params[0];return A===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:A===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=N.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(N){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let A=N.params[0]||1;for(;A--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(N){const A=N.params[0];return A===1&&(this._curAttrData.bg|=536870912),A!==2&&A!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(N,A,O,B=!1,J=!1){const H=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);H.replaceCells(A,O,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData(),J),B&&(H.isWrapped=!1)}_resetBufferLine(N,A=!1){const O=this._activeBuffer.lines.get(this._activeBuffer.ybase+N);O&&(O.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),A),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+N),O.isWrapped=!1)}eraseInDisplay(N,A=!1){let O;switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);O<this._bufferService.rows;O++)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(O);break;case 1:for(O=this._activeBuffer.y,this._dirtyRowTracker.markDirty(O),this._eraseInBufferLine(O,0,this._activeBuffer.x+1,!0,A),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(O+1).isWrapped=!1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 2:for(O=this._bufferService.rows,this._dirtyRowTracker.markDirty(O-1);O--;)this._resetBufferLine(O,A);this._dirtyRowTracker.markDirty(0);break;case 3:const B=this._activeBuffer.lines.length-this._bufferService.rows;B>0&&(this._activeBuffer.lines.trimStart(B),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-B,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-B,0),this._onScroll.fire(0))}return!0}eraseInLine(N,A=!1){switch(this._restrictCursor(this._bufferService.cols),N.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,A);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,A);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,A)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(N){this._restrictCursor();let A=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y,B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,J=this._bufferService.rows-1+this._activeBuffer.ybase-B+1;for(;A--;)this._activeBuffer.lines.splice(J-1,1),this._activeBuffer.lines.splice(O,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(N){this._restrictCursor();let A=N.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const O=this._activeBuffer.ybase+this._activeBuffer.y;let B;for(B=this._bufferService.rows-1-this._activeBuffer.scrollBottom,B=this._bufferService.rows-1+this._activeBuffer.ybase-B;A--;)this._activeBuffer.lines.splice(O,1),this._activeBuffer.lines.splice(B,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(N){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.insertCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(N){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.deleteCells(this._activeBuffer.x,N.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(N){let A=N.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(N){let A=N.params[0]||1;for(;A--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(d.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=N.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.deleteCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=N.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.insertCells(0,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=N.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.insertCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(N){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const A=N.params[0]||1;for(let O=this._activeBuffer.scrollTop;O<=this._activeBuffer.scrollBottom;++O){const B=this._activeBuffer.lines.get(this._activeBuffer.ybase+O);B.deleteCells(this._activeBuffer.x,A,this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),B.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(N){this._restrictCursor();const A=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return A&&(A.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(N.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(N){if(!this._parser.precedingCodepoint)return!0;const A=N.params[0]||1,O=new Uint32Array(A);for(let B=0;B<A;++B)O[B]=this._parser.precedingCodepoint;return this.print(O,0,O.length),!0}sendDeviceAttributesPrimary(N){return N.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(N){return N.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(N.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c")),!0}_is(N){return(this._optionsService.rawOptions.termName+"").indexOf(N)===0}setMode(N){for(let A=0;A<N.length;A++)switch(N.params[A]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(N){for(let A=0;A<N.length;A++)switch(N.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),this._charsetService.setgCharset(1,v.DEFAULT_CHARSET),this._charsetService.setgCharset(2,v.DEFAULT_CHARSET),this._charsetService.setgCharset(3,v.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(N){for(let A=0;A<N.length;A++)switch(N.params[A]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(N){for(let A=0;A<N.length;A++)switch(N.params[A]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),N.params[A]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(N,A){const O=this._coreService.decPrivateModes,{activeProtocol:B,activeEncoding:J}=this._coreMouseService,H=this._coreService,{buffers:I,cols:T}=this._bufferService,{active:z,alt:E}=I,U=this._optionsService.rawOptions,X=$=>$?1:2,Y=N.params[0];return se=Y,re=A?Y===2?4:Y===4?X(H.modes.insertMode):Y===12?3:Y===20?X(U.convertEol):0:Y===1?X(O.applicationCursorKeys):Y===3?U.windowOptions.setWinLines?T===80?2:T===132?1:0:0:Y===6?X(O.origin):Y===7?X(O.wraparound):Y===8?3:Y===9?X(B==="X10"):Y===12?X(U.cursorBlink):Y===25?X(!H.isCursorHidden):Y===45?X(O.reverseWraparound):Y===66?X(O.applicationKeypad):Y===67?4:Y===1e3?X(B==="VT200"):Y===1002?X(B==="DRAG"):Y===1003?X(B==="ANY"):Y===1004?X(O.sendFocus):Y===1005?4:Y===1006?X(J==="SGR"):Y===1015?4:Y===1016?X(J==="SGR_PIXELS"):Y===1048?1:Y===47||Y===1047||Y===1049?X(z===E):Y===2004?X(O.bracketedPasteMode):0,H.triggerDataEvent(`${g.C0.ESC}[${A?"":"?"}${se};${re}$y`),!0;var se,re}_updateAttrColor(N,A,O,B,J){return A===2?(N|=50331648,N&=-16777216,N|=x.AttributeData.fromColorRGB([O,B,J])):A===5&&(N&=-50331904,N|=33554432|255&O),N}_extractColor(N,A,O){const B=[0,0,-1,0,0,0];let J=0,H=0;do{if(B[H+J]=N.params[A+H],N.hasSubParams(A+H)){const I=N.getSubParams(A+H);let T=0;do B[1]===5&&(J=1),B[H+T+1+J]=I[T];while(++T<I.length&&T+H+1+J<B.length);break}if(B[1]===5&&H+J>=2||B[1]===2&&H+J>=5)break;B[1]&&(J=1)}while(++H+A<N.length&&H+J<B.length);for(let I=2;I<B.length;++I)B[I]===-1&&(B[I]=0);switch(B[0]){case 38:O.fg=this._updateAttrColor(O.fg,B[1],B[3],B[4],B[5]);break;case 48:O.bg=this._updateAttrColor(O.bg,B[1],B[3],B[4],B[5]);break;case 58:O.extended=O.extended.clone(),O.extended.underlineColor=this._updateAttrColor(O.extended.underlineColor,B[1],B[3],B[4],B[5])}return H}_processUnderline(N,A){A.extended=A.extended.clone(),(!~N||N>5)&&(N=1),A.extended.underlineStyle=N,A.fg|=268435456,N===0&&(A.fg&=-268435457),A.updateExtended()}_processSGR0(N){N.fg=d.DEFAULT_ATTR_DATA.fg,N.bg=d.DEFAULT_ATTR_DATA.bg,N.extended=N.extended.clone(),N.extended.underlineStyle=0,N.extended.underlineColor&=-67108864,N.updateExtended()}charAttributes(N){if(N.length===1&&N.params[0]===0)return this._processSGR0(this._curAttrData),!0;const A=N.length;let O;const B=this._curAttrData;for(let J=0;J<A;J++)O=N.params[J],O>=30&&O<=37?(B.fg&=-50331904,B.fg|=16777216|O-30):O>=40&&O<=47?(B.bg&=-50331904,B.bg|=16777216|O-40):O>=90&&O<=97?(B.fg&=-50331904,B.fg|=16777224|O-90):O>=100&&O<=107?(B.bg&=-50331904,B.bg|=16777224|O-100):O===0?this._processSGR0(B):O===1?B.fg|=134217728:O===3?B.bg|=67108864:O===4?(B.fg|=268435456,this._processUnderline(N.hasSubParams(J)?N.getSubParams(J)[0]:1,B)):O===5?B.fg|=536870912:O===7?B.fg|=67108864:O===8?B.fg|=1073741824:O===9?B.fg|=2147483648:O===2?B.bg|=134217728:O===21?this._processUnderline(2,B):O===22?(B.fg&=-134217729,B.bg&=-134217729):O===23?B.bg&=-67108865:O===24?(B.fg&=-268435457,this._processUnderline(0,B)):O===25?B.fg&=-536870913:O===27?B.fg&=-67108865:O===28?B.fg&=-1073741825:O===29?B.fg&=2147483647:O===39?(B.fg&=-67108864,B.fg|=16777215&d.DEFAULT_ATTR_DATA.fg):O===49?(B.bg&=-67108864,B.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):O===38||O===48||O===58?J+=this._extractColor(N,J,B):O===53?B.bg|=1073741824:O===55?B.bg&=-1073741825:O===59?(B.extended=B.extended.clone(),B.extended.underlineColor=-1,B.updateExtended()):O===100?(B.fg&=-67108864,B.fg|=16777215&d.DEFAULT_ATTR_DATA.fg,B.bg&=-67108864,B.bg|=16777215&d.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",O);return!0}deviceStatus(N){switch(N.params[0]){case 5:this._coreService.triggerDataEvent(`${g.C0.ESC}[0n`);break;case 6:const A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[${A};${O}R`)}return!0}deviceStatusPrivate(N){if(N.params[0]===6){const A=this._activeBuffer.y+1,O=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${g.C0.ESC}[?${A};${O}R`)}return!0}softReset(N){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(N){const A=N.params[0]||1;switch(A){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const O=A%2==1;return this._optionsService.options.cursorBlink=O,!0}setScrollRegion(N){const A=N.params[0]||1;let O;return(N.length<2||(O=N.params[1])>this._bufferService.rows||O===0)&&(O=this._bufferService.rows),O>A&&(this._activeBuffer.scrollTop=A-1,this._activeBuffer.scrollBottom=O-1,this._setCursor(0,0)),!0}windowOptions(N){if(!L(N.params[0],this._optionsService.rawOptions.windowOptions))return!0;const A=N.length>1?N.params[1]:0;switch(N.params[0]){case 14:A!==2&&this._onRequestWindowsOptionsReport.fire(P.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(P.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${g.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:A!==0&&A!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),A!==0&&A!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:A!==0&&A!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),A!==0&&A!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(N){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(N){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(N){return this._windowTitle=N,this._onTitleChange.fire(N),!0}setIconName(N){return this._iconName=N,!0}setOrReportIndexedColor(N){const A=[],O=N.split(";");for(;O.length>1;){const B=O.shift(),J=O.shift();if(/^\d+$/.exec(B)){const H=parseInt(B);if(Z(H))if(J==="?")A.push({type:0,index:H});else{const I=(0,b.parseColor)(J);I&&A.push({type:1,index:H,color:I})}}}return A.length&&this._onColor.fire(A),!0}setHyperlink(N){const A=N.split(";");return!(A.length<2)&&(A[1]?this._createHyperlink(A[0],A[1]):!A[0]&&this._finishHyperlink())}_createHyperlink(N,A){this._getCurrentLinkId()&&this._finishHyperlink();const O=N.split(":");let B;const J=O.findIndex(H=>H.startsWith("id="));return J!==-1&&(B=O[J].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:B,uri:A}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(N,A){const O=N.split(";");for(let B=0;B<O.length&&!(A>=this._specialColors.length);++B,++A)if(O[B]==="?")this._onColor.fire([{type:0,index:this._specialColors[A]}]);else{const J=(0,b.parseColor)(O[B]);J&&this._onColor.fire([{type:1,index:this._specialColors[A],color:J}])}return!0}setOrReportFgColor(N){return this._setOrReportSpecialColor(N,0)}setOrReportBgColor(N){return this._setOrReportSpecialColor(N,1)}setOrReportCursorColor(N){return this._setOrReportSpecialColor(N,2)}restoreIndexedColor(N){if(!N)return this._onColor.fire([{type:2}]),!0;const A=[],O=N.split(";");for(let B=0;B<O.length;++B)if(/^\d+$/.exec(O[B])){const J=parseInt(O[B]);Z(J)&&A.push({type:2,index:J})}return A.length&&this._onColor.fire(A),!0}restoreFgColor(N){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(N){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(N){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,v.DEFAULT_CHARSET),!0}selectCharset(N){return N.length!==2?(this.selectDefaultCharset(),!0):(N[0]==="/"||this._charsetService.setgCharset(C[N[0]],v.CHARSETS[N[1]]||v.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const N=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,N,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=d.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=d.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(N){return this._charsetService.setgLevel(N),!0}screenAlignmentPattern(){const N=new h.CellData;N.content=4194373,N.fg=this._curAttrData.fg,N.bg=this._curAttrData.bg,this._setCursor(0,0);for(let A=0;A<this._bufferService.rows;++A){const O=this._activeBuffer.ybase+this._activeBuffer.y+A,B=this._activeBuffer.lines.get(O);B&&(B.fill(N),B.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(N,A){const O=this._bufferService.buffer,B=this._optionsService.rawOptions;return(J=>(this._coreService.triggerDataEvent(`${g.C0.ESC}${J}${g.C0.ESC}\\`),!0))(N==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:N==='"p'?'P1$r61;1"p':N==="r"?`P1$r${O.scrollTop+1};${O.scrollBottom+1}r`:N==="m"?"P1$r0m":N===" q"?`P1$r${{block:2,underline:4,bar:6}[B.cursorStyle]-(B.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(N,A){this._dirtyRowTracker.markRangeDirty(N,A)}}a.InputHandler=W;let V=class{constructor(ee){this._bufferService=ee,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(ee){ee<this.start?this.start=ee:ee>this.end&&(this.end=ee)}markRangeDirty(ee,N){ee>N&&(D=ee,ee=N,N=D),ee<this.start&&(this.start=ee),N>this.end&&(this.end=N)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function Z(ee){return 0<=ee&&ee<256}V=m([p(0,_.IBufferService)],V)},844:(f,a)=>{function o(m){for(const p of m)p.dispose();m.length=0}Object.defineProperty(a,"__esModule",{value:!0}),a.getDisposeArrayDisposable=a.disposeArray=a.toDisposable=a.MutableDisposable=a.Disposable=void 0,a.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const m of this._disposables)m.dispose();this._disposables.length=0}register(m){return this._disposables.push(m),m}unregister(m){const p=this._disposables.indexOf(m);p!==-1&&this._disposables.splice(p,1)}},a.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(m){var p;this._isDisposed||m===this._value||((p=this._value)===null||p===void 0||p.dispose(),this._value=m)}clear(){this.value=void 0}dispose(){var m;this._isDisposed=!0,(m=this._value)===null||m===void 0||m.dispose(),this._value=void 0}},a.toDisposable=function(m){return{dispose:m}},a.disposeArray=o,a.getDisposeArrayDisposable=function(m){return{dispose:()=>o(m)}}},1505:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.FourKeyMap=a.TwoKeyMap=void 0;class o{constructor(){this._data={}}set(p,g,v){this._data[p]||(this._data[p]={}),this._data[p][g]=v}get(p,g){return this._data[p]?this._data[p][g]:void 0}clear(){this._data={}}}a.TwoKeyMap=o,a.FourKeyMap=class{constructor(){this._data=new o}set(m,p,g,v,S){this._data.get(m,p)||this._data.set(m,p,new o),this._data.get(m,p).set(g,v,S)}get(m,p,g,v){var S;return(S=this._data.get(m,p))===null||S===void 0?void 0:S.get(g,v)}clear(){this._data.clear()}}},6114:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.isChromeOS=a.isLinux=a.isWindows=a.isIphone=a.isIpad=a.isMac=a.getSafariVersion=a.isSafari=a.isLegacyEdge=a.isFirefox=a.isNode=void 0,a.isNode=typeof navigator>"u";const o=a.isNode?"node":navigator.userAgent,m=a.isNode?"node":navigator.platform;a.isFirefox=o.includes("Firefox"),a.isLegacyEdge=o.includes("Edge"),a.isSafari=/^((?!chrome|android).)*safari/i.test(o),a.getSafariVersion=function(){if(!a.isSafari)return 0;const p=o.match(/Version\/(\d+)/);return p===null||p.length<2?0:parseInt(p[1])},a.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(m),a.isIpad=m==="iPad",a.isIphone=m==="iPhone",a.isWindows=["Windows","Win16","Win32","WinCE"].includes(m),a.isLinux=m.indexOf("Linux")>=0,a.isChromeOS=/\bCrOS\b/.test(o)},6106:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.SortedList=void 0;let o=0;a.SortedList=class{constructor(m){this._getKey=m,this._array=[]}clear(){this._array.length=0}insert(m){this._array.length!==0?(o=this._search(this._getKey(m)),this._array.splice(o,0,m)):this._array.push(m)}delete(m){if(this._array.length===0)return!1;const p=this._getKey(m);if(p===void 0||(o=this._search(p),o===-1)||this._getKey(this._array[o])!==p)return!1;do if(this._array[o]===m)return this._array.splice(o,1),!0;while(++o<this._array.length&&this._getKey(this._array[o])===p);return!1}*getKeyIterator(m){if(this._array.length!==0&&(o=this._search(m),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===m))do yield this._array[o];while(++o<this._array.length&&this._getKey(this._array[o])===m)}forEachByKey(m,p){if(this._array.length!==0&&(o=this._search(m),!(o<0||o>=this._array.length)&&this._getKey(this._array[o])===m))do p(this._array[o]);while(++o<this._array.length&&this._getKey(this._array[o])===m)}values(){return[...this._array].values()}_search(m){let p=0,g=this._array.length-1;for(;g>=p;){let v=p+g>>1;const S=this._getKey(this._array[v]);if(S>m)g=v-1;else{if(!(S<m)){for(;v>0&&this._getKey(this._array[v-1])===m;)v--;return v}p=v+1}}return p}}},7226:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DebouncedIdleTask=a.IdleTaskQueue=a.PriorityTaskQueue=void 0;const m=o(6114);class p{constructor(){this._tasks=[],this._i=0}enqueue(S){this._tasks.push(S),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(S){this._idleCallback=void 0;let w=0,y=0,d=S.timeRemaining(),u=0;for(;this._i<this._tasks.length;){if(w=Date.now(),this._tasks[this._i]()||this._i++,w=Math.max(1,Date.now()-w),y=Math.max(w,y),u=S.timeRemaining(),1.5*y>u)return d-w<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(d-w))}ms`),void this._start();d=u}this.clear()}}class g extends p{_requestCallback(S){return setTimeout(()=>S(this._createDeadline(16)))}_cancelCallback(S){clearTimeout(S)}_createDeadline(S){const w=Date.now()+S;return{timeRemaining:()=>Math.max(0,w-Date.now())}}}a.PriorityTaskQueue=g,a.IdleTaskQueue=!m.isNode&&"requestIdleCallback"in window?class extends p{_requestCallback(v){return requestIdleCallback(v)}_cancelCallback(v){cancelIdleCallback(v)}}:g,a.DebouncedIdleTask=class{constructor(){this._queue=new a.IdleTaskQueue}set(v){this._queue.clear(),this._queue.enqueue(v)}flush(){this._queue.flush()}}},9282:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.updateWindowsModeWrappedState=void 0;const m=o(643);a.updateWindowsModeWrappedState=function(p){const g=p.buffer.lines.get(p.buffer.ybase+p.buffer.y-1),v=g==null?void 0:g.get(p.cols-1),S=p.buffer.lines.get(p.buffer.ybase+p.buffer.y);S&&v&&(S.isWrapped=v[m.CHAR_DATA_CODE_INDEX]!==m.NULL_CELL_CODE&&v[m.CHAR_DATA_CODE_INDEX]!==m.WHITESPACE_CELL_CODE)}},3734:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ExtendedAttrs=a.AttributeData=void 0;class o{constructor(){this.fg=0,this.bg=0,this.extended=new m}static toColorRGB(g){return[g>>>16&255,g>>>8&255,255&g]}static fromColorRGB(g){return(255&g[0])<<16|(255&g[1])<<8|255&g[2]}clone(){const g=new o;return g.fg=this.fg,g.bg=this.bg,g.extended=this.extended.clone(),g}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}}a.AttributeData=o;class m{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(g){this._ext=g}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(g){this._ext&=-469762049,this._ext|=g<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(g){this._ext&=-67108864,this._ext|=67108863&g}get urlId(){return this._urlId}set urlId(g){this._urlId=g}constructor(g=0,v=0){this._ext=0,this._urlId=0,this._ext=g,this._urlId=v}clone(){return new m(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}a.ExtendedAttrs=m},9092:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Buffer=a.MAX_BUFFER_SIZE=void 0;const m=o(6349),p=o(7226),g=o(3734),v=o(8437),S=o(4634),w=o(511),y=o(643),d=o(4863),u=o(7116);a.MAX_BUFFER_SIZE=4294967295,a.Buffer=class{constructor(c,h,x){this._hasScrollback=c,this._optionsService=h,this._bufferService=x,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=v.DEFAULT_ATTR_DATA.clone(),this.savedCharset=u.DEFAULT_CHARSET,this.markers=[],this._nullCell=w.CellData.fromCharData([0,y.NULL_CELL_CHAR,y.NULL_CELL_WIDTH,y.NULL_CELL_CODE]),this._whitespaceCell=w.CellData.fromCharData([0,y.WHITESPACE_CELL_CHAR,y.WHITESPACE_CELL_WIDTH,y.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new p.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(c){return c?(this._nullCell.fg=c.fg,this._nullCell.bg=c.bg,this._nullCell.extended=c.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new g.ExtendedAttrs),this._nullCell}getWhitespaceCell(c){return c?(this._whitespaceCell.fg=c.fg,this._whitespaceCell.bg=c.bg,this._whitespaceCell.extended=c.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new g.ExtendedAttrs),this._whitespaceCell}getBlankLine(c,h){return new v.BufferLine(this._bufferService.cols,this.getNullCell(c),h)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const c=this.ybase+this.y-this.ydisp;return c>=0&&c<this._rows}_getCorrectBufferLength(c){if(!this._hasScrollback)return c;const h=c+this._optionsService.rawOptions.scrollback;return h>a.MAX_BUFFER_SIZE?a.MAX_BUFFER_SIZE:h}fillViewportRows(c){if(this.lines.length===0){c===void 0&&(c=v.DEFAULT_ATTR_DATA);let h=this._rows;for(;h--;)this.lines.push(this.getBlankLine(c))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new m.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(c,h){const x=this.getNullCell(v.DEFAULT_ATTR_DATA);let _=0;const k=this._getCorrectBufferLength(h);if(k>this.lines.maxLength&&(this.lines.maxLength=k),this.lines.length>0){if(this._cols<c)for(let b=0;b<this.lines.length;b++)_+=+this.lines.get(b).resize(c,x);let j=0;if(this._rows<h)for(let b=this._rows;b<h;b++)this.lines.length<h+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new v.BufferLine(c,x)):this.ybase>0&&this.lines.length<=this.ybase+this.y+j+1?(this.ybase--,j++,this.ydisp>0&&this.ydisp--):this.lines.push(new v.BufferLine(c,x)));else for(let b=this._rows;b>h;b--)this.lines.length>h+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(k<this.lines.maxLength){const b=this.lines.length-k;b>0&&(this.lines.trimStart(b),this.ybase=Math.max(this.ybase-b,0),this.ydisp=Math.max(this.ydisp-b,0),this.savedY=Math.max(this.savedY-b,0)),this.lines.maxLength=k}this.x=Math.min(this.x,c-1),this.y=Math.min(this.y,h-1),j&&(this.y+=j),this.savedX=Math.min(this.savedX,c-1),this.scrollTop=0}if(this.scrollBottom=h-1,this._isReflowEnabled&&(this._reflow(c,h),this._cols>c))for(let j=0;j<this.lines.length;j++)_+=+this.lines.get(j).resize(c,x);this._cols=c,this._rows=h,this._memoryCleanupQueue.clear(),_>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue(()=>this._batchedMemoryCleanup()))}_batchedMemoryCleanup(){let c=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,c=!1);let h=0;for(;this._memoryCleanupPosition<this.lines.length;)if(h+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),h>100)return!0;return c}get _isReflowEnabled(){const c=this._optionsService.rawOptions.windowsPty;return c&&c.buildNumber?this._hasScrollback&&c.backend==="conpty"&&c.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(c,h){this._cols!==c&&(c>this._cols?this._reflowLarger(c,h):this._reflowSmaller(c,h))}_reflowLarger(c,h){const x=(0,S.reflowLargerGetLinesToRemove)(this.lines,this._cols,c,this.ybase+this.y,this.getNullCell(v.DEFAULT_ATTR_DATA));if(x.length>0){const _=(0,S.reflowLargerCreateNewLayout)(this.lines,x);(0,S.reflowLargerApplyNewLayout)(this.lines,_.layout),this._reflowLargerAdjustViewport(c,h,_.countRemoved)}}_reflowLargerAdjustViewport(c,h,x){const _=this.getNullCell(v.DEFAULT_ATTR_DATA);let k=x;for(;k-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<h&&this.lines.push(new v.BufferLine(c,_))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-x,0)}_reflowSmaller(c,h){const x=this.getNullCell(v.DEFAULT_ATTR_DATA),_=[];let k=0;for(let j=this.lines.length-1;j>=0;j--){let b=this.lines.get(j);if(!b||!b.isWrapped&&b.getTrimmedLength()<=c)continue;const C=[b];for(;b.isWrapped&&j>0;)b=this.lines.get(--j),C.unshift(b);const M=this.ybase+this.y;if(M>=j&&M<j+C.length)continue;const L=C[C.length-1].getTrimmedLength(),P=(0,S.reflowSmallerGetNewLineLengths)(C,this._cols,c),D=P.length-C.length;let W;W=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+D):Math.max(0,this.lines.length-this.lines.maxLength+D);const V=[];for(let B=0;B<D;B++){const J=this.getBlankLine(v.DEFAULT_ATTR_DATA,!0);V.push(J)}V.length>0&&(_.push({start:j+C.length+k,newLines:V}),k+=V.length),C.push(...V);let Z=P.length-1,ee=P[Z];ee===0&&(Z--,ee=P[Z]);let N=C.length-D-1,A=L;for(;N>=0;){const B=Math.min(A,ee);if(C[Z]===void 0)break;if(C[Z].copyCellsFrom(C[N],A-B,ee-B,B,!0),ee-=B,ee===0&&(Z--,ee=P[Z]),A-=B,A===0){N--;const J=Math.max(N,0);A=(0,S.getWrappedLineTrimmedLength)(C,J,this._cols)}}for(let B=0;B<C.length;B++)P[B]<c&&C[B].setCell(P[B],x);let O=D-W;for(;O-- >0;)this.ybase===0?this.y<h-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+k)-h&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+D,this.ybase+h-1)}if(_.length>0){const j=[],b=[];for(let Z=0;Z<this.lines.length;Z++)b.push(this.lines.get(Z));const C=this.lines.length;let M=C-1,L=0,P=_[L];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+k);let D=0;for(let Z=Math.min(this.lines.maxLength-1,C+k-1);Z>=0;Z--)if(P&&P.start>M+D){for(let ee=P.newLines.length-1;ee>=0;ee--)this.lines.set(Z--,P.newLines[ee]);Z++,j.push({index:M+1,amount:P.newLines.length}),D+=P.newLines.length,P=_[++L]}else this.lines.set(Z,b[M--]);let W=0;for(let Z=j.length-1;Z>=0;Z--)j[Z].index+=W,this.lines.onInsertEmitter.fire(j[Z]),W+=j[Z].amount;const V=Math.max(0,C+k-this.lines.maxLength);V>0&&this.lines.onTrimEmitter.fire(V)}}translateBufferLineToString(c,h,x=0,_){const k=this.lines.get(c);return k?k.translateToString(h,x,_):""}getWrappedRangeForLine(c){let h=c,x=c;for(;h>0&&this.lines.get(h).isWrapped;)h--;for(;x+1<this.lines.length&&this.lines.get(x+1).isWrapped;)x++;return{first:h,last:x}}setupTabStops(c){for(c!=null?this.tabs[c]||(c=this.prevStop(c)):(this.tabs={},c=0);c<this._cols;c+=this._optionsService.rawOptions.tabStopWidth)this.tabs[c]=!0}prevStop(c){for(c==null&&(c=this.x);!this.tabs[--c]&&c>0;);return c>=this._cols?this._cols-1:c<0?0:c}nextStop(c){for(c==null&&(c=this.x);!this.tabs[++c]&&c<this._cols;);return c>=this._cols?this._cols-1:c<0?0:c}clearMarkers(c){this._isClearing=!0;for(let h=0;h<this.markers.length;h++)this.markers[h].line===c&&(this.markers[h].dispose(),this.markers.splice(h--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let c=0;c<this.markers.length;c++)this.markers[c].dispose(),this.markers.splice(c--,1);this._isClearing=!1}addMarker(c){const h=new d.Marker(c);return this.markers.push(h),h.register(this.lines.onTrim(x=>{h.line-=x,h.line<0&&h.dispose()})),h.register(this.lines.onInsert(x=>{h.line>=x.index&&(h.line+=x.amount)})),h.register(this.lines.onDelete(x=>{h.line>=x.index&&h.line<x.index+x.amount&&h.dispose(),h.line>x.index&&(h.line-=x.amount)})),h.register(h.onDispose(()=>this._removeMarker(h))),h}_removeMarker(c){this._isClearing||this.markers.splice(this.markers.indexOf(c),1)}}},8437:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLine=a.DEFAULT_ATTR_DATA=void 0;const m=o(3734),p=o(511),g=o(643),v=o(482);a.DEFAULT_ATTR_DATA=Object.freeze(new m.AttributeData);let S=0;class w{constructor(d,u,c=!1){this.isWrapped=c,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*d);const h=u||p.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]);for(let x=0;x<d;++x)this.setCell(x,h);this.length=d}get(d){const u=this._data[3*d+0],c=2097151&u;return[this._data[3*d+1],2097152&u?this._combined[d]:c?(0,v.stringFromCodePoint)(c):"",u>>22,2097152&u?this._combined[d].charCodeAt(this._combined[d].length-1):c]}set(d,u){this._data[3*d+1]=u[g.CHAR_DATA_ATTR_INDEX],u[g.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[d]=u[1],this._data[3*d+0]=2097152|d|u[g.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*d+0]=u[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[g.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(d){return this._data[3*d+0]>>22}hasWidth(d){return 12582912&this._data[3*d+0]}getFg(d){return this._data[3*d+1]}getBg(d){return this._data[3*d+2]}hasContent(d){return 4194303&this._data[3*d+0]}getCodePoint(d){const u=this._data[3*d+0];return 2097152&u?this._combined[d].charCodeAt(this._combined[d].length-1):2097151&u}isCombined(d){return 2097152&this._data[3*d+0]}getString(d){const u=this._data[3*d+0];return 2097152&u?this._combined[d]:2097151&u?(0,v.stringFromCodePoint)(2097151&u):""}isProtected(d){return 536870912&this._data[3*d+2]}loadCell(d,u){return S=3*d,u.content=this._data[S+0],u.fg=this._data[S+1],u.bg=this._data[S+2],2097152&u.content&&(u.combinedData=this._combined[d]),268435456&u.bg&&(u.extended=this._extendedAttrs[d]),u}setCell(d,u){2097152&u.content&&(this._combined[d]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[d]=u.extended),this._data[3*d+0]=u.content,this._data[3*d+1]=u.fg,this._data[3*d+2]=u.bg}setCellFromCodePoint(d,u,c,h,x,_){268435456&x&&(this._extendedAttrs[d]=_),this._data[3*d+0]=u|c<<22,this._data[3*d+1]=h,this._data[3*d+2]=x}addCodepointToCell(d,u){let c=this._data[3*d+0];2097152&c?this._combined[d]+=(0,v.stringFromCodePoint)(u):(2097151&c?(this._combined[d]=(0,v.stringFromCodePoint)(2097151&c)+(0,v.stringFromCodePoint)(u),c&=-2097152,c|=2097152):c=u|4194304,this._data[3*d+0]=c)}insertCells(d,u,c,h){if((d%=this.length)&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs),u<this.length-d){const x=new p.CellData;for(let _=this.length-d-u-1;_>=0;--_)this.setCell(d+u+_,this.loadCell(d+_,x));for(let _=0;_<u;++_)this.setCell(d+_,c)}else for(let x=d;x<this.length;++x)this.setCell(x,c);this.getWidth(this.length-1)===2&&this.setCellFromCodePoint(this.length-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs)}deleteCells(d,u,c,h){if(d%=this.length,u<this.length-d){const x=new p.CellData;for(let _=0;_<this.length-d-u;++_)this.setCell(d+_,this.loadCell(d+u+_,x));for(let _=this.length-u;_<this.length;++_)this.setCell(_,c)}else for(let x=d;x<this.length;++x)this.setCell(x,c);d&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs),this.getWidth(d)!==0||this.hasContent(d)||this.setCellFromCodePoint(d,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs)}replaceCells(d,u,c,h,x=!1){if(x)for(d&&this.getWidth(d-1)===2&&!this.isProtected(d-1)&&this.setCellFromCodePoint(d-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&!this.isProtected(u)&&this.setCellFromCodePoint(u,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs);d<u&&d<this.length;)this.isProtected(d)||this.setCell(d,c),d++;else for(d&&this.getWidth(d-1)===2&&this.setCellFromCodePoint(d-1,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs),u<this.length&&this.getWidth(u-1)===2&&this.setCellFromCodePoint(u,0,1,(h==null?void 0:h.fg)||0,(h==null?void 0:h.bg)||0,(h==null?void 0:h.extended)||new m.ExtendedAttrs);d<u&&d<this.length;)this.setCell(d++,c)}resize(d,u){if(d===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const c=3*d;if(d>this.length){if(this._data.buffer.byteLength>=4*c)this._data=new Uint32Array(this._data.buffer,0,c);else{const h=new Uint32Array(c);h.set(this._data),this._data=h}for(let h=this.length;h<d;++h)this.setCell(h,u)}else{this._data=this._data.subarray(0,c);const h=Object.keys(this._combined);for(let _=0;_<h.length;_++){const k=parseInt(h[_],10);k>=d&&delete this._combined[k]}const x=Object.keys(this._extendedAttrs);for(let _=0;_<x.length;_++){const k=parseInt(x[_],10);k>=d&&delete this._extendedAttrs[k]}}return this.length=d,4*c*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const d=new Uint32Array(this._data.length);return d.set(this._data),this._data=d,1}return 0}fill(d,u=!1){if(u)for(let c=0;c<this.length;++c)this.isProtected(c)||this.setCell(c,d);else{this._combined={},this._extendedAttrs={};for(let c=0;c<this.length;++c)this.setCell(c,d)}}copyFrom(d){this.length!==d.length?this._data=new Uint32Array(d._data):this._data.set(d._data),this.length=d.length,this._combined={};for(const u in d._combined)this._combined[u]=d._combined[u];this._extendedAttrs={};for(const u in d._extendedAttrs)this._extendedAttrs[u]=d._extendedAttrs[u];this.isWrapped=d.isWrapped}clone(){const d=new w(0);d._data=new Uint32Array(this._data),d.length=this.length;for(const u in this._combined)d._combined[u]=this._combined[u];for(const u in this._extendedAttrs)d._extendedAttrs[u]=this._extendedAttrs[u];return d.isWrapped=this.isWrapped,d}getTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0])return d+(this._data[3*d+0]>>22);return 0}getNoBgTrimmedLength(){for(let d=this.length-1;d>=0;--d)if(4194303&this._data[3*d+0]||50331648&this._data[3*d+2])return d+(this._data[3*d+0]>>22);return 0}copyCellsFrom(d,u,c,h,x){const _=d._data;if(x)for(let j=h-1;j>=0;j--){for(let b=0;b<3;b++)this._data[3*(c+j)+b]=_[3*(u+j)+b];268435456&_[3*(u+j)+2]&&(this._extendedAttrs[c+j]=d._extendedAttrs[u+j])}else for(let j=0;j<h;j++){for(let b=0;b<3;b++)this._data[3*(c+j)+b]=_[3*(u+j)+b];268435456&_[3*(u+j)+2]&&(this._extendedAttrs[c+j]=d._extendedAttrs[u+j])}const k=Object.keys(d._combined);for(let j=0;j<k.length;j++){const b=parseInt(k[j],10);b>=u&&(this._combined[b-u+c]=d._combined[b])}}translateToString(d=!1,u=0,c=this.length){d&&(c=Math.min(c,this.getTrimmedLength()));let h="";for(;u<c;){const x=this._data[3*u+0],_=2097151&x;h+=2097152&x?this._combined[u]:_?(0,v.stringFromCodePoint)(_):g.WHITESPACE_CELL_CHAR,u+=x>>22||1}return h}}a.BufferLine=w},4841:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.getRangeLength=void 0,a.getRangeLength=function(o,m){if(o.start.y>o.end.y)throw new Error(`Buffer range end (${o.end.x}, ${o.end.y}) cannot be before start (${o.start.x}, ${o.start.y})`);return m*(o.end.y-o.start.y)+(o.end.x-o.start.x+1)}},4634:(f,a)=>{function o(m,p,g){if(p===m.length-1)return m[p].getTrimmedLength();const v=!m[p].hasContent(g-1)&&m[p].getWidth(g-1)===1,S=m[p+1].getWidth(0)===2;return v&&S?g-1:g}Object.defineProperty(a,"__esModule",{value:!0}),a.getWrappedLineTrimmedLength=a.reflowSmallerGetNewLineLengths=a.reflowLargerApplyNewLayout=a.reflowLargerCreateNewLayout=a.reflowLargerGetLinesToRemove=void 0,a.reflowLargerGetLinesToRemove=function(m,p,g,v,S){const w=[];for(let y=0;y<m.length-1;y++){let d=y,u=m.get(++d);if(!u.isWrapped)continue;const c=[m.get(y)];for(;d<m.length&&u.isWrapped;)c.push(u),u=m.get(++d);if(v>=y&&v<d){y+=c.length-1;continue}let h=0,x=o(c,h,p),_=1,k=0;for(;_<c.length;){const b=o(c,_,p),C=b-k,M=g-x,L=Math.min(C,M);c[h].copyCellsFrom(c[_],k,x,L,!1),x+=L,x===g&&(h++,x=0),k+=L,k===b&&(_++,k=0),x===0&&h!==0&&c[h-1].getWidth(g-1)===2&&(c[h].copyCellsFrom(c[h-1],g-1,x++,1,!1),c[h-1].setCell(g-1,S))}c[h].replaceCells(x,g,S);let j=0;for(let b=c.length-1;b>0&&(b>h||c[b].getTrimmedLength()===0);b--)j++;j>0&&(w.push(y+c.length-j),w.push(j)),y+=c.length-1}return w},a.reflowLargerCreateNewLayout=function(m,p){const g=[];let v=0,S=p[v],w=0;for(let y=0;y<m.length;y++)if(S===y){const d=p[++v];m.onDeleteEmitter.fire({index:y-w,amount:d}),y+=d-1,w+=d,S=p[++v]}else g.push(y);return{layout:g,countRemoved:w}},a.reflowLargerApplyNewLayout=function(m,p){const g=[];for(let v=0;v<p.length;v++)g.push(m.get(p[v]));for(let v=0;v<g.length;v++)m.set(v,g[v]);m.length=p.length},a.reflowSmallerGetNewLineLengths=function(m,p,g){const v=[],S=m.map((u,c)=>o(m,c,p)).reduce((u,c)=>u+c);let w=0,y=0,d=0;for(;d<S;){if(S-d<g){v.push(S-d);break}w+=g;const u=o(m,y,p);w>u&&(w-=u,y++);const c=m[y].getWidth(w-1)===2;c&&w--;const h=c?g-1:g;v.push(h),d+=h}return v},a.getWrappedLineTrimmedLength=o},5295:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferSet=void 0;const m=o(8460),p=o(844),g=o(9092);class v extends p.Disposable{constructor(w,y){super(),this._optionsService=w,this._bufferService=y,this._onBufferActivate=this.register(new m.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",()=>this.resize(this._bufferService.cols,this._bufferService.rows))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",()=>this.setupTabStops()))}reset(){this._normal=new g.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new g.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(w){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(w),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(w,y){this._normal.resize(w,y),this._alt.resize(w,y),this.setupTabStops(w)}setupTabStops(w){this._normal.setupTabStops(w),this._alt.setupTabStops(w)}}a.BufferSet=v},511:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CellData=void 0;const m=o(482),p=o(643),g=o(3734);class v extends g.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new g.ExtendedAttrs,this.combinedData=""}static fromCharData(w){const y=new v;return y.setFromCharData(w),y}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,m.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(w){this.fg=w[p.CHAR_DATA_ATTR_INDEX],this.bg=0;let y=!1;if(w[p.CHAR_DATA_CHAR_INDEX].length>2)y=!0;else if(w[p.CHAR_DATA_CHAR_INDEX].length===2){const d=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=d&&d<=56319){const u=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=u&&u<=57343?this.content=1024*(d-55296)+u-56320+65536|w[p.CHAR_DATA_WIDTH_INDEX]<<22:y=!0}else y=!0}else this.content=w[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|w[p.CHAR_DATA_WIDTH_INDEX]<<22;y&&(this.combinedData=w[p.CHAR_DATA_CHAR_INDEX],this.content=2097152|w[p.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}a.CellData=v},643:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WHITESPACE_CELL_CODE=a.WHITESPACE_CELL_WIDTH=a.WHITESPACE_CELL_CHAR=a.NULL_CELL_CODE=a.NULL_CELL_WIDTH=a.NULL_CELL_CHAR=a.CHAR_DATA_CODE_INDEX=a.CHAR_DATA_WIDTH_INDEX=a.CHAR_DATA_CHAR_INDEX=a.CHAR_DATA_ATTR_INDEX=a.DEFAULT_EXT=a.DEFAULT_ATTR=a.DEFAULT_COLOR=void 0,a.DEFAULT_COLOR=0,a.DEFAULT_ATTR=256|a.DEFAULT_COLOR<<9,a.DEFAULT_EXT=0,a.CHAR_DATA_ATTR_INDEX=0,a.CHAR_DATA_CHAR_INDEX=1,a.CHAR_DATA_WIDTH_INDEX=2,a.CHAR_DATA_CODE_INDEX=3,a.NULL_CELL_CHAR="",a.NULL_CELL_WIDTH=1,a.NULL_CELL_CODE=0,a.WHITESPACE_CELL_CHAR=" ",a.WHITESPACE_CELL_WIDTH=1,a.WHITESPACE_CELL_CODE=32},4863:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Marker=void 0;const m=o(8460),p=o(844);class g{get id(){return this._id}constructor(S){this.line=S,this.isDisposed=!1,this._disposables=[],this._id=g._nextId++,this._onDispose=this.register(new m.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,p.disposeArray)(this._disposables),this._disposables.length=0)}register(S){return this._disposables.push(S),S}}a.Marker=g,g._nextId=1},7116:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DEFAULT_CHARSET=a.CHARSETS=void 0,a.CHARSETS={},a.DEFAULT_CHARSET=a.CHARSETS.B,a.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},a.CHARSETS.A={"#":""},a.CHARSETS.B=void 0,a.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},a.CHARSETS.C=a.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},a.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.E=a.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},a.CHARSETS.H=a.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},a.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(f,a)=>{var o,m,p;Object.defineProperty(a,"__esModule",{value:!0}),a.C1_ESCAPED=a.C1=a.C0=void 0,function(g){g.NUL="\0",g.SOH="",g.STX="",g.ETX="",g.EOT="",g.ENQ="",g.ACK="",g.BEL="\x07",g.BS="\b",g.HT="	",g.LF=`
`,g.VT="\v",g.FF="\f",g.CR="\r",g.SO="",g.SI="",g.DLE="",g.DC1="",g.DC2="",g.DC3="",g.DC4="",g.NAK="",g.SYN="",g.ETB="",g.CAN="",g.EM="",g.SUB="",g.ESC="\x1B",g.FS="",g.GS="",g.RS="",g.US="",g.SP=" ",g.DEL=""}(o||(a.C0=o={})),function(g){g.PAD="",g.HOP="",g.BPH="",g.NBH="",g.IND="",g.NEL="",g.SSA="",g.ESA="",g.HTS="",g.HTJ="",g.VTS="",g.PLD="",g.PLU="",g.RI="",g.SS2="",g.SS3="",g.DCS="",g.PU1="",g.PU2="",g.STS="",g.CCH="",g.MW="",g.SPA="",g.EPA="",g.SOS="",g.SGCI="",g.SCI="",g.CSI="",g.ST="",g.OSC="",g.PM="",g.APC=""}(m||(a.C1=m={})),function(g){g.ST=`${o.ESC}\\`}(p||(a.C1_ESCAPED=p={}))},7399:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.evaluateKeyboardEvent=void 0;const m=o(2584),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};a.evaluateKeyboardEvent=function(g,v,S,w){const y={type:0,cancel:!1,key:void 0},d=(g.shiftKey?1:0)|(g.altKey?2:0)|(g.ctrlKey?4:0)|(g.metaKey?8:0);switch(g.keyCode){case 0:g.key==="UIKeyInputUpArrow"?y.key=v?m.C0.ESC+"OA":m.C0.ESC+"[A":g.key==="UIKeyInputLeftArrow"?y.key=v?m.C0.ESC+"OD":m.C0.ESC+"[D":g.key==="UIKeyInputRightArrow"?y.key=v?m.C0.ESC+"OC":m.C0.ESC+"[C":g.key==="UIKeyInputDownArrow"&&(y.key=v?m.C0.ESC+"OB":m.C0.ESC+"[B");break;case 8:if(g.altKey){y.key=m.C0.ESC+m.C0.DEL;break}y.key=m.C0.DEL;break;case 9:if(g.shiftKey){y.key=m.C0.ESC+"[Z";break}y.key=m.C0.HT,y.cancel=!0;break;case 13:y.key=g.altKey?m.C0.ESC+m.C0.CR:m.C0.CR,y.cancel=!0;break;case 27:y.key=m.C0.ESC,g.altKey&&(y.key=m.C0.ESC+m.C0.ESC),y.cancel=!0;break;case 37:if(g.metaKey)break;d?(y.key=m.C0.ESC+"[1;"+(d+1)+"D",y.key===m.C0.ESC+"[1;3D"&&(y.key=m.C0.ESC+(S?"b":"[1;5D"))):y.key=v?m.C0.ESC+"OD":m.C0.ESC+"[D";break;case 39:if(g.metaKey)break;d?(y.key=m.C0.ESC+"[1;"+(d+1)+"C",y.key===m.C0.ESC+"[1;3C"&&(y.key=m.C0.ESC+(S?"f":"[1;5C"))):y.key=v?m.C0.ESC+"OC":m.C0.ESC+"[C";break;case 38:if(g.metaKey)break;d?(y.key=m.C0.ESC+"[1;"+(d+1)+"A",S||y.key!==m.C0.ESC+"[1;3A"||(y.key=m.C0.ESC+"[1;5A")):y.key=v?m.C0.ESC+"OA":m.C0.ESC+"[A";break;case 40:if(g.metaKey)break;d?(y.key=m.C0.ESC+"[1;"+(d+1)+"B",S||y.key!==m.C0.ESC+"[1;3B"||(y.key=m.C0.ESC+"[1;5B")):y.key=v?m.C0.ESC+"OB":m.C0.ESC+"[B";break;case 45:g.shiftKey||g.ctrlKey||(y.key=m.C0.ESC+"[2~");break;case 46:y.key=d?m.C0.ESC+"[3;"+(d+1)+"~":m.C0.ESC+"[3~";break;case 36:y.key=d?m.C0.ESC+"[1;"+(d+1)+"H":v?m.C0.ESC+"OH":m.C0.ESC+"[H";break;case 35:y.key=d?m.C0.ESC+"[1;"+(d+1)+"F":v?m.C0.ESC+"OF":m.C0.ESC+"[F";break;case 33:g.shiftKey?y.type=2:g.ctrlKey?y.key=m.C0.ESC+"[5;"+(d+1)+"~":y.key=m.C0.ESC+"[5~";break;case 34:g.shiftKey?y.type=3:g.ctrlKey?y.key=m.C0.ESC+"[6;"+(d+1)+"~":y.key=m.C0.ESC+"[6~";break;case 112:y.key=d?m.C0.ESC+"[1;"+(d+1)+"P":m.C0.ESC+"OP";break;case 113:y.key=d?m.C0.ESC+"[1;"+(d+1)+"Q":m.C0.ESC+"OQ";break;case 114:y.key=d?m.C0.ESC+"[1;"+(d+1)+"R":m.C0.ESC+"OR";break;case 115:y.key=d?m.C0.ESC+"[1;"+(d+1)+"S":m.C0.ESC+"OS";break;case 116:y.key=d?m.C0.ESC+"[15;"+(d+1)+"~":m.C0.ESC+"[15~";break;case 117:y.key=d?m.C0.ESC+"[17;"+(d+1)+"~":m.C0.ESC+"[17~";break;case 118:y.key=d?m.C0.ESC+"[18;"+(d+1)+"~":m.C0.ESC+"[18~";break;case 119:y.key=d?m.C0.ESC+"[19;"+(d+1)+"~":m.C0.ESC+"[19~";break;case 120:y.key=d?m.C0.ESC+"[20;"+(d+1)+"~":m.C0.ESC+"[20~";break;case 121:y.key=d?m.C0.ESC+"[21;"+(d+1)+"~":m.C0.ESC+"[21~";break;case 122:y.key=d?m.C0.ESC+"[23;"+(d+1)+"~":m.C0.ESC+"[23~";break;case 123:y.key=d?m.C0.ESC+"[24;"+(d+1)+"~":m.C0.ESC+"[24~";break;default:if(!g.ctrlKey||g.shiftKey||g.altKey||g.metaKey)if(S&&!w||!g.altKey||g.metaKey)!S||g.altKey||g.ctrlKey||g.shiftKey||!g.metaKey?g.key&&!g.ctrlKey&&!g.altKey&&!g.metaKey&&g.keyCode>=48&&g.key.length===1?y.key=g.key:g.key&&g.ctrlKey&&(g.key==="_"&&(y.key=m.C0.US),g.key==="@"&&(y.key=m.C0.NUL)):g.keyCode===65&&(y.type=1);else{const u=p[g.keyCode],c=u==null?void 0:u[g.shiftKey?1:0];if(c)y.key=m.C0.ESC+c;else if(g.keyCode>=65&&g.keyCode<=90){const h=g.ctrlKey?g.keyCode-64:g.keyCode+32;let x=String.fromCharCode(h);g.shiftKey&&(x=x.toUpperCase()),y.key=m.C0.ESC+x}else if(g.keyCode===32)y.key=m.C0.ESC+(g.ctrlKey?m.C0.NUL:" ");else if(g.key==="Dead"&&g.code.startsWith("Key")){let h=g.code.slice(3,4);g.shiftKey||(h=h.toLowerCase()),y.key=m.C0.ESC+h,y.cancel=!0}}else g.keyCode>=65&&g.keyCode<=90?y.key=String.fromCharCode(g.keyCode-64):g.keyCode===32?y.key=m.C0.NUL:g.keyCode>=51&&g.keyCode<=55?y.key=String.fromCharCode(g.keyCode-51+27):g.keyCode===56?y.key=m.C0.DEL:g.keyCode===219?y.key=m.C0.ESC:g.keyCode===220?y.key=m.C0.FS:g.keyCode===221&&(y.key=m.C0.GS)}return y}},482:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Utf8ToUtf32=a.StringToUtf32=a.utf32ToString=a.stringFromCodePoint=void 0,a.stringFromCodePoint=function(o){return o>65535?(o-=65536,String.fromCharCode(55296+(o>>10))+String.fromCharCode(o%1024+56320)):String.fromCharCode(o)},a.utf32ToString=function(o,m=0,p=o.length){let g="";for(let v=m;v<p;++v){let S=o[v];S>65535?(S-=65536,g+=String.fromCharCode(55296+(S>>10))+String.fromCharCode(S%1024+56320)):g+=String.fromCharCode(S)}return g},a.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(o,m){const p=o.length;if(!p)return 0;let g=0,v=0;if(this._interim){const S=o.charCodeAt(v++);56320<=S&&S<=57343?m[g++]=1024*(this._interim-55296)+S-56320+65536:(m[g++]=this._interim,m[g++]=S),this._interim=0}for(let S=v;S<p;++S){const w=o.charCodeAt(S);if(55296<=w&&w<=56319){if(++S>=p)return this._interim=w,g;const y=o.charCodeAt(S);56320<=y&&y<=57343?m[g++]=1024*(w-55296)+y-56320+65536:(m[g++]=w,m[g++]=y)}else w!==65279&&(m[g++]=w)}return g}},a.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(o,m){const p=o.length;if(!p)return 0;let g,v,S,w,y=0,d=0,u=0;if(this.interim[0]){let x=!1,_=this.interim[0];_&=(224&_)==192?31:(240&_)==224?15:7;let k,j=0;for(;(k=63&this.interim[++j])&&j<4;)_<<=6,_|=k;const b=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,C=b-j;for(;u<C;){if(u>=p)return 0;if(k=o[u++],(192&k)!=128){u--,x=!0;break}this.interim[j++]=k,_<<=6,_|=63&k}x||(b===2?_<128?u--:m[y++]=_:b===3?_<2048||_>=55296&&_<=57343||_===65279||(m[y++]=_):_<65536||_>1114111||(m[y++]=_)),this.interim.fill(0)}const c=p-4;let h=u;for(;h<p;){for(;!(!(h<c)||128&(g=o[h])||128&(v=o[h+1])||128&(S=o[h+2])||128&(w=o[h+3]));)m[y++]=g,m[y++]=v,m[y++]=S,m[y++]=w,h+=4;if(g=o[h++],g<128)m[y++]=g;else if((224&g)==192){if(h>=p)return this.interim[0]=g,y;if(v=o[h++],(192&v)!=128){h--;continue}if(d=(31&g)<<6|63&v,d<128){h--;continue}m[y++]=d}else if((240&g)==224){if(h>=p)return this.interim[0]=g,y;if(v=o[h++],(192&v)!=128){h--;continue}if(h>=p)return this.interim[0]=g,this.interim[1]=v,y;if(S=o[h++],(192&S)!=128){h--;continue}if(d=(15&g)<<12|(63&v)<<6|63&S,d<2048||d>=55296&&d<=57343||d===65279)continue;m[y++]=d}else if((248&g)==240){if(h>=p)return this.interim[0]=g,y;if(v=o[h++],(192&v)!=128){h--;continue}if(h>=p)return this.interim[0]=g,this.interim[1]=v,y;if(S=o[h++],(192&S)!=128){h--;continue}if(h>=p)return this.interim[0]=g,this.interim[1]=v,this.interim[2]=S,y;if(w=o[h++],(192&w)!=128){h--;continue}if(d=(7&g)<<18|(63&v)<<12|(63&S)<<6|63&w,d<65536||d>1114111)continue;m[y++]=d}}return y}}},225:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeV6=void 0;const o=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],m=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let p;a.UnicodeV6=class{constructor(){if(this.version="6",!p){p=new Uint8Array(65536),p.fill(1),p[0]=0,p.fill(0,1,32),p.fill(0,127,160),p.fill(2,4352,4448),p[9001]=2,p[9002]=2,p.fill(2,11904,42192),p[12351]=1,p.fill(2,44032,55204),p.fill(2,63744,64256),p.fill(2,65040,65050),p.fill(2,65072,65136),p.fill(2,65280,65377),p.fill(2,65504,65511);for(let g=0;g<o.length;++g)p.fill(0,o[g][0],o[g][1]+1)}}wcwidth(g){return g<32?0:g<127?1:g<65536?p[g]:function(v,S){let w,y=0,d=S.length-1;if(v<S[0][0]||v>S[d][1])return!1;for(;d>=y;)if(w=y+d>>1,v>S[w][1])y=w+1;else{if(!(v<S[w][0]))return!0;d=w-1}return!1}(g,m)?0:g>=131072&&g<=196605||g>=196608&&g<=262141?2:1}}},5981:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.WriteBuffer=void 0;const m=o(8460),p=o(844);class g extends p.Disposable{constructor(S){super(),this._action=S,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new m.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(S,w){if(w!==void 0&&this._syncCalls>w)return void(this._syncCalls=0);if(this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let y;for(this._isSyncWriting=!0;y=this._writeBuffer.shift();){this._action(y);const d=this._callbacks.shift();d&&d()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(S,w){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(w),void this._innerWrite();setTimeout(()=>this._innerWrite())}this._pendingData+=S.length,this._writeBuffer.push(S),this._callbacks.push(w)}_innerWrite(S=0,w=!0){const y=S||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const d=this._writeBuffer[this._bufferOffset],u=this._action(d,w);if(u){const h=x=>Date.now()-y>=12?setTimeout(()=>this._innerWrite(0,x)):this._innerWrite(y,x);return void u.catch(x=>(queueMicrotask(()=>{throw x}),Promise.resolve(!1))).then(h)}const c=this._callbacks[this._bufferOffset];if(c&&c(),this._bufferOffset++,this._pendingData-=d.length,Date.now()-y>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout(()=>this._innerWrite())):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}a.WriteBuffer=g},5941:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.toRgbString=a.parseColor=void 0;const o=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,m=/^[\da-f]+$/;function p(g,v){const S=g.toString(16),w=S.length<2?"0"+S:S;switch(v){case 4:return S[0];case 8:return w;case 12:return(w+w).slice(0,3);default:return w+w}}a.parseColor=function(g){if(!g)return;let v=g.toLowerCase();if(v.indexOf("rgb:")===0){v=v.slice(4);const S=o.exec(v);if(S){const w=S[1]?15:S[4]?255:S[7]?4095:65535;return[Math.round(parseInt(S[1]||S[4]||S[7]||S[10],16)/w*255),Math.round(parseInt(S[2]||S[5]||S[8]||S[11],16)/w*255),Math.round(parseInt(S[3]||S[6]||S[9]||S[12],16)/w*255)]}}else if(v.indexOf("#")===0&&(v=v.slice(1),m.exec(v)&&[3,6,9,12].includes(v.length))){const S=v.length/3,w=[0,0,0];for(let y=0;y<3;++y){const d=parseInt(v.slice(S*y,S*y+S),16);w[y]=S===1?d<<4:S===2?d:S===3?d>>4:d>>8}return w}},a.toRgbString=function(g,v=16){const[S,w,y]=g;return`rgb:${p(S,v)}/${p(w,v)}/${p(y,v)}`}},5770:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.PAYLOAD_LIMIT=void 0,a.PAYLOAD_LIMIT=1e7},6351:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DcsHandler=a.DcsParser=void 0;const m=o(482),p=o(8742),g=o(5770),v=[];a.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=v,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=v}registerHandler(w,y){this._handlers[w]===void 0&&(this._handlers[w]=[]);const d=this._handlers[w];return d.push(y),{dispose:()=>{const u=d.indexOf(y);u!==-1&&d.splice(u,1)}}}clearHandler(w){this._handlers[w]&&delete this._handlers[w]}setHandlerFallback(w){this._handlerFb=w}reset(){if(this._active.length)for(let w=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;w>=0;--w)this._active[w].unhook(!1);this._stack.paused=!1,this._active=v,this._ident=0}hook(w,y){if(this.reset(),this._ident=w,this._active=this._handlers[w]||v,this._active.length)for(let d=this._active.length-1;d>=0;d--)this._active[d].hook(y);else this._handlerFb(this._ident,"HOOK",y)}put(w,y,d){if(this._active.length)for(let u=this._active.length-1;u>=0;u--)this._active[u].put(w,y,d);else this._handlerFb(this._ident,"PUT",(0,m.utf32ToString)(w,y,d))}unhook(w,y=!0){if(this._active.length){let d=!1,u=this._active.length-1,c=!1;if(this._stack.paused&&(u=this._stack.loopPosition-1,d=y,c=this._stack.fallThrough,this._stack.paused=!1),!c&&d===!1){for(;u>=0&&(d=this._active[u].unhook(w),d!==!0);u--)if(d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!1,d;u--}for(;u>=0;u--)if(d=this._active[u].unhook(!1),d instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=u,this._stack.fallThrough=!0,d}else this._handlerFb(this._ident,"UNHOOK",w);this._active=v,this._ident=0}};const S=new p.Params;S.addParam(0),a.DcsHandler=class{constructor(w){this._handler=w,this._data="",this._params=S,this._hitLimit=!1}hook(w){this._params=w.length>1||w.params[0]?w.clone():S,this._data="",this._hitLimit=!1}put(w,y,d){this._hitLimit||(this._data+=(0,m.utf32ToString)(w,y,d),this._data.length>g.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(w){let y=!1;if(this._hitLimit)y=!1;else if(w&&(y=this._handler(this._data,this._params),y instanceof Promise))return y.then(d=>(this._params=S,this._data="",this._hitLimit=!1,d));return this._params=S,this._data="",this._hitLimit=!1,y}}},2015:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.EscapeSequenceParser=a.VT500_TRANSITION_TABLE=a.TransitionTable=void 0;const m=o(844),p=o(8742),g=o(6242),v=o(6351);class S{constructor(u){this.table=new Uint8Array(u)}setDefault(u,c){this.table.fill(u<<4|c)}add(u,c,h,x){this.table[c<<8|u]=h<<4|x}addMany(u,c,h,x){for(let _=0;_<u.length;_++)this.table[c<<8|u[_]]=h<<4|x}}a.TransitionTable=S;const w=160;a.VT500_TRANSITION_TABLE=function(){const d=new S(4095),u=Array.apply(null,Array(256)).map((j,b)=>b),c=(j,b)=>u.slice(j,b),h=c(32,127),x=c(0,24);x.push(25),x.push.apply(x,c(28,32));const _=c(0,14);let k;for(k in d.setDefault(1,0),d.addMany(h,0,2,0),_)d.addMany([24,26,153,154],k,3,0),d.addMany(c(128,144),k,3,0),d.addMany(c(144,152),k,3,0),d.add(156,k,0,0),d.add(27,k,11,1),d.add(157,k,4,8),d.addMany([152,158,159],k,0,7),d.add(155,k,11,3),d.add(144,k,11,9);return d.addMany(x,0,3,0),d.addMany(x,1,3,1),d.add(127,1,0,1),d.addMany(x,8,0,8),d.addMany(x,3,3,3),d.add(127,3,0,3),d.addMany(x,4,3,4),d.add(127,4,0,4),d.addMany(x,6,3,6),d.addMany(x,5,3,5),d.add(127,5,0,5),d.addMany(x,2,3,2),d.add(127,2,0,2),d.add(93,1,4,8),d.addMany(h,8,5,8),d.add(127,8,5,8),d.addMany([156,27,24,26,7],8,6,0),d.addMany(c(28,32),8,0,8),d.addMany([88,94,95],1,0,7),d.addMany(h,7,0,7),d.addMany(x,7,0,7),d.add(156,7,0,0),d.add(127,7,0,7),d.add(91,1,11,3),d.addMany(c(64,127),3,7,0),d.addMany(c(48,60),3,8,4),d.addMany([60,61,62,63],3,9,4),d.addMany(c(48,60),4,8,4),d.addMany(c(64,127),4,7,0),d.addMany([60,61,62,63],4,0,6),d.addMany(c(32,64),6,0,6),d.add(127,6,0,6),d.addMany(c(64,127),6,0,0),d.addMany(c(32,48),3,9,5),d.addMany(c(32,48),5,9,5),d.addMany(c(48,64),5,0,6),d.addMany(c(64,127),5,7,0),d.addMany(c(32,48),4,9,5),d.addMany(c(32,48),1,9,2),d.addMany(c(32,48),2,9,2),d.addMany(c(48,127),2,10,0),d.addMany(c(48,80),1,10,0),d.addMany(c(81,88),1,10,0),d.addMany([89,90,92],1,10,0),d.addMany(c(96,127),1,10,0),d.add(80,1,11,9),d.addMany(x,9,0,9),d.add(127,9,0,9),d.addMany(c(28,32),9,0,9),d.addMany(c(32,48),9,9,12),d.addMany(c(48,60),9,8,10),d.addMany([60,61,62,63],9,9,10),d.addMany(x,11,0,11),d.addMany(c(32,128),11,0,11),d.addMany(c(28,32),11,0,11),d.addMany(x,10,0,10),d.add(127,10,0,10),d.addMany(c(28,32),10,0,10),d.addMany(c(48,60),10,8,10),d.addMany([60,61,62,63],10,0,11),d.addMany(c(32,48),10,9,12),d.addMany(x,12,0,12),d.add(127,12,0,12),d.addMany(c(28,32),12,0,12),d.addMany(c(32,48),12,9,12),d.addMany(c(48,64),12,0,11),d.addMany(c(64,127),12,12,13),d.addMany(c(64,127),10,12,13),d.addMany(c(64,127),9,12,13),d.addMany(x,13,13,13),d.addMany(h,13,13,13),d.add(127,13,0,13),d.addMany([27,156,24,26],13,14,0),d.add(w,0,2,0),d.add(w,8,5,8),d.add(w,6,0,6),d.add(w,11,0,11),d.add(w,13,13,13),d}();class y extends m.Disposable{constructor(u=a.VT500_TRANSITION_TABLE){super(),this._transitions=u,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new p.Params,this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._printHandlerFb=(c,h,x)=>{},this._executeHandlerFb=c=>{},this._csiHandlerFb=(c,h)=>{},this._escHandlerFb=c=>{},this._errorHandlerFb=c=>c,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,m.toDisposable)(()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)})),this._oscParser=this.register(new g.OscParser),this._dcsParser=this.register(new v.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},()=>!0)}_identifier(u,c=[64,126]){let h=0;if(u.prefix){if(u.prefix.length>1)throw new Error("only one byte as prefix supported");if(h=u.prefix.charCodeAt(0),h&&60>h||h>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(u.intermediates){if(u.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let _=0;_<u.intermediates.length;++_){const k=u.intermediates.charCodeAt(_);if(32>k||k>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");h<<=8,h|=k}}if(u.final.length!==1)throw new Error("final must be a single byte");const x=u.final.charCodeAt(0);if(c[0]>x||x>c[1])throw new Error(`final must be in range ${c[0]} .. ${c[1]}`);return h<<=8,h|=x,h}identToString(u){const c=[];for(;u;)c.push(String.fromCharCode(255&u)),u>>=8;return c.reverse().join("")}setPrintHandler(u){this._printHandler=u}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(u,c){const h=this._identifier(u,[48,126]);this._escHandlers[h]===void 0&&(this._escHandlers[h]=[]);const x=this._escHandlers[h];return x.push(c),{dispose:()=>{const _=x.indexOf(c);_!==-1&&x.splice(_,1)}}}clearEscHandler(u){this._escHandlers[this._identifier(u,[48,126])]&&delete this._escHandlers[this._identifier(u,[48,126])]}setEscHandlerFallback(u){this._escHandlerFb=u}setExecuteHandler(u,c){this._executeHandlers[u.charCodeAt(0)]=c}clearExecuteHandler(u){this._executeHandlers[u.charCodeAt(0)]&&delete this._executeHandlers[u.charCodeAt(0)]}setExecuteHandlerFallback(u){this._executeHandlerFb=u}registerCsiHandler(u,c){const h=this._identifier(u);this._csiHandlers[h]===void 0&&(this._csiHandlers[h]=[]);const x=this._csiHandlers[h];return x.push(c),{dispose:()=>{const _=x.indexOf(c);_!==-1&&x.splice(_,1)}}}clearCsiHandler(u){this._csiHandlers[this._identifier(u)]&&delete this._csiHandlers[this._identifier(u)]}setCsiHandlerFallback(u){this._csiHandlerFb=u}registerDcsHandler(u,c){return this._dcsParser.registerHandler(this._identifier(u),c)}clearDcsHandler(u){this._dcsParser.clearHandler(this._identifier(u))}setDcsHandlerFallback(u){this._dcsParser.setHandlerFallback(u)}registerOscHandler(u,c){return this._oscParser.registerHandler(u,c)}clearOscHandler(u){this._oscParser.clearHandler(u)}setOscHandlerFallback(u){this._oscParser.setHandlerFallback(u)}setErrorHandler(u){this._errorHandler=u}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(u,c,h,x,_){this._parseStack.state=u,this._parseStack.handlers=c,this._parseStack.handlerPos=h,this._parseStack.transition=x,this._parseStack.chunkPos=_}parse(u,c,h){let x,_=0,k=0,j=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,j=this._parseStack.chunkPos+1;else{if(h===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const b=this._parseStack.handlers;let C=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(h===!1&&C>-1){for(;C>=0&&(x=b[C](this._params),x!==!0);C--)if(x instanceof Promise)return this._parseStack.handlerPos=C,x}this._parseStack.handlers=[];break;case 4:if(h===!1&&C>-1){for(;C>=0&&(x=b[C](),x!==!0);C--)if(x instanceof Promise)return this._parseStack.handlerPos=C,x}this._parseStack.handlers=[];break;case 6:if(_=u[this._parseStack.chunkPos],x=this._dcsParser.unhook(_!==24&&_!==26,h),x)return x;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(_=u[this._parseStack.chunkPos],x=this._oscParser.end(_!==24&&_!==26,h),x)return x;_===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,j=this._parseStack.chunkPos+1,this.precedingCodepoint=0,this.currentState=15&this._parseStack.transition}for(let b=j;b<c;++b){switch(_=u[b],k=this._transitions.table[this.currentState<<8|(_<160?_:w)],k>>4){case 2:for(let D=b+1;;++D){if(D>=c||(_=u[D])<32||_>126&&_<w){this._printHandler(u,b,D),b=D-1;break}if(++D>=c||(_=u[D])<32||_>126&&_<w){this._printHandler(u,b,D),b=D-1;break}if(++D>=c||(_=u[D])<32||_>126&&_<w){this._printHandler(u,b,D),b=D-1;break}if(++D>=c||(_=u[D])<32||_>126&&_<w){this._printHandler(u,b,D),b=D-1;break}}break;case 3:this._executeHandlers[_]?this._executeHandlers[_]():this._executeHandlerFb(_),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:b,code:_,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const C=this._csiHandlers[this._collect<<8|_];let M=C?C.length-1:-1;for(;M>=0&&(x=C[M](this._params),x!==!0);M--)if(x instanceof Promise)return this._preserveStack(3,C,M,k,b),x;M<0&&this._csiHandlerFb(this._collect<<8|_,this._params),this.precedingCodepoint=0;break;case 8:do switch(_){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(_-48)}while(++b<c&&(_=u[b])>47&&_<60);b--;break;case 9:this._collect<<=8,this._collect|=_;break;case 10:const L=this._escHandlers[this._collect<<8|_];let P=L?L.length-1:-1;for(;P>=0&&(x=L[P](),x!==!0);P--)if(x instanceof Promise)return this._preserveStack(4,L,P,k,b),x;P<0&&this._escHandlerFb(this._collect<<8|_),this.precedingCodepoint=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|_,this._params);break;case 13:for(let D=b+1;;++D)if(D>=c||(_=u[D])===24||_===26||_===27||_>127&&_<w){this._dcsParser.put(u,b,D),b=D-1;break}break;case 14:if(x=this._dcsParser.unhook(_!==24&&_!==26),x)return this._preserveStack(6,[],0,k,b),x;_===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0;break;case 4:this._oscParser.start();break;case 5:for(let D=b+1;;D++)if(D>=c||(_=u[D])<32||_>127&&_<w){this._oscParser.put(u,b,D),b=D-1;break}break;case 6:if(x=this._oscParser.end(_!==24&&_!==26),x)return this._preserveStack(5,[],0,k,b),x;_===27&&(k|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0}this.currentState=15&k}}}a.EscapeSequenceParser=y},6242:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OscHandler=a.OscParser=void 0;const m=o(5770),p=o(482),g=[];a.OscParser=class{constructor(){this._state=0,this._active=g,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(v,S){this._handlers[v]===void 0&&(this._handlers[v]=[]);const w=this._handlers[v];return w.push(S),{dispose:()=>{const y=w.indexOf(S);y!==-1&&w.splice(y,1)}}}clearHandler(v){this._handlers[v]&&delete this._handlers[v]}setHandlerFallback(v){this._handlerFb=v}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=g}reset(){if(this._state===2)for(let v=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;v>=0;--v)this._active[v].end(!1);this._stack.paused=!1,this._active=g,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||g,this._active.length)for(let v=this._active.length-1;v>=0;v--)this._active[v].start();else this._handlerFb(this._id,"START")}_put(v,S,w){if(this._active.length)for(let y=this._active.length-1;y>=0;y--)this._active[y].put(v,S,w);else this._handlerFb(this._id,"PUT",(0,p.utf32ToString)(v,S,w))}start(){this.reset(),this._state=1}put(v,S,w){if(this._state!==3){if(this._state===1)for(;S<w;){const y=v[S++];if(y===59){this._state=2,this._start();break}if(y<48||57<y)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+y-48}this._state===2&&w-S>0&&this._put(v,S,w)}}end(v,S=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let w=!1,y=this._active.length-1,d=!1;if(this._stack.paused&&(y=this._stack.loopPosition-1,w=S,d=this._stack.fallThrough,this._stack.paused=!1),!d&&w===!1){for(;y>=0&&(w=this._active[y].end(v),w!==!0);y--)if(w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!1,w;y--}for(;y>=0;y--)if(w=this._active[y].end(!1),w instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=y,this._stack.fallThrough=!0,w}else this._handlerFb(this._id,"END",v);this._active=g,this._id=-1,this._state=0}}},a.OscHandler=class{constructor(v){this._handler=v,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(v,S,w){this._hitLimit||(this._data+=(0,p.utf32ToString)(v,S,w),this._data.length>m.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(v){let S=!1;if(this._hitLimit)S=!1;else if(v&&(S=this._handler(this._data),S instanceof Promise))return S.then(w=>(this._data="",this._hitLimit=!1,w));return this._data="",this._hitLimit=!1,S}}},8742:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.Params=void 0;const o=2147483647;class m{static fromArray(g){const v=new m;if(!g.length)return v;for(let S=Array.isArray(g[0])?1:0;S<g.length;++S){const w=g[S];if(Array.isArray(w))for(let y=0;y<w.length;++y)v.addSubParam(w[y]);else v.addParam(w)}return v}constructor(g=32,v=32){if(this.maxLength=g,this.maxSubParamsLength=v,v>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(g),this.length=0,this._subParams=new Int32Array(v),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(g),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const g=new m(this.maxLength,this.maxSubParamsLength);return g.params.set(this.params),g.length=this.length,g._subParams.set(this._subParams),g._subParamsLength=this._subParamsLength,g._subParamsIdx.set(this._subParamsIdx),g._rejectDigits=this._rejectDigits,g._rejectSubDigits=this._rejectSubDigits,g._digitIsSub=this._digitIsSub,g}toArray(){const g=[];for(let v=0;v<this.length;++v){g.push(this.params[v]);const S=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-S>0&&g.push(Array.prototype.slice.call(this._subParams,S,w))}return g}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(g){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=g>o?o:g}}addSubParam(g){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(g<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=g>o?o:g,this._subParamsIdx[this.length-1]++}}hasSubParams(g){return(255&this._subParamsIdx[g])-(this._subParamsIdx[g]>>8)>0}getSubParams(g){const v=this._subParamsIdx[g]>>8,S=255&this._subParamsIdx[g];return S-v>0?this._subParams.subarray(v,S):null}getSubParamsAll(){const g={};for(let v=0;v<this.length;++v){const S=this._subParamsIdx[v]>>8,w=255&this._subParamsIdx[v];w-S>0&&(g[v]=this._subParams.slice(S,w))}return g}addDigit(g){let v;if(this._rejectDigits||!(v=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const S=this._digitIsSub?this._subParams:this.params,w=S[v-1];S[v-1]=~w?Math.min(10*w+g,o):g}}a.Params=m},5741:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.AddonManager=void 0,a.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let o=this._addons.length-1;o>=0;o--)this._addons[o].instance.dispose()}loadAddon(o,m){const p={instance:m,dispose:m.dispose,isDisposed:!1};this._addons.push(p),m.dispose=()=>this._wrappedAddonDispose(p),m.activate(o)}_wrappedAddonDispose(o){if(o.isDisposed)return;let m=-1;for(let p=0;p<this._addons.length;p++)if(this._addons[p]===o){m=p;break}if(m===-1)throw new Error("Could not dispose an addon that has not been loaded");o.isDisposed=!0,o.dispose.apply(o.instance),this._addons.splice(m,1)}}},8771:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferApiView=void 0;const m=o(3785),p=o(511);a.BufferApiView=class{constructor(g,v){this._buffer=g,this.type=v}init(g){return this._buffer=g,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(g){const v=this._buffer.lines.get(g);if(v)return new m.BufferLineApiView(v)}getNullCell(){return new p.CellData}}},3785:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferLineApiView=void 0;const m=o(511);a.BufferLineApiView=class{constructor(p){this._line=p}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(p,g){if(!(p<0||p>=this._line.length))return g?(this._line.loadCell(p,g),g):this._line.loadCell(p,new m.CellData)}translateToString(p,g,v){return this._line.translateToString(p,g,v)}}},8285:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.BufferNamespaceApi=void 0;const m=o(8771),p=o(8460),g=o(844);class v extends g.Disposable{constructor(w){super(),this._core=w,this._onBufferChange=this.register(new p.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new m.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new m.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate(()=>this._onBufferChange.fire(this.active))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}a.BufferNamespaceApi=v},7975:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.ParserApi=void 0,a.ParserApi=class{constructor(o){this._core=o}registerCsiHandler(o,m){return this._core.registerCsiHandler(o,p=>m(p.toArray()))}addCsiHandler(o,m){return this.registerCsiHandler(o,m)}registerDcsHandler(o,m){return this._core.registerDcsHandler(o,(p,g)=>m(p,g.toArray()))}addDcsHandler(o,m){return this.registerDcsHandler(o,m)}registerEscHandler(o,m){return this._core.registerEscHandler(o,m)}addEscHandler(o,m){return this.registerEscHandler(o,m)}registerOscHandler(o,m){return this._core.registerOscHandler(o,m)}addOscHandler(o,m){return this.registerOscHandler(o,m)}}},7090:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeApi=void 0,a.UnicodeApi=class{constructor(o){this._core=o}register(o){this._core.unicodeService.register(o)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(o){this._core.unicodeService.activeVersion=o}}},744:function(f,a,o){var m=this&&this.__decorate||function(d,u,c,h){var x,_=arguments.length,k=_<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,c,h);else for(var j=d.length-1;j>=0;j--)(x=d[j])&&(k=(_<3?x(k):_>3?x(u,c,k):x(u,c))||k);return _>3&&k&&Object.defineProperty(u,c,k),k},p=this&&this.__param||function(d,u){return function(c,h){u(c,h,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.BufferService=a.MINIMUM_ROWS=a.MINIMUM_COLS=void 0;const g=o(8460),v=o(844),S=o(5295),w=o(2585);a.MINIMUM_COLS=2,a.MINIMUM_ROWS=1;let y=a.BufferService=class extends v.Disposable{get buffer(){return this.buffers.active}constructor(d){super(),this.isUserScrolling=!1,this._onResize=this.register(new g.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new g.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(d.rawOptions.cols||0,a.MINIMUM_COLS),this.rows=Math.max(d.rawOptions.rows||0,a.MINIMUM_ROWS),this.buffers=this.register(new S.BufferSet(d,this))}resize(d,u){this.cols=d,this.rows=u,this.buffers.resize(d,u),this._onResize.fire({cols:d,rows:u})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(d,u=!1){const c=this.buffer;let h;h=this._cachedBlankLine,h&&h.length===this.cols&&h.getFg(0)===d.fg&&h.getBg(0)===d.bg||(h=c.getBlankLine(d,u),this._cachedBlankLine=h),h.isWrapped=u;const x=c.ybase+c.scrollTop,_=c.ybase+c.scrollBottom;if(c.scrollTop===0){const k=c.lines.isFull;_===c.lines.length-1?k?c.lines.recycle().copyFrom(h):c.lines.push(h.clone()):c.lines.splice(_+1,0,h.clone()),k?this.isUserScrolling&&(c.ydisp=Math.max(c.ydisp-1,0)):(c.ybase++,this.isUserScrolling||c.ydisp++)}else{const k=_-x+1;c.lines.shiftElements(x+1,k-1,-1),c.lines.set(_,h.clone())}this.isUserScrolling||(c.ydisp=c.ybase),this._onScroll.fire(c.ydisp)}scrollLines(d,u,c){const h=this.buffer;if(d<0){if(h.ydisp===0)return;this.isUserScrolling=!0}else d+h.ydisp>=h.ybase&&(this.isUserScrolling=!1);const x=h.ydisp;h.ydisp=Math.max(Math.min(h.ydisp+d,h.ybase),0),x!==h.ydisp&&(u||this._onScroll.fire(h.ydisp))}};a.BufferService=y=m([p(0,w.IOptionsService)],y)},7994:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.CharsetService=void 0,a.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(o){this.glevel=o,this.charset=this._charsets[o]}setgCharset(o,m){this._charsets[o]=m,this.glevel===o&&(this.charset=m)}}},1753:function(f,a,o){var m=this&&this.__decorate||function(h,x,_,k){var j,b=arguments.length,C=b<3?x:k===null?k=Object.getOwnPropertyDescriptor(x,_):k;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")C=Reflect.decorate(h,x,_,k);else for(var M=h.length-1;M>=0;M--)(j=h[M])&&(C=(b<3?j(C):b>3?j(x,_,C):j(x,_))||C);return b>3&&C&&Object.defineProperty(x,_,C),C},p=this&&this.__param||function(h,x){return function(_,k){x(_,k,h)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreMouseService=void 0;const g=o(2585),v=o(8460),S=o(844),w={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:h=>h.button!==4&&h.action===1&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)},VT200:{events:19,restrict:h=>h.action!==32},DRAG:{events:23,restrict:h=>h.action!==32||h.button!==3},ANY:{events:31,restrict:h=>!0}};function y(h,x){let _=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return h.button===4?(_|=64,_|=h.action):(_|=3&h.button,4&h.button&&(_|=64),8&h.button&&(_|=128),h.action===32?_|=32:h.action!==0||x||(_|=3)),_}const d=String.fromCharCode,u={DEFAULT:h=>{const x=[y(h,!1)+32,h.col+32,h.row+32];return x[0]>255||x[1]>255||x[2]>255?"":`\x1B[M${d(x[0])}${d(x[1])}${d(x[2])}`},SGR:h=>{const x=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${y(h,!0)};${h.col};${h.row}${x}`},SGR_PIXELS:h=>{const x=h.action===0&&h.button!==4?"m":"M";return`\x1B[<${y(h,!0)};${h.x};${h.y}${x}`}};let c=a.CoreMouseService=class extends S.Disposable{constructor(h,x){super(),this._bufferService=h,this._coreService=x,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new v.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const _ of Object.keys(w))this.addProtocol(_,w[_]);for(const _ of Object.keys(u))this.addEncoding(_,u[_]);this.reset()}addProtocol(h,x){this._protocols[h]=x}addEncoding(h,x){this._encodings[h]=x}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(h){if(!this._protocols[h])throw new Error(`unknown protocol "${h}"`);this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(h){if(!this._encodings[h])throw new Error(`unknown encoding "${h}"`);this._activeEncoding=h}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows||h.button===4&&h.action===32||h.button===3&&h.action!==32||h.button!==4&&(h.action===2||h.action===3)||(h.col++,h.row++,h.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,h,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(h))return!1;const x=this._encodings[this._activeEncoding](h);return x&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(x):this._coreService.triggerDataEvent(x,!0)),this._lastEvent=h,!0}explainEvents(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}}_equalEvents(h,x,_){if(_){if(h.x!==x.x||h.y!==x.y)return!1}else if(h.col!==x.col||h.row!==x.row)return!1;return h.button===x.button&&h.action===x.action&&h.ctrl===x.ctrl&&h.alt===x.alt&&h.shift===x.shift}};a.CoreMouseService=c=m([p(0,g.IBufferService),p(1,g.ICoreService)],c)},6975:function(f,a,o){var m=this&&this.__decorate||function(c,h,x,_){var k,j=arguments.length,b=j<3?h:_===null?_=Object.getOwnPropertyDescriptor(h,x):_;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(c,h,x,_);else for(var C=c.length-1;C>=0;C--)(k=c[C])&&(b=(j<3?k(b):j>3?k(h,x,b):k(h,x))||b);return j>3&&b&&Object.defineProperty(h,x,b),b},p=this&&this.__param||function(c,h){return function(x,_){h(x,_,c)}};Object.defineProperty(a,"__esModule",{value:!0}),a.CoreService=void 0;const g=o(1439),v=o(8460),S=o(844),w=o(2585),y=Object.freeze({insertMode:!1}),d=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let u=a.CoreService=class extends S.Disposable{constructor(c,h,x){super(),this._bufferService=c,this._logService=h,this._optionsService=x,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new v.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new v.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new v.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new v.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,g.clone)(y),this.decPrivateModes=(0,g.clone)(d)}reset(){this.modes=(0,g.clone)(y),this.decPrivateModes=(0,g.clone)(d)}triggerDataEvent(c,h=!1){if(this._optionsService.rawOptions.disableStdin)return;const x=this._bufferService.buffer;h&&this._optionsService.rawOptions.scrollOnUserInput&&x.ybase!==x.ydisp&&this._onRequestScrollToBottom.fire(),h&&this._onUserInput.fire(),this._logService.debug(`sending data "${c}"`,()=>c.split("").map(_=>_.charCodeAt(0))),this._onData.fire(c)}triggerBinaryEvent(c){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${c}"`,()=>c.split("").map(h=>h.charCodeAt(0))),this._onBinary.fire(c))}};a.CoreService=u=m([p(0,w.IBufferService),p(1,w.ILogService),p(2,w.IOptionsService)],u)},9074:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.DecorationService=void 0;const m=o(8055),p=o(8460),g=o(844),v=o(6106);let S=0,w=0;class y extends g.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new v.SortedList(c=>c==null?void 0:c.marker.line),this._onDecorationRegistered=this.register(new p.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new p.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,g.toDisposable)(()=>this.reset()))}registerDecoration(c){if(c.marker.isDisposed)return;const h=new d(c);if(h){const x=h.marker.onDispose(()=>h.dispose());h.onDispose(()=>{h&&(this._decorations.delete(h)&&this._onDecorationRemoved.fire(h),x.dispose())}),this._decorations.insert(h),this._onDecorationRegistered.fire(h)}return h}reset(){for(const c of this._decorations.values())c.dispose();this._decorations.clear()}*getDecorationsAtCell(c,h,x){var _,k,j;let b=0,C=0;for(const M of this._decorations.getKeyIterator(h))b=(_=M.options.x)!==null&&_!==void 0?_:0,C=b+((k=M.options.width)!==null&&k!==void 0?k:1),c>=b&&c<C&&(!x||((j=M.options.layer)!==null&&j!==void 0?j:"bottom")===x)&&(yield M)}forEachDecorationAtCell(c,h,x,_){this._decorations.forEachByKey(h,k=>{var j,b,C;S=(j=k.options.x)!==null&&j!==void 0?j:0,w=S+((b=k.options.width)!==null&&b!==void 0?b:1),c>=S&&c<w&&(!x||((C=k.options.layer)!==null&&C!==void 0?C:"bottom")===x)&&_(k)})}}a.DecorationService=y;class d extends g.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=m.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=m.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(c){super(),this.options=c,this.onRenderEmitter=this.register(new p.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new p.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=c.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.InstantiationService=a.ServiceCollection=void 0;const m=o(2585),p=o(8343);class g{constructor(...S){this._entries=new Map;for(const[w,y]of S)this.set(w,y)}set(S,w){const y=this._entries.get(S);return this._entries.set(S,w),y}forEach(S){for(const[w,y]of this._entries.entries())S(w,y)}has(S){return this._entries.has(S)}get(S){return this._entries.get(S)}}a.ServiceCollection=g,a.InstantiationService=class{constructor(){this._services=new g,this._services.set(m.IInstantiationService,this)}setService(v,S){this._services.set(v,S)}getService(v){return this._services.get(v)}createInstance(v,...S){const w=(0,p.getServiceDependencies)(v).sort((u,c)=>u.index-c.index),y=[];for(const u of w){const c=this._services.get(u.id);if(!c)throw new Error(`[createInstance] ${v.name} depends on UNKNOWN service ${u.id}.`);y.push(c)}const d=w.length>0?w[0].index:S.length;if(S.length!==d)throw new Error(`[createInstance] First service dependency of ${v.name} at position ${d+1} conflicts with ${S.length} static arguments`);return new v(...S,...y)}}},7866:function(f,a,o){var m=this&&this.__decorate||function(d,u,c,h){var x,_=arguments.length,k=_<3?u:h===null?h=Object.getOwnPropertyDescriptor(u,c):h;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")k=Reflect.decorate(d,u,c,h);else for(var j=d.length-1;j>=0;j--)(x=d[j])&&(k=(_<3?x(k):_>3?x(u,c,k):x(u,c))||k);return _>3&&k&&Object.defineProperty(u,c,k),k},p=this&&this.__param||function(d,u){return function(c,h){u(c,h,d)}};Object.defineProperty(a,"__esModule",{value:!0}),a.traceCall=a.setTraceLogger=a.LogService=void 0;const g=o(844),v=o(2585),S={trace:v.LogLevelEnum.TRACE,debug:v.LogLevelEnum.DEBUG,info:v.LogLevelEnum.INFO,warn:v.LogLevelEnum.WARN,error:v.LogLevelEnum.ERROR,off:v.LogLevelEnum.OFF};let w,y=a.LogService=class extends g.Disposable{get logLevel(){return this._logLevel}constructor(d){super(),this._optionsService=d,this._logLevel=v.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",()=>this._updateLogLevel())),w=this}_updateLogLevel(){this._logLevel=S[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(d){for(let u=0;u<d.length;u++)typeof d[u]=="function"&&(d[u]=d[u]())}_log(d,u,c){this._evalLazyOptionalParams(c),d.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+u,...c)}trace(d,...u){var c,h;this._logLevel<=v.LogLevelEnum.TRACE&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.trace.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,d,u)}debug(d,...u){var c,h;this._logLevel<=v.LogLevelEnum.DEBUG&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.debug.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.log,d,u)}info(d,...u){var c,h;this._logLevel<=v.LogLevelEnum.INFO&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.info.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.info,d,u)}warn(d,...u){var c,h;this._logLevel<=v.LogLevelEnum.WARN&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.warn.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.warn,d,u)}error(d,...u){var c,h;this._logLevel<=v.LogLevelEnum.ERROR&&this._log((h=(c=this._optionsService.options.logger)===null||c===void 0?void 0:c.error.bind(this._optionsService.options.logger))!==null&&h!==void 0?h:console.error,d,u)}};a.LogService=y=m([p(0,v.IOptionsService)],y),a.setTraceLogger=function(d){w=d},a.traceCall=function(d,u,c){if(typeof c.value!="function")throw new Error("not supported");const h=c.value;c.value=function(...x){if(w.logLevel!==v.LogLevelEnum.TRACE)return h.apply(this,x);w.trace(`GlyphRenderer#${h.name}(${x.map(k=>JSON.stringify(k)).join(", ")})`);const _=h.apply(this,x);return w.trace(`GlyphRenderer#${h.name} return`,_),_}}},7302:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.OptionsService=a.DEFAULT_OPTIONS=void 0;const m=o(8460),p=o(844),g=o(6114);a.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:g.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const v=["normal","bold","100","200","300","400","500","600","700","800","900"];class S extends p.Disposable{constructor(y){super(),this._onOptionChange=this.register(new m.EventEmitter),this.onOptionChange=this._onOptionChange.event;const d=Object.assign({},a.DEFAULT_OPTIONS);for(const u in y)if(u in d)try{const c=y[u];d[u]=this._sanitizeAndValidateOption(u,c)}catch(c){console.error(c)}this.rawOptions=d,this.options=Object.assign({},d),this._setupOptions()}onSpecificOptionChange(y,d){return this.onOptionChange(u=>{u===y&&d(this.rawOptions[y])})}onMultipleOptionChange(y,d){return this.onOptionChange(u=>{y.indexOf(u)!==-1&&d()})}_setupOptions(){const y=u=>{if(!(u in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);return this.rawOptions[u]},d=(u,c)=>{if(!(u in a.DEFAULT_OPTIONS))throw new Error(`No option with key "${u}"`);c=this._sanitizeAndValidateOption(u,c),this.rawOptions[u]!==c&&(this.rawOptions[u]=c,this._onOptionChange.fire(u))};for(const u in this.rawOptions){const c={get:y.bind(this,u),set:d.bind(this,u)};Object.defineProperty(this.options,u,c)}}_sanitizeAndValidateOption(y,d){switch(y){case"cursorStyle":if(d||(d=a.DEFAULT_OPTIONS[y]),!function(u){return u==="block"||u==="underline"||u==="bar"}(d))throw new Error(`"${d}" is not a valid value for ${y}`);break;case"wordSeparator":d||(d=a.DEFAULT_OPTIONS[y]);break;case"fontWeight":case"fontWeightBold":if(typeof d=="number"&&1<=d&&d<=1e3)break;d=v.includes(d)?d:a.DEFAULT_OPTIONS[y];break;case"cursorWidth":d=Math.floor(d);case"lineHeight":case"tabStopWidth":if(d<1)throw new Error(`${y} cannot be less than 1, value: ${d}`);break;case"minimumContrastRatio":d=Math.max(1,Math.min(21,Math.round(10*d)/10));break;case"scrollback":if((d=Math.min(d,4294967295))<0)throw new Error(`${y} cannot be less than 0, value: ${d}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(d<=0)throw new Error(`${y} cannot be less than or equal to 0, value: ${d}`);break;case"rows":case"cols":if(!d&&d!==0)throw new Error(`${y} must be numeric, value: ${d}`);break;case"windowsPty":d=d??{}}return d}}a.OptionsService=S},2660:function(f,a,o){var m=this&&this.__decorate||function(S,w,y,d){var u,c=arguments.length,h=c<3?w:d===null?d=Object.getOwnPropertyDescriptor(w,y):d;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")h=Reflect.decorate(S,w,y,d);else for(var x=S.length-1;x>=0;x--)(u=S[x])&&(h=(c<3?u(h):c>3?u(w,y,h):u(w,y))||h);return c>3&&h&&Object.defineProperty(w,y,h),h},p=this&&this.__param||function(S,w){return function(y,d){w(y,d,S)}};Object.defineProperty(a,"__esModule",{value:!0}),a.OscLinkService=void 0;const g=o(2585);let v=a.OscLinkService=class{constructor(S){this._bufferService=S,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(S){const w=this._bufferService.buffer;if(S.id===void 0){const x=w.addMarker(w.ybase+w.y),_={data:S,id:this._nextId++,lines:[x]};return x.onDispose(()=>this._removeMarkerFromLink(_,x)),this._dataByLinkId.set(_.id,_),_.id}const y=S,d=this._getEntryIdKey(y),u=this._entriesWithId.get(d);if(u)return this.addLineToLink(u.id,w.ybase+w.y),u.id;const c=w.addMarker(w.ybase+w.y),h={id:this._nextId++,key:this._getEntryIdKey(y),data:y,lines:[c]};return c.onDispose(()=>this._removeMarkerFromLink(h,c)),this._entriesWithId.set(h.key,h),this._dataByLinkId.set(h.id,h),h.id}addLineToLink(S,w){const y=this._dataByLinkId.get(S);if(y&&y.lines.every(d=>d.line!==w)){const d=this._bufferService.buffer.addMarker(w);y.lines.push(d),d.onDispose(()=>this._removeMarkerFromLink(y,d))}}getLinkData(S){var w;return(w=this._dataByLinkId.get(S))===null||w===void 0?void 0:w.data}_getEntryIdKey(S){return`${S.id};;${S.uri}`}_removeMarkerFromLink(S,w){const y=S.lines.indexOf(w);y!==-1&&(S.lines.splice(y,1),S.lines.length===0&&(S.data.id!==void 0&&this._entriesWithId.delete(S.key),this._dataByLinkId.delete(S.id)))}};a.OscLinkService=v=m([p(0,g.IBufferService)],v)},8343:(f,a)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.createDecorator=a.getServiceDependencies=a.serviceRegistry=void 0;const o="di$target",m="di$dependencies";a.serviceRegistry=new Map,a.getServiceDependencies=function(p){return p[m]||[]},a.createDecorator=function(p){if(a.serviceRegistry.has(p))return a.serviceRegistry.get(p);const g=function(v,S,w){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(y,d,u){d[o]===d?d[m].push({id:y,index:u}):(d[m]=[{id:y,index:u}],d[o]=d)})(g,v,w)};return g.toString=()=>p,a.serviceRegistry.set(p,g),g}},2585:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.IDecorationService=a.IUnicodeService=a.IOscLinkService=a.IOptionsService=a.ILogService=a.LogLevelEnum=a.IInstantiationService=a.ICharsetService=a.ICoreService=a.ICoreMouseService=a.IBufferService=void 0;const m=o(8343);var p;a.IBufferService=(0,m.createDecorator)("BufferService"),a.ICoreMouseService=(0,m.createDecorator)("CoreMouseService"),a.ICoreService=(0,m.createDecorator)("CoreService"),a.ICharsetService=(0,m.createDecorator)("CharsetService"),a.IInstantiationService=(0,m.createDecorator)("InstantiationService"),function(g){g[g.TRACE=0]="TRACE",g[g.DEBUG=1]="DEBUG",g[g.INFO=2]="INFO",g[g.WARN=3]="WARN",g[g.ERROR=4]="ERROR",g[g.OFF=5]="OFF"}(p||(a.LogLevelEnum=p={})),a.ILogService=(0,m.createDecorator)("LogService"),a.IOptionsService=(0,m.createDecorator)("OptionsService"),a.IOscLinkService=(0,m.createDecorator)("OscLinkService"),a.IUnicodeService=(0,m.createDecorator)("UnicodeService"),a.IDecorationService=(0,m.createDecorator)("DecorationService")},1480:(f,a,o)=>{Object.defineProperty(a,"__esModule",{value:!0}),a.UnicodeService=void 0;const m=o(8460),p=o(225);a.UnicodeService=class{constructor(){this._providers=Object.create(null),this._active="",this._onChange=new m.EventEmitter,this.onChange=this._onChange.event;const g=new p.UnicodeV6;this.register(g),this._active=g.version,this._activeProvider=g}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(g){if(!this._providers[g])throw new Error(`unknown Unicode version "${g}"`);this._active=g,this._activeProvider=this._providers[g],this._onChange.fire(g)}register(g){this._providers[g.version]=g}wcwidth(g){return this._activeProvider.wcwidth(g)}getStringCellWidth(g){let v=0;const S=g.length;for(let w=0;w<S;++w){let y=g.charCodeAt(w);if(55296<=y&&y<=56319){if(++w>=S)return v+this.wcwidth(y);const d=g.charCodeAt(w);56320<=d&&d<=57343?y=1024*(y-55296)+d-56320+65536:v+=this.wcwidth(d)}v+=this.wcwidth(y)}return v}}}},i={};function n(f){var a=i[f];if(a!==void 0)return a.exports;var o=i[f]={exports:{}};return s[f].call(o.exports,o,o.exports,n),o.exports}var l={};return(()=>{var f=l;Object.defineProperty(f,"__esModule",{value:!0}),f.Terminal=void 0;const a=n(9042),o=n(3236),m=n(844),p=n(5741),g=n(8285),v=n(7975),S=n(7090),w=["cols","rows"];class y extends m.Disposable{constructor(u){super(),this._core=this.register(new o.Terminal(u)),this._addonManager=this.register(new p.AddonManager),this._publicOptions=Object.assign({},this._core.options);const c=x=>this._core.options[x],h=(x,_)=>{this._checkReadonlyOptions(x),this._core.options[x]=_};for(const x in this._core.options){const _={get:c.bind(this,x),set:h.bind(this,x)};Object.defineProperty(this._publicOptions,x,_)}}_checkReadonlyOptions(u){if(w.includes(u))throw new Error(`Option "${u}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new v.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new S.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new g.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const u=this._core.coreService.decPrivateModes;let c="none";switch(this._core.coreMouseService.activeProtocol){case"X10":c="x10";break;case"VT200":c="vt200";break;case"DRAG":c="drag";break;case"ANY":c="any"}return{applicationCursorKeysMode:u.applicationCursorKeys,applicationKeypadMode:u.applicationKeypad,bracketedPasteMode:u.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:c,originMode:u.origin,reverseWraparoundMode:u.reverseWraparound,sendFocusMode:u.sendFocus,wraparoundMode:u.wraparound}}get options(){return this._publicOptions}set options(u){for(const c in u)this._publicOptions[c]=u[c]}blur(){this._core.blur()}focus(){this._core.focus()}resize(u,c){this._verifyIntegers(u,c),this._core.resize(u,c)}open(u){this._core.open(u)}attachCustomKeyEventHandler(u){this._core.attachCustomKeyEventHandler(u)}registerLinkProvider(u){return this._core.registerLinkProvider(u)}registerCharacterJoiner(u){return this._checkProposedApi(),this._core.registerCharacterJoiner(u)}deregisterCharacterJoiner(u){this._checkProposedApi(),this._core.deregisterCharacterJoiner(u)}registerMarker(u=0){return this._verifyIntegers(u),this._core.registerMarker(u)}registerDecoration(u){var c,h,x;return this._checkProposedApi(),this._verifyPositiveIntegers((c=u.x)!==null&&c!==void 0?c:0,(h=u.width)!==null&&h!==void 0?h:0,(x=u.height)!==null&&x!==void 0?x:0),this._core.registerDecoration(u)}hasSelection(){return this._core.hasSelection()}select(u,c,h){this._verifyIntegers(u,c,h),this._core.select(u,c,h)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(u,c){this._verifyIntegers(u,c),this._core.selectLines(u,c)}dispose(){super.dispose()}scrollLines(u){this._verifyIntegers(u),this._core.scrollLines(u)}scrollPages(u){this._verifyIntegers(u),this._core.scrollPages(u)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(u){this._verifyIntegers(u),this._core.scrollToLine(u)}clear(){this._core.clear()}write(u,c){this._core.write(u,c)}writeln(u,c){this._core.write(u),this._core.write(`\r
`,c)}paste(u){this._core.paste(u)}refresh(u,c){this._verifyIntegers(u,c),this._core.refresh(u,c)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(u){this._addonManager.loadAddon(this,u)}static get strings(){return a}_verifyIntegers(...u){for(const c of u)if(c===1/0||isNaN(c)||c%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...u){for(const c of u)if(c&&(c===1/0||isNaN(c)||c%1!=0||c<0))throw new Error("This API only accepts positive integers")}}f.Terminal=y})(),l})())})(Em);var Pb=Em.exports,Pm={exports:{}};(function(e,t){(function(s,i){e.exports=i()})(self,()=>(()=>{var s={};return(()=>{var i=s;Object.defineProperty(i,"__esModule",{value:!0}),i.FitAddon=void 0,i.FitAddon=class{activate(n){this._terminal=n}dispose(){}fit(){const n=this.proposeDimensions();if(!n||!this._terminal||isNaN(n.cols)||isNaN(n.rows))return;const l=this._terminal._core;this._terminal.rows===n.rows&&this._terminal.cols===n.cols||(l._renderService.clear(),this._terminal.resize(n.cols,n.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const n=this._terminal._core,l=n._renderService.dimensions;if(l.css.cell.width===0||l.css.cell.height===0)return;const f=this._terminal.options.scrollback===0?0:n.viewport.scrollBarWidth,a=window.getComputedStyle(this._terminal.element.parentElement),o=parseInt(a.getPropertyValue("height")),m=Math.max(0,parseInt(a.getPropertyValue("width"))),p=window.getComputedStyle(this._terminal.element),g=o-(parseInt(p.getPropertyValue("padding-top"))+parseInt(p.getPropertyValue("padding-bottom"))),v=m-(parseInt(p.getPropertyValue("padding-right"))+parseInt(p.getPropertyValue("padding-left")))-f;return{cols:Math.max(2,Math.floor(v/l.css.cell.width)),rows:Math.max(1,Math.floor(g/l.css.cell.height))}}}})(),s})())})(Pm);var Lb=Pm.exports;const Tb=()=>{const[e,t]=R.useState([]),[s,i]=R.useState(null),[n,l]=R.useState(!1),f=R.useRef(null),a=R.useRef(new Map);R.useEffect(()=>{const g=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`,v=new WebSocket(g);return v.onopen=()=>{console.log(" WebSocket Terminal conectado"),l(!0)},v.onmessage=S=>{try{const w=JSON.parse(S.data);switch(w.type){case"terminal:created":console.log(`Terminal criado: ${w.data.sessionId}`);break;case"terminal:output":t(y=>{const d=y.find(u=>u.sessionId===w.data.sessionId);return d&&d.terminal.write(w.data.output),y});break;case"terminal:exit":console.log(`Terminal encerrado: ${w.data.sessionId}`);break;case"error":console.error("Erro no terminal:",w.data.message);break}}catch(w){console.error("Erro ao processar mensagem:",w)}},v.onerror=S=>{console.error(" Erro no WebSocket Terminal:",S),l(!1)},v.onclose=()=>{console.log(" WebSocket Terminal desconectado"),l(!1)},f.current=v,()=>{e.forEach(S=>{v.send(JSON.stringify({type:"terminal:close",data:{sessionId:S.sessionId}})),S.terminal.dispose()}),v.close()}},[]);const o=()=>{var y;if(!f.current||!n){alert("WebSocket no conectado");return}const p=`term_${Date.now()}`,g=new Pb.Terminal({cursorBlink:!0,fontSize:14,fontFamily:'Menlo, Monaco, "Courier New", monospace',theme:{background:"#1e1e1e",foreground:"#d4d4d4",cursor:"#ffffff",selection:"#264f78"},rows:24,cols:80}),v=new Lb.FitAddon;g.loadAddon(v),f.current.send(JSON.stringify({type:"terminal:create"})),g.onData(d=>{if(f.current&&n){const u=e.find(c=>c.terminal===g);u&&f.current.send(JSON.stringify({type:"terminal:input",data:{sessionId:u.sessionId,input:d}}))}}),g.onResize(({cols:d,rows:u})=>{const c=e.find(h=>h.terminal===g);c&&f.current&&n&&f.current.send(JSON.stringify({type:"terminal:resize",data:{sessionId:c.sessionId,cols:d,rows:u}}))});const S={id:p,sessionId:p,terminal:g,fitAddon:v};t(d=>[...d,S]),i(p);const w=d=>{var u;try{const c=JSON.parse(d.data);c.type==="terminal:created"&&(t(h=>h.map(x=>x.id===p?{...x,sessionId:c.data.sessionId}:x)),(u=f.current)==null||u.removeEventListener("message",w))}catch{}};(y=f.current)==null||y.addEventListener("message",w)},m=p=>{const g=e.find(v=>v.id===p);if(g&&f.current&&n&&f.current.send(JSON.stringify({type:"terminal:close",data:{sessionId:g.sessionId}})),g&&(g.terminal.dispose(),a.current.delete(p)),t(v=>v.filter(S=>S.id!==p)),s===p){const v=e.filter(S=>S.id!==p);i(v.length>0?v[0].id:null)}};return R.useEffect(()=>{e.forEach(p=>{const g=a.current.get(p.id);if(g&&!g.hasChildNodes()){p.terminal.open(g),p.fitAddon.fit();const v=()=>{p.fitAddon.fit()};return window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}}})},[e,s]),r.jsxs("div",{className:"flex flex-col h-[calc(100vh-4rem)] p-4 gap-4",children:[r.jsxs("div",{className:"card p-4 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white",children:"Terminal SSH"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"Mltiplos terminais com acesso shell completo"})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500 animate-pulse":"bg-red-500"}`,title:n?"Conectado":"Desconectado"}),r.jsx("span",{className:"text-sm text-gray-400",children:n?"Online":"Offline"})]}),r.jsxs("button",{onClick:o,disabled:!n,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(Qo,{size:16}),"Novo Terminal"]})]})]}),e.length>0&&r.jsx("div",{className:"card p-2 flex items-center gap-2 overflow-x-auto",children:e.map(p=>r.jsxs("button",{onClick:()=>i(p.id),className:`px-4 py-2 rounded-lg transition-colors flex items-center gap-2 whitespace-nowrap ${s===p.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:[r.jsxs("span",{children:["Terminal ",e.indexOf(p)+1]}),r.jsx(Nm,{size:14,onClick:g=>{g.stopPropagation(),m(p.id)},className:"hover:text-red-400 transition-colors"})]},p.id))}),r.jsx("div",{className:"flex-1 card p-4 overflow-hidden",children:e.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[r.jsx("div",{className:"text-6xl mb-4",children:""}),r.jsx("p",{className:"text-gray-400 text-lg mb-2",children:"Nenhum terminal ativo"}),r.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mb-6",children:"Crie um novo terminal para comear a executar comandos"}),r.jsxs("button",{onClick:o,disabled:!n,className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors flex items-center gap-2",children:[r.jsx(Qo,{size:20}),"Criar Primeiro Terminal"]})]}):r.jsx(r.Fragment,{children:e.map(p=>r.jsx("div",{ref:g=>{g&&a.current.set(p.id,g)},className:`w-full h-full ${s===p.id?"block":"hidden"}`,style:{backgroundColor:"#1e1e1e"}},p.id))})}),!n&&r.jsx("div",{className:"card p-4 bg-red-600/20 border-red-600",children:r.jsxs("p",{className:"text-red-400 text-sm flex items-center gap-2",children:[r.jsx(qy,{size:16}),"Desconectado do servidor. Tentando reconectar..."]})})]})},Ab=()=>{const[e,t]=R.useState("datasets"),[s,i]=R.useState(""),[n,l]=R.useState("all"),[f,a]=R.useState(!1),[o,m]=R.useState(!1),[p,g]=R.useState(!1),[v,S]=R.useState(!1),[w,y]=R.useState(null),[d,u]=R.useState(!1),[c,h]=R.useState(null),[x,_]=R.useState({name:"",description:"",dataType:"text",data:[]}),[k,j]=R.useState({modelId:0,datasetId:0,learningRate:.001,batchSize:8,epochs:3,warmupSteps:100,maxSteps:void 0,loraRank:8,loraAlpha:16,loraDropout:.1,validationSplit:.1,earlyStopping:!0,checkpointInterval:100}),[b,C]=R.useState(""),{data:M,refetch:L}=G.training.listDatasets.useQuery({userId:1}),{data:P,refetch:D}=G.training.listTrainingJobs.useQuery({userId:1,status:n!=="all"?n:void 0}),{data:W,refetch:V}=G.training.getStatistics.useQuery({}),{data:Z}=G.models.list.useQuery({query:""}),{data:ee,refetch:N}=G.training.getTrainingMetrics.useQuery({jobId:(w==null?void 0:w.id)||0},{enabled:!!w&&p}),{data:A,refetch:O}=G.training.getTrainingLogs.useQuery({jobId:(w==null?void 0:w.id)||0,limit:100},{enabled:!!w&&v}),B=G.training.createDataset.useMutation({onSuccess:()=>{alert("Dataset criado com sucesso!"),a(!1),L(),V(),E()},onError:q=>{alert(`Erro ao criar dataset: ${q.message}`)}}),J=G.training.deleteDataset.useMutation({onSuccess:()=>{alert("Dataset deletado!"),L(),V()},onError:q=>{alert(`Erro ao deletar dataset: ${q.message}`)}}),H=G.training.startTraining.useMutation({onSuccess:()=>{alert("Treinamento iniciado!"),m(!1),D(),V(),U()},onError:q=>{alert(`Erro ao iniciar treinamento: ${q.message}`)}}),I=G.training.cancelTraining.useMutation({onSuccess:()=>{alert("Treinamento cancelado!"),D(),V()},onError:q=>{alert(`Erro ao cancelar treinamento: ${q.message}`)}}),T=G.training.validateDataset.useMutation(),z=G.training.evaluateModel.useMutation({onSuccess:q=>{alert(`Modelo avaliado! Score: ${q.metrics.accuracy||"N/A"}`),u(!1)},onError:q=>{alert(`Erro na avaliao: ${q.message}`)}}),E=()=>{_({name:"",description:"",dataType:"text",data:[]}),C("")},U=()=>{j({modelId:0,datasetId:0,learningRate:.001,batchSize:8,epochs:3,warmupSteps:100,maxSteps:void 0,loraRank:8,loraAlpha:16,loraDropout:.1,validationSplit:.1,earlyStopping:!0,checkpointInterval:100})},X=async q=>{if(q.preventDefault(),!x.name||x.data.length===0){alert("Preencha o nome e adicione dados ao dataset");return}try{await B.mutateAsync({userId:1,name:x.name,description:x.description,dataType:x.dataType,data:x.data})}catch{}},Y=async q=>{if(q.preventDefault(),k.modelId===0||k.datasetId===0){alert("Selecione um modelo e um dataset");return}try{await H.mutateAsync({modelId:k.modelId,datasetId:k.datasetId,hyperparameters:{learningRate:k.learningRate,batchSize:k.batchSize,epochs:k.epochs,warmupSteps:k.warmupSteps,maxSteps:k.maxSteps,loraRank:k.loraRank,loraAlpha:k.loraAlpha,loraDropout:k.loraDropout},validationSplit:k.validationSplit,earlyStopping:k.earlyStopping,checkpointInterval:k.checkpointInterval})}catch{}},se=()=>{if(b.trim())try{const q=JSON.parse(b);_({...x,data:[...x.data,q]}),C("")}catch{alert('JSON invlido. Exemplo: {"text": "exemplo"} ou {"q": "pergunta", "a": "resposta"}')}},re=q=>{_({...x,data:x.data.filter((xe,Oe)=>Oe!==q)})},$=q=>{confirm("Tem certeza que deseja deletar este dataset?")&&J.mutate({id:q})},ae=q=>{confirm("Tem certeza que deseja cancelar este treinamento?")&&I.mutate({jobId:q})},be=q=>{y(q),g(!0)},je=q=>{y(q),S(!0)},oe=async()=>{if(x.data.length===0){alert("Adicione dados ao dataset antes de validar");return}try{const q=await T.mutateAsync({dataType:x.dataType,data:x.data.slice(0,10)});q.valid?alert(" Dataset vlido!"):alert(` Dataset invlido: ${q.message}`)}catch(q){alert(`Erro na validao: ${q.message}`)}},Ne=async q=>{h(null),y(q),u(!0)},ut=async q=>{if(w)try{await z.mutateAsync({modelId:w.modelId,datasetId:q})}catch{}},Qe=(M==null?void 0:M.datasets.filter(q=>q.name.toLowerCase().includes(s.toLowerCase())))||[],it=(P==null?void 0:P.jobs)||[],Xe=[{id:"datasets",label:"Datasets",icon:""},{id:"jobs",label:"Training Jobs",icon:""},{id:"create",label:"Novo Treinamento",icon:""},{id:"evaluate",label:"Avaliar",icon:""},{id:"statistics",label:"Estatsticas",icon:""}],de=W||{totalDatasets:0,totalJobs:0,runningJobs:0,completedJobs:0,failedJobs:0,avgTrainingTime:0,totalTrainedModels:0,bestModelAccuracy:0};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:" Treinamento de Modelos"}),r.jsx("p",{className:"text-gray-400",children:"Gerencie datasets, inicie treinamentos e avalie modelos"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>L(),className:"btn-secondary",children:" Atualizar"}),r.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ Novo Dataset"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total de Datasets"}),r.jsx("div",{className:"text-white text-xl font-bold",children:de.totalDatasets})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Training Jobs"}),r.jsx("div",{className:"text-white text-xl font-bold",children:de.totalJobs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Em Execuo"}),r.jsx("div",{className:"text-white text-xl font-bold",children:de.runningJobs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Completados"}),r.jsx("div",{className:"text-white text-xl font-bold",children:de.completedJobs})]})]})]}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:Xe.map(q=>r.jsxs("button",{onClick:()=>t(q.id),className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${e===q.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:[q.icon," ",q.label]},q.id))})}),r.jsxs("div",{className:"space-y-4",children:[e==="datasets"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card",children:r.jsx("input",{type:"text",value:s,onChange:q=>i(q.target.value),placeholder:"Buscar datasets...",className:"input w-full"})}),Qe.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Qe.map(q=>r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-white font-semibold",children:q.name}),r.jsxs("p",{className:"text-gray-400 text-sm",children:["Tipo: ",q.dataType||"N/A"]})]}),r.jsxs("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:[q.recordCount||0," registros"]})]}),q.description&&r.jsx("p",{className:"text-gray-400 text-sm mb-3",children:q.description}),r.jsxs("div",{className:"space-y-2 text-sm mb-3",children:[q.fileSize&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Tamanho:"}),r.jsxs("span",{className:"text-white",children:[(q.fileSize/1024/1024).toFixed(2)," MB"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-400",children:"Criado:"}),r.jsx("span",{className:"text-white",children:new Date(q.createdAt).toLocaleDateString("pt-BR")})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{j({...k,datasetId:q.id}),t("create")},className:"btn-primary text-sm flex-1",children:" Treinar"}),r.jsx("button",{onClick:()=>$(q.id),className:"btn-danger text-sm",children:""})]})]},q.id))}):r.jsxs("div",{className:"card text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum dataset encontrado"}),r.jsx("p",{className:"text-sm mb-4",children:"Crie seu primeiro dataset para comear"}),r.jsx("button",{onClick:()=>a(!0),className:"btn-primary",children:"+ Novo Dataset"})]})]}),e==="jobs"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"card",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("input",{type:"text",value:s,onChange:q=>i(q.target.value),placeholder:"Buscar jobs...",className:"input flex-1"}),r.jsxs("select",{value:n,onChange:q=>l(q.target.value),className:"input",children:[r.jsx("option",{value:"all",children:"Todos os Status"}),r.jsx("option",{value:"running",children:"Em Execuo"}),r.jsx("option",{value:"completed",children:"Completados"}),r.jsx("option",{value:"failed",children:"Falhados"}),r.jsx("option",{value:"cancelled",children:"Cancelados"})]})]})}),it.length>0?r.jsx("div",{className:"space-y-3",children:it.map(q=>{var xe,Oe,ht;return r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("h3",{className:"text-white font-semibold mb-1",children:["Job #",q.id," - Modelo #",q.modelId]}),r.jsxs("p",{className:"text-gray-400 text-sm",children:["Dataset #",q.datasetId,"  Iniciado em"," ",q.startedAt?new Date(q.startedAt).toLocaleString("pt-BR"):"N/A"]})]}),r.jsxs("span",{className:`px-3 py-1 rounded text-sm ${q.status==="running"?"bg-blue-600 text-white":q.status==="completed"?"bg-green-600 text-white":q.status==="failed"?"bg-red-600 text-white":"bg-gray-600 text-gray-300"}`,children:[q.status==="running"&&" Executando",q.status==="completed"&&" Completo",q.status==="failed"&&" Falhou",q.status==="cancelled"&&" Cancelado"]})]}),q.status==="running"&&r.jsxs("div",{className:"mb-3",children:[r.jsxs("div",{className:"flex justify-between text-sm text-gray-400 mb-1",children:[r.jsxs("span",{children:["poca ",q.currentEpoch||0,"/",q.totalEpochs||0]}),r.jsxs("span",{children:[(q.currentEpoch/q.totalEpochs*100).toFixed(0),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all",style:{width:`${Math.min(100,q.currentEpoch/q.totalEpochs*100)}%`}})})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-sm mb-3",children:[r.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 text-xs",children:"Learning Rate"}),r.jsx("div",{className:"text-white",children:((xe=q.metadata)==null?void 0:xe.learningRate)||"N/A"})]}),r.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 text-xs",children:"Batch Size"}),r.jsx("div",{className:"text-white",children:((Oe=q.metadata)==null?void 0:Oe.batchSize)||"N/A"})]}),r.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 text-xs",children:"pocas"}),r.jsx("div",{className:"text-white",children:q.totalEpochs||"N/A"})]}),r.jsxs("div",{className:"bg-gray-800 rounded p-2",children:[r.jsx("div",{className:"text-gray-400 text-xs",children:"LoRA Rank"}),r.jsx("div",{className:"text-white",children:((ht=q.metadata)==null?void 0:ht.loraRank)||"N/A"})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>be(q),className:"btn-secondary text-sm flex-1",children:" Mtricas"}),r.jsx("button",{onClick:()=>je(q),className:"btn-secondary text-sm flex-1",children:" Logs"}),q.status==="completed"&&r.jsx("button",{onClick:()=>Ne(q),className:"btn-primary text-sm flex-1",children:" Avaliar"}),q.status==="running"&&r.jsx("button",{onClick:()=>ae(q.id),className:"btn-danger text-sm",children:" Cancelar"})]})]},q.id)})}):r.jsxs("div",{className:"card text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum training job encontrado"}),r.jsx("p",{className:"text-sm mb-4",children:"Inicie um novo treinamento"}),r.jsx("button",{onClick:()=>t("create"),className:"btn-primary",children:"+ Novo Treinamento"})]})]}),e==="create"&&r.jsxs("form",{onSubmit:Y,className:"card space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" Novo Training Job"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Modelo *"}),r.jsxs("select",{value:k.modelId,onChange:q=>j({...k,modelId:Number(q.target.value)}),className:"input w-full",required:!0,children:[r.jsx("option",{value:"0",children:"Selecione um modelo"}),Z==null?void 0:Z.items.map(q=>r.jsx("option",{value:q.id,children:q.name},q.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Dataset *"}),r.jsxs("select",{value:k.datasetId,onChange:q=>j({...k,datasetId:Number(q.target.value)}),className:"input w-full",required:!0,children:[r.jsx("option",{value:"0",children:"Selecione um dataset"}),M==null?void 0:M.datasets.map(q=>r.jsxs("option",{value:q.id,children:[q.name," (",q.recordCount||0," registros)"]},q.id))]})]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:" Hiperparmetros"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-300 mb-2",children:["Learning Rate: ",k.learningRate]}),r.jsx("input",{type:"range",min:"0.0001",max:"0.1",step:"0.0001",value:k.learningRate,onChange:q=>j({...k,learningRate:parseFloat(q.target.value)}),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Batch Size"}),r.jsx("input",{type:"number",min:"1",max:"128",value:k.batchSize,onChange:q=>j({...k,batchSize:parseInt(q.target.value)}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"pocas"}),r.jsx("input",{type:"number",min:"1",max:"100",value:k.epochs,onChange:q=>j({...k,epochs:parseInt(q.target.value)}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Warmup Steps"}),r.jsx("input",{type:"number",min:"0",value:k.warmupSteps,onChange:q=>j({...k,warmupSteps:parseInt(q.target.value)||void 0}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"LoRA Rank"}),r.jsx("input",{type:"number",min:"1",max:"128",value:k.loraRank,onChange:q=>j({...k,loraRank:parseInt(q.target.value)||void 0}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"LoRA Alpha"}),r.jsx("input",{type:"number",min:"1",max:"256",value:k.loraAlpha,onChange:q=>j({...k,loraAlpha:parseInt(q.target.value)||void 0}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-300 mb-2",children:["LoRA Dropout: ",k.loraDropout]}),r.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.01",value:k.loraDropout,onChange:q=>j({...k,loraDropout:parseFloat(q.target.value)}),className:"w-full"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-300 mb-2",children:["Validation Split: ",k.validationSplit]}),r.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:k.validationSplit,onChange:q=>j({...k,validationSplit:parseFloat(q.target.value)}),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Checkpoint Interval"}),r.jsx("input",{type:"number",min:"10",max:"1000",value:k.checkpointInterval,onChange:q=>j({...k,checkpointInterval:parseInt(q.target.value)}),className:"input w-full"})]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:k.earlyStopping,onChange:q=>j({...k,earlyStopping:q.target.checked}),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-300",children:"Early Stopping"})]})})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",className:"btn-primary flex-1",children:" Iniciar Treinamento"}),r.jsx("button",{type:"button",onClick:U,className:"btn-secondary",children:" Resetar"})]})]}),e==="evaluate"&&r.jsxs("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Avaliar Modelos Treinados"}),r.jsx("p",{className:"text-gray-400 mb-6",children:'Selecione um training job completado na aba "Training Jobs" e clique em "Avaliar"'})]}),e==="statistics"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Estatsticas de Treinamento"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total de Datasets"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:de.totalDatasets})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Total de Training Jobs"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:de.totalJobs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Jobs em Execuo"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:de.runningJobs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Jobs Completados"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:de.completedJobs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Jobs Falhados"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:de.failedJobs})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Tempo Mdio (min)"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:Math.round(de.avgTrainingTime/60)||0})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Modelos Treinados"}),r.jsx("div",{className:"text-white text-3xl font-bold",children:de.totalTrainedModels})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Melhor Acurcia"}),r.jsxs("div",{className:"text-white text-3xl font-bold",children:[(de.bestModelAccuracy*100).toFixed(1),"%"]})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm mb-1",children:"Taxa de Sucesso"}),r.jsxs("div",{className:"text-white text-3xl font-bold",children:[de.totalJobs>0?Math.round(de.completedJobs/de.totalJobs*100):0,"%"]})]})]})]})})]}),f&&r.jsx("div",{className:"modal-overlay",onClick:()=>a(!1),children:r.jsxs("div",{className:"modal-content max-w-3xl",onClick:q=>q.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Novo Dataset"}),r.jsxs("form",{onSubmit:X,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Nome *"}),r.jsx("input",{type:"text",value:x.name,onChange:q=>_({...x,name:q.target.value}),className:"input w-full",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Tipo de Dados *"}),r.jsxs("select",{value:x.dataType,onChange:q=>_({...x,dataType:q.target.value}),className:"input w-full",children:[r.jsx("option",{value:"text",children:"Texto"}),r.jsx("option",{value:"qa",children:"Q&A"}),r.jsx("option",{value:"conversation",children:"Conversao"}),r.jsx("option",{value:"instruction",children:"Instruo"})]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Descrio"}),r.jsx("textarea",{value:x.description,onChange:q=>_({...x,description:q.target.value}),rows:3,className:"input w-full"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Adicionar Dados (JSON)"}),r.jsxs("div",{className:"flex gap-2 mb-2",children:[r.jsx("textarea",{value:b,onChange:q=>C(q.target.value),rows:3,className:"input flex-1 font-mono text-sm",placeholder:'{"text": "exemplo"} ou {"q": "pergunta", "a": "resposta"}'}),r.jsx("button",{type:"button",onClick:se,className:"btn-secondary",children:"+ Add"})]}),x.data.length>0&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 max-h-64 overflow-y-auto",children:[r.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:[x.data.length," registro(s)"]}),x.data.map((q,xe)=>r.jsxs("div",{className:"flex items-start gap-2 mb-2 bg-gray-700 rounded p-2",children:[r.jsx("pre",{className:"text-white text-xs flex-1 overflow-x-auto",children:JSON.stringify(q,null,2)}),r.jsx("button",{type:"button",onClick:()=>re(xe),className:"text-red-400 hover:text-red-300",children:""})]},xe))]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{type:"submit",className:"btn-primary flex-1",children:" Criar Dataset"}),r.jsx("button",{type:"button",onClick:oe,className:"btn-secondary",children:" Validar"}),r.jsx("button",{type:"button",onClick:()=>{a(!1),E()},className:"btn-secondary",children:" Cancelar"})]})]})]})}),p&&w&&r.jsx("div",{className:"modal-overlay",onClick:()=>g(!1),children:r.jsxs("div",{className:"modal-content",onClick:q=>q.stopPropagation(),children:[r.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[" Mtricas - Job #",w.id]}),ee&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"poca Atual"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:ee.metrics.currentEpoch||0})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Status"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:ee.metrics.status})]}),ee.metrics.startTime&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Incio"}),r.jsx("div",{className:"text-white text-sm",children:new Date(ee.metrics.startTime).toLocaleString("pt-BR")})]}),ee.metrics.endTime&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("div",{className:"text-gray-400 text-sm",children:"Fim"}),r.jsx("div",{className:"text-white text-sm",children:new Date(ee.metrics.endTime).toLocaleString("pt-BR")})]})]}),r.jsx("button",{onClick:()=>g(!1),className:"btn-secondary w-full mt-4",children:" Fechar"})]})}),v&&w&&r.jsx("div",{className:"modal-overlay",onClick:()=>S(!1),children:r.jsxs("div",{className:"modal-content max-w-4xl",onClick:q=>q.stopPropagation(),children:[r.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[" Logs - Job #",w.id]}),r.jsx("div",{className:"bg-gray-900 rounded-lg p-4 max-h-96 overflow-y-auto font-mono text-sm",children:A!=null&&A.logs&&A.logs.length>0?A.logs.map((q,xe)=>r.jsxs("div",{className:"mb-2",children:[r.jsx("span",{className:"text-gray-500",children:new Date(q.timestamp).toLocaleTimeString("pt-BR")})," ",r.jsxs("span",{className:q.level==="error"?"text-red-400":q.level==="warning"?"text-yellow-400":"text-gray-300",children:["[",q.level.toUpperCase(),"]"]})," ",r.jsx("span",{className:"text-white",children:q.message})]},xe)):r.jsx("p",{className:"text-gray-400",children:"Nenhum log disponvel"})}),r.jsx("button",{onClick:()=>S(!1),className:"btn-secondary w-full mt-4",children:" Fechar"})]})}),d&&w&&r.jsx("div",{className:"modal-overlay",onClick:()=>u(!1),children:r.jsxs("div",{className:"modal-content",onClick:q=>q.stopPropagation(),children:[r.jsxs("h2",{className:"text-xl font-bold text-white mb-4",children:[" Avaliar Modelo - Job #",w.id]}),r.jsx("p",{className:"text-gray-400 mb-4",children:"Selecione um dataset para avaliao:"}),r.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto mb-4",children:M==null?void 0:M.datasets.map(q=>r.jsxs("button",{onClick:()=>ut(q.id),className:"w-full text-left p-3 bg-gray-800 hover:bg-gray-700 rounded-lg transition-colors",children:[r.jsx("div",{className:"text-white font-semibold",children:q.name}),r.jsxs("div",{className:"text-gray-400 text-sm",children:[q.dataType,"  ",q.recordCount||0," registros"]})]},q.id))}),r.jsx("button",{onClick:()=>u(!1),className:"btn-secondary w-full",children:" Cancelar"})]})})]})},Rb=()=>{const[e,t]=R.useState("models"),[s,i]=R.useState(""),[n,l]=R.useState(""),[f,a]=R.useState({prompt:"",temperature:.7,maxTokens:2048,timeout:6e4}),[o,m]=R.useState({models:[],prompt:"",temperature:.7,maxTokens:2048}),[p,g]=R.useState({text:"",instruction:""}),[v,S]=R.useState(""),[w,y]=R.useState([]),[d,u]=R.useState(null),[c,h]=R.useState(""),[x,_]=R.useState(!1),{data:k,refetch:j}=G.lmstudio.checkStatus.useQuery(),{data:b,refetch:C}=G.lmstudio.listModels.useQuery({forceRefresh:!1},{enabled:k==null?void 0:k.isRunning}),M=G.lmstudio.loadModel.useMutation({onSuccess:()=>{alert("Modelo carregado com sucesso!"),C()},onError:$=>{alert(`Erro ao carregar modelo: ${$.message}`)}}),L=G.lmstudio.switchModel.useMutation({onSuccess:$=>{alert(`Modelo alternado para: ${$.modelId}`),C()},onError:$=>{alert(`Erro ao alternar modelo: ${$.message}`)}}),P=G.lmstudio.generateCompletion.useMutation({onSuccess:$=>{S($.result.text||JSON.stringify($.result,null,2)),_(!1)},onError:$=>{alert(`Erro ao gerar texto: ${$.message}`),_(!1)}}),D=G.lmstudio.compareModels.useMutation({onSuccess:$=>{y($.results||[]),_(!1)},onError:$=>{alert(`Erro ao comparar modelos: ${$.message}`),_(!1)}}),W=G.lmstudio.benchmarkModel.useMutation({onSuccess:$=>{u($),_(!1)},onError:$=>{alert(`Erro ao realizar benchmark: ${$.message}`),_(!1)}}),V=G.lmstudio.processLongText.useMutation({onSuccess:$=>{h($.result||""),_(!1)},onError:$=>{alert(`Erro ao processar texto: ${$.message}`),_(!1)}}),Z=G.lmstudio.clearCache.useMutation({onSuccess:()=>{alert("Cache limpo com sucesso!")},onError:$=>{alert(`Erro ao limpar cache: ${$.message}`)}}),ee=G.lmstudio.recommendModel.useMutation({onSuccess:$=>{i($.recommendedModel||""),alert(`Modelo recomendado: ${$.recommendedModel}`)},onError:$=>{alert(`Erro ao recomendar modelo: ${$.message}`)}}),N=G.lmstudio.estimateTokens.useMutation({onSuccess:$=>{alert(`Estimativa: ${$.tokens} tokens`)},onError:$=>{alert(`Erro ao estimar tokens: ${$.message}`)}}),A=async $=>{if(confirm(`Carregar modelo ${$}?`))try{await M.mutateAsync({modelId:$})}catch{}},O=async $=>{try{await L.mutateAsync({preferredModelId:$,fallbackModelIds:[]})}catch{}},B=async $=>{if($.preventDefault(),!s){alert("Selecione um modelo primeiro");return}_(!0);try{await P.mutateAsync({modelId:s,prompt:f.prompt,temperature:f.temperature,maxTokens:f.maxTokens,timeout:f.timeout})}catch{}},J=async $=>{if($.preventDefault(),o.models.length<2){alert("Selecione pelo menos 2 modelos para comparar");return}_(!0);try{await D.mutateAsync({modelIds:o.models,prompt:o.prompt,temperature:o.temperature,maxTokens:o.maxTokens})}catch{}},H=async()=>{if(!s){alert("Selecione um modelo primeiro");return}_(!0);try{await W.mutateAsync({modelId:s})}catch{}},I=async $=>{if($.preventDefault(),!s){alert("Selecione um modelo primeiro");return}_(!0);try{await V.mutateAsync({modelId:s,text:p.text,instruction:p.instruction})}catch{}},T=$=>{if(o.models.includes($))m({...o,models:o.models.filter(ae=>ae!==$)});else{if(o.models.length>=5){alert("Mximo de 5 modelos para comparao");return}m({...o,models:[...o.models,$]})}},z=async $=>{try{await N.mutateAsync({text:$})}catch{}},E=async $=>{try{await ee.mutateAsync({taskType:$})}catch{}},U=(b==null?void 0:b.models.filter($=>{var be;const ae=n.toLowerCase();return $.name.toLowerCase().includes(ae)||$.id.toLowerCase().includes(ae)||((be=$.quantization)==null?void 0:be.toLowerCase().includes(ae))}))||[],X=[{id:"models",label:"Modelos",icon:""},{id:"generate",label:"Gerar",icon:""},{id:"compare",label:"Comparar",icon:""},{id:"benchmark",label:"Benchmark",icon:""},{id:"process",label:"Processar",icon:""}],Y=(k==null?void 0:k.isRunning)||!1,se=(b==null?void 0:b.models.length)||0,re=(b==null?void 0:b.models.filter($=>$.isLoaded).length)||0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"card",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:" LM Studio"}),r.jsx("p",{className:"text-gray-400",children:"Gerencie e interaja com modelos de linguagem locais"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>j(),className:"btn-secondary",children:" Verificar Status"}),r.jsx("button",{onClick:()=>C(),disabled:!Y,className:"btn-secondary",children:" Atualizar Modelos"}),r.jsx("button",{onClick:()=>Z.mutate(),className:"btn-secondary",children:" Limpar Cache"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Status LM Studio"}),r.jsx("div",{className:`text-xl font-bold ${Y?"text-green-500":"text-red-500"}`,children:Y?" Online":" Offline"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total de Modelos"}),r.jsx("div",{className:"text-white text-xl font-bold",children:se})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Modelos Carregados"}),r.jsx("div",{className:"text-white text-xl font-bold",children:re})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Modelo Selecionado"}),r.jsx("div",{className:"text-white text-xl font-bold",children:s?"":""})]})]})]}),!Y&&r.jsx("div",{className:"card bg-yellow-900 border-yellow-600",children:r.jsx("p",{className:"text-white",children:" LM Studio no est rodando. Inicie o LM Studio e certifique-se de que o servidor local est ativo na porta 1234."})}),r.jsx("div",{className:"card",children:r.jsx("div",{className:"flex space-x-2 overflow-x-auto",children:X.map($=>r.jsxs("button",{onClick:()=>t($.id),disabled:!Y,className:`px-4 py-2 rounded-lg whitespace-nowrap transition-colors ${e===$.id?"bg-blue-600 text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[$.icon," ",$.label]},$.id))})}),r.jsxs("div",{className:"card",children:[e==="models"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:" Modelos Disponveis"}),r.jsx("input",{type:"text",value:n,onChange:$=>l($.target.value),placeholder:"Buscar modelos...",className:"input w-64"})]}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-3",children:" Recomendao Rpida"}),r.jsx("div",{className:"flex gap-2 flex-wrap",children:["code","reasoning","analysis","chat","general"].map($=>r.jsxs("button",{onClick:()=>E($),className:"btn-secondary text-sm",children:[$==="code"&&" Cdigo",$==="reasoning"&&" Raciocnio",$==="analysis"&&" Anlise",$==="chat"&&" Chat",$==="general"&&" Geral"]},$))})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.map($=>r.jsxs("div",{className:`bg-gray-800 rounded-lg p-4 border-2 transition-colors ${s===$.id?"border-blue-600":$.isLoaded?"border-green-600":"border-gray-700"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-white font-semibold",children:$.name}),r.jsx("p",{className:"text-gray-400 text-sm break-all",children:$.id})]}),$.isLoaded&&r.jsx("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:"Carregado"})]}),($.quantization||$.parameters||$.size)&&r.jsxs("div",{className:"flex gap-3 text-sm text-gray-400 mb-3",children:[$.quantization&&r.jsxs("span",{children:[" ",$.quantization]}),$.parameters&&r.jsxs("span",{children:[" ",$.parameters]}),$.size&&r.jsxs("span",{children:[" ",($.size/1024**3).toFixed(2)," GB"]})]}),$.capabilities&&$.capabilities.length>0&&r.jsx("div",{className:"flex gap-2 flex-wrap mb-3",children:$.capabilities.map(ae=>r.jsx("span",{className:"px-2 py-1 bg-gray-700 text-gray-300 text-xs rounded",children:ae},ae))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>i($.id),className:`btn-secondary text-sm flex-1 ${s===$.id?"bg-blue-600 text-white":""}`,children:s===$.id?" Selecionado":" Selecionar"}),!$.isLoaded&&r.jsx("button",{onClick:()=>A($.id),disabled:M.isLoading,className:"btn-primary text-sm flex-1",children:" Carregar"}),$.isLoaded&&r.jsx("button",{onClick:()=>O($.id),disabled:L.isLoading,className:"btn-primary text-sm flex-1",children:" Usar"})]})]},$.id))}),U.length===0&&r.jsxs("div",{className:"text-center py-12 text-gray-400",children:[r.jsx("p",{className:"text-lg mb-2",children:"Nenhum modelo encontrado"}),r.jsx("p",{className:"text-sm",children:n?"Tente alterar os filtros de busca":"Certifique-se de que o LM Studio est rodando"})]})]}),e==="generate"&&r.jsxs("form",{onSubmit:B,className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Gerar Texto"}),!s&&r.jsx("div",{className:"bg-yellow-900 border border-yellow-600 rounded-lg p-4",children:r.jsx("p",{className:"text-white",children:' Selecione um modelo na aba "Modelos" primeiro'})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Prompt"}),r.jsx("textarea",{value:f.prompt,onChange:$=>a({...f,prompt:$.target.value}),rows:6,className:"input w-full",placeholder:"Digite seu prompt aqui...",required:!0}),r.jsx("button",{type:"button",onClick:()=>z(f.prompt),className:"btn-secondary text-sm mt-2",children:" Estimar Tokens"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-300 mb-2",children:["Temperatura: ",f.temperature]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:f.temperature,onChange:$=>a({...f,temperature:parseFloat($.target.value)}),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Max Tokens"}),r.jsx("input",{type:"number",min:"1",max:"32000",value:f.maxTokens,onChange:$=>a({...f,maxTokens:parseInt($.target.value)}),className:"input w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Timeout (ms)"}),r.jsx("input",{type:"number",min:"1000",max:"300000",value:f.timeout,onChange:$=>a({...f,timeout:parseInt($.target.value)}),className:"input w-full"})]})]}),r.jsx("button",{type:"submit",disabled:!s||x,className:"btn-primary w-full",children:x?" Gerando...":" Gerar"}),v&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-2",children:"Resultado:"}),r.jsx("pre",{className:"text-gray-300 whitespace-pre-wrap text-sm",children:v})]})]}),e==="compare"&&r.jsxs("form",{onSubmit:J,className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Comparar Modelos"}),r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsxs("h3",{className:"text-white font-semibold mb-3",children:["Selecione 2-5 Modelos (",o.models.length,"/5)"]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:b==null?void 0:b.models.map($=>r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer p-2 rounded hover:bg-gray-700",children:[r.jsx("input",{type:"checkbox",checked:o.models.includes($.id),onChange:()=>T($.id),className:"form-checkbox h-5 w-5 text-blue-600"}),r.jsx("span",{className:"text-gray-300",children:$.name})]},$.id))})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Prompt"}),r.jsx("textarea",{value:o.prompt,onChange:$=>m({...o,prompt:$.target.value}),rows:4,className:"input w-full",placeholder:"Digite o prompt para testar em todos os modelos...",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-gray-300 mb-2",children:["Temperatura: ",o.temperature]}),r.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:o.temperature,onChange:$=>m({...o,temperature:parseFloat($.target.value)}),className:"w-full"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Max Tokens"}),r.jsx("input",{type:"number",min:"1",max:"32000",value:o.maxTokens,onChange:$=>m({...o,maxTokens:parseInt($.target.value)}),className:"input w-full"})]})]}),r.jsx("button",{type:"submit",disabled:o.models.length<2||x,className:"btn-primary w-full",children:x?" Comparando...":" Comparar Modelos"}),w.length>0&&r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-white font-semibold",children:"Resultados da Comparao:"}),w.map(($,ae)=>r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-white font-semibold",children:$.modelId}),r.jsxs("div",{className:"flex gap-3 text-sm text-gray-400",children:[r.jsxs("span",{children:[" ",$.tokensPerSecond.toFixed(2)," tok/s"]}),r.jsxs("span",{children:[" ",$.latency.toFixed(0),"ms"]})]})]}),$.error?r.jsxs("div",{className:"text-red-400",children:[" Erro: ",$.error]}):r.jsx("pre",{className:"text-gray-300 whitespace-pre-wrap text-sm",children:$.response})]},ae))]})]}),e==="benchmark"&&r.jsxs("div",{className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Benchmark de Modelo"}),!s&&r.jsx("div",{className:"bg-yellow-900 border border-yellow-600 rounded-lg p-4",children:r.jsx("p",{className:"text-white",children:' Selecione um modelo na aba "Modelos" primeiro'})}),s&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-2",children:"Modelo Selecionado:"}),r.jsx("p",{className:"text-gray-300",children:s})]}),r.jsx("button",{onClick:H,disabled:!s||x,className:"btn-primary w-full",children:x?" Executando Benchmark...":" Executar Benchmark"}),d&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-4",children:"Resultados do Benchmark:"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Tokens por Segundo"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:d.tokensPerSecond.toFixed(2)})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Latncia (ms)"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:d.latency.toFixed(0)})]}),r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Throughput"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:d.throughput.toFixed(2)})]}),d.memoryUsage&&r.jsxs("div",{className:"bg-gray-700 rounded p-3",children:[r.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Memria (MB)"}),r.jsx("div",{className:"text-white text-2xl font-bold",children:d.memoryUsage.toFixed(0)})]})]})]})]}),e==="process"&&r.jsxs("form",{onSubmit:I,className:"space-y-6",children:[r.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:" Processar Texto Longo"}),!s&&r.jsx("div",{className:"bg-yellow-900 border border-yellow-600 rounded-lg p-4",children:r.jsx("p",{className:"text-white",children:' Selecione um modelo na aba "Modelos" primeiro'})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Instruo de Processamento"}),r.jsx("textarea",{value:p.instruction,onChange:$=>g({...p,instruction:$.target.value}),rows:3,className:"input w-full",placeholder:"Ex: Resuma o seguinte texto em 3 pargrafos...",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-gray-300 mb-2",children:"Texto para Processar"}),r.jsx("textarea",{value:p.text,onChange:$=>g({...p,text:$.target.value}),rows:10,className:"input w-full font-mono text-sm",placeholder:"Cole aqui o texto longo que deseja processar...",required:!0}),r.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"O texto ser dividido automaticamente em chunks processveis"})]}),r.jsx("button",{type:"submit",disabled:!s||x,className:"btn-primary w-full",children:x?" Processando...":" Processar Texto"}),c&&r.jsxs("div",{className:"bg-gray-800 rounded-lg p-4",children:[r.jsx("h3",{className:"text-white font-semibold mb-2",children:"Texto Processado:"}),r.jsx("pre",{className:"text-gray-300 whitespace-pre-wrap text-sm",children:c})]})]})]})]})},Db=()=>{var ee,N,A,O,B,J,H,I,T;const[e,t]=R.useState("24h"),[s,i]=R.useState(1e4),[n,l]=R.useState(new Date),{data:f,refetch:a}=G.monitoring.getCurrentMetrics.useQuery(void 0,{refetchInterval}),{data:o}=G.tasks.list.useQuery({limit:1e3,offset:0}),{data:m}=G.projects.list.useQuery({limit:1e3,offset:0}),{data:p}=G.workflows.list.useQuery({limit:1e3,offset:0}),{data:g}=G.templates.list.useQuery({limit:1e3,offset:0}),{data:v}=G.prompts.list.useQuery({userId:1,limit:1e3,offset:0}),{data:S}=G.teams.list.useQuery({limit:1e3,offset:0}),{data:w}=G.tasks.getStats.useQuery({}),{data:y}=G.workflows.getStats.useQuery(),{data:d}=G.templates.getStats.useQuery(),u=(o==null?void 0:o.tasks)||[],c=(m==null?void 0:m.data)||[],h=(p==null?void 0:p.items)||[],x=(g==null?void 0:g.items)||[],_=(v==null?void 0:v.data)||[],k=(S==null?void 0:S.data)||[];R.useEffect(()=>{const z=setInterval(()=>l(new Date),1e3);return()=>clearInterval(z)},[]),R.useEffect(()=>{const z=setInterval(()=>{a()},s);return()=>clearInterval(z)},[s,a]);const b=(()=>{const z=u.length,E=u.filter(le=>le.status==="completed").length,U=u.filter(le=>le.status==="in_progress").length,X=u.filter(le=>le.status==="pending").length,Y=u.filter(le=>le.status==="blocked").length,se=u.filter(le=>le.status==="failed").length,re=E+U>0?Math.round(E/(E+se||1)*100):0,$=c.length,ae=c.filter(le=>le.status==="active").length,be=c.filter(le=>le.status==="completed").length,je=$>0?Math.round(be/$*100):0,oe=h.length,Ne=h.filter(le=>le.isActive).length,ut=h.length>0?Math.round(h.reduce((le,he)=>{var Ze;return le+(((Ze=he.steps)==null?void 0:Ze.length)||0)},0)/h.length):0,Qe=x.length,it=x.filter(le=>le.isPublic).length,Xe=x.reduce((le,he)=>le+(he.usageCount||0),0),de=k.length,q=k.reduce((le,he)=>le+(he.memberCount||0),0),xe=$>0?Math.round(z/$):0,Oe=$>0?Math.round(_.length/$):0;return{totalTasks:z,completedTasks:E,inProgressTasks:U,pendingTasks:X,blockedTasks:Y,failedTasks:se,taskSuccessRate:re,avgTaskCompletionTime:2.5,totalProjects:$,activeProjects:ae,completedProjects:be,projectCompletionRate:je,avgProjectDuration:15,totalWorkflows:oe,activeWorkflows:Ne,avgWorkflowSteps:ut,totalTemplates:Qe,publicTemplates:it,totalTemplateUsage:Xe,totalTeams:de,totalMembers:q,avgTasksPerProject:xe,avgPromptsPerProject:Oe,systemHealth:C()}})(),C=()=>{if(!(f!=null&&f.metrics))return{status:"unknown",color:"text-gray-500",label:"Desconhecido"};const z=f.metrics.cpu||0,E=f.metrics.memory||0,U=f.metrics.disk||0,X=z<80,Y=E<85,se=U<90;return X&&Y&&se?{status:"healthy",color:"text-green-500",label:"Saudvel",icon:""}:X&&Y?{status:"warning",color:"text-yellow-500",label:"Ateno",icon:""}:{status:"critical",color:"text-red-500",label:"Crtico",icon:""}},M=C(),L={labels:["Pendente","Em Progresso","Concluda","Bloqueada","Falhou"],values:[u.filter(z=>z.status==="pending").length,u.filter(z=>z.status==="in_progress").length,u.filter(z=>z.status==="completed").length,u.filter(z=>z.status==="blocked").length,u.filter(z=>z.status==="failed").length]},P={labels:["Baixa","Mdia","Alta","Urgente"],values:[u.filter(z=>z.priority==="low").length,u.filter(z=>z.priority==="medium").length,u.filter(z=>z.priority==="high").length,u.filter(z=>z.priority==="urgent").length]},D={labels:["Planejamento","Ativo","Em Espera","Concludo","Arquivado"],values:[c.filter(z=>z.status==="planning").length,c.filter(z=>z.status==="active").length,c.filter(z=>z.status==="on_hold").length,c.filter(z=>z.status==="completed").length,c.filter(z=>z.status==="archived").length]},W=({data:z,colors:E})=>{const U=Math.max(...z.values,1);return r.jsx("div",{className:"space-y-3",children:z.labels.map((X,Y)=>r.jsxs("div",{className:"space-y-1",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:X}),r.jsx("span",{className:"font-semibold text-gray-900 dark:text-white",children:z.values[Y]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-3",children:r.jsx("div",{className:"h-3 rounded-full transition-all duration-500",style:{width:`${z.values[Y]/U*100}%`,backgroundColor:E[Y]}})})]},X))})},V=({title:z,value:E,subtitle:U,icon:X,color:Y,trend:se})=>r.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 mb-1",children:z}),r.jsx("p",{className:`text-3xl font-bold ${Y}`,children:E}),U&&r.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:U}),se!==void 0&&r.jsxs("p",{className:`text-sm mt-2 font-medium ${se>=0?"text-green-600":"text-red-600"}`,children:[se>=0?"":""," ",Math.abs(se),"%"]})]}),r.jsx("div",{className:`text-4xl ${Y} opacity-20`,children:X})]})}),Z=({percentage:z,color:E,label:U})=>{const X=2*Math.PI*40,Y=`${z/100*X} ${X}`;return r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-32 h-32",children:[r.jsxs("svg",{className:"transform -rotate-90",width:"128",height:"128",children:[r.jsx("circle",{cx:"64",cy:"64",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-gray-200 dark:text-gray-700"}),r.jsx("circle",{cx:"64",cy:"64",r:"40",stroke:E,strokeWidth:"8",fill:"none",strokeDasharray:Y,className:"transition-all duration-500"})]}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("span",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:[z,"%"]})})]}),r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2 text-center",children:U})]})};return r.jsxs("div",{className:"p-6 bg-gray-50 dark:bg-gray-900 min-h-screen",children:[r.jsxs("div",{className:"mb-6 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:" Analytics Dashboard"}),r.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[n.toLocaleDateString("pt-BR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," - ",n.toLocaleTimeString("pt-BR")]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("select",{value:e,onChange:z=>t(z.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"1h",children:"ltima Hora"}),r.jsx("option",{value:"24h",children:"ltimas 24 Horas"}),r.jsx("option",{value:"7d",children:"ltimos 7 Dias"}),r.jsx("option",{value:"30d",children:"ltimos 30 Dias"})]}),r.jsxs("select",{value:s,onChange:z=>i(Number(z.target.value)),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[r.jsx("option",{value:"5000",children:"Atualizar: 5s"}),r.jsx("option",{value:"10000",children:"Atualizar: 10s"}),r.jsx("option",{value:"30000",children:"Atualizar: 30s"}),r.jsx("option",{value:"60000",children:"Atualizar: 1m"})]}),r.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700",children:[r.jsx("span",{className:`text-xl ${M.color}`,children:M.icon}),r.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:M.label})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx(V,{title:"Total de Tarefas",value:b.totalTasks,subtitle:`${b.completedTasks} concludas`,icon:"",color:"text-blue-600",trend:12}),r.jsx(V,{title:"Taxa de Sucesso",value:`${b.taskSuccessRate}%`,subtitle:"Tarefas bem-sucedidas",icon:"",color:"text-green-600",trend:5}),r.jsx(V,{title:"Projetos Ativos",value:b.activeProjects,subtitle:`${b.totalProjects} total`,icon:"",color:"text-purple-600",trend:8}),r.jsx(V,{title:"Workflows Ativos",value:b.activeWorkflows,subtitle:`${b.totalWorkflows} total`,icon:"",color:"text-orange-600",trend:3})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[r.jsx(V,{title:"Templates Criados",value:b.totalTemplates,subtitle:`${b.publicTemplates} pblicos`,icon:"",color:"text-indigo-600"}),r.jsx(V,{title:"Uso de Templates",value:b.totalTemplateUsage,subtitle:"Usos totais",icon:"",color:"text-pink-600",trend:15}),r.jsx(V,{title:"Equipes",value:b.totalTeams,subtitle:`${b.totalMembers} membros`,icon:"",color:"text-teal-600"}),r.jsx(V,{title:"Prompts",value:_.length,subtitle:"Total cadastrados",icon:"",color:"text-cyan-600"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center",children:"Taxa de Concluso de Projetos"}),r.jsx(Z,{percentage:b.projectCompletionRate,color:"#10b981",label:`${b.completedProjects} de ${b.totalProjects} concludos`})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center",children:"Taxa de Sucesso de Tarefas"}),r.jsx(Z,{percentage:b.taskSuccessRate,color:"#3b82f6",label:`${b.taskSuccessRate}% de sucesso`})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 text-center",children:"Workflows Ativos"}),r.jsx(Z,{percentage:b.totalWorkflows>0?Math.round(b.activeWorkflows/b.totalWorkflows*100):0,color:"#f59e0b",label:`${b.activeWorkflows} de ${b.totalWorkflows} ativos`})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:" Distribuio de Status das Tarefas"}),r.jsx(W,{data:L,colors:["#6b7280","#3b82f6","#10b981","#f59e0b","#ef4444"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:" Distribuio de Prioridade das Tarefas"}),r.jsx(W,{data:P,colors:["#6b7280","#3b82f6","#f59e0b","#ef4444"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:" Distribuio de Status dos Projetos"}),r.jsx(W,{data:D,colors:["#6b7280","#10b981","#f59e0b","#3b82f6","#ef4444"]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:" Mtricas de Produtividade"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Mdia de Tarefas por Projeto"}),r.jsx("span",{className:"text-2xl font-bold text-blue-600",children:b.avgTasksPerProject})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Mdia de Prompts por Projeto"}),r.jsx("span",{className:"text-2xl font-bold text-green-600",children:b.avgPromptsPerProject})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Mdia de Steps por Workflow"}),r.jsx("span",{className:"text-2xl font-bold text-purple-600",children:b.avgWorkflowSteps})]}),r.jsxs("div",{className:"flex justify-between items-center p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[r.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Tempo Mdio de Concluso"}),r.jsxs("span",{className:"text-2xl font-bold text-orange-600",children:[b.avgTaskCompletionTime,"h"]})]})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:" Uso de CPU"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Uso Atual"}),r.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[(((ee=f==null?void 0:f.metrics)==null?void 0:ee.cpu)??0).toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:r.jsx("div",{className:"h-4 rounded-full transition-all duration-500 bg-gradient-to-r from-blue-500 to-purple-500",style:{width:`${((N=f==null?void 0:f.metrics)==null?void 0:N.cpu)||0}%`}})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300 mt-4",children:[r.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),r.jsx("div",{className:"font-semibold",children:(((A=f==null?void 0:f.metrics)==null?void 0:A.cpu)||0)<80?" Normal":" Alto"})]}),r.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tendncia"}),r.jsx("div",{className:"font-semibold text-green-600",children:" Estvel"})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:" Uso de Memria"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Uso Atual"}),r.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[(((O=f==null?void 0:f.metrics)==null?void 0:O.memory)??0).toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:r.jsx("div",{className:"h-4 rounded-full transition-all duration-500 bg-gradient-to-r from-green-500 to-emerald-500",style:{width:`${((B=f==null?void 0:f.metrics)==null?void 0:B.memory)||0}%`}})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300 mt-4",children:[r.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),r.jsx("div",{className:"font-semibold",children:(((J=f==null?void 0:f.metrics)==null?void 0:J.memory)||0)<85?" Normal":" Alto"})]}),r.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tendncia"}),r.jsx("div",{className:"font-semibold text-blue-600",children:" Estvel"})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:" Uso de Disco"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Uso Atual"}),r.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:[(((H=f==null?void 0:f.metrics)==null?void 0:H.disk)??0).toFixed(1),"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4",children:r.jsx("div",{className:"h-4 rounded-full transition-all duration-500 bg-gradient-to-r from-yellow-500 to-orange-500",style:{width:`${((I=f==null?void 0:f.metrics)==null?void 0:I.disk)||0}%`}})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-600 dark:text-gray-300 mt-4",children:[r.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Status"}),r.jsx("div",{className:"font-semibold",children:(((T=f==null?void 0:f.metrics)==null?void 0:T.disk)||0)<90?" Normal":" Alto"})]}),r.jsxs("div",{className:"p-2 bg-gray-50 dark:bg-gray-700 rounded",children:[r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Tendncia"}),r.jsx("div",{className:"font-semibold text-yellow-600",children:" Crescendo"})]})]})]})]})]}),r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg border border-gray-200 dark:border-gray-700 p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:" Resumo de Atividade Recente"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Tarefas Pendentes"}),r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:b.pendingTasks}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Aguardando incio"})]}),r.jsxs("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Em Progresso"}),r.jsx("div",{className:"text-3xl font-bold text-green-600",children:b.inProgressTasks}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Sendo executadas"})]}),r.jsxs("div",{className:"p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Bloqueadas"}),r.jsx("div",{className:"text-3xl font-bold text-orange-600",children:b.blockedTasks}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Requerem ateno"})]}),r.jsxs("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800",children:[r.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-1",children:"Falhas"}),r.jsx("div",{className:"text-3xl font-bold text-red-600",children:b.failedTasks}),r.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Necessitam reviso"})]})]})]})]})},Ib=()=>r.jsx(Db,{}),Ob=({workflowId:e,onSave:t})=>{const[s,i]=R.useState([]),[n,l]=R.useState([]),[f,a]=R.useState(null),[o,m]=R.useState(null),[p,g]=R.useState("New Workflow"),[v,S]=R.useState(!1),w=R.useRef(null),y=G.workflows.create.useMutation(),d=G.workflows.update.useMutation(),u=[{type:"task",title:"AI Task",config:{modelId:null,prompt:""}},{type:"condition",title:"Condition",config:{condition:"",trueLabel:"Yes",falseLabel:"No"}},{type:"parallel",title:"Parallel",config:{branches:2}},{type:"loop",title:"Loop",config:{maxIterations:10}},{type:"webhook",title:"Webhook",config:{url:"",method:"POST"}},{type:"integration",title:"Integration",config:{service:"",action:""}}],c=(L,P)=>{const D={id:`node-${Date.now()}`,type:L.type,title:L.title,config:L.config||{},position:P||{x:100,y:100},inputs:["in"],outputs:["out"]};L.type==="condition"?D.outputs=["true","false"]:L.type==="parallel"&&(D.outputs=["branch1","branch2"]),i([...s,D])},h=(L,P)=>{m(P),L.dataTransfer.effectAllowed="move"},x=()=>{m(null)},_=L=>{L.preventDefault(),L.dataTransfer.dropEffect="move"},k=L=>{if(L.preventDefault(),!w.current)return;const P=w.current.getBoundingClientRect(),D=L.clientX-P.left,W=L.clientY-P.top;o&&!s.find(V=>V.id===o.id)?c(o,{x:D,y:W}):o&&i(s.map(V=>V.id===o.id?{...V,position:{x:D,y:W}}:V)),m(null)},j=(L,P)=>{i(s.map(D=>D.id===L?{...D,config:{...D.config,...P}}:D))},b=L=>{i(s.filter(P=>P.id!==L)),l(n.filter(P=>P.source!==L&&P.target!==L)),(f==null?void 0:f.id)===L&&a(null)},C=async()=>{const L={name:p,userId:1,config:JSON.stringify({nodes:s,connections:n}),isActive:!0};try{if(e)await d.mutateAsync({id:e,...L});else{const P=await y.mutateAsync(L);t&&t(P)}alert("Workflow saved successfully!")}catch(P){console.error("Failed to save workflow:",P),alert("Failed to save workflow")}},M=()=>{const L=[...s],P={};L.forEach((D,W)=>{const V=Math.floor(W/3);P[V]||(P[V]=[]),P[V].push(D)}),Object.entries(P).forEach(([D,W])=>{W.forEach((V,Z)=>{V.position={x:150+parseInt(D)*300,y:100+Z*150}})}),i(L)};return r.jsxs("div",{className:"flex h-screen bg-gray-50 dark:bg-gray-900",children:[r.jsxs("div",{className:"w-64 bg-white dark:bg-gray-800 border-r border-gray-200 p-4 overflow-y-auto",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Components"}),r.jsx("div",{className:"space-y-2",children:u.map((L,P)=>r.jsx("div",{draggable:!0,onDragStart:D=>h(D,L),onDragEnd:x,className:"p-3 bg-blue-50 border border-blue-200 rounded cursor-move hover:bg-blue-100 transition",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("span",{className:"text-2xl",children:[L.type==="task"&&"",L.type==="condition"&&"",L.type==="parallel"&&"",L.type==="loop"&&"",L.type==="webhook"&&"",L.type==="integration"&&""]}),r.jsx("span",{className:"font-medium text-sm",children:L.title})]})},P))}),r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[r.jsx("h3",{className:"font-semibold mb-3",children:"Workflow Settings"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Workflow Name"}),r.jsx("input",{type:"text",value:p,onChange:L=>g(L.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsx("button",{onClick:M,className:"w-full px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700 transition",children:"Auto Layout"}),r.jsx("button",{onClick:C,disabled:y.isLoading||d.isLoading,className:"w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition disabled:opacity-50",children:y.isLoading||d.isLoading?"Saving...":"Save Workflow"})]})]})]}),r.jsx("div",{className:"flex-1 relative",children:r.jsxs("div",{ref:w,onDragOver:_,onDrop:k,className:"w-full h-full bg-gray-100 dark:bg-gray-800 relative overflow-auto",style:{backgroundImage:"radial-gradient(circle, #d1d5db 1px, transparent 1px)",backgroundSize:"20px 20px"},children:[r.jsxs("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:1},children:[n.map(L=>{const P=s.find(N=>N.id===L.source),D=s.find(N=>N.id===L.target);if(!P||!D)return null;const W=P.position.x+100,V=P.position.y+40,Z=D.position.x,ee=D.position.y+40;return r.jsx("g",{children:r.jsx("line",{x1:W,y1:V,x2:Z,y2:ee,stroke:"#3b82f6",strokeWidth:"2",markerEnd:"url(#arrowhead)"})},L.id)}),r.jsx("defs",{children:r.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"10",refX:"9",refY:"3",orient:"auto",children:r.jsx("polygon",{points:"0 0, 10 3, 0 6",fill:"#3b82f6"})})})]}),s.map(L=>r.jsxs("div",{draggable:!0,onDragStart:P=>h(P,L),onDragEnd:x,onClick:()=>a(L),className:`absolute bg-white border-2 rounded-lg shadow-lg cursor-move p-4 ${(f==null?void 0:f.id)===L.id?"border-blue-500":"border-gray-300"}`,style:{left:L.position.x,top:L.position.y,width:"200px",zIndex:2},children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-semibold text-sm",children:L.title}),r.jsx("button",{onClick:P=>{P.stopPropagation(),b(L.id)},className:"text-red-500 hover:text-red-700 text-xs",children:""})]}),r.jsxs("div",{className:"text-xs text-gray-600 dark:text-gray-300",children:["Type: ",L.type]}),r.jsx("div",{className:"absolute -left-2 top-1/2 w-4 h-4 bg-blue-500 rounded-full transform -translate-y-1/2"}),r.jsx("div",{className:"absolute -right-2 top-1/2 w-4 h-4 bg-blue-500 rounded-full transform -translate-y-1/2"})]},L.id)),s.length===0&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-xl font-semibold mb-2",children:"Drag components from the sidebar"}),r.jsx("p",{className:"text-sm",children:"to start building your workflow"})]})})]})}),f&&r.jsxs("div",{className:"w-80 bg-white dark:bg-gray-800 border-l border-gray-200 p-4 overflow-y-auto",children:[r.jsx("h2",{className:"text-lg font-semibold mb-4",children:"Node Properties"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Node Title"}),r.jsx("input",{type:"text",value:f.title,onChange:L=>j(f.id,{title:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500"})]}),f.type==="task"&&r.jsx(r.Fragment,{children:r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Prompt Template"}),r.jsx("textarea",{value:f.config.prompt||"",onChange:L=>j(f.id,{prompt:L.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500"})]})}),f.type==="condition"&&r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Condition Expression"}),r.jsx("input",{type:"text",value:f.config.condition||"",onChange:L=>j(f.id,{condition:L.target.value}),placeholder:"e.g., result.score > 0.8",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500"})]}),f.type==="webhook"&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Webhook URL"}),r.jsx("input",{type:"url",value:f.config.url||"",onChange:L=>j(f.id,{url:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1",children:"Method"}),r.jsxs("select",{value:f.config.method||"POST",onChange:L=>j(f.id,{method:L.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"GET",children:"GET"}),r.jsx("option",{value:"POST",children:"POST"}),r.jsx("option",{value:"PUT",children:"PUT"}),r.jsx("option",{value:"DELETE",children:"DELETE"})]})]})]})]})]})]})},Bb=()=>{const e=Jl(),t=s=>{console.log("Workflow saved:",s)};return r.jsxs("div",{className:"h-screen flex flex-col",children:[r.jsx("div",{className:"bg-white dark:bg-gray-800 border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:()=>e("/workflows"),className:"text-gray-600 hover:text-gray-900 dark:text-white",children:" Back"}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:"Workflow Builder"})]})}),r.jsx("div",{className:"flex-1 overflow-hidden",children:r.jsx(Ob,{onSave:t})})]})};function Fb(){return r.jsx(yy,{children:r.jsx(Sy,{children:r.jsx(vy,{children:r.jsxs(Kx,{children:[r.jsx(pe,{path:"/login",element:r.jsx(Yd,{to:"/",replace:!0})}),r.jsx(pe,{path:"/register",element:r.jsx(Yd,{to:"/",replace:!0})}),r.jsxs(pe,{element:r.jsx(nb,{}),children:[r.jsx(pe,{path:"/",element:r.jsx(ab,{})}),r.jsx(pe,{path:"/profile",element:r.jsx(ob,{})}),r.jsx(pe,{path:"/projects",element:r.jsx(db,{})}),r.jsx(pe,{path:"/teams",element:r.jsx(ub,{})}),r.jsx(pe,{path:"/providers",element:r.jsx(hb,{})}),r.jsx(pe,{path:"/models",element:r.jsx(fb,{})}),r.jsx(pe,{path:"/specialized-ais",element:r.jsx(mb,{})}),r.jsx(pe,{path:"/credentials",element:r.jsx(gb,{})}),r.jsx(pe,{path:"/tasks",element:r.jsx(pb,{})}),r.jsx(pe,{path:"/tasks/:id/subtasks",element:r.jsx(xb,{})}),r.jsx(pe,{path:"/prompts",element:r.jsx(vb,{})}),r.jsx(pe,{path:"/templates",element:r.jsx(yb,{})}),r.jsx(pe,{path:"/workflows",element:r.jsx(bb,{})}),r.jsx(pe,{path:"/workflows/builder",element:r.jsx(Bb,{})}),r.jsx(pe,{path:"/instructions",element:r.jsx(_b,{})}),r.jsx(pe,{path:"/knowledge-base",element:r.jsx(wb,{})}),r.jsx(pe,{path:"/knowledge-base/:id/sources",element:r.jsx(Sb,{})}),r.jsx(pe,{path:"/execution-logs",element:r.jsx(kb,{})}),r.jsx(pe,{path:"/chat",element:r.jsx(jb,{})}),r.jsx(pe,{path:"/external-api-accounts",element:r.jsx(Cb,{})}),r.jsx(pe,{path:"/services",element:r.jsx(Nb,{})}),r.jsx(pe,{path:"/monitoring",element:r.jsx(Eb,{})}),r.jsx(pe,{path:"/settings",element:r.jsx(Mb,{})}),r.jsx(pe,{path:"/terminal",element:r.jsx(Tb,{})}),r.jsx(pe,{path:"/model-training",element:r.jsx(Ab,{})}),r.jsx(pe,{path:"/lmstudio",element:r.jsx(Rb,{})}),r.jsx(pe,{path:"/analytics",element:r.jsx(Ib,{})})]})]})})})})}const cu=new Pp({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});Ia.createRoot(document.getElementById("root")).render(r.jsx(us.StrictMode,{children:r.jsx(G.Provider,{client:py,queryClient:cu,children:r.jsx(Qp,{client:cu,children:r.jsx(ev,{children:r.jsx(Fb,{})})})})}));
